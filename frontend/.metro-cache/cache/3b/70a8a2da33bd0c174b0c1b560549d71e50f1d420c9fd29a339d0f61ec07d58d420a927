{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"m+kcirlwHAgMIuUoyR2vCxbhWD4=","exportNames":["*"],"imports":1}},{"name":"../utils/hasTracingEnabled.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":66,"index":113}}],"key":"SyK4SleOU+9x9l8aHJ9lO4+iDQU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"sampleTransaction\", {\n    enumerable: true,\n    get: function () {\n      return sampleTransaction;\n    }\n  });\n  var _sentryUtils = require(_dependencyMap[0], \"@sentry/utils\");\n  var _utilsHasTracingEnabledJs = require(_dependencyMap[1], \"../utils/hasTracingEnabled.js\");\n  /**\n   * Makes a sampling decision for the given transaction and stores it on the transaction.\n   *\n   * Called every time a transaction is created. Only transactions which emerge with a `sampled` value of `true` will be\n   * sent to Sentry.\n   *\n   * This method muttes the given `transaction` and will set the `sampled` value on it.\n   * It returns the same transaction, for convenience.\n   */\n  function sampleTransaction(transaction, options, samplingContext) {\n    // nothing to do if tracing is not enabled\n    if (!(0, _utilsHasTracingEnabledJs.hasTracingEnabled)(options)) {\n      transaction.sampled = false;\n      return transaction;\n    }\n\n    // if the user has forced a sampling decision by passing a `sampled` value in their transaction context, go with that\n    if (transaction.sampled !== undefined) {\n      transaction.setMetadata({\n        sampleRate: Number(transaction.sampled)\n      });\n      return transaction;\n    }\n\n    // we would have bailed already if neither `tracesSampler` nor `tracesSampleRate` nor `enableTracing` were defined, so one of these should\n    // work; prefer the hook if so\n    let sampleRate;\n    if (typeof options.tracesSampler === 'function') {\n      sampleRate = options.tracesSampler(samplingContext);\n      transaction.setMetadata({\n        sampleRate: Number(sampleRate)\n      });\n    } else if (samplingContext.parentSampled !== undefined) {\n      sampleRate = samplingContext.parentSampled;\n    } else if (typeof options.tracesSampleRate !== 'undefined') {\n      sampleRate = options.tracesSampleRate;\n      transaction.setMetadata({\n        sampleRate: Number(sampleRate)\n      });\n    } else {\n      // When `enableTracing === true`, we use a sample rate of 100%\n      sampleRate = 1;\n      transaction.setMetadata({\n        sampleRate\n      });\n    }\n\n    // Since this is coming from the user (or from a function provided by the user), who knows what we might get. (The\n    // only valid values are booleans or numbers between 0 and 1.)\n    if (!isValidSampleRate(sampleRate)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.warn('[Tracing] Discarding transaction because of invalid sample rate.');\n      transaction.sampled = false;\n      return transaction;\n    }\n\n    // if the function returned 0 (or false), or if `tracesSampleRate` is 0, it's a sign the transaction should be dropped\n    if (!sampleRate) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.log(`[Tracing] Discarding transaction because ${typeof options.tracesSampler === 'function' ? 'tracesSampler returned 0 or false' : 'a negative sampling decision was inherited or tracesSampleRate is set to 0'}`);\n      transaction.sampled = false;\n      return transaction;\n    }\n\n    // Now we roll the dice. Math.random is inclusive of 0, but not of 1, so strict < is safe here. In case sampleRate is\n    // a boolean, the < comparison will cause it to be automatically cast to 1 if it's true and 0 if it's false.\n    transaction.sampled = Math.random() < sampleRate;\n\n    // if we're not going to keep it, we're done\n    if (!transaction.sampled) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(sampleRate)})`);\n      return transaction;\n    }\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.log(`[Tracing] starting ${transaction.op} transaction - ${transaction.name}`);\n    return transaction;\n  }\n\n  /**\n   * Checks the given sample rate to make sure it is valid type and value (a boolean, or a number between 0 and 1).\n   */\n  function isValidSampleRate(rate) {\n    // we need to check NaN explicitly because it's of type 'number' and therefore wouldn't get caught by this typecheck\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if ((0, _sentryUtils.isNaN)(rate) || !(typeof rate === 'number' || typeof rate === 'boolean')) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(rate)} of type ${JSON.stringify(typeof rate)}.`);\n      return false;\n    }\n\n    // in case sampleRate is a boolean, it will get automatically cast to 1 if it's true and 0 if it's false\n    if (rate < 0 || rate > 1) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${rate}.`);\n      return false;\n    }\n    return true;\n  }\n});","lineCount":108,"map":[[7,2,121,0,"Object"],[7,8,121,0],[7,9,121,0,"defineProperty"],[7,23,121,0],[7,24,121,0,"exports"],[7,31,121,0],[8,4,121,0,"enumerable"],[8,14,121,0],[9,4,121,0,"get"],[9,7,121,0],[9,18,121,0,"get"],[9,19,121,0],[10,6,121,0],[10,13,121,9,"sampleTransaction"],[10,30,121,26],[11,4,121,26],[12,2,121,26],[13,2,1,0],[13,6,1,0,"_sentryUtils"],[13,18,1,0],[13,21,1,0,"require"],[13,28,1,0],[13,29,1,0,"_dependencyMap"],[13,43,1,0],[14,2,2,0],[14,6,2,0,"_utilsHasTracingEnabledJs"],[14,31,2,0],[14,34,2,0,"require"],[14,41,2,0],[14,42,2,0,"_dependencyMap"],[14,56,2,0],[15,2,4,0],[16,0,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,2,13,0],[24,11,13,9,"sampleTransaction"],[24,28,13,26,"sampleTransaction"],[24,29,14,2,"transaction"],[24,40,14,13],[24,42,15,2,"options"],[24,49,15,9],[24,51,16,2,"samplingContext"],[24,66,16,17],[24,68,17,2],[25,4,18,2],[26,4,19,2],[26,8,19,6],[26,9,19,7],[26,13,19,7,"hasTracingEnabled"],[26,38,19,24],[26,39,19,24,"hasTracingEnabled"],[26,56,19,24],[26,58,19,25,"options"],[26,65,19,32],[26,66,19,33],[26,68,19,35],[27,6,20,4,"transaction"],[27,17,20,15],[27,18,20,16,"sampled"],[27,25,20,23],[27,28,20,26],[27,33,20,31],[28,6,21,4],[28,13,21,11,"transaction"],[28,24,21,22],[29,4,22,2],[31,4,24,2],[32,4,25,2],[32,8,25,6,"transaction"],[32,19,25,17],[32,20,25,18,"sampled"],[32,27,25,25],[32,32,25,30,"undefined"],[32,41,25,39],[32,43,25,41],[33,6,26,4,"transaction"],[33,17,26,15],[33,18,26,16,"setMetadata"],[33,29,26,27],[33,30,26,28],[34,8,27,6,"sampleRate"],[34,18,27,16],[34,20,27,18,"Number"],[34,26,27,24],[34,27,27,25,"transaction"],[34,38,27,36],[34,39,27,37,"sampled"],[34,46,27,44],[35,6,28,4],[35,7,28,5],[35,8,28,6],[36,6,29,4],[36,13,29,11,"transaction"],[36,24,29,22],[37,4,30,2],[39,4,32,2],[40,4,33,2],[41,4,34,2],[41,8,34,6,"sampleRate"],[41,18,34,16],[42,4,35,2],[42,8,35,6],[42,15,35,13,"options"],[42,22,35,20],[42,23,35,21,"tracesSampler"],[42,36,35,34],[42,41,35,39],[42,51,35,49],[42,53,35,51],[43,6,36,4,"sampleRate"],[43,16,36,14],[43,19,36,17,"options"],[43,26,36,24],[43,27,36,25,"tracesSampler"],[43,40,36,38],[43,41,36,39,"samplingContext"],[43,56,36,54],[43,57,36,55],[44,6,37,4,"transaction"],[44,17,37,15],[44,18,37,16,"setMetadata"],[44,29,37,27],[44,30,37,28],[45,8,38,6,"sampleRate"],[45,18,38,16],[45,20,38,18,"Number"],[45,26,38,24],[45,27,38,25,"sampleRate"],[45,37,38,35],[46,6,39,4],[46,7,39,5],[46,8,39,6],[47,4,40,2],[47,5,40,3],[47,11,40,9],[47,15,40,13,"samplingContext"],[47,30,40,28],[47,31,40,29,"parentSampled"],[47,44,40,42],[47,49,40,47,"undefined"],[47,58,40,56],[47,60,40,58],[48,6,41,4,"sampleRate"],[48,16,41,14],[48,19,41,17,"samplingContext"],[48,34,41,32],[48,35,41,33,"parentSampled"],[48,48,41,46],[49,4,42,2],[49,5,42,3],[49,11,42,9],[49,15,42,13],[49,22,42,20,"options"],[49,29,42,27],[49,30,42,28,"tracesSampleRate"],[49,46,42,44],[49,51,42,49],[49,62,42,60],[49,64,42,62],[50,6,43,4,"sampleRate"],[50,16,43,14],[50,19,43,17,"options"],[50,26,43,24],[50,27,43,25,"tracesSampleRate"],[50,43,43,41],[51,6,44,4,"transaction"],[51,17,44,15],[51,18,44,16,"setMetadata"],[51,29,44,27],[51,30,44,28],[52,8,45,6,"sampleRate"],[52,18,45,16],[52,20,45,18,"Number"],[52,26,45,24],[52,27,45,25,"sampleRate"],[52,37,45,35],[53,6,46,4],[53,7,46,5],[53,8,46,6],[54,4,47,2],[54,5,47,3],[54,11,47,9],[55,6,48,4],[56,6,49,4,"sampleRate"],[56,16,49,14],[56,19,49,17],[56,20,49,18],[57,6,50,4,"transaction"],[57,17,50,15],[57,18,50,16,"setMetadata"],[57,29,50,27],[57,30,50,28],[58,8,51,6,"sampleRate"],[59,6,52,4],[59,7,52,5],[59,8,52,6],[60,4,53,2],[62,4,55,2],[63,4,56,2],[64,4,57,2],[64,8,57,6],[64,9,57,7,"isValidSampleRate"],[64,26,57,24],[64,27,57,25,"sampleRate"],[64,37,57,35],[64,38,57,36],[64,40,57,38],[65,6,58,4],[65,7,58,5],[65,14,58,12,"__SENTRY_DEBUG__"],[65,30,58,28],[65,35,58,33],[65,46,58,44],[65,50,58,48,"__SENTRY_DEBUG__"],[65,66,58,64],[65,71,58,69,"logger"],[65,83,58,75],[65,84,58,75,"logger"],[65,90,58,75],[65,91,58,76,"warn"],[65,95,58,80],[65,96,58,81],[65,162,58,147],[65,163,58,148],[66,6,59,4,"transaction"],[66,17,59,15],[66,18,59,16,"sampled"],[66,25,59,23],[66,28,59,26],[66,33,59,31],[67,6,60,4],[67,13,60,11,"transaction"],[67,24,60,22],[68,4,61,2],[70,4,63,2],[71,4,64,2],[71,8,64,6],[71,9,64,7,"sampleRate"],[71,19,64,17],[71,21,64,19],[72,6,65,4],[72,7,65,5],[72,14,65,12,"__SENTRY_DEBUG__"],[72,30,65,28],[72,35,65,33],[72,46,65,44],[72,50,65,48,"__SENTRY_DEBUG__"],[72,66,65,64],[72,71,66,6,"logger"],[72,83,66,12],[72,84,66,12,"logger"],[72,90,66,12],[72,91,66,13,"log"],[72,94,66,16],[72,95,67,8],[72,139,68,10],[72,146,68,17,"options"],[72,153,68,24],[72,154,68,25,"tracesSampler"],[72,167,68,38],[72,172,68,43],[72,182,68,53],[72,185,69,14],[72,220,69,49],[72,223,70,14],[72,299,70,90],[72,301,72,6],[72,302,72,7],[73,6,73,4,"transaction"],[73,17,73,15],[73,18,73,16,"sampled"],[73,25,73,23],[73,28,73,26],[73,33,73,31],[74,6,74,4],[74,13,74,11,"transaction"],[74,24,74,22],[75,4,75,2],[77,4,77,2],[78,4,78,2],[79,4,79,2,"transaction"],[79,15,79,13],[79,16,79,14,"sampled"],[79,23,79,21],[79,26,79,24,"Math"],[79,30,79,28],[79,31,79,29,"random"],[79,37,79,35],[79,38,79,36],[79,39,79,37],[79,42,79,41,"sampleRate"],[79,52,79,53],[81,4,81,2],[82,4,82,2],[82,8,82,6],[82,9,82,7,"transaction"],[82,20,82,18],[82,21,82,19,"sampled"],[82,28,82,26],[82,30,82,28],[83,6,83,4],[83,7,83,5],[83,14,83,12,"__SENTRY_DEBUG__"],[83,30,83,28],[83,35,83,33],[83,46,83,44],[83,50,83,48,"__SENTRY_DEBUG__"],[83,66,83,64],[83,71,84,6,"logger"],[83,83,84,12],[83,84,84,12,"logger"],[83,90,84,12],[83,91,84,13,"log"],[83,94,84,16],[83,95,85,8],[83,195,85,108,"Number"],[83,201,85,114],[83,202,86,10,"sampleRate"],[83,212,87,8],[83,213,87,9],[83,216,88,6],[83,217,88,7],[84,6,89,4],[84,13,89,11,"transaction"],[84,24,89,22],[85,4,90,2],[86,4,92,2],[86,5,92,3],[86,12,92,10,"__SENTRY_DEBUG__"],[86,28,92,26],[86,33,92,31],[86,44,92,42],[86,48,92,46,"__SENTRY_DEBUG__"],[86,64,92,62],[86,69,92,67,"logger"],[86,81,92,73],[86,82,92,73,"logger"],[86,88,92,73],[86,89,92,74,"log"],[86,92,92,77],[86,93,92,78],[86,115,92,100,"transaction"],[86,126,92,111],[86,127,92,112,"op"],[86,129,92,114],[86,147,92,132,"transaction"],[86,158,92,143],[86,159,92,144,"name"],[86,163,92,148],[86,165,92,150],[86,166,92,151],[87,4,93,2],[87,11,93,9,"transaction"],[87,22,93,20],[88,2,94,0],[90,2,96,0],[91,0,97,0],[92,0,98,0],[93,2,99,0],[93,11,99,9,"isValidSampleRate"],[93,28,99,26,"isValidSampleRate"],[93,29,99,27,"rate"],[93,33,99,31],[93,35,99,33],[94,4,100,2],[95,4,101,2],[96,4,102,2],[96,8,102,6],[96,12,102,6,"isNaN"],[96,24,102,11],[96,25,102,11,"isNaN"],[96,30,102,11],[96,32,102,12,"rate"],[96,36,102,16],[96,37,102,17],[96,41,102,21],[96,43,102,23],[96,50,102,30,"rate"],[96,54,102,34],[96,59,102,39],[96,67,102,47],[96,71,102,51],[96,78,102,58,"rate"],[96,82,102,62],[96,87,102,67],[96,96,102,76],[96,97,102,77],[96,99,102,79],[97,6,103,4],[97,7,103,5],[97,14,103,12,"__SENTRY_DEBUG__"],[97,30,103,28],[97,35,103,33],[97,46,103,44],[97,50,103,48,"__SENTRY_DEBUG__"],[97,66,103,64],[97,71,104,6,"logger"],[97,83,104,12],[97,84,104,12,"logger"],[97,90,104,12],[97,91,104,13,"warn"],[97,95,104,17],[97,96,105,8],[97,202,105,114,"JSON"],[97,206,105,118],[97,207,105,119,"stringify"],[97,216,105,128],[97,217,106,10,"rate"],[97,221,107,8],[97,222,107,9],[97,234,107,21,"JSON"],[97,238,107,25],[97,239,107,26,"stringify"],[97,248,107,35],[97,249,107,36],[97,256,107,43,"rate"],[97,260,107,47],[97,261,107,48],[97,264,108,6],[97,265,108,7],[98,6,109,4],[98,13,109,11],[98,18,109,16],[99,4,110,2],[101,4,112,2],[102,4,113,2],[102,8,113,6,"rate"],[102,12,113,10],[102,15,113,13],[102,16,113,14],[102,20,113,18,"rate"],[102,24,113,22],[102,27,113,25],[102,28,113,26],[102,30,113,28],[103,6,114,4],[103,7,114,5],[103,14,114,12,"__SENTRY_DEBUG__"],[103,30,114,28],[103,35,114,33],[103,46,114,44],[103,50,114,48,"__SENTRY_DEBUG__"],[103,66,114,64],[103,71,115,6,"logger"],[103,83,115,12],[103,84,115,12,"logger"],[103,90,115,12],[103,91,115,13,"warn"],[103,95,115,17],[103,96,115,18],[103,180,115,102,"rate"],[103,184,115,106],[103,187,115,109],[103,188,115,110],[104,6,116,4],[104,13,116,11],[104,18,116,16],[105,4,117,2],[106,4,118,2],[106,11,118,9],[106,15,118,13],[107,2,119,0],[108,0,119,1],[108,3]],"functionMap":{"names":["<global>","sampleTransaction","isValidSampleRate"],"mappings":"AAA;ACY;CDiF;AEK;CFoB"},"hasCjsExports":false},"type":"js/module"}]}