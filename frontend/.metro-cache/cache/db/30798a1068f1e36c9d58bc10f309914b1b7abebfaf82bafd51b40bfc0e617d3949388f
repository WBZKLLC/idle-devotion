{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"API_BASE\", {\n    enumerable: true,\n    get: function () {\n      return API_BASE;\n    }\n  });\n  exports.apiUrl = apiUrl;\n  exports.getAuthHeaders = getAuthHeaders;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  /**\n   * Centralized API Configuration\n   * \n   * Single source of truth for API base URL across all platforms.\n   * Web preview, device, and tunnel all use this.\n   */\n\n  /**\n   * Get the API base URL based on platform and environment.\n   * \n   * Priority:\n   * 1. EXPO_PUBLIC_BACKEND_URL (if set)\n   * 2. EXPO_PUBLIC_API_URL (legacy fallback)\n   * 3. Platform-specific defaults\n   */\n  function getApiBaseUrl() {\n    // Check environment variables\n    const backendUrl = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n    const apiUrl = _expoVirtualEnv.env.EXPO_PUBLIC_API_URL;\n\n    // Use explicitly set URLs first\n    if (backendUrl) {\n      return backendUrl;\n    }\n    if (apiUrl) {\n      return apiUrl;\n    }\n\n    // Platform-specific defaults when no env var is set\n    if (Platform.default.OS === 'web') {\n      // Web preview: use relative paths (assumes proxy is configured)\n      // If no proxy, this will fail - but that's expected\n      return '';\n    }\n\n    // Native device: default to localhost:8001 (won't work on real device without tunnel)\n    // In production, EXPO_PUBLIC_BACKEND_URL should always be set\n    return 'http://localhost:8001';\n  }\n\n  /**\n   * The API base URL - use this everywhere instead of hardcoding.\n   * \n   * Usage:\n   *   import { API_BASE } from '@/lib/api/config';\n   *   fetch(`${API_BASE}/api/endpoint`, { ... });\n   */\n  const API_BASE = getApiBaseUrl();\n\n  /**\n   * Construct a full API URL.\n   * \n   * @param path - The API path (e.g., '/api/daily/status')\n   * @returns Full URL with base\n   */\n  function apiUrl(path) {\n    // Ensure path starts with /\n    const normalizedPath = path.startsWith('/') ? path : `/${path}`;\n    return `${API_BASE}${normalizedPath}`;\n  }\n\n  /**\n   * Get auth headers for API requests.\n   * \n   * @param token - JWT token\n   * @returns Headers object with Authorization\n   */\n  function getAuthHeaders(token) {\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n\n  // Log the API base URL in development for debugging\n  if (__DEV__) {\n    console.log('[API Config] Base URL:', API_BASE || '(relative paths)');\n    console.log('[API Config] Platform:', Platform.default.OS);\n  }\n});","lineCount":102,"map":[[12,2,51,0,"Object"],[12,8,51,0],[12,9,51,0,"defineProperty"],[12,23,51,0],[12,24,51,0,"exports"],[12,31,51,0],[13,4,51,0,"enumerable"],[13,14,51,0],[14,4,51,0,"get"],[14,7,51,0],[14,18,51,0,"get"],[14,19,51,0],[15,6,51,0],[15,13,51,0,"API_BASE"],[15,21,51,0],[16,4,51,0],[17,2,51,0],[18,2,59,0,"exports"],[18,9,59,0],[18,10,59,0,"apiUrl"],[18,16,59,0],[18,19,59,0,"apiUrl"],[18,25,59,0],[19,2,71,0,"exports"],[19,9,71,0],[19,10,71,0,"getAuthHeaders"],[19,24,71,0],[19,27,71,0,"getAuthHeaders"],[19,41,71,0],[20,2,76,1],[20,6,76,1,"_expoVirtualEnv"],[20,21,76,1],[20,24,76,1,"require"],[20,31,76,1],[20,32,76,1,"_dependencyMap"],[20,46,76,1],[21,2,76,1],[21,6,76,1,"_reactNativeWebDistExportsPlatform"],[21,40,76,1],[21,43,76,1,"require"],[21,50,76,1],[21,51,76,1,"_dependencyMap"],[21,65,76,1],[22,2,76,1],[22,6,76,1,"Platform"],[22,14,76,1],[22,17,76,1,"_interopDefault"],[22,32,76,1],[22,33,76,1,"_reactNativeWebDistExportsPlatform"],[22,67,76,1],[23,2,1,0],[24,0,2,0],[25,0,3,0],[26,0,4,0],[27,0,5,0],[28,0,6,0],[30,2,10,0],[31,0,11,0],[32,0,12,0],[33,0,13,0],[34,0,14,0],[35,0,15,0],[36,0,16,0],[37,0,17,0],[38,2,18,0],[38,11,18,9,"getApiBaseUrl"],[38,24,18,22,"getApiBaseUrl"],[38,25,18,22],[38,27,18,33],[39,4,19,2],[40,4,20,2],[40,10,20,8,"backendUrl"],[40,20,20,18],[40,23,20,18,"_expoVirtualEnv"],[40,38,20,18],[40,39,20,18,"env"],[40,42,20,18],[40,43,20,18,"EXPO_PUBLIC_BACKEND_URL"],[40,66,20,56],[41,4,21,2],[41,10,21,8,"apiUrl"],[41,16,21,14],[41,19,21,14,"_expoVirtualEnv"],[41,34,21,14],[41,35,21,14,"env"],[41,38,21,14],[41,39,21,14,"EXPO_PUBLIC_API_URL"],[41,58,21,48],[43,4,23,2],[44,4,24,2],[44,8,24,6,"backendUrl"],[44,18,24,16],[44,20,24,18],[45,6,25,4],[45,13,25,11,"backendUrl"],[45,23,25,21],[46,4,26,2],[47,4,28,2],[47,8,28,6,"apiUrl"],[47,14,28,12],[47,16,28,14],[48,6,29,4],[48,13,29,11,"apiUrl"],[48,19,29,17],[49,4,30,2],[51,4,32,2],[52,4,33,2],[52,8,33,6,"Platform"],[52,16,33,14],[52,17,33,14,"default"],[52,24,33,14],[52,25,33,15,"OS"],[52,27,33,17],[52,32,33,22],[52,37,33,27],[52,39,33,29],[53,6,34,4],[54,6,35,4],[55,6,36,4],[55,13,36,11],[55,15,36,13],[56,4,37,2],[58,4,39,2],[59,4,40,2],[60,4,41,2],[60,11,41,9],[60,34,41,32],[61,2,42,0],[63,2,44,0],[64,0,45,0],[65,0,46,0],[66,0,47,0],[67,0,48,0],[68,0,49,0],[69,0,50,0],[70,2,51,7],[70,8,51,13,"API_BASE"],[70,16,51,21],[70,19,51,24,"getApiBaseUrl"],[70,32,51,37],[70,33,51,38],[70,34,51,39],[72,2,53,0],[73,0,54,0],[74,0,55,0],[75,0,56,0],[76,0,57,0],[77,0,58,0],[78,2,59,7],[78,11,59,16,"apiUrl"],[78,17,59,22,"apiUrl"],[78,18,59,23,"path"],[78,22,59,35],[78,24,59,45],[79,4,60,2],[80,4,61,2],[80,10,61,8,"normalizedPath"],[80,24,61,22],[80,27,61,25,"path"],[80,31,61,29],[80,32,61,30,"startsWith"],[80,42,61,40],[80,43,61,41],[80,46,61,44],[80,47,61,45],[80,50,61,48,"path"],[80,54,61,52],[80,57,61,55],[80,61,61,59,"path"],[80,65,61,63],[80,67,61,65],[81,4,62,2],[81,11,62,9],[81,14,62,12,"API_BASE"],[81,22,62,20],[81,25,62,23,"normalizedPath"],[81,39,62,37],[81,41,62,39],[82,2,63,0],[84,2,65,0],[85,0,66,0],[86,0,67,0],[87,0,68,0],[88,0,69,0],[89,0,70,0],[90,2,71,7],[90,11,71,16,"getAuthHeaders"],[90,25,71,30,"getAuthHeaders"],[90,26,71,31,"token"],[90,31,71,44],[90,33,71,70],[91,4,72,2],[91,11,72,9],[92,6,73,4],[92,20,73,18],[92,22,73,20],[92,40,73,38],[93,6,74,4],[93,21,74,19],[93,23,74,21],[93,33,74,31,"token"],[93,38,74,36],[94,4,75,2],[94,5,75,3],[95,2,76,0],[97,2,78,0],[98,2,79,0],[98,6,79,4,"__DEV__"],[98,13,79,11],[98,15,79,13],[99,4,80,2,"console"],[99,11,80,9],[99,12,80,10,"log"],[99,15,80,13],[99,16,80,14],[99,40,80,38],[99,42,80,40,"API_BASE"],[99,50,80,48],[99,54,80,52],[99,72,80,70],[99,73,80,71],[100,4,81,2,"console"],[100,11,81,9],[100,12,81,10,"log"],[100,15,81,13],[100,16,81,14],[100,40,81,38],[100,42,81,40,"Platform"],[100,50,81,48],[100,51,81,48,"default"],[100,58,81,48],[100,59,81,49,"OS"],[100,61,81,51],[100,62,81,52],[101,2,82,0],[102,0,82,1],[102,3]],"functionMap":{"names":["<global>","getApiBaseUrl","apiUrl","getAuthHeaders"],"mappings":"AAA;ACiB;CDwB;OEiB;CFI;OGQ;CHK"},"hasCjsExports":false},"type":"js/module"}]}