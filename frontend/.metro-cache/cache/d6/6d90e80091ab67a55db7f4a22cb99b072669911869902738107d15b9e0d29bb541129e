{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":14,"index":78},"end":{"line":3,"column":38,"index":102}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}},{"name":"../hub.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":12,"index":116},"end":{"line":4,"column":32,"index":136}}],"key":"LyGFO1FOoVFsyAddYDZ+Akj1H4E=","exportNames":["*"],"imports":1}},{"name":"./errors.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":15,"index":153},"end":{"line":5,"column":37,"index":175}}],"key":"usSt/khRa1CMTIs0jBmNBH2MZ+8=","exportNames":["*"],"imports":1}},{"name":"./idletransaction.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":24,"index":201},"end":{"line":6,"column":55,"index":232}}],"key":"amU2lplHcS+sBikWkrvraLsa0bk=","exportNames":["*"],"imports":1}},{"name":"./sampling.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":17,"index":251},"end":{"line":7,"column":41,"index":275}}],"key":"Zs6T8vChyCdx9bpMeE0uNHl1xw0=","exportNames":["*"],"imports":1}},{"name":"./transaction.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":20,"index":297},"end":{"line":8,"column":47,"index":324}}],"key":"i/CKUi8PMUWi3Tu0jEFd2/Hffh8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const utils = require(_dependencyMap[0], \"@sentry/utils\");\n  const hub = require(_dependencyMap[1], \"../hub.js\");\n  const errors = require(_dependencyMap[2], \"./errors.js\");\n  const idletransaction = require(_dependencyMap[3], \"./idletransaction.js\");\n  const sampling = require(_dependencyMap[4], \"./sampling.js\");\n  const transaction = require(_dependencyMap[5], \"./transaction.js\");\n\n  /** Returns all trace headers that are currently on the top scope. */\n  function traceHeaders() {\n    const scope = this.getScope();\n    const span = scope.getSpan();\n    return span ? {\n      'sentry-trace': span.toTraceparent()\n    } : {};\n  }\n\n  /**\n   * Creates a new transaction and adds a sampling decision if it doesn't yet have one.\n   *\n   * The Hub.startTransaction method delegates to this method to do its work, passing the Hub instance in as `this`, as if\n   * it had been called on the hub directly. Exists as a separate function so that it can be injected into the class as an\n   * \"extension method.\"\n   *\n   * @param this: The Hub starting the transaction\n   * @param transactionContext: Data used to configure the transaction\n   * @param CustomSamplingContext: Optional data to be provided to the `tracesSampler` function (if any)\n   *\n   * @returns The new transaction\n   *\n   * @see {@link Hub.startTransaction}\n   */\n  function _startTransaction(transactionContext, customSamplingContext) {\n    const client = this.getClient();\n    const options = client && client.getOptions() || {};\n    const configInstrumenter = options.instrumenter || 'sentry';\n    const transactionInstrumenter = transactionContext.instrumenter || 'sentry';\n    if (configInstrumenter !== transactionInstrumenter) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.error(`A transaction was started with instrumenter=\\`${transactionInstrumenter}\\`, but the SDK is configured with the \\`${configInstrumenter}\\` instrumenter.\nThe transaction will not be sampled. Please use the ${configInstrumenter} instrumentation to start transactions.`);\n      transactionContext.sampled = false;\n    }\n    let transaction$1 = new transaction.Transaction(transactionContext, this);\n    transaction$1 = sampling.sampleTransaction(transaction$1, options, {\n      parentSampled: transactionContext.parentSampled,\n      transactionContext,\n      ...customSamplingContext\n    });\n    if (transaction$1.sampled) {\n      transaction$1.initSpanRecorder(options._experiments && options._experiments.maxSpans);\n    }\n    if (client && client.emit) {\n      client.emit('startTransaction', transaction$1);\n    }\n    return transaction$1;\n  }\n\n  /**\n   * Create new idle transaction.\n   */\n  function startIdleTransaction(hub, transactionContext, idleTimeout, finalTimeout, onScope, customSamplingContext, heartbeatInterval) {\n    const client = hub.getClient();\n    const options = client && client.getOptions() || {};\n    let transaction = new idletransaction.IdleTransaction(transactionContext, hub, idleTimeout, finalTimeout, heartbeatInterval, onScope);\n    transaction = sampling.sampleTransaction(transaction, options, {\n      parentSampled: transactionContext.parentSampled,\n      transactionContext,\n      ...customSamplingContext\n    });\n    if (transaction.sampled) {\n      transaction.initSpanRecorder(options._experiments && options._experiments.maxSpans);\n    }\n    if (client && client.emit) {\n      client.emit('startTransaction', transaction);\n    }\n    return transaction;\n  }\n\n  /**\n   * Adds tracing extensions to the global hub.\n   */\n  function addTracingExtensions() {\n    const carrier = hub.getMainCarrier();\n    if (!carrier.__SENTRY__) {\n      return;\n    }\n    carrier.__SENTRY__.extensions = carrier.__SENTRY__.extensions || {};\n    if (!carrier.__SENTRY__.extensions.startTransaction) {\n      carrier.__SENTRY__.extensions.startTransaction = _startTransaction;\n    }\n    if (!carrier.__SENTRY__.extensions.traceHeaders) {\n      carrier.__SENTRY__.extensions.traceHeaders = traceHeaders;\n    }\n    errors.registerErrorInstrumentation();\n  }\n  exports.addTracingExtensions = addTracingExtensions;\n  exports.startIdleTransaction = startIdleTransaction;\n});","lineCount":101,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"utils"],[5,13,3,11],[5,16,3,14,"require"],[5,23,3,21],[5,24,3,21,"_dependencyMap"],[5,38,3,21],[5,58,3,37],[5,59,3,38],[6,2,4,0],[6,8,4,6,"hub"],[6,11,4,9],[6,14,4,12,"require"],[6,21,4,19],[6,22,4,19,"_dependencyMap"],[6,36,4,19],[6,52,4,31],[6,53,4,32],[7,2,5,0],[7,8,5,6,"errors"],[7,14,5,12],[7,17,5,15,"require"],[7,24,5,22],[7,25,5,22,"_dependencyMap"],[7,39,5,22],[7,57,5,36],[7,58,5,37],[8,2,6,0],[8,8,6,6,"idletransaction"],[8,23,6,21],[8,26,6,24,"require"],[8,33,6,31],[8,34,6,31,"_dependencyMap"],[8,48,6,31],[8,75,6,54],[8,76,6,55],[9,2,7,0],[9,8,7,6,"sampling"],[9,16,7,14],[9,19,7,17,"require"],[9,26,7,24],[9,27,7,24,"_dependencyMap"],[9,41,7,24],[9,61,7,40],[9,62,7,41],[10,2,8,0],[10,8,8,6,"transaction"],[10,19,8,17],[10,22,8,20,"require"],[10,29,8,27],[10,30,8,27,"_dependencyMap"],[10,44,8,27],[10,67,8,46],[10,68,8,47],[12,2,10,0],[13,2,11,0],[13,11,11,9,"traceHeaders"],[13,23,11,21,"traceHeaders"],[13,24,11,21],[13,26,11,24],[14,4,12,2],[14,10,12,8,"scope"],[14,15,12,13],[14,18,12,16],[14,22,12,20],[14,23,12,21,"getScope"],[14,31,12,29],[14,32,12,30],[14,33,12,31],[15,4,13,2],[15,10,13,8,"span"],[15,14,13,12],[15,17,13,15,"scope"],[15,22,13,20],[15,23,13,21,"getSpan"],[15,30,13,28],[15,31,13,29],[15,32,13,30],[16,4,15,2],[16,11,15,9,"span"],[16,15,15,13],[16,18,16,6],[17,6,17,8],[17,20,17,22],[17,22,17,24,"span"],[17,26,17,28],[17,27,17,29,"toTraceparent"],[17,40,17,42],[17,41,17,43],[18,4,18,6],[18,5,18,7],[18,8,19,6],[18,9,19,7],[18,10,19,8],[19,2,20,0],[21,2,22,0],[22,0,23,0],[23,0,24,0],[24,0,25,0],[25,0,26,0],[26,0,27,0],[27,0,28,0],[28,0,29,0],[29,0,30,0],[30,0,31,0],[31,0,32,0],[32,0,33,0],[33,0,34,0],[34,0,35,0],[35,0,36,0],[36,2,37,0],[36,11,37,9,"_startTransaction"],[36,28,37,26,"_startTransaction"],[36,29,39,2,"transactionContext"],[36,47,39,20],[36,49,40,2,"customSamplingContext"],[36,70,40,23],[36,72,41,2],[37,4,42,2],[37,10,42,8,"client"],[37,16,42,14],[37,19,42,17],[37,23,42,21],[37,24,42,22,"getClient"],[37,33,42,31],[37,34,42,32],[37,35,42,33],[38,4,43,2],[38,10,43,8,"options"],[38,17,43,15],[38,20,43,19,"client"],[38,26,43,25],[38,30,43,29,"client"],[38,36,43,35],[38,37,43,36,"getOptions"],[38,47,43,46],[38,48,43,47],[38,49,43,48],[38,53,43,53],[38,54,43,54],[38,55,43,55],[39,4,45,2],[39,10,45,8,"configInstrumenter"],[39,28,45,26],[39,31,45,29,"options"],[39,38,45,36],[39,39,45,37,"instrumenter"],[39,51,45,49],[39,55,45,53],[39,63,45,61],[40,4,46,2],[40,10,46,8,"transactionInstrumenter"],[40,33,46,31],[40,36,46,34,"transactionContext"],[40,54,46,52],[40,55,46,53,"instrumenter"],[40,67,46,65],[40,71,46,69],[40,79,46,77],[41,4,48,2],[41,8,48,6,"configInstrumenter"],[41,26,48,24],[41,31,48,29,"transactionInstrumenter"],[41,54,48,52],[41,56,48,54],[42,6,49,4],[42,7,49,5],[42,14,49,12,"__SENTRY_DEBUG__"],[42,30,49,28],[42,35,49,33],[42,46,49,44],[42,50,49,48,"__SENTRY_DEBUG__"],[42,66,49,64],[42,71,50,6,"utils"],[42,76,50,11],[42,77,50,12,"logger"],[42,83,50,18],[42,84,50,19,"error"],[42,89,50,24],[42,90,51,8],[42,139,51,57,"transactionInstrumenter"],[42,162,51,80],[42,206,51,124,"configInstrumenter"],[42,224,51,142],[43,0,52,0],[43,54,52,54,"configInstrumenter"],[43,72,52,72],[43,113,53,6],[43,114,53,7],[44,6,55,4,"transactionContext"],[44,24,55,22],[44,25,55,23,"sampled"],[44,32,55,30],[44,35,55,33],[44,40,55,38],[45,4,56,2],[46,4,58,2],[46,8,58,6,"transaction$1"],[46,21,58,19],[46,24,58,22],[46,28,58,26,"transaction"],[46,39,58,37],[46,40,58,38,"Transaction"],[46,51,58,49],[46,52,58,50,"transactionContext"],[46,70,58,68],[46,72,58,70],[46,76,58,74],[46,77,58,75],[47,4,59,2,"transaction$1"],[47,17,59,15],[47,20,59,18,"sampling"],[47,28,59,26],[47,29,59,27,"sampleTransaction"],[47,46,59,44],[47,47,59,45,"transaction$1"],[47,60,59,58],[47,62,59,60,"options"],[47,69,59,67],[47,71,59,69],[48,6,60,4,"parentSampled"],[48,19,60,17],[48,21,60,19,"transactionContext"],[48,39,60,37],[48,40,60,38,"parentSampled"],[48,53,60,51],[49,6,61,4,"transactionContext"],[49,24,61,22],[50,6,62,4],[50,9,62,7,"customSamplingContext"],[51,4,63,2],[51,5,63,3],[51,6,63,4],[52,4,64,2],[52,8,64,6,"transaction$1"],[52,21,64,19],[52,22,64,20,"sampled"],[52,29,64,27],[52,31,64,29],[53,6,65,4,"transaction$1"],[53,19,65,17],[53,20,65,18,"initSpanRecorder"],[53,36,65,34],[53,37,65,35,"options"],[53,44,65,42],[53,45,65,43,"_experiments"],[53,57,65,55],[53,61,65,60,"options"],[53,68,65,67],[53,69,65,68,"_experiments"],[53,81,65,80],[53,82,65,81,"maxSpans"],[53,90,65,91],[53,91,65,92],[54,4,66,2],[55,4,67,2],[55,8,67,6,"client"],[55,14,67,12],[55,18,67,16,"client"],[55,24,67,22],[55,25,67,23,"emit"],[55,29,67,27],[55,31,67,29],[56,6,68,4,"client"],[56,12,68,10],[56,13,68,11,"emit"],[56,17,68,15],[56,18,68,16],[56,36,68,34],[56,38,68,36,"transaction$1"],[56,51,68,49],[56,52,68,50],[57,4,69,2],[58,4,70,2],[58,11,70,9,"transaction$1"],[58,24,70,22],[59,2,71,0],[61,2,73,0],[62,0,74,0],[63,0,75,0],[64,2,76,0],[64,11,76,9,"startIdleTransaction"],[64,31,76,29,"startIdleTransaction"],[64,32,77,2,"hub"],[64,35,77,5],[64,37,78,2,"transactionContext"],[64,55,78,20],[64,57,79,2,"idleTimeout"],[64,68,79,13],[64,70,80,2,"finalTimeout"],[64,82,80,14],[64,84,81,2,"onScope"],[64,91,81,9],[64,93,82,2,"customSamplingContext"],[64,114,82,23],[64,116,83,2,"heartbeatInterval"],[64,133,83,19],[64,135,84,2],[65,4,85,2],[65,10,85,8,"client"],[65,16,85,14],[65,19,85,17,"hub"],[65,22,85,20],[65,23,85,21,"getClient"],[65,32,85,30],[65,33,85,31],[65,34,85,32],[66,4,86,2],[66,10,86,8,"options"],[66,17,86,15],[66,20,86,19,"client"],[66,26,86,25],[66,30,86,29,"client"],[66,36,86,35],[66,37,86,36,"getOptions"],[66,47,86,46],[66,48,86,47],[66,49,86,48],[66,53,86,53],[66,54,86,54],[66,55,86,55],[67,4,88,2],[67,8,88,6,"transaction"],[67,19,88,17],[67,22,88,20],[67,26,88,24,"idletransaction"],[67,41,88,39],[67,42,88,40,"IdleTransaction"],[67,57,88,55],[67,58,88,56,"transactionContext"],[67,76,88,74],[67,78,88,76,"hub"],[67,81,88,79],[67,83,88,81,"idleTimeout"],[67,94,88,92],[67,96,88,94,"finalTimeout"],[67,108,88,106],[67,110,88,108,"heartbeatInterval"],[67,127,88,125],[67,129,88,127,"onScope"],[67,136,88,134],[67,137,88,135],[68,4,89,2,"transaction"],[68,15,89,13],[68,18,89,16,"sampling"],[68,26,89,24],[68,27,89,25,"sampleTransaction"],[68,44,89,42],[68,45,89,43,"transaction"],[68,56,89,54],[68,58,89,56,"options"],[68,65,89,63],[68,67,89,65],[69,6,90,4,"parentSampled"],[69,19,90,17],[69,21,90,19,"transactionContext"],[69,39,90,37],[69,40,90,38,"parentSampled"],[69,53,90,51],[70,6,91,4,"transactionContext"],[70,24,91,22],[71,6,92,4],[71,9,92,7,"customSamplingContext"],[72,4,93,2],[72,5,93,3],[72,6,93,4],[73,4,94,2],[73,8,94,6,"transaction"],[73,19,94,17],[73,20,94,18,"sampled"],[73,27,94,25],[73,29,94,27],[74,6,95,4,"transaction"],[74,17,95,15],[74,18,95,16,"initSpanRecorder"],[74,34,95,32],[74,35,95,33,"options"],[74,42,95,40],[74,43,95,41,"_experiments"],[74,55,95,53],[74,59,95,58,"options"],[74,66,95,65],[74,67,95,66,"_experiments"],[74,79,95,78],[74,80,95,79,"maxSpans"],[74,88,95,89],[74,89,95,90],[75,4,96,2],[76,4,97,2],[76,8,97,6,"client"],[76,14,97,12],[76,18,97,16,"client"],[76,24,97,22],[76,25,97,23,"emit"],[76,29,97,27],[76,31,97,29],[77,6,98,4,"client"],[77,12,98,10],[77,13,98,11,"emit"],[77,17,98,15],[77,18,98,16],[77,36,98,34],[77,38,98,36,"transaction"],[77,49,98,47],[77,50,98,48],[78,4,99,2],[79,4,100,2],[79,11,100,9,"transaction"],[79,22,100,20],[80,2,101,0],[82,2,103,0],[83,0,104,0],[84,0,105,0],[85,2,106,0],[85,11,106,9,"addTracingExtensions"],[85,31,106,29,"addTracingExtensions"],[85,32,106,29],[85,34,106,32],[86,4,107,2],[86,10,107,8,"carrier"],[86,17,107,15],[86,20,107,18,"hub"],[86,23,107,21],[86,24,107,22,"getMainCarrier"],[86,38,107,36],[86,39,107,37],[86,40,107,38],[87,4,108,2],[87,8,108,6],[87,9,108,7,"carrier"],[87,16,108,14],[87,17,108,15,"__SENTRY__"],[87,27,108,25],[87,29,108,27],[88,6,109,4],[89,4,110,2],[90,4,111,2,"carrier"],[90,11,111,9],[90,12,111,10,"__SENTRY__"],[90,22,111,20],[90,23,111,21,"extensions"],[90,33,111,31],[90,36,111,34,"carrier"],[90,43,111,41],[90,44,111,42,"__SENTRY__"],[90,54,111,52],[90,55,111,53,"extensions"],[90,65,111,63],[90,69,111,67],[90,70,111,68],[90,71,111,69],[91,4,112,2],[91,8,112,6],[91,9,112,7,"carrier"],[91,16,112,14],[91,17,112,15,"__SENTRY__"],[91,27,112,25],[91,28,112,26,"extensions"],[91,38,112,36],[91,39,112,37,"startTransaction"],[91,55,112,53],[91,57,112,55],[92,6,113,4,"carrier"],[92,13,113,11],[92,14,113,12,"__SENTRY__"],[92,24,113,22],[92,25,113,23,"extensions"],[92,35,113,33],[92,36,113,34,"startTransaction"],[92,52,113,50],[92,55,113,53,"_startTransaction"],[92,72,113,70],[93,4,114,2],[94,4,115,2],[94,8,115,6],[94,9,115,7,"carrier"],[94,16,115,14],[94,17,115,15,"__SENTRY__"],[94,27,115,25],[94,28,115,26,"extensions"],[94,38,115,36],[94,39,115,37,"traceHeaders"],[94,51,115,49],[94,53,115,51],[95,6,116,4,"carrier"],[95,13,116,11],[95,14,116,12,"__SENTRY__"],[95,24,116,22],[95,25,116,23,"extensions"],[95,35,116,33],[95,36,116,34,"traceHeaders"],[95,48,116,46],[95,51,116,49,"traceHeaders"],[95,63,116,61],[96,4,117,2],[97,4,119,2,"errors"],[97,10,119,8],[97,11,119,9,"registerErrorInstrumentation"],[97,39,119,37],[97,40,119,38],[97,41,119,39],[98,2,120,0],[99,2,122,0,"exports"],[99,9,122,7],[99,10,122,8,"addTracingExtensions"],[99,30,122,28],[99,33,122,31,"addTracingExtensions"],[99,53,122,51],[100,2,123,0,"exports"],[100,9,123,7],[100,10,123,8,"startIdleTransaction"],[100,30,123,28],[100,33,123,31,"startIdleTransaction"],[100,53,123,51],[101,0,123,52],[101,3]],"functionMap":{"names":["<global>","traceHeaders","_startTransaction","startIdleTransaction","addTracingExtensions"],"mappings":"AAA;ACU;CDS;AEiB;CFkC;AGK;CHyB;AIK;CJc"},"hasCjsExports":true},"type":"js/module"}]}