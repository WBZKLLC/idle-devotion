{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"FEATURES_STORAGE_KEY\", {\n    enumerable: true,\n    get: function () {\n      return FEATURES_STORAGE_KEY;\n    }\n  });\n  Object.defineProperty(exports, \"DEFAULT_FEATURES_TTL_SECONDS\", {\n    enumerable: true,\n    get: function () {\n      return DEFAULT_FEATURES_TTL_SECONDS;\n    }\n  });\n  Object.defineProperty(exports, \"MIN_FEATURES_TTL_SECONDS\", {\n    enumerable: true,\n    get: function () {\n      return MIN_FEATURES_TTL_SECONDS;\n    }\n  });\n  Object.defineProperty(exports, \"MAX_FEATURES_TTL_SECONDS\", {\n    enumerable: true,\n    get: function () {\n      return MAX_FEATURES_TTL_SECONDS;\n    }\n  });\n  exports.clamp01 = clamp01;\n  exports.clampTtlSeconds = clampTtlSeconds;\n  exports.normalizeRemoteFlagValue = normalizeRemoteFlagValue;\n  exports.normalizeRemoteFlags = normalizeRemoteFlags;\n  exports.fnv1a32 = fnv1a32;\n  exports.bucket01 = bucket01;\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  // /app/frontend/lib/featureUtils.ts\n\n  var FEATURES_STORAGE_KEY = '@idledevotion/features/v1';\n  var DEFAULT_FEATURES_TTL_SECONDS = 3600; // 1h fallback if server omits\n  var MIN_FEATURES_TTL_SECONDS = 60; // don't thrash the endpoint\n  var MAX_FEATURES_TTL_SECONDS = 24 * 60 * 60; // 24h clamp\n\n  function clamp01(n) {\n    if (Number.isNaN(n)) return 0;\n    if (n < 0) return 0;\n    if (n > 1) return 1;\n    return n;\n  }\n  function clampTtlSeconds(ttlSeconds) {\n    var raw = typeof ttlSeconds === 'number' ? ttlSeconds : DEFAULT_FEATURES_TTL_SECONDS;\n    var clamped = Math.max(MIN_FEATURES_TTL_SECONDS, Math.min(MAX_FEATURES_TTL_SECONDS, raw));\n    return clamped;\n  }\n  function normalizeRemoteFlagValue(value) {\n    if (typeof value === 'boolean') return {\n      enabled: value\n    };\n    var enabled = !!value.enabled;\n    var rollout = typeof value.rollout === 'number' ? clamp01(value.rollout) : undefined;\n    return rollout === undefined ? {\n      enabled\n    } : {\n      enabled,\n      rollout\n    };\n  }\n  function normalizeRemoteFlags(flags) {\n    var out = {};\n    if (!flags) return out;\n    for (var _ref of Object.entries(flags)) {\n      var _ref2 = (0, _slicedToArray.default)(_ref, 2);\n      var k = _ref2[0];\n      var v = _ref2[1];\n      out[k] = normalizeRemoteFlagValue(v);\n    }\n    return out;\n  }\n\n  /**\n   * Fast deterministic 32-bit FNV-1a hash.\n   * Good enough for rollout bucketing; not for cryptography.\n   */\n  function fnv1a32(input) {\n    var hash = 0x811c9dc5; // offset basis\n    for (var i = 0; i < input.length; i++) {\n      hash ^= input.charCodeAt(i);\n      // hash *= 16777619 (with 32-bit overflow)\n      hash = hash + (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24) >>> 0;\n    }\n    return hash >>> 0;\n  }\n\n  /**\n   * Convert a stable identifier into a bucket in [0,1).\n   */\n  function bucket01(stableId) {\n    var h = fnv1a32(stableId);\n    // 2^32 = 4294967296\n    return h / 4294967296;\n  }\n});","lineCount":109,"map":[[12,2,3,0,"Object"],[12,8,3,0],[12,9,3,0,"defineProperty"],[12,23,3,0],[12,24,3,0,"exports"],[12,31,3,0],[13,4,3,0,"enumerable"],[13,14,3,0],[14,4,3,0,"get"],[14,7,3,0],[14,18,3,0,"get"],[14,19,3,0],[15,6,3,0],[15,13,3,0,"FEATURES_STORAGE_KEY"],[15,33,3,0],[16,4,3,0],[17,2,3,0],[18,2,4,0,"Object"],[18,8,4,0],[18,9,4,0,"defineProperty"],[18,23,4,0],[18,24,4,0,"exports"],[18,31,4,0],[19,4,4,0,"enumerable"],[19,14,4,0],[20,4,4,0,"get"],[20,7,4,0],[20,18,4,0,"get"],[20,19,4,0],[21,6,4,0],[21,13,4,0,"DEFAULT_FEATURES_TTL_SECONDS"],[21,41,4,0],[22,4,4,0],[23,2,4,0],[24,2,5,0,"Object"],[24,8,5,0],[24,9,5,0,"defineProperty"],[24,23,5,0],[24,24,5,0,"exports"],[24,31,5,0],[25,4,5,0,"enumerable"],[25,14,5,0],[26,4,5,0,"get"],[26,7,5,0],[26,18,5,0,"get"],[26,19,5,0],[27,6,5,0],[27,13,5,0,"MIN_FEATURES_TTL_SECONDS"],[27,37,5,0],[28,4,5,0],[29,2,5,0],[30,2,6,0,"Object"],[30,8,6,0],[30,9,6,0,"defineProperty"],[30,23,6,0],[30,24,6,0,"exports"],[30,31,6,0],[31,4,6,0,"enumerable"],[31,14,6,0],[32,4,6,0,"get"],[32,7,6,0],[32,18,6,0,"get"],[32,19,6,0],[33,6,6,0],[33,13,6,0,"MAX_FEATURES_TTL_SECONDS"],[33,37,6,0],[34,4,6,0],[35,2,6,0],[36,2,26,0,"exports"],[36,9,26,0],[36,10,26,0,"clamp01"],[36,17,26,0],[36,20,26,0,"clamp01"],[36,27,26,0],[37,2,33,0,"exports"],[37,9,33,0],[37,10,33,0,"clampTtlSeconds"],[37,25,33,0],[37,28,33,0,"clampTtlSeconds"],[37,43,33,0],[38,2,39,0,"exports"],[38,9,39,0],[38,10,39,0,"normalizeRemoteFlagValue"],[38,34,39,0],[38,37,39,0,"normalizeRemoteFlagValue"],[38,61,39,0],[39,2,47,0,"exports"],[39,9,47,0],[39,10,47,0,"normalizeRemoteFlags"],[39,30,47,0],[39,33,47,0,"normalizeRemoteFlags"],[39,53,47,0],[40,2,63,0,"exports"],[40,9,63,0],[40,10,63,0,"fnv1a32"],[40,17,63,0],[40,20,63,0,"fnv1a32"],[40,27,63,0],[41,2,76,0,"exports"],[41,9,76,0],[41,10,76,0,"bucket01"],[41,18,76,0],[41,21,76,0,"bucket01"],[41,29,76,0],[42,2,80,1],[42,6,80,1,"_babelRuntimeHelpersSlicedToArray"],[42,39,80,1],[42,42,80,1,"require"],[42,49,80,1],[42,50,80,1,"_dependencyMap"],[42,64,80,1],[43,2,80,1],[43,6,80,1,"_slicedToArray"],[43,20,80,1],[43,23,80,1,"_interopDefault"],[43,38,80,1],[43,39,80,1,"_babelRuntimeHelpersSlicedToArray"],[43,72,80,1],[44,2,1,0],[46,2,3,7],[46,6,3,13,"FEATURES_STORAGE_KEY"],[46,26,3,33],[46,29,3,36],[46,56,3,63],[47,2,4,7],[47,6,4,13,"DEFAULT_FEATURES_TTL_SECONDS"],[47,34,4,41],[47,37,4,44],[47,41,4,48],[47,42,4,49],[47,43,4,50],[48,2,5,7],[48,6,5,13,"MIN_FEATURES_TTL_SECONDS"],[48,30,5,37],[48,33,5,40],[48,35,5,42],[48,36,5,43],[48,37,5,44],[49,2,6,7],[49,6,6,13,"MAX_FEATURES_TTL_SECONDS"],[49,30,6,37],[49,33,6,40],[49,35,6,42],[49,38,6,45],[49,40,6,47],[49,43,6,50],[49,45,6,52],[49,46,6,53],[49,47,6,54],[51,2,26,7],[51,11,26,16,"clamp01"],[51,18,26,23,"clamp01"],[51,19,26,24,"n"],[51,20,26,33],[51,22,26,43],[52,4,27,2],[52,8,27,6,"Number"],[52,14,27,12],[52,15,27,13,"isNaN"],[52,20,27,18],[52,21,27,19,"n"],[52,22,27,20],[52,23,27,21],[52,25,27,23],[52,32,27,30],[52,33,27,31],[53,4,28,2],[53,8,28,6,"n"],[53,9,28,7],[53,12,28,10],[53,13,28,11],[53,15,28,13],[53,22,28,20],[53,23,28,21],[54,4,29,2],[54,8,29,6,"n"],[54,9,29,7],[54,12,29,10],[54,13,29,11],[54,15,29,13],[54,22,29,20],[54,23,29,21],[55,4,30,2],[55,11,30,9,"n"],[55,12,30,10],[56,2,31,0],[57,2,33,7],[57,11,33,16,"clampTtlSeconds"],[57,26,33,31,"clampTtlSeconds"],[57,27,33,32,"ttlSeconds"],[57,37,33,51],[57,39,33,61],[58,4,34,2],[58,8,34,8,"raw"],[58,11,34,11],[58,14,34,14],[58,21,34,21,"ttlSeconds"],[58,31,34,31],[58,36,34,36],[58,44,34,44],[58,47,34,47,"ttlSeconds"],[58,57,34,57],[58,60,34,60,"DEFAULT_FEATURES_TTL_SECONDS"],[58,88,34,88],[59,4,35,2],[59,8,35,8,"clamped"],[59,15,35,15],[59,18,35,18,"Math"],[59,22,35,22],[59,23,35,23,"max"],[59,26,35,26],[59,27,35,27,"MIN_FEATURES_TTL_SECONDS"],[59,51,35,51],[59,53,35,53,"Math"],[59,57,35,57],[59,58,35,58,"min"],[59,61,35,61],[59,62,35,62,"MAX_FEATURES_TTL_SECONDS"],[59,86,35,86],[59,88,35,88,"raw"],[59,91,35,91],[59,92,35,92],[59,93,35,93],[60,4,36,2],[60,11,36,9,"clamped"],[60,18,36,16],[61,2,37,0],[62,2,39,7],[62,11,39,16,"normalizeRemoteFlagValue"],[62,35,39,40,"normalizeRemoteFlagValue"],[62,36,39,41,"value"],[62,41,39,63],[62,43,39,87],[63,4,40,2],[63,8,40,6],[63,15,40,13,"value"],[63,20,40,18],[63,25,40,23],[63,34,40,32],[63,36,40,34],[63,43,40,41],[64,6,40,43,"enabled"],[64,13,40,50],[64,15,40,52,"value"],[65,4,40,58],[65,5,40,59],[66,4,41,2],[66,8,41,8,"enabled"],[66,15,41,15],[66,18,41,18],[66,19,41,19],[66,20,41,20,"value"],[66,25,41,25],[66,26,41,26,"enabled"],[66,33,41,33],[67,4,42,2],[67,8,42,8,"rollout"],[67,15,42,15],[67,18,43,4],[67,25,43,11,"value"],[67,30,43,16],[67,31,43,17,"rollout"],[67,38,43,24],[67,43,43,29],[67,51,43,37],[67,54,43,40,"clamp01"],[67,61,43,47],[67,62,43,48,"value"],[67,67,43,53],[67,68,43,54,"rollout"],[67,75,43,61],[67,76,43,62],[67,79,43,65,"undefined"],[67,88,43,74],[68,4,44,2],[68,11,44,9,"rollout"],[68,18,44,16],[68,23,44,21,"undefined"],[68,32,44,30],[68,35,44,33],[69,6,44,35,"enabled"],[70,4,44,43],[70,5,44,44],[70,8,44,47],[71,6,44,49,"enabled"],[71,13,44,56],[72,6,44,58,"rollout"],[73,4,44,66],[73,5,44,67],[74,2,45,0],[75,2,47,7],[75,11,47,16,"normalizeRemoteFlags"],[75,31,47,36,"normalizeRemoteFlags"],[75,32,48,2,"flags"],[75,37,48,59],[75,39,49,40],[76,4,50,2],[76,8,50,8,"out"],[76,11,50,49],[76,14,50,52],[76,15,50,53],[76,16,50,54],[77,4,51,2],[77,8,51,6],[77,9,51,7,"flags"],[77,14,51,12],[77,16,51,14],[77,23,51,21,"out"],[77,26,51,24],[78,4,53,2],[78,13,53,2,"_ref"],[78,17,53,2],[78,21,53,23,"Object"],[78,27,53,29],[78,28,53,30,"entries"],[78,35,53,37],[78,36,53,38,"flags"],[78,41,53,43],[78,42,53,44],[78,44,53,46],[79,6,53,46],[79,10,53,46,"_ref2"],[79,15,53,46],[79,22,53,46,"_slicedToArray"],[79,36,53,46],[79,37,53,46,"default"],[79,44,53,46],[79,46,53,46,"_ref"],[79,50,53,46],[80,6,53,46],[80,10,53,14,"k"],[80,11,53,15],[80,14,53,15,"_ref2"],[80,19,53,15],[81,6,53,15],[81,10,53,17,"v"],[81,11,53,18],[81,14,53,18,"_ref2"],[81,19,53,18],[82,6,54,4,"out"],[82,9,54,7],[82,10,54,8,"k"],[82,11,54,9],[82,12,54,10],[82,15,54,13,"normalizeRemoteFlagValue"],[82,39,54,37],[82,40,54,38,"v"],[82,41,54,39],[82,42,54,40],[83,4,55,2],[84,4,56,2],[84,11,56,9,"out"],[84,14,56,12],[85,2,57,0],[87,2,59,0],[88,0,60,0],[89,0,61,0],[90,0,62,0],[91,2,63,7],[91,11,63,16,"fnv1a32"],[91,18,63,23,"fnv1a32"],[91,19,63,24,"input"],[91,24,63,37],[91,26,63,47],[92,4,64,2],[92,8,64,6,"hash"],[92,12,64,10],[92,15,64,13],[92,25,64,23],[92,26,64,24],[92,27,64,25],[93,4,65,2],[93,9,65,7],[93,13,65,11,"i"],[93,14,65,12],[93,17,65,15],[93,18,65,16],[93,20,65,18,"i"],[93,21,65,19],[93,24,65,22,"input"],[93,29,65,27],[93,30,65,28,"length"],[93,36,65,34],[93,38,65,36,"i"],[93,39,65,37],[93,41,65,39],[93,43,65,41],[94,6,66,4,"hash"],[94,10,66,8],[94,14,66,12,"input"],[94,19,66,17],[94,20,66,18,"charCodeAt"],[94,30,66,28],[94,31,66,29,"i"],[94,32,66,30],[94,33,66,31],[95,6,67,4],[96,6,68,4,"hash"],[96,10,68,8],[96,13,68,12,"hash"],[96,17,68,16],[96,21,68,20,"hash"],[96,25,68,24],[96,29,68,28],[96,30,68,29],[96,31,68,30],[96,35,68,34,"hash"],[96,39,68,38],[96,43,68,42],[96,44,68,43],[96,45,68,44],[96,49,68,48,"hash"],[96,53,68,52],[96,57,68,56],[96,58,68,57],[96,59,68,58],[96,63,68,62,"hash"],[96,67,68,66],[96,71,68,70],[96,72,68,71],[96,73,68,72],[96,77,68,76,"hash"],[96,81,68,80],[96,85,68,84],[96,87,68,86],[96,88,68,87],[96,93,68,93],[96,94,68,94],[97,4,69,2],[98,4,70,2],[98,11,70,9,"hash"],[98,15,70,13],[98,20,70,18],[98,21,70,19],[99,2,71,0],[101,2,73,0],[102,0,74,0],[103,0,75,0],[104,2,76,7],[104,11,76,16,"bucket01"],[104,19,76,24,"bucket01"],[104,20,76,25,"stableId"],[104,28,76,41],[104,30,76,51],[105,4,77,2],[105,8,77,8,"h"],[105,9,77,9],[105,12,77,12,"fnv1a32"],[105,19,77,19],[105,20,77,20,"stableId"],[105,28,77,28],[105,29,77,29],[106,4,78,2],[107,4,79,2],[107,11,79,9,"h"],[107,12,79,10],[107,15,79,13],[107,25,79,23],[108,2,80,0],[109,0,80,1],[109,3]],"functionMap":{"names":["<global>","clamp01","clampTtlSeconds","normalizeRemoteFlagValue","normalizeRemoteFlags","fnv1a32","bucket01"],"mappings":"AAA;OCyB;CDK;OEE;CFI;OGE;CHM;OIE;CJU;OKM;CLQ;OMK;CNI"},"hasCjsExports":false},"type":"js/module"}]}