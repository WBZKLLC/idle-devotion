{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":255},"end":{"line":9,"column":44,"index":299}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../../stores/gameStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":300},"end":{"line":10,"column":54,"index":354}}],"key":"RlyH1X8PAExLXk9v+2eohdpRBPU=","exportNames":["*"],"imports":1}},{"name":"../api/mail","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":355},"end":{"line":11,"column":45,"index":400}}],"key":"xAIkQNProhN280OQ4yIfwb7crxk=","exportNames":["*"],"imports":1}},{"name":"../api/friends","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":401},"end":{"line":12,"column":51,"index":452}}],"key":"4HVKDNfDaTp3qLLcQOHFtMi5LQg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useRailBadges = useRailBadges;\n  exports.useMailBadge = useMailBadge;\n  exports.useFriendsBadge = useFriendsBadge;\n  exports.useEventsBadge = useEventsBadge;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _storesGameStore = require(_dependencyMap[1], \"../../stores/gameStore\");\n  var _apiMail = require(_dependencyMap[2], \"../api/mail\");\n  var _apiFriends = require(_dependencyMap[3], \"../api/friends\");\n  // /app/frontend/lib/ui/badges.ts\n  // Phase 3.23.2: Badge selectors with real API data\n  //\n  // Centralized badge state derived from API calls.\n  // Graceful degradation â€” returns defaults on failure.\n  //\n  // \"Quiet when empty. Truthful when there's something.\"\n\n  /**\n   * Get all rail badges at once (with API calls)\n   * Returns badge values for mail, friends, events\n   * \n   * Badge logic:\n   * - mail: rewardsAvailable + unreadMessages + giftsAvailable (cap at 9+)\n   * - friends: pendingRequests\n   * - events: true if active events (stubbed for now)\n   */\n  function useRailBadges() {\n    const user = (0, _storesGameStore.useGameStore)(s => s.user);\n    const [badges, setBadges] = (0, _react.useState)({\n      mail: 1,\n      // Default: daily rewards available\n      friends: undefined,\n      events: true // Default: events available\n    });\n    (0, _react.useEffect)(() => {\n      if (!user?.username) return;\n      let cancelled = false;\n      const fetchBadges = async () => {\n        try {\n          const [mailData, friendsData] = await Promise.all([(0, _apiMail.getMailSummary)(user.username).catch(() => ({\n            rewardsAvailable: 1,\n            unreadMessages: 0,\n            giftsAvailable: 0\n          })), (0, _apiFriends.getFriendsSummary)(user.username).catch(() => ({\n            pendingRequests: 0,\n            totalFriends: 0\n          }))]);\n          if (cancelled) return;\n          const mailTotal = mailData.rewardsAvailable + mailData.unreadMessages + mailData.giftsAvailable;\n          setBadges({\n            mail: mailTotal > 0 ? mailTotal : undefined,\n            friends: friendsData.pendingRequests > 0 ? friendsData.pendingRequests : undefined,\n            events: true // TODO: Wire to actual events API when available\n          });\n        } catch {\n          // Keep defaults on error\n        }\n      };\n      fetchBadges();\n\n      // Refresh badges every 60 seconds\n      const interval = setInterval(fetchBadges, 60000);\n      return () => {\n        cancelled = true;\n        clearInterval(interval);\n      };\n    }, [user?.username]);\n    return badges;\n  }\n\n  /**\n   * Get mail badge count (standalone hook)\n   */\n  function useMailBadge() {\n    const user = (0, _storesGameStore.useGameStore)(s => s.user);\n    const [badge, setBadge] = (0, _react.useState)(1); // Default: daily rewards available\n\n    (0, _react.useEffect)(() => {\n      if (!user?.username) return;\n      (0, _apiMail.getMailSummary)(user.username).then(data => {\n        const total = data.rewardsAvailable + data.unreadMessages + data.giftsAvailable;\n        setBadge(total);\n      }).catch(() => {\n        // Keep default\n      });\n    }, [user?.username]);\n    return badge;\n  }\n\n  /**\n   * Get friends badge count (standalone hook)\n   */\n  function useFriendsBadge() {\n    const user = (0, _storesGameStore.useGameStore)(s => s.user);\n    const [badge, setBadge] = (0, _react.useState)(0);\n    (0, _react.useEffect)(() => {\n      if (!user?.username) return;\n      (0, _apiFriends.getFriendsSummary)(user.username).then(data => {\n        setBadge(data.pendingRequests);\n      }).catch(() => {\n        // Keep default\n      });\n    }, [user?.username]);\n    return badge;\n  }\n\n  /**\n   * Get events badge (standalone hook)\n   * TODO: Wire to actual events API\n   */\n  function useEventsBadge() {\n    // For now, return true to indicate \"events available\"\n    return true;\n  }\n});","lineCount":120,"map":[[7,2,29,0,"exports"],[7,9,29,0],[7,10,29,0,"useRailBadges"],[7,23,29,0],[7,26,29,0,"useRailBadges"],[7,39,29,0],[8,2,80,0,"exports"],[8,9,80,0],[8,10,80,0,"useMailBadge"],[8,22,80,0],[8,25,80,0,"useMailBadge"],[8,37,80,0],[9,2,103,0,"exports"],[9,9,103,0],[9,10,103,0,"useFriendsBadge"],[9,25,103,0],[9,28,103,0,"useFriendsBadge"],[9,43,103,0],[10,2,126,0,"exports"],[10,9,126,0],[10,10,126,0,"useEventsBadge"],[10,24,126,0],[10,27,126,0,"useEventsBadge"],[10,41,126,0],[11,2,9,0],[11,6,9,0,"_react"],[11,12,9,0],[11,15,9,0,"require"],[11,22,9,0],[11,23,9,0,"_dependencyMap"],[11,37,9,0],[12,2,10,0],[12,6,10,0,"_storesGameStore"],[12,22,10,0],[12,25,10,0,"require"],[12,32,10,0],[12,33,10,0,"_dependencyMap"],[12,47,10,0],[13,2,11,0],[13,6,11,0,"_apiMail"],[13,14,11,0],[13,17,11,0,"require"],[13,24,11,0],[13,25,11,0,"_dependencyMap"],[13,39,11,0],[14,2,12,0],[14,6,12,0,"_apiFriends"],[14,17,12,0],[14,20,12,0,"require"],[14,27,12,0],[14,28,12,0,"_dependencyMap"],[14,42,12,0],[15,2,1,0],[16,2,2,0],[17,2,3,0],[18,2,4,0],[19,2,5,0],[20,2,6,0],[21,2,7,0],[23,2,20,0],[24,0,21,0],[25,0,22,0],[26,0,23,0],[27,0,24,0],[28,0,25,0],[29,0,26,0],[30,0,27,0],[31,0,28,0],[32,2,29,7],[32,11,29,16,"useRailBadges"],[32,24,29,29,"useRailBadges"],[32,25,29,29],[32,27,29,44],[33,4,30,2],[33,10,30,8,"user"],[33,14,30,12],[33,17,30,15],[33,21,30,15,"useGameStore"],[33,37,30,27],[33,38,30,27,"useGameStore"],[33,50,30,27],[33,52,30,29,"s"],[33,53,30,30],[33,57,30,35,"s"],[33,58,30,36],[33,59,30,37,"user"],[33,63,30,41],[33,64,30,42],[34,4,31,2],[34,10,31,8],[34,11,31,9,"badges"],[34,17,31,15],[34,19,31,17,"setBadges"],[34,28,31,26],[34,29,31,27],[34,32,31,30],[34,36,31,30,"useState"],[34,42,31,38],[34,43,31,38,"useState"],[34,51,31,38],[34,53,31,51],[35,6,32,4,"mail"],[35,10,32,8],[35,12,32,10],[35,13,32,11],[36,6,32,13],[37,6,33,4,"friends"],[37,13,33,11],[37,15,33,13,"undefined"],[37,24,33,22],[38,6,34,4,"events"],[38,12,34,10],[38,14,34,12],[38,18,34,16],[38,19,34,18],[39,4,35,2],[39,5,35,3],[39,6,35,4],[40,4,37,2],[40,8,37,2,"useEffect"],[40,14,37,11],[40,15,37,11,"useEffect"],[40,24,37,11],[40,26,37,12],[40,32,37,18],[41,6,38,4],[41,10,38,8],[41,11,38,9,"user"],[41,15,38,13],[41,17,38,15,"username"],[41,25,38,23],[41,27,38,25],[42,6,40,4],[42,10,40,8,"cancelled"],[42,19,40,17],[42,22,40,20],[42,27,40,25],[43,6,42,4],[43,12,42,10,"fetchBadges"],[43,23,42,21],[43,26,42,24],[43,32,42,24,"fetchBadges"],[43,33,42,24],[43,38,42,36],[44,8,43,6],[44,12,43,10],[45,10,44,8],[45,16,44,14],[45,17,44,15,"mailData"],[45,25,44,23],[45,27,44,25,"friendsData"],[45,38,44,36],[45,39,44,37],[45,42,44,40],[45,48,44,46,"Promise"],[45,55,44,53],[45,56,44,54,"all"],[45,59,44,57],[45,60,44,58],[45,61,45,10],[45,65,45,10,"getMailSummary"],[45,73,45,24],[45,74,45,24,"getMailSummary"],[45,88,45,24],[45,90,45,25,"user"],[45,94,45,29],[45,95,45,30,"username"],[45,103,45,38],[45,104,45,39],[45,105,45,40,"catch"],[45,110,45,45],[45,111,45,46],[45,118,45,53],[46,12,45,55,"rewardsAvailable"],[46,28,45,71],[46,30,45,73],[46,31,45,74],[47,12,45,76,"unreadMessages"],[47,26,45,90],[47,28,45,92],[47,29,45,93],[48,12,45,95,"giftsAvailable"],[48,26,45,109],[48,28,45,111],[49,10,45,113],[49,11,45,114],[49,12,45,115],[49,13,45,116],[49,15,46,10],[49,19,46,10,"getFriendsSummary"],[49,30,46,27],[49,31,46,27,"getFriendsSummary"],[49,48,46,27],[49,50,46,28,"user"],[49,54,46,32],[49,55,46,33,"username"],[49,63,46,41],[49,64,46,42],[49,65,46,43,"catch"],[49,70,46,48],[49,71,46,49],[49,78,46,56],[50,12,46,58,"pendingRequests"],[50,27,46,73],[50,29,46,75],[50,30,46,76],[51,12,46,78,"totalFriends"],[51,24,46,90],[51,26,46,92],[52,10,46,94],[52,11,46,95],[52,12,46,96],[52,13,46,97],[52,14,47,9],[52,15,47,10],[53,10,49,8],[53,14,49,12,"cancelled"],[53,23,49,21],[53,25,49,23],[54,10,51,8],[54,16,51,14,"mailTotal"],[54,25,51,23],[54,28,51,26,"mailData"],[54,36,51,34],[54,37,51,35,"rewardsAvailable"],[54,53,51,51],[54,56,51,54,"mailData"],[54,64,51,62],[54,65,51,63,"unreadMessages"],[54,79,51,77],[54,82,51,80,"mailData"],[54,90,51,88],[54,91,51,89,"giftsAvailable"],[54,105,51,103],[55,10,53,8,"setBadges"],[55,19,53,17],[55,20,53,18],[56,12,54,10,"mail"],[56,16,54,14],[56,18,54,16,"mailTotal"],[56,27,54,25],[56,30,54,28],[56,31,54,29],[56,34,54,32,"mailTotal"],[56,43,54,41],[56,46,54,44,"undefined"],[56,55,54,53],[57,12,55,10,"friends"],[57,19,55,17],[57,21,55,19,"friendsData"],[57,32,55,30],[57,33,55,31,"pendingRequests"],[57,48,55,46],[57,51,55,49],[57,52,55,50],[57,55,55,53,"friendsData"],[57,66,55,64],[57,67,55,65,"pendingRequests"],[57,82,55,80],[57,85,55,83,"undefined"],[57,94,55,92],[58,12,56,10,"events"],[58,18,56,16],[58,20,56,18],[58,24,56,22],[58,25,56,24],[59,10,57,8],[59,11,57,9],[59,12,57,10],[60,8,58,6],[60,9,58,7],[60,10,58,8],[60,16,58,14],[61,10,59,8],[62,8,59,8],[63,6,61,4],[63,7,61,5],[64,6,63,4,"fetchBadges"],[64,17,63,15],[64,18,63,16],[64,19,63,17],[66,6,65,4],[67,6,66,4],[67,12,66,10,"interval"],[67,20,66,18],[67,23,66,21,"setInterval"],[67,34,66,32],[67,35,66,33,"fetchBadges"],[67,46,66,44],[67,48,66,46],[67,53,66,51],[67,54,66,52],[68,6,68,4],[68,13,68,11],[68,19,68,17],[69,8,69,6,"cancelled"],[69,17,69,15],[69,20,69,18],[69,24,69,22],[70,8,70,6,"clearInterval"],[70,21,70,19],[70,22,70,20,"interval"],[70,30,70,28],[70,31,70,29],[71,6,71,4],[71,7,71,5],[72,4,72,2],[72,5,72,3],[72,7,72,5],[72,8,72,6,"user"],[72,12,72,10],[72,14,72,12,"username"],[72,22,72,20],[72,23,72,21],[72,24,72,22],[73,4,74,2],[73,11,74,9,"badges"],[73,17,74,15],[74,2,75,0],[76,2,77,0],[77,0,78,0],[78,0,79,0],[79,2,80,7],[79,11,80,16,"useMailBadge"],[79,23,80,28,"useMailBadge"],[79,24,80,28],[79,26,80,39],[80,4,81,2],[80,10,81,8,"user"],[80,14,81,12],[80,17,81,15],[80,21,81,15,"useGameStore"],[80,37,81,27],[80,38,81,27,"useGameStore"],[80,50,81,27],[80,52,81,29,"s"],[80,53,81,30],[80,57,81,35,"s"],[80,58,81,36],[80,59,81,37,"user"],[80,63,81,41],[80,64,81,42],[81,4,82,2],[81,10,82,8],[81,11,82,9,"badge"],[81,16,82,14],[81,18,82,16,"setBadge"],[81,26,82,24],[81,27,82,25],[81,30,82,28],[81,34,82,28,"useState"],[81,40,82,36],[81,41,82,36,"useState"],[81,49,82,36],[81,51,82,37],[81,52,82,38],[81,53,82,39],[81,54,82,40],[81,55,82,41],[83,4,84,2],[83,8,84,2,"useEffect"],[83,14,84,11],[83,15,84,11,"useEffect"],[83,24,84,11],[83,26,84,12],[83,32,84,18],[84,6,85,4],[84,10,85,8],[84,11,85,9,"user"],[84,15,85,13],[84,17,85,15,"username"],[84,25,85,23],[84,27,85,25],[85,6,87,4],[85,10,87,4,"getMailSummary"],[85,18,87,18],[85,19,87,18,"getMailSummary"],[85,33,87,18],[85,35,87,19,"user"],[85,39,87,23],[85,40,87,24,"username"],[85,48,87,32],[85,49,87,33],[85,50,88,7,"then"],[85,54,88,11],[85,55,88,13,"data"],[85,59,88,17],[85,63,88,22],[86,8,89,8],[86,14,89,14,"total"],[86,19,89,19],[86,22,89,22,"data"],[86,26,89,26],[86,27,89,27,"rewardsAvailable"],[86,43,89,43],[86,46,89,46,"data"],[86,50,89,50],[86,51,89,51,"unreadMessages"],[86,65,89,65],[86,68,89,68,"data"],[86,72,89,72],[86,73,89,73,"giftsAvailable"],[86,87,89,87],[87,8,90,8,"setBadge"],[87,16,90,16],[87,17,90,17,"total"],[87,22,90,22],[87,23,90,23],[88,6,91,6],[88,7,91,7],[88,8,91,8],[88,9,92,7,"catch"],[88,14,92,12],[88,15,92,13],[88,21,92,19],[89,8,93,8],[90,6,93,8],[90,7,94,7],[90,8,94,8],[91,4,95,2],[91,5,95,3],[91,7,95,5],[91,8,95,6,"user"],[91,12,95,10],[91,14,95,12,"username"],[91,22,95,20],[91,23,95,21],[91,24,95,22],[92,4,97,2],[92,11,97,9,"badge"],[92,16,97,14],[93,2,98,0],[95,2,100,0],[96,0,101,0],[97,0,102,0],[98,2,103,7],[98,11,103,16,"useFriendsBadge"],[98,26,103,31,"useFriendsBadge"],[98,27,103,31],[98,29,103,42],[99,4,104,2],[99,10,104,8,"user"],[99,14,104,12],[99,17,104,15],[99,21,104,15,"useGameStore"],[99,37,104,27],[99,38,104,27,"useGameStore"],[99,50,104,27],[99,52,104,29,"s"],[99,53,104,30],[99,57,104,35,"s"],[99,58,104,36],[99,59,104,37,"user"],[99,63,104,41],[99,64,104,42],[100,4,105,2],[100,10,105,8],[100,11,105,9,"badge"],[100,16,105,14],[100,18,105,16,"setBadge"],[100,26,105,24],[100,27,105,25],[100,30,105,28],[100,34,105,28,"useState"],[100,40,105,36],[100,41,105,36,"useState"],[100,49,105,36],[100,51,105,37],[100,52,105,38],[100,53,105,39],[101,4,107,2],[101,8,107,2,"useEffect"],[101,14,107,11],[101,15,107,11,"useEffect"],[101,24,107,11],[101,26,107,12],[101,32,107,18],[102,6,108,4],[102,10,108,8],[102,11,108,9,"user"],[102,15,108,13],[102,17,108,15,"username"],[102,25,108,23],[102,27,108,25],[103,6,110,4],[103,10,110,4,"getFriendsSummary"],[103,21,110,21],[103,22,110,21,"getFriendsSummary"],[103,39,110,21],[103,41,110,22,"user"],[103,45,110,26],[103,46,110,27,"username"],[103,54,110,35],[103,55,110,36],[103,56,111,7,"then"],[103,60,111,11],[103,61,111,13,"data"],[103,65,111,17],[103,69,111,22],[104,8,112,8,"setBadge"],[104,16,112,16],[104,17,112,17,"data"],[104,21,112,21],[104,22,112,22,"pendingRequests"],[104,37,112,37],[104,38,112,38],[105,6,113,6],[105,7,113,7],[105,8,113,8],[105,9,114,7,"catch"],[105,14,114,12],[105,15,114,13],[105,21,114,19],[106,8,115,8],[107,6,115,8],[107,7,116,7],[107,8,116,8],[108,4,117,2],[108,5,117,3],[108,7,117,5],[108,8,117,6,"user"],[108,12,117,10],[108,14,117,12,"username"],[108,22,117,20],[108,23,117,21],[108,24,117,22],[109,4,119,2],[109,11,119,9,"badge"],[109,16,119,14],[110,2,120,0],[112,2,122,0],[113,0,123,0],[114,0,124,0],[115,0,125,0],[116,2,126,7],[116,11,126,16,"useEventsBadge"],[116,25,126,30,"useEventsBadge"],[116,26,126,30],[116,28,126,42],[117,4,127,2],[118,4,128,2],[118,11,128,9],[118,15,128,13],[119,2,129,0],[120,0,129,1],[120,3]],"functionMap":{"names":["<global>","useRailBadges","useGameStore$argument_0","useEffect$argument_0","fetchBadges","getMailSummary._catch$argument_0","getFriendsSummary._catch$argument_0","<anonymous>","useMailBadge","getMailSummary.then$argument_0","getMailSummary.then._catch$argument_0","useFriendsBadge","getFriendsSummary.then$argument_0","getFriendsSummary.then._catch$argument_0","useEventsBadge"],"mappings":"AAA;OC4B;4BCC,aD;YEO;wBCK;8CCG,qED;iDEC,+CF;KDe;WIO;KJG;GFC;CDG;OQK;4BNC,aM;YLG;YMI;ONG;aOC;OPE;GKC;CRG;OWK;4BTC,aS;YRG;YSI;OTE;aUC;OVE;GQC;CXG;OcM;CdG"},"hasCjsExports":false},"type":"js/module"}]}