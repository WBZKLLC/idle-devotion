{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":14,"index":78},"end":{"line":3,"column":38,"index":102}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}},{"name":"./types.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":14,"index":118},"end":{"line":4,"column":35,"index":139}}],"key":"v1w+pnJrgvUP3JbmDiiF/Rw8c9Q=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var utils = require(_dependencyMap[0], \"@sentry/utils\");\n  var types = require(_dependencyMap[1], \"./types.js\");\n\n  /**\n   * Default function implementing pageload and navigation transactions\n   */\n  function instrumentRoutingWithDefaults(customStartTransaction) {\n    var startTransactionOnPageLoad = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var startTransactionOnLocationChange = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    if (!types.WINDOW || !types.WINDOW.location) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.warn('Could not initialize routing instrumentation due to invalid location');\n      return;\n    }\n    var startingUrl = types.WINDOW.location.href;\n    var activeTransaction;\n    if (startTransactionOnPageLoad) {\n      activeTransaction = customStartTransaction({\n        name: types.WINDOW.location.pathname,\n        // pageload should always start at timeOrigin (and needs to be in s, not ms)\n        startTimestamp: utils.browserPerformanceTimeOrigin ? utils.browserPerformanceTimeOrigin / 1000 : undefined,\n        op: 'pageload',\n        origin: 'auto.pageload.browser',\n        metadata: {\n          source: 'url'\n        }\n      });\n    }\n    if (startTransactionOnLocationChange) {\n      utils.addInstrumentationHandler('history', _ref => {\n        var to = _ref.to,\n          from = _ref.from;\n        /**\n         * This early return is there to account for some cases where a navigation transaction starts right after\n         * long-running pageload. We make sure that if `from` is undefined and a valid `startingURL` exists, we don't\n         * create an uneccessary navigation transaction.\n         *\n         * This was hard to duplicate, but this behavior stopped as soon as this fix was applied. This issue might also\n         * only be caused in certain development environments where the usage of a hot module reloader is causing\n         * errors.\n         */\n        if (from === undefined && startingUrl && startingUrl.indexOf(to) !== -1) {\n          startingUrl = undefined;\n          return;\n        }\n        if (from !== to) {\n          startingUrl = undefined;\n          if (activeTransaction) {\n            (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.log(`[Tracing] Finishing current transaction with op: ${activeTransaction.op}`);\n            // If there's an open transaction on the scope, we need to finish it before creating an new one.\n            activeTransaction.finish();\n          }\n          activeTransaction = customStartTransaction({\n            name: types.WINDOW.location.pathname,\n            op: 'navigation',\n            origin: 'auto.navigation.browser',\n            metadata: {\n              source: 'url'\n            }\n          });\n        }\n      });\n    }\n  }\n  exports.instrumentRoutingWithDefaults = instrumentRoutingWithDefaults;\n});","lineCount":69,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,6,3,6,"utils"],[5,11,3,11],[5,14,3,14,"require"],[5,21,3,21],[5,22,3,21,"_dependencyMap"],[5,36,3,21],[5,56,3,37],[5,57,3,38],[6,2,4,0],[6,6,4,6,"types"],[6,11,4,11],[6,14,4,14,"require"],[6,21,4,21],[6,22,4,21,"_dependencyMap"],[6,36,4,21],[6,53,4,34],[6,54,4,35],[8,2,6,0],[9,0,7,0],[10,0,8,0],[11,2,9,0],[11,11,9,9,"instrumentRoutingWithDefaults"],[11,40,9,38,"instrumentRoutingWithDefaults"],[11,41,10,2,"customStartTransaction"],[11,63,10,24],[11,65,13,2],[12,4,13,2],[12,8,11,2,"startTransactionOnPageLoad"],[12,34,11,28],[12,37,11,28,"arguments"],[12,46,11,28],[12,47,11,28,"length"],[12,53,11,28],[12,61,11,28,"arguments"],[12,70,11,28],[12,78,11,28,"undefined"],[12,87,11,28],[12,90,11,28,"arguments"],[12,99,11,28],[12,105,11,31],[12,109,11,35],[13,4,11,35],[13,8,12,2,"startTransactionOnLocationChange"],[13,40,12,34],[13,43,12,34,"arguments"],[13,52,12,34],[13,53,12,34,"length"],[13,59,12,34],[13,67,12,34,"arguments"],[13,76,12,34],[13,84,12,34,"undefined"],[13,93,12,34],[13,96,12,34,"arguments"],[13,105,12,34],[13,111,12,37],[13,115,12,41],[14,4,14,2],[14,8,14,6],[14,9,14,7,"types"],[14,14,14,12],[14,15,14,13,"WINDOW"],[14,21,14,19],[14,25,14,23],[14,26,14,24,"types"],[14,31,14,29],[14,32,14,30,"WINDOW"],[14,38,14,36],[14,39,14,37,"location"],[14,47,14,45],[14,49,14,47],[15,6,15,4],[15,7,15,5],[15,14,15,12,"__SENTRY_DEBUG__"],[15,30,15,28],[15,35,15,33],[15,46,15,44],[15,50,15,48,"__SENTRY_DEBUG__"],[15,66,15,64],[15,71,15,69,"utils"],[15,76,15,74],[15,77,15,75,"logger"],[15,83,15,81],[15,84,15,82,"warn"],[15,88,15,86],[15,89,15,87],[15,159,15,157],[15,160,15,158],[16,6,16,4],[17,4,17,2],[18,4,19,2],[18,8,19,6,"startingUrl"],[18,19,19,17],[18,22,19,20,"types"],[18,27,19,25],[18,28,19,26,"WINDOW"],[18,34,19,32],[18,35,19,33,"location"],[18,43,19,41],[18,44,19,42,"href"],[18,48,19,46],[19,4,21,2],[19,8,21,6,"activeTransaction"],[19,25,21,23],[20,4,22,2],[20,8,22,6,"startTransactionOnPageLoad"],[20,34,22,32],[20,36,22,34],[21,6,23,4,"activeTransaction"],[21,23,23,21],[21,26,23,24,"customStartTransaction"],[21,48,23,46],[21,49,23,47],[22,8,24,6,"name"],[22,12,24,10],[22,14,24,12,"types"],[22,19,24,17],[22,20,24,18,"WINDOW"],[22,26,24,24],[22,27,24,25,"location"],[22,35,24,33],[22,36,24,34,"pathname"],[22,44,24,42],[23,8,25,6],[24,8,26,6,"startTimestamp"],[24,22,26,20],[24,24,26,22,"utils"],[24,29,26,27],[24,30,26,28,"browserPerformanceTimeOrigin"],[24,58,26,56],[24,61,26,59,"utils"],[24,66,26,64],[24,67,26,65,"browserPerformanceTimeOrigin"],[24,95,26,93],[24,98,26,96],[24,102,26,100],[24,105,26,103,"undefined"],[24,114,26,112],[25,8,27,6,"op"],[25,10,27,8],[25,12,27,10],[25,22,27,20],[26,8,28,6,"origin"],[26,14,28,12],[26,16,28,14],[26,39,28,37],[27,8,29,6,"metadata"],[27,16,29,14],[27,18,29,16],[28,10,29,18,"source"],[28,16,29,24],[28,18,29,26],[29,8,29,32],[30,6,30,4],[30,7,30,5],[30,8,30,6],[31,4,31,2],[32,4,33,2],[32,8,33,6,"startTransactionOnLocationChange"],[32,40,33,38],[32,42,33,40],[33,6,34,4,"utils"],[33,11,34,9],[33,12,34,10,"addInstrumentationHandler"],[33,37,34,35],[33,38,34,36],[33,47,34,45],[33,49,34,47,"_ref"],[33,53,34,47],[33,57,34,65],[34,8,34,65],[34,12,34,50,"to"],[34,14,34,52],[34,17,34,52,"_ref"],[34,21,34,52],[34,22,34,50,"to"],[34,24,34,52],[35,10,34,54,"from"],[35,14,34,58],[35,17,34,58,"_ref"],[35,21,34,58],[35,22,34,54,"from"],[35,26,34,58],[36,8,35,6],[37,0,36,0],[38,0,37,0],[39,0,38,0],[40,0,39,0],[41,0,40,0],[42,0,41,0],[43,0,42,0],[44,0,43,0],[45,8,44,6],[45,12,44,10,"from"],[45,16,44,14],[45,21,44,19,"undefined"],[45,30,44,28],[45,34,44,32,"startingUrl"],[45,45,44,43],[45,49,44,47,"startingUrl"],[45,60,44,58],[45,61,44,59,"indexOf"],[45,68,44,66],[45,69,44,67,"to"],[45,71,44,69],[45,72,44,70],[45,77,44,75],[45,78,44,76],[45,79,44,77],[45,81,44,79],[46,10,45,8,"startingUrl"],[46,21,45,19],[46,24,45,22,"undefined"],[46,33,45,31],[47,10,46,8],[48,8,47,6],[49,8,49,6],[49,12,49,10,"from"],[49,16,49,14],[49,21,49,19,"to"],[49,23,49,21],[49,25,49,23],[50,10,50,8,"startingUrl"],[50,21,50,19],[50,24,50,22,"undefined"],[50,33,50,31],[51,10,51,8],[51,14,51,12,"activeTransaction"],[51,31,51,29],[51,33,51,31],[52,12,52,10],[52,13,52,11],[52,20,52,18,"__SENTRY_DEBUG__"],[52,36,52,34],[52,41,52,39],[52,52,52,50],[52,56,52,54,"__SENTRY_DEBUG__"],[52,72,52,70],[52,77,52,75,"utils"],[52,82,52,80],[52,83,52,81,"logger"],[52,89,52,87],[52,90,52,88,"log"],[52,93,52,91],[52,94,52,92],[52,146,52,144,"activeTransaction"],[52,163,52,161],[52,164,52,162,"op"],[52,166,52,164],[52,168,52,166],[52,169,52,167],[53,12,53,10],[54,12,54,10,"activeTransaction"],[54,29,54,27],[54,30,54,28,"finish"],[54,36,54,34],[54,37,54,35],[54,38,54,36],[55,10,55,8],[56,10,56,8,"activeTransaction"],[56,27,56,25],[56,30,56,28,"customStartTransaction"],[56,52,56,50],[56,53,56,51],[57,12,57,10,"name"],[57,16,57,14],[57,18,57,16,"types"],[57,23,57,21],[57,24,57,22,"WINDOW"],[57,30,57,28],[57,31,57,29,"location"],[57,39,57,37],[57,40,57,38,"pathname"],[57,48,57,46],[58,12,58,10,"op"],[58,14,58,12],[58,16,58,14],[58,28,58,26],[59,12,59,10,"origin"],[59,18,59,16],[59,20,59,18],[59,45,59,43],[60,12,60,10,"metadata"],[60,20,60,18],[60,22,60,20],[61,14,60,22,"source"],[61,20,60,28],[61,22,60,30],[62,12,60,36],[63,10,61,8],[63,11,61,9],[63,12,61,10],[64,8,62,6],[65,6,63,4],[65,7,63,5],[65,8,63,6],[66,4,64,2],[67,2,65,0],[68,2,67,0,"exports"],[68,9,67,7],[68,10,67,8,"instrumentRoutingWithDefaults"],[68,39,67,37],[68,42,67,40,"instrumentRoutingWithDefaults"],[68,71,67,69],[69,0,67,70],[69,3]],"functionMap":{"names":["<global>","instrumentRoutingWithDefaults","utils.addInstrumentationHandler$argument_1"],"mappings":"AAA;ACQ;+CCyB;KD6B;CDE"},"hasCjsExports":true},"type":"js/module"}]}