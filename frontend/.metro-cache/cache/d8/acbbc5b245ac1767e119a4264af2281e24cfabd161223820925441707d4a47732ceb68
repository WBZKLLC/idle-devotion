{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.validateConfig = validateConfig;\n  exports.getBackendUrl = getBackendUrl;\n  Object.defineProperty(exports, \"getEnvironmentMode\", {\n    enumerable: true,\n    get: function () {\n      return getEnvironmentMode;\n    }\n  });\n  Object.defineProperty(exports, \"isProductionEnvironment\", {\n    enumerable: true,\n    get: function () {\n      return isProductionEnvironment;\n    }\n  });\n  Object.defineProperty(exports, \"isDevelopmentEnvironment\", {\n    enumerable: true,\n    get: function () {\n      return isDevelopmentEnvironment;\n    }\n  });\n  // /app/frontend/lib/config/validate.ts\n  // Startup config validation - catches misconfig early\n  // Phase 3.15: Enhanced with production build assertions\n  // Phase 3.15 P0 Revision B: Explicit environment detection via EXPO_PUBLIC_ENV\n\n  /**\n   * Environment modes for explicit control\n   * EXPO_PUBLIC_ENV takes precedence over __DEV__ for production detection\n   */\n\n  /**\n   * Get the explicit environment mode\n   * Priority:\n   * 1. EXPO_PUBLIC_ENV if set (explicit control)\n   * 2. __DEV__ as fallback (dev vs non-dev)\n   */\n  function getEnvironmentMode() {\n    const explicitEnv = process.env.EXPO_PUBLIC_ENV?.toLowerCase();\n    if (explicitEnv === 'production') return 'production';\n    if (explicitEnv === 'staging') return 'staging';\n    if (explicitEnv === 'development') return 'development';\n\n    // Fallback to __DEV__ if no explicit env set\n    return __DEV__ ? 'development' : 'production';\n  }\n\n  /**\n   * Detect if this is a production environment\n   * Uses explicit EXPO_PUBLIC_ENV if set, falls back to __DEV__\n   */\n  function isProductionEnvironment() {\n    return getEnvironmentMode() === 'production';\n  }\n\n  /**\n   * Detect if this is a development environment\n   */\n  function isDevelopmentEnvironment() {\n    return getEnvironmentMode() === 'development';\n  }\n\n  /**\n   * Validate critical configuration at startup\n   * \n   * Behavior by environment:\n   * - development: throws on errors (fail-fast for devs)\n   * - staging: logs errors but doesn't crash\n   * - production: logs errors but doesn't crash (graceful degradation)\n   * \n   * Phase 3.15: Enhanced with production-specific validations\n   * Phase 3.15 P0 Revision B: Uses EXPO_PUBLIC_ENV for explicit control\n   */\n  function validateConfig() {\n    const errors = [];\n    const warnings = [];\n    const envMode = getEnvironmentMode();\n    const isProd = isProductionEnvironment();\n\n    // Log the environment mode for debugging\n    console.log(`[config] Environment mode: ${envMode} (EXPO_PUBLIC_ENV=${process.env.EXPO_PUBLIC_ENV ?? 'not set'}, __DEV__=${__DEV__})`);\n\n    // ==========================================================================\n    // REQUIRED: Backend URL\n    // ==========================================================================\n    const backend = process.env.EXPO_PUBLIC_BACKEND_URL;\n    if (!backend) {\n      errors.push('Missing EXPO_PUBLIC_BACKEND_URL');\n    } else if (!backend.startsWith('http://') && !backend.startsWith('https://')) {\n      errors.push('EXPO_PUBLIC_BACKEND_URL must start with http:// or https://');\n    } else if (isProd && !backend.startsWith('https://')) {\n      // Phase 3.15: Production builds SHOULD use HTTPS\n      warnings.push('EXPO_PUBLIC_BACKEND_URL should use https:// in production');\n    }\n\n    // ==========================================================================\n    // RECOMMENDED: Sentry DSN (critical for prod crash reporting)\n    // ==========================================================================\n    const sentryDsn = process.env.EXPO_PUBLIC_SENTRY_DSN;\n    if (!sentryDsn && isProd) {\n      warnings.push('No EXPO_PUBLIC_SENTRY_DSN - crash reporting disabled in production');\n    }\n\n    // ==========================================================================\n    // RECOMMENDED: Analytics (optional but useful for production)\n    // ==========================================================================\n    const analyticsEnabled = process.env.EXPO_PUBLIC_ANALYTICS_ENABLED;\n    if (isProd && analyticsEnabled !== 'true') {\n      // Just informational - analytics is optional\n      console.log('[config] Analytics disabled in production (EXPO_PUBLIC_ANALYTICS_ENABLED !== \"true\")');\n    }\n\n    // ==========================================================================\n    // INFO: RevenueCat (client-side SDK - only warn if missing)\n    // ==========================================================================\n    const revenueCatKey = process.env.EXPO_PUBLIC_REVENUECAT_API_KEY;\n    if (!revenueCatKey && isProd) {\n      warnings.push('No EXPO_PUBLIC_REVENUECAT_API_KEY - RevenueCat SDK disabled');\n    }\n\n    // ==========================================================================\n    // P0 Revision B: Warn if production build without explicit EXPO_PUBLIC_ENV\n    // ==========================================================================\n    if (!__DEV__ && !process.env.EXPO_PUBLIC_ENV) {\n      warnings.push('Release build detected but EXPO_PUBLIC_ENV not set - assuming production (set explicitly for clarity)');\n    }\n\n    // ==========================================================================\n    // Report warnings (logged but don't prevent startup)\n    // ==========================================================================\n    if (warnings.length > 0) {\n      const warningMsg = `[config] Configuration warnings:\\n${warnings.map(w => `  ⚠️ ${w}`).join('\\n')}`;\n      console.warn(warningMsg);\n    }\n\n    // ==========================================================================\n    // Report errors (critical issues)\n    // ==========================================================================\n    if (errors.length > 0) {\n      const message = `[config] Configuration errors:\\n${errors.map(e => `  ❌ ${e}`).join('\\n')}`;\n      if (isDevelopmentEnvironment()) {\n        // In dev, throw to make it obvious\n        throw new Error(message);\n      } else {\n        // In staging/prod, log but don't crash - app may still partially work\n        console.error(message);\n      }\n    }\n\n    // Success\n    if (errors.length === 0) {\n      console.log(`[config] ✅ Configuration validated (${envMode} mode)`);\n    }\n  }\n\n  /**\n   * Get validated backend URL\n   */\n  function getBackendUrl() {\n    const url = process.env.EXPO_PUBLIC_BACKEND_URL;\n    if (!url) {\n      throw new Error('EXPO_PUBLIC_BACKEND_URL is not configured');\n    }\n    return url.replace(/\\/$/, ''); // Remove trailing slash\n  }\n\n  /**\n   * Export environment helpers for use elsewhere\n   */\n});","lineCount":175,"map":[[7,2,55,0,"exports"],[7,9,55,0],[7,10,55,0,"validateConfig"],[7,24,55,0],[7,27,55,0,"validateConfig"],[7,41,55,0],[8,2,141,0,"exports"],[8,9,141,0],[8,10,141,0,"getBackendUrl"],[8,23,141,0],[8,26,141,0,"getBackendUrl"],[8,39,141,0],[9,2,152,0,"Object"],[9,8,152,0],[9,9,152,0,"defineProperty"],[9,23,152,0],[9,24,152,0,"exports"],[9,31,152,0],[10,4,152,0,"enumerable"],[10,14,152,0],[11,4,152,0,"get"],[11,7,152,0],[11,18,152,0,"get"],[11,19,152,0],[12,6,152,0],[12,13,152,9,"getEnvironmentMode"],[12,31,152,27],[13,4,152,27],[14,2,152,27],[15,2,152,0,"Object"],[15,8,152,0],[15,9,152,0,"defineProperty"],[15,23,152,0],[15,24,152,0,"exports"],[15,31,152,0],[16,4,152,0,"enumerable"],[16,14,152,0],[17,4,152,0,"get"],[17,7,152,0],[17,18,152,0,"get"],[17,19,152,0],[18,6,152,0],[18,13,152,29,"isProductionEnvironment"],[18,36,152,52],[19,4,152,52],[20,2,152,52],[21,2,152,0,"Object"],[21,8,152,0],[21,9,152,0,"defineProperty"],[21,23,152,0],[21,24,152,0,"exports"],[21,31,152,0],[22,4,152,0,"enumerable"],[22,14,152,0],[23,4,152,0,"get"],[23,7,152,0],[23,18,152,0,"get"],[23,19,152,0],[24,6,152,0],[24,13,152,54,"isDevelopmentEnvironment"],[24,37,152,78],[25,4,152,78],[26,2,152,78],[27,2,1,0],[28,2,2,0],[29,2,3,0],[30,2,4,0],[32,2,6,0],[33,0,7,0],[34,0,8,0],[35,0,9,0],[37,2,12,0],[38,0,13,0],[39,0,14,0],[40,0,15,0],[41,0,16,0],[42,0,17,0],[43,2,18,0],[43,11,18,9,"getEnvironmentMode"],[43,29,18,27,"getEnvironmentMode"],[43,30,18,27],[43,32,18,47],[44,4,19,2],[44,10,19,8,"explicitEnv"],[44,21,19,19],[44,24,19,22,"process"],[44,31,19,29],[44,32,19,30,"env"],[44,35,19,33],[44,36,19,34,"EXPO_PUBLIC_ENV"],[44,51,19,49],[44,53,19,51,"toLowerCase"],[44,64,19,62],[44,65,19,63],[44,66,19,64],[45,4,21,2],[45,8,21,6,"explicitEnv"],[45,19,21,17],[45,24,21,22],[45,36,21,34],[45,38,21,36],[45,45,21,43],[45,57,21,55],[46,4,22,2],[46,8,22,6,"explicitEnv"],[46,19,22,17],[46,24,22,22],[46,33,22,31],[46,35,22,33],[46,42,22,40],[46,51,22,49],[47,4,23,2],[47,8,23,6,"explicitEnv"],[47,19,23,17],[47,24,23,22],[47,37,23,35],[47,39,23,37],[47,46,23,44],[47,59,23,57],[49,4,25,2],[50,4,26,2],[50,11,26,9,"__DEV__"],[50,18,26,16],[50,21,26,19],[50,34,26,32],[50,37,26,35],[50,49,26,47],[51,2,27,0],[53,2,29,0],[54,0,30,0],[55,0,31,0],[56,0,32,0],[57,2,33,0],[57,11,33,9,"isProductionEnvironment"],[57,34,33,32,"isProductionEnvironment"],[57,35,33,32],[57,37,33,44],[58,4,34,2],[58,11,34,9,"getEnvironmentMode"],[58,29,34,27],[58,30,34,28],[58,31,34,29],[58,36,34,34],[58,48,34,46],[59,2,35,0],[61,2,37,0],[62,0,38,0],[63,0,39,0],[64,2,40,0],[64,11,40,9,"isDevelopmentEnvironment"],[64,35,40,33,"isDevelopmentEnvironment"],[64,36,40,33],[64,38,40,45],[65,4,41,2],[65,11,41,9,"getEnvironmentMode"],[65,29,41,27],[65,30,41,28],[65,31,41,29],[65,36,41,34],[65,49,41,47],[66,2,42,0],[68,2,44,0],[69,0,45,0],[70,0,46,0],[71,0,47,0],[72,0,48,0],[73,0,49,0],[74,0,50,0],[75,0,51,0],[76,0,52,0],[77,0,53,0],[78,0,54,0],[79,2,55,7],[79,11,55,16,"validateConfig"],[79,25,55,30,"validateConfig"],[79,26,55,30],[79,28,55,39],[80,4,56,2],[80,10,56,8,"errors"],[80,16,56,24],[80,19,56,27],[80,21,56,29],[81,4,57,2],[81,10,57,8,"warnings"],[81,18,57,26],[81,21,57,29],[81,23,57,31],[82,4,58,2],[82,10,58,8,"envMode"],[82,17,58,15],[82,20,58,18,"getEnvironmentMode"],[82,38,58,36],[82,39,58,37],[82,40,58,38],[83,4,59,2],[83,10,59,8,"isProd"],[83,16,59,14],[83,19,59,17,"isProductionEnvironment"],[83,42,59,40],[83,43,59,41],[83,44,59,42],[85,4,61,2],[86,4,62,2,"console"],[86,11,62,9],[86,12,62,10,"log"],[86,15,62,13],[86,16,62,14],[86,46,62,44,"envMode"],[86,53,62,51],[86,74,62,72,"process"],[86,81,62,79],[86,82,62,80,"env"],[86,85,62,83],[86,86,62,84,"EXPO_PUBLIC_ENV"],[86,101,62,99],[86,105,62,103],[86,114,62,112],[86,127,62,125,"__DEV__"],[86,134,62,132],[86,137,62,135],[86,138,62,136],[88,4,64,2],[89,4,65,2],[90,4,66,2],[91,4,67,2],[91,10,67,8,"backend"],[91,17,67,15],[91,20,67,18,"process"],[91,27,67,25],[91,28,67,26,"env"],[91,31,67,29],[91,32,67,30,"EXPO_PUBLIC_BACKEND_URL"],[91,55,67,53],[92,4,68,2],[92,8,68,6],[92,9,68,7,"backend"],[92,16,68,14],[92,18,68,16],[93,6,69,4,"errors"],[93,12,69,10],[93,13,69,11,"push"],[93,17,69,15],[93,18,69,16],[93,51,69,49],[93,52,69,50],[94,4,70,2],[94,5,70,3],[94,11,70,9],[94,15,70,13],[94,16,70,14,"backend"],[94,23,70,21],[94,24,70,22,"startsWith"],[94,34,70,32],[94,35,70,33],[94,44,70,42],[94,45,70,43],[94,49,70,47],[94,50,70,48,"backend"],[94,57,70,55],[94,58,70,56,"startsWith"],[94,68,70,66],[94,69,70,67],[94,79,70,77],[94,80,70,78],[94,82,70,80],[95,6,71,4,"errors"],[95,12,71,10],[95,13,71,11,"push"],[95,17,71,15],[95,18,71,16],[95,79,71,77],[95,80,71,78],[96,4,72,2],[96,5,72,3],[96,11,72,9],[96,15,72,13,"isProd"],[96,21,72,19],[96,25,72,23],[96,26,72,24,"backend"],[96,33,72,31],[96,34,72,32,"startsWith"],[96,44,72,42],[96,45,72,43],[96,55,72,53],[96,56,72,54],[96,58,72,56],[97,6,73,4],[98,6,74,4,"warnings"],[98,14,74,12],[98,15,74,13,"push"],[98,19,74,17],[98,20,74,18],[98,79,74,77],[98,80,74,78],[99,4,75,2],[101,4,77,2],[102,4,78,2],[103,4,79,2],[104,4,80,2],[104,10,80,8,"sentryDsn"],[104,19,80,17],[104,22,80,20,"process"],[104,29,80,27],[104,30,80,28,"env"],[104,33,80,31],[104,34,80,32,"EXPO_PUBLIC_SENTRY_DSN"],[104,56,80,54],[105,4,81,2],[105,8,81,6],[105,9,81,7,"sentryDsn"],[105,18,81,16],[105,22,81,20,"isProd"],[105,28,81,26],[105,30,81,28],[106,6,82,4,"warnings"],[106,14,82,12],[106,15,82,13,"push"],[106,19,82,17],[106,20,82,18],[106,88,82,86],[106,89,82,87],[107,4,83,2],[109,4,85,2],[110,4,86,2],[111,4,87,2],[112,4,88,2],[112,10,88,8,"analyticsEnabled"],[112,26,88,24],[112,29,88,27,"process"],[112,36,88,34],[112,37,88,35,"env"],[112,40,88,38],[112,41,88,39,"EXPO_PUBLIC_ANALYTICS_ENABLED"],[112,70,88,68],[113,4,89,2],[113,8,89,6,"isProd"],[113,14,89,12],[113,18,89,16,"analyticsEnabled"],[113,34,89,32],[113,39,89,37],[113,45,89,43],[113,47,89,45],[114,6,90,4],[115,6,91,4,"console"],[115,13,91,11],[115,14,91,12,"log"],[115,17,91,15],[115,18,91,16],[115,104,91,102],[115,105,91,103],[116,4,92,2],[118,4,94,2],[119,4,95,2],[120,4,96,2],[121,4,97,2],[121,10,97,8,"revenueCatKey"],[121,23,97,21],[121,26,97,24,"process"],[121,33,97,31],[121,34,97,32,"env"],[121,37,97,35],[121,38,97,36,"EXPO_PUBLIC_REVENUECAT_API_KEY"],[121,68,97,66],[122,4,98,2],[122,8,98,6],[122,9,98,7,"revenueCatKey"],[122,22,98,20],[122,26,98,24,"isProd"],[122,32,98,30],[122,34,98,32],[123,6,99,4,"warnings"],[123,14,99,12],[123,15,99,13,"push"],[123,19,99,17],[123,20,99,18],[123,81,99,79],[123,82,99,80],[124,4,100,2],[126,4,102,2],[127,4,103,2],[128,4,104,2],[129,4,105,2],[129,8,105,6],[129,9,105,7,"__DEV__"],[129,16,105,14],[129,20,105,18],[129,21,105,19,"process"],[129,28,105,26],[129,29,105,27,"env"],[129,32,105,30],[129,33,105,31,"EXPO_PUBLIC_ENV"],[129,48,105,46],[129,50,105,48],[130,6,106,4,"warnings"],[130,14,106,12],[130,15,106,13,"push"],[130,19,106,17],[130,20,106,18],[130,123,106,121],[130,124,106,122],[131,4,107,2],[133,4,109,2],[134,4,110,2],[135,4,111,2],[136,4,112,2],[136,8,112,6,"warnings"],[136,16,112,14],[136,17,112,15,"length"],[136,23,112,21],[136,26,112,24],[136,27,112,25],[136,29,112,27],[137,6,113,4],[137,12,113,10,"warningMsg"],[137,22,113,20],[137,25,113,23],[137,62,113,60,"warnings"],[137,70,113,68],[137,71,113,69,"map"],[137,74,113,72],[137,75,113,73,"w"],[137,76,113,74],[137,80,113,78],[137,88,113,86,"w"],[137,89,113,87],[137,91,113,89],[137,92,113,90],[137,93,113,91,"join"],[137,97,113,95],[137,98,113,96],[137,102,113,100],[137,103,113,101],[137,105,113,103],[138,6,114,4,"console"],[138,13,114,11],[138,14,114,12,"warn"],[138,18,114,16],[138,19,114,17,"warningMsg"],[138,29,114,27],[138,30,114,28],[139,4,115,2],[141,4,117,2],[142,4,118,2],[143,4,119,2],[144,4,120,2],[144,8,120,6,"errors"],[144,14,120,12],[144,15,120,13,"length"],[144,21,120,19],[144,24,120,22],[144,25,120,23],[144,27,120,25],[145,6,121,4],[145,12,121,10,"message"],[145,19,121,17],[145,22,121,20],[145,57,121,55,"errors"],[145,63,121,61],[145,64,121,62,"map"],[145,67,121,65],[145,68,121,66,"e"],[145,69,121,67],[145,73,121,71],[145,80,121,78,"e"],[145,81,121,79],[145,83,121,81],[145,84,121,82],[145,85,121,83,"join"],[145,89,121,87],[145,90,121,88],[145,94,121,92],[145,95,121,93],[145,97,121,95],[146,6,123,4],[146,10,123,8,"isDevelopmentEnvironment"],[146,34,123,32],[146,35,123,33],[146,36,123,34],[146,38,123,36],[147,8,124,6],[148,8,125,6],[148,14,125,12],[148,18,125,16,"Error"],[148,23,125,21],[148,24,125,22,"message"],[148,31,125,29],[148,32,125,30],[149,6,126,4],[149,7,126,5],[149,13,126,11],[150,8,127,6],[151,8,128,6,"console"],[151,15,128,13],[151,16,128,14,"error"],[151,21,128,19],[151,22,128,20,"message"],[151,29,128,27],[151,30,128,28],[152,6,129,4],[153,4,130,2],[155,4,132,2],[156,4,133,2],[156,8,133,6,"errors"],[156,14,133,12],[156,15,133,13,"length"],[156,21,133,19],[156,26,133,24],[156,27,133,25],[156,29,133,27],[157,6,134,4,"console"],[157,13,134,11],[157,14,134,12,"log"],[157,17,134,15],[157,18,134,16],[157,57,134,55,"envMode"],[157,64,134,62],[157,72,134,70],[157,73,134,71],[158,4,135,2],[159,2,136,0],[161,2,138,0],[162,0,139,0],[163,0,140,0],[164,2,141,7],[164,11,141,16,"getBackendUrl"],[164,24,141,29,"getBackendUrl"],[164,25,141,29],[164,27,141,40],[165,4,142,2],[165,10,142,8,"url"],[165,13,142,11],[165,16,142,14,"process"],[165,23,142,21],[165,24,142,22,"env"],[165,27,142,25],[165,28,142,26,"EXPO_PUBLIC_BACKEND_URL"],[165,51,142,49],[166,4,143,2],[166,8,143,6],[166,9,143,7,"url"],[166,12,143,10],[166,14,143,12],[167,6,144,4],[167,12,144,10],[167,16,144,14,"Error"],[167,21,144,19],[167,22,144,20],[167,65,144,63],[167,66,144,64],[168,4,145,2],[169,4,146,2],[169,11,146,9,"url"],[169,14,146,12],[169,15,146,13,"replace"],[169,22,146,20],[169,23,146,21],[169,28,146,26],[169,30,146,28],[169,32,146,30],[169,33,146,31],[169,34,146,32],[169,35,146,33],[170,2,147,0],[172,2,149,0],[173,0,150,0],[174,0,151,0],[175,0,149,0],[175,3]],"functionMap":{"names":["<global>","getEnvironmentMode","isProductionEnvironment","isDevelopmentEnvironment","validateConfig","warnings.map$argument_0","errors.map$argument_0","getBackendUrl"],"mappings":"AAA;ACiB;CDS;AEM;CFE;AGK;CHE;OIa;yEC0D,gBD;kEEQ,eF;CJe;OOK;CPM"},"hasCjsExports":false},"type":"js/module"}]}