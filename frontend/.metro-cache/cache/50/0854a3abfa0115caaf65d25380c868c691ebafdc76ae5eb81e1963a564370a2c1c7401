{"dependencies":[{"name":"./lib/bindReporter.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":21,"index":85},"end":{"line":3,"column":53,"index":117}}],"key":"xKmA94sAhtZQYO98ftMHq88nPKQ=","exportNames":["*"],"imports":1}},{"name":"./lib/getActivationStart.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":27,"index":146},"end":{"line":4,"column":65,"index":184}}],"key":"T1dZA/rOLbsIi+9Ag8rBn8QMf9A=","exportNames":["*"],"imports":1}},{"name":"./lib/getVisibilityWatcher.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":29,"index":215},"end":{"line":5,"column":69,"index":255}}],"key":"ajC9wcCQ9DfgpIoLpixb4KFEmSM=","exportNames":["*"],"imports":1}},{"name":"./lib/initMetric.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":19,"index":276},"end":{"line":6,"column":49,"index":306}}],"key":"njevEqeFK+/xQTCDa0xtuGux8DY=","exportNames":["*"],"imports":1}},{"name":"./lib/observe.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":16,"index":324},"end":{"line":7,"column":43,"index":351}}],"key":"QDJQmviNIvdbbOYvTEjZYzZJeJI=","exportNames":["*"],"imports":1}},{"name":"./lib/onHidden.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":17,"index":370},"end":{"line":8,"column":45,"index":398}}],"key":"AB9tXPaqUfoJhofw95m1PM+P+Oo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const bindReporter = require(_dependencyMap[0], \"./lib/bindReporter.js\");\n  const getActivationStart = require(_dependencyMap[1], \"./lib/getActivationStart.js\");\n  const getVisibilityWatcher = require(_dependencyMap[2], \"./lib/getVisibilityWatcher.js\");\n  const initMetric = require(_dependencyMap[3], \"./lib/initMetric.js\");\n  const observe = require(_dependencyMap[4], \"./lib/observe.js\");\n  const onHidden = require(_dependencyMap[5], \"./lib/onHidden.js\");\n\n  /*\n   * Copyright 2020 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  const reportedMetricIDs = {};\n\n  /**\n   * Calculates the [LCP](https://web.dev/lcp/) value for the current page and\n   * calls the `callback` function once the value is ready (along with the\n   * relevant `largest-contentful-paint` performance entry used to determine the\n   * value). The reported value is a `DOMHighResTimeStamp`.\n   */\n  const onLCP = onReport => {\n    const visibilityWatcher = getVisibilityWatcher.getVisibilityWatcher();\n    const metric = initMetric.initMetric('LCP');\n    let report;\n    const handleEntries = entries => {\n      const lastEntry = entries[entries.length - 1];\n      if (lastEntry) {\n        // The startTime attribute returns the value of the renderTime if it is\n        // not 0, and the value of the loadTime otherwise. The activationStart\n        // reference is used because LCP should be relative to page activation\n        // rather than navigation start if the page was prerendered.\n        const value = Math.max(lastEntry.startTime - getActivationStart.getActivationStart(), 0);\n\n        // Only report if the page wasn't hidden prior to LCP.\n        if (value < visibilityWatcher.firstHiddenTime) {\n          metric.value = value;\n          metric.entries = [lastEntry];\n          report();\n        }\n      }\n    };\n    const po = observe.observe('largest-contentful-paint', handleEntries);\n    if (po) {\n      report = bindReporter.bindReporter(onReport, metric);\n      const stopListening = () => {\n        if (!reportedMetricIDs[metric.id]) {\n          handleEntries(po.takeRecords());\n          po.disconnect();\n          reportedMetricIDs[metric.id] = true;\n          report(true);\n        }\n      };\n\n      // Stop listening after input. Note: while scrolling is an input that\n      // stop LCP observation, it's unreliable since it can be programmatically\n      // generated. See: https://github.com/GoogleChrome/web-vitals/issues/75\n      ['keydown', 'click'].forEach(type => {\n        addEventListener(type, stopListening, {\n          once: true,\n          capture: true\n        });\n      });\n      onHidden.onHidden(stopListening, true);\n      return stopListening;\n    }\n    return;\n  };\n  exports.onLCP = onLCP;\n});","lineCount":84,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"bindReporter"],[5,20,3,18],[5,23,3,21,"require"],[5,30,3,28],[5,31,3,28,"_dependencyMap"],[5,45,3,28],[5,73,3,52],[5,74,3,53],[6,2,4,0],[6,8,4,6,"getActivationStart"],[6,26,4,24],[6,29,4,27,"require"],[6,36,4,34],[6,37,4,34,"_dependencyMap"],[6,51,4,34],[6,85,4,64],[6,86,4,65],[7,2,5,0],[7,8,5,6,"getVisibilityWatcher"],[7,28,5,26],[7,31,5,29,"require"],[7,38,5,36],[7,39,5,36,"_dependencyMap"],[7,53,5,36],[7,89,5,68],[7,90,5,69],[8,2,6,0],[8,8,6,6,"initMetric"],[8,18,6,16],[8,21,6,19,"require"],[8,28,6,26],[8,29,6,26,"_dependencyMap"],[8,43,6,26],[8,69,6,48],[8,70,6,49],[9,2,7,0],[9,8,7,6,"observe"],[9,15,7,13],[9,18,7,16,"require"],[9,25,7,23],[9,26,7,23,"_dependencyMap"],[9,40,7,23],[9,63,7,42],[9,64,7,43],[10,2,8,0],[10,8,8,6,"onHidden"],[10,16,8,14],[10,19,8,17,"require"],[10,26,8,24],[10,27,8,24,"_dependencyMap"],[10,41,8,24],[10,65,8,44],[10,66,8,45],[12,2,10,0],[13,0,11,0],[14,0,12,0],[15,0,13,0],[16,0,14,0],[17,0,15,0],[18,0,16,0],[19,0,17,0],[20,0,18,0],[21,0,19,0],[22,0,20,0],[23,0,21,0],[24,0,22,0],[25,0,23,0],[26,0,24,0],[28,2,26,0],[28,8,26,6,"reportedMetricIDs"],[28,25,26,23],[28,28,26,26],[28,29,26,27],[28,30,26,28],[30,2,28,0],[31,0,29,0],[32,0,30,0],[33,0,31,0],[34,0,32,0],[35,0,33,0],[36,2,34,0],[36,8,34,6,"onLCP"],[36,13,34,11],[36,16,34,15,"onReport"],[36,24,34,23],[36,28,34,28],[37,4,35,2],[37,10,35,8,"visibilityWatcher"],[37,27,35,25],[37,30,35,28,"getVisibilityWatcher"],[37,50,35,48],[37,51,35,49,"getVisibilityWatcher"],[37,71,35,69],[37,72,35,70],[37,73,35,71],[38,4,36,2],[38,10,36,8,"metric"],[38,16,36,14],[38,19,36,17,"initMetric"],[38,29,36,27],[38,30,36,28,"initMetric"],[38,40,36,38],[38,41,36,39],[38,46,36,44],[38,47,36,45],[39,4,37,2],[39,8,37,6,"report"],[39,14,37,12],[40,4,39,2],[40,10,39,8,"handleEntries"],[40,23,39,21],[40,26,39,25,"entries"],[40,33,39,32],[40,37,39,37],[41,6,40,4],[41,12,40,10,"lastEntry"],[41,21,40,19],[41,24,40,22,"entries"],[41,31,40,29],[41,32,40,30,"entries"],[41,39,40,37],[41,40,40,38,"length"],[41,46,40,44],[41,49,40,47],[41,50,40,48],[41,51,40,49],[42,6,41,4],[42,10,41,8,"lastEntry"],[42,19,41,17],[42,21,41,19],[43,8,42,6],[44,8,43,6],[45,8,44,6],[46,8,45,6],[47,8,46,6],[47,14,46,12,"value"],[47,19,46,17],[47,22,46,20,"Math"],[47,26,46,24],[47,27,46,25,"max"],[47,30,46,28],[47,31,46,29,"lastEntry"],[47,40,46,38],[47,41,46,39,"startTime"],[47,50,46,48],[47,53,46,51,"getActivationStart"],[47,71,46,69],[47,72,46,70,"getActivationStart"],[47,90,46,88],[47,91,46,89],[47,92,46,90],[47,94,46,92],[47,95,46,93],[47,96,46,94],[49,8,48,6],[50,8,49,6],[50,12,49,10,"value"],[50,17,49,15],[50,20,49,18,"visibilityWatcher"],[50,37,49,35],[50,38,49,36,"firstHiddenTime"],[50,53,49,51],[50,55,49,53],[51,10,50,8,"metric"],[51,16,50,14],[51,17,50,15,"value"],[51,22,50,20],[51,25,50,23,"value"],[51,30,50,28],[52,10,51,8,"metric"],[52,16,51,14],[52,17,51,15,"entries"],[52,24,51,22],[52,27,51,25],[52,28,51,26,"lastEntry"],[52,37,51,35],[52,38,51,36],[53,10,52,8,"report"],[53,16,52,14],[53,17,52,15],[53,18,52,16],[54,8,53,6],[55,6,54,4],[56,4,55,2],[56,5,55,3],[57,4,57,2],[57,10,57,8,"po"],[57,12,57,10],[57,15,57,13,"observe"],[57,22,57,20],[57,23,57,21,"observe"],[57,30,57,28],[57,31,57,29],[57,57,57,55],[57,59,57,57,"handleEntries"],[57,72,57,70],[57,73,57,71],[58,4,59,2],[58,8,59,6,"po"],[58,10,59,8],[58,12,59,10],[59,6,60,4,"report"],[59,12,60,10],[59,15,60,13,"bindReporter"],[59,27,60,25],[59,28,60,26,"bindReporter"],[59,40,60,38],[59,41,60,39,"onReport"],[59,49,60,47],[59,51,60,49,"metric"],[59,57,60,55],[59,58,60,56],[60,6,62,4],[60,12,62,10,"stopListening"],[60,25,62,23],[60,28,62,26,"stopListening"],[60,29,62,26],[60,34,62,32],[61,8,63,6],[61,12,63,10],[61,13,63,11,"reportedMetricIDs"],[61,30,63,28],[61,31,63,29,"metric"],[61,37,63,35],[61,38,63,36,"id"],[61,40,63,38],[61,41,63,39],[61,43,63,41],[62,10,64,8,"handleEntries"],[62,23,64,21],[62,24,64,22,"po"],[62,26,64,24],[62,27,64,25,"takeRecords"],[62,38,64,36],[62,39,64,37],[62,40,64,39],[62,41,64,40],[63,10,65,8,"po"],[63,12,65,10],[63,13,65,11,"disconnect"],[63,23,65,21],[63,24,65,22],[63,25,65,23],[64,10,66,8,"reportedMetricIDs"],[64,27,66,25],[64,28,66,26,"metric"],[64,34,66,32],[64,35,66,33,"id"],[64,37,66,35],[64,38,66,36],[64,41,66,39],[64,45,66,43],[65,10,67,8,"report"],[65,16,67,14],[65,17,67,15],[65,21,67,19],[65,22,67,20],[66,8,68,6],[67,6,69,4],[67,7,69,5],[69,6,71,4],[70,6,72,4],[71,6,73,4],[72,6,74,4],[72,7,74,5],[72,16,74,14],[72,18,74,16],[72,25,74,23],[72,26,74,24],[72,27,74,25,"forEach"],[72,34,74,32],[72,35,74,33,"type"],[72,39,74,37],[72,43,74,41],[73,8,75,6,"addEventListener"],[73,24,75,22],[73,25,75,23,"type"],[73,29,75,27],[73,31,75,29,"stopListening"],[73,44,75,42],[73,46,75,44],[74,10,75,46,"once"],[74,14,75,50],[74,16,75,52],[74,20,75,56],[75,10,75,58,"capture"],[75,17,75,65],[75,19,75,67],[76,8,75,72],[76,9,75,73],[76,10,75,74],[77,6,76,4],[77,7,76,5],[77,8,76,6],[78,6,78,4,"onHidden"],[78,14,78,12],[78,15,78,13,"onHidden"],[78,23,78,21],[78,24,78,22,"stopListening"],[78,37,78,35],[78,39,78,37],[78,43,78,41],[78,44,78,42],[79,6,80,4],[79,13,80,11,"stopListening"],[79,26,80,24],[80,4,81,2],[81,4,83,2],[82,2,84,0],[82,3,84,1],[83,2,86,0,"exports"],[83,9,86,7],[83,10,86,8,"onLCP"],[83,15,86,13],[83,18,86,16,"onLCP"],[83,23,86,21],[84,0,86,22],[84,3]],"functionMap":{"names":["<global>","onLCP","handleEntries","stopListening","forEach$argument_0"],"mappings":"AAA;cCiC;wBCK;GDgB;0BEO;KFO;iCGK;KHE;CDQ"},"hasCjsExports":true},"type":"js/module"}]}