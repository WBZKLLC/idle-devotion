{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"MAX_STAR_TIER\", {\n    enumerable: true,\n    get: function () {\n      return MAX_STAR_TIER;\n    }\n  });\n  Object.defineProperty(exports, \"MAX_AWAKENING_TIER\", {\n    enumerable: true,\n    get: function () {\n      return MAX_AWAKENING_TIER;\n    }\n  });\n  Object.defineProperty(exports, \"displayStars\", {\n    enumerable: true,\n    get: function () {\n      return displayStars;\n    }\n  });\n  Object.defineProperty(exports, \"unlockedTierForHero\", {\n    enumerable: true,\n    get: function () {\n      return unlockedTierForHero;\n    }\n  });\n  Object.defineProperty(exports, \"effectiveTierForHero\", {\n    enumerable: true,\n    get: function () {\n      return effectiveTierForHero;\n    }\n  });\n  Object.defineProperty(exports, \"resolveTierArt\", {\n    enumerable: true,\n    get: function () {\n      return resolveTierArt;\n    }\n  });\n  Object.defineProperty(exports, \"computeUserMaxUnlockedTier\", {\n    enumerable: true,\n    get: function () {\n      return computeUserMaxUnlockedTier;\n    }\n  });\n  Object.defineProperty(exports, \"TIER_LABELS\", {\n    enumerable: true,\n    get: function () {\n      return TIER_LABELS;\n    }\n  });\n  Object.defineProperty(exports, \"TIER_LABEL_ARRAY\", {\n    enumerable: true,\n    get: function () {\n      return TIER_LABEL_ARRAY;\n    }\n  });\n  // /app/frontend/lib/tier.ts\n  // SINGLE SOURCE OF TRUTH for stars → tiers → art → gating\n  // DO NOT reimplement this logic elsewhere\n\n  // 1–6 = Star tiers (currently active)\n  // 7–10 = Future Awakening tiers (NOT ACTIVE YET)\n\n  // UI should clamp to MAX_STAR_TIER for now\n  const MAX_STAR_TIER = 6;\n  const MAX_AWAKENING_TIER = 10;\n\n  /**\n   * Raw backend stars (0–6). UI shows EXACT value.\n   */\n  const displayStars = hero => {\n    const s = Number(hero?.stars ?? 0);\n    if (!isFinite(s)) return 0;\n    return Math.max(0, Math.min(6, s));\n  };\n\n  /**\n   * Maps backend stars + awakening to unlocked tier.\n   *\n   * RULES (AUTHORITATIVE):\n   * stars = 0  → tier 1\n   * stars = 1  → tier 2\n   * stars = 2  → tier 3\n   * stars = 3  → tier 4\n   * stars = 4  → tier 5\n   * stars ≥ 5 OR awakening > 0 → tier 6 (5★+)\n   * \n   * FUTURE (Awakening system, NOT YET ACTIVE):\n   * awakening_level = 1 → tier 7 (7★)\n   * awakening_level = 2 → tier 8 (8★)\n   * awakening_level = 3 → tier 9 (9★)\n   * awakening_level = 4 → tier 10 (10★)\n   */\n  const unlockedTierForHero = hero => {\n    const stars = displayStars(hero);\n    const awaken = Number(hero?.awakening_level ?? 0);\n\n    // For now, cap at tier 6 (5★+). Awakening tiers will be added later.\n    if (awaken > 0 || stars >= 5) return 6;\n    return Math.max(1, Math.min(5, stars + 1));\n  };\n\n  /**\n   * Clamp a requested tier (global or local) to what the hero has unlocked.\n   */\n  const effectiveTierForHero = (hero, requestedTier) => {\n    const unlocked = unlockedTierForHero(hero);\n    return requestedTier <= unlocked ? requestedTier : unlocked;\n  };\n\n  /**\n   * Resolve ascension art EXACTLY from API response.\n   * IMPORTANT: Returns a STRING url (or undefined), NOT an { uri: ... } object.\n   * This prevents \"Objects are not valid as a React child\" errors.\n   */\n  const resolveTierArt = (heroData, tier) => {\n    const t = String(Math.max(1, Math.min(6, Number(tier) || 1)));\n    const asc = heroData?.ascension_images;\n    if (asc && typeof asc === 'object') {\n      const v = asc[t];\n      if (typeof v === 'string' && v.length > 0) return v;\n    }\n\n    // Fallback to default image_url but still a STRING\n    const img = heroData?.image_url;\n    if (typeof img === 'string' && img.length > 0) return img;\n    return undefined;\n  };\n\n  /**\n   * Compute max unlocked tier across all heroes (for global tier selector)\n   */\n  const computeUserMaxUnlockedTier = heroes => {\n    let max = 1;\n    for (const h of heroes || []) {\n      const t = unlockedTierForHero(h);\n      if (t > max) max = t;\n    }\n    return max;\n  };\n\n  /**\n   * Tier labels for UI (object format for lookup)\n   */\n  const TIER_LABELS = {\n    1: '1★',\n    2: '2★',\n    3: '3★',\n    4: '4★',\n    5: '5★',\n    6: '5★+'\n  };\n\n  /**\n   * Tier labels array for mapping in UI selectors\n   */\n  const TIER_LABEL_ARRAY = [{\n    tier: 1,\n    label: '1★'\n  }, {\n    tier: 2,\n    label: '2★'\n  }, {\n    tier: 3,\n    label: '3★'\n  }, {\n    tier: 4,\n    label: '4★'\n  }, {\n    tier: 5,\n    label: '5★'\n  }, {\n    tier: 6,\n    label: '5★+'\n  }];\n});","lineCount":180,"map":[[7,2,10,0,"Object"],[7,8,10,0],[7,9,10,0,"defineProperty"],[7,23,10,0],[7,24,10,0,"exports"],[7,31,10,0],[8,4,10,0,"enumerable"],[8,14,10,0],[9,4,10,0,"get"],[9,7,10,0],[9,18,10,0,"get"],[9,19,10,0],[10,6,10,0],[10,13,10,0,"MAX_STAR_TIER"],[10,26,10,0],[11,4,10,0],[12,2,10,0],[13,2,11,0,"Object"],[13,8,11,0],[13,9,11,0,"defineProperty"],[13,23,11,0],[13,24,11,0,"exports"],[13,31,11,0],[14,4,11,0,"enumerable"],[14,14,11,0],[15,4,11,0,"get"],[15,7,11,0],[15,18,11,0,"get"],[15,19,11,0],[16,6,11,0],[16,13,11,0,"MAX_AWAKENING_TIER"],[16,31,11,0],[17,4,11,0],[18,2,11,0],[19,2,16,0,"Object"],[19,8,16,0],[19,9,16,0,"defineProperty"],[19,23,16,0],[19,24,16,0,"exports"],[19,31,16,0],[20,4,16,0,"enumerable"],[20,14,16,0],[21,4,16,0,"get"],[21,7,16,0],[21,18,16,0,"get"],[21,19,16,0],[22,6,16,0],[22,13,16,0,"displayStars"],[22,25,16,0],[23,4,16,0],[24,2,16,0],[25,2,39,0,"Object"],[25,8,39,0],[25,9,39,0,"defineProperty"],[25,23,39,0],[25,24,39,0,"exports"],[25,31,39,0],[26,4,39,0,"enumerable"],[26,14,39,0],[27,4,39,0,"get"],[27,7,39,0],[27,18,39,0,"get"],[27,19,39,0],[28,6,39,0],[28,13,39,0,"unlockedTierForHero"],[28,32,39,0],[29,4,39,0],[30,2,39,0],[31,2,51,0,"Object"],[31,8,51,0],[31,9,51,0,"defineProperty"],[31,23,51,0],[31,24,51,0,"exports"],[31,31,51,0],[32,4,51,0,"enumerable"],[32,14,51,0],[33,4,51,0,"get"],[33,7,51,0],[33,18,51,0,"get"],[33,19,51,0],[34,6,51,0],[34,13,51,0,"effectiveTierForHero"],[34,33,51,0],[35,4,51,0],[36,2,51,0],[37,2,64,0,"Object"],[37,8,64,0],[37,9,64,0,"defineProperty"],[37,23,64,0],[37,24,64,0,"exports"],[37,31,64,0],[38,4,64,0,"enumerable"],[38,14,64,0],[39,4,64,0,"get"],[39,7,64,0],[39,18,64,0,"get"],[39,19,64,0],[40,6,64,0],[40,13,64,0,"resolveTierArt"],[40,27,64,0],[41,4,64,0],[42,2,64,0],[43,2,86,0,"Object"],[43,8,86,0],[43,9,86,0,"defineProperty"],[43,23,86,0],[43,24,86,0,"exports"],[43,31,86,0],[44,4,86,0,"enumerable"],[44,14,86,0],[45,4,86,0,"get"],[45,7,86,0],[45,18,86,0,"get"],[45,19,86,0],[46,6,86,0],[46,13,86,0,"computeUserMaxUnlockedTier"],[46,39,86,0],[47,4,86,0],[48,2,86,0],[49,2,98,0,"Object"],[49,8,98,0],[49,9,98,0,"defineProperty"],[49,23,98,0],[49,24,98,0,"exports"],[49,31,98,0],[50,4,98,0,"enumerable"],[50,14,98,0],[51,4,98,0,"get"],[51,7,98,0],[51,18,98,0,"get"],[51,19,98,0],[52,6,98,0],[52,13,98,0,"TIER_LABELS"],[52,24,98,0],[53,4,98,0],[54,2,98,0],[55,2,110,0,"Object"],[55,8,110,0],[55,9,110,0,"defineProperty"],[55,23,110,0],[55,24,110,0,"exports"],[55,31,110,0],[56,4,110,0,"enumerable"],[56,14,110,0],[57,4,110,0,"get"],[57,7,110,0],[57,18,110,0,"get"],[57,19,110,0],[58,6,110,0],[58,13,110,0,"TIER_LABEL_ARRAY"],[58,29,110,0],[59,4,110,0],[60,2,110,0],[61,2,1,0],[62,2,2,0],[63,2,3,0],[65,2,5,0],[66,2,6,0],[68,2,9,0],[69,2,10,7],[69,8,10,13,"MAX_STAR_TIER"],[69,21,10,26],[69,24,10,29],[69,25,10,30],[70,2,11,7],[70,8,11,13,"MAX_AWAKENING_TIER"],[70,26,11,31],[70,29,11,34],[70,31,11,36],[72,2,13,0],[73,0,14,0],[74,0,15,0],[75,2,16,7],[75,8,16,13,"displayStars"],[75,20,16,25],[75,23,16,29,"hero"],[75,27,16,38],[75,31,16,51],[76,4,17,2],[76,10,17,8,"s"],[76,11,17,9],[76,14,17,12,"Number"],[76,20,17,18],[76,21,17,19,"hero"],[76,25,17,23],[76,27,17,25,"stars"],[76,32,17,30],[76,36,17,34],[76,37,17,35],[76,38,17,36],[77,4,18,2],[77,8,18,6],[77,9,18,7,"isFinite"],[77,17,18,15],[77,18,18,16,"s"],[77,19,18,17],[77,20,18,18],[77,22,18,20],[77,29,18,27],[77,30,18,28],[78,4,19,2],[78,11,19,9,"Math"],[78,15,19,13],[78,16,19,14,"max"],[78,19,19,17],[78,20,19,18],[78,21,19,19],[78,23,19,21,"Math"],[78,27,19,25],[78,28,19,26,"min"],[78,31,19,29],[78,32,19,30],[78,33,19,31],[78,35,19,33,"s"],[78,36,19,34],[78,37,19,35],[78,38,19,36],[79,2,20,0],[79,3,20,1],[81,2,22,0],[82,0,23,0],[83,0,24,0],[84,0,25,0],[85,0,26,0],[86,0,27,0],[87,0,28,0],[88,0,29,0],[89,0,30,0],[90,0,31,0],[91,0,32,0],[92,0,33,0],[93,0,34,0],[94,0,35,0],[95,0,36,0],[96,0,37,0],[97,0,38,0],[98,2,39,7],[98,8,39,13,"unlockedTierForHero"],[98,27,39,32],[98,30,39,36,"hero"],[98,34,39,45],[98,38,39,63],[99,4,40,2],[99,10,40,8,"stars"],[99,15,40,13],[99,18,40,16,"displayStars"],[99,30,40,28],[99,31,40,29,"hero"],[99,35,40,33],[99,36,40,34],[100,4,41,2],[100,10,41,8,"awaken"],[100,16,41,14],[100,19,41,17,"Number"],[100,25,41,23],[100,26,41,24,"hero"],[100,30,41,28],[100,32,41,30,"awakening_level"],[100,47,41,45],[100,51,41,49],[100,52,41,50],[100,53,41,51],[102,4,43,2],[103,4,44,2],[103,8,44,6,"awaken"],[103,14,44,12],[103,17,44,15],[103,18,44,16],[103,22,44,20,"stars"],[103,27,44,25],[103,31,44,29],[103,32,44,30],[103,34,44,32],[103,41,44,39],[103,42,44,40],[104,4,45,2],[104,11,45,10,"Math"],[104,15,45,14],[104,16,45,15,"max"],[104,19,45,18],[104,20,45,19],[104,21,45,20],[104,23,45,22,"Math"],[104,27,45,26],[104,28,45,27,"min"],[104,31,45,30],[104,32,45,31],[104,33,45,32],[104,35,45,34,"stars"],[104,40,45,39],[104,43,45,42],[104,44,45,43],[104,45,45,44],[104,46,45,45],[105,2,46,0],[105,3,46,1],[107,2,48,0],[108,0,49,0],[109,0,50,0],[110,2,51,7],[110,8,51,13,"effectiveTierForHero"],[110,28,51,33],[110,31,51,36,"effectiveTierForHero"],[110,32,52,2,"hero"],[110,36,52,11],[110,38,53,2,"requestedTier"],[110,51,53,28],[110,56,54,18],[111,4,55,2],[111,10,55,8,"unlocked"],[111,18,55,16],[111,21,55,19,"unlockedTierForHero"],[111,40,55,38],[111,41,55,39,"hero"],[111,45,55,43],[111,46,55,44],[112,4,56,2],[112,11,56,9,"requestedTier"],[112,24,56,22],[112,28,56,26,"unlocked"],[112,36,56,34],[112,39,56,37,"requestedTier"],[112,52,56,50],[112,55,56,53,"unlocked"],[112,63,56,61],[113,2,57,0],[113,3,57,1],[115,2,59,0],[116,0,60,0],[117,0,61,0],[118,0,62,0],[119,0,63,0],[120,2,64,7],[120,8,64,13,"resolveTierArt"],[120,22,64,27],[120,25,64,30,"resolveTierArt"],[120,26,65,2,"heroData"],[120,34,65,15],[120,36,66,2,"tier"],[120,40,66,14],[120,45,67,25],[121,4,68,2],[121,10,68,8,"t"],[121,11,68,9],[121,14,68,12,"String"],[121,20,68,18],[121,21,68,19,"Math"],[121,25,68,23],[121,26,68,24,"max"],[121,29,68,27],[121,30,68,28],[121,31,68,29],[121,33,68,31,"Math"],[121,37,68,35],[121,38,68,36,"min"],[121,41,68,39],[121,42,68,40],[121,43,68,41],[121,45,68,43,"Number"],[121,51,68,49],[121,52,68,50,"tier"],[121,56,68,54],[121,57,68,55],[121,61,68,59],[121,62,68,60],[121,63,68,61],[121,64,68,62],[121,65,68,63],[122,4,70,2],[122,10,70,8,"asc"],[122,13,70,11],[122,16,70,14,"heroData"],[122,24,70,22],[122,26,70,24,"ascension_images"],[122,42,70,40],[123,4,71,2],[123,8,71,6,"asc"],[123,11,71,9],[123,15,71,13],[123,22,71,20,"asc"],[123,25,71,23],[123,30,71,28],[123,38,71,36],[123,40,71,38],[124,6,72,4],[124,12,72,10,"v"],[124,13,72,11],[124,16,72,14,"asc"],[124,19,72,17],[124,20,72,18,"t"],[124,21,72,19],[124,22,72,20],[125,6,73,4],[125,10,73,8],[125,17,73,15,"v"],[125,18,73,16],[125,23,73,21],[125,31,73,29],[125,35,73,33,"v"],[125,36,73,34],[125,37,73,35,"length"],[125,43,73,41],[125,46,73,44],[125,47,73,45],[125,49,73,47],[125,56,73,54,"v"],[125,57,73,55],[126,4,74,2],[128,4,76,2],[129,4,77,2],[129,10,77,8,"img"],[129,13,77,11],[129,16,77,14,"heroData"],[129,24,77,22],[129,26,77,24,"image_url"],[129,35,77,33],[130,4,78,2],[130,8,78,6],[130,15,78,13,"img"],[130,18,78,16],[130,23,78,21],[130,31,78,29],[130,35,78,33,"img"],[130,38,78,36],[130,39,78,37,"length"],[130,45,78,43],[130,48,78,46],[130,49,78,47],[130,51,78,49],[130,58,78,56,"img"],[130,61,78,59],[131,4,80,2],[131,11,80,9,"undefined"],[131,20,80,18],[132,2,81,0],[132,3,81,1],[134,2,83,0],[135,0,84,0],[136,0,85,0],[137,2,86,7],[137,8,86,13,"computeUserMaxUnlockedTier"],[137,34,86,39],[137,37,86,43,"heroes"],[137,43,86,56],[137,47,86,74],[138,4,87,2],[138,8,87,6,"max"],[138,11,87,22],[138,14,87,25],[138,15,87,26],[139,4,88,2],[139,9,88,7],[139,15,88,13,"h"],[139,16,88,14],[139,20,88,18,"heroes"],[139,26,88,24],[139,30,88,28],[139,32,88,30],[139,34,88,32],[140,6,89,4],[140,12,89,10,"t"],[140,13,89,11],[140,16,89,14,"unlockedTierForHero"],[140,35,89,33],[140,36,89,34,"h"],[140,37,89,35],[140,38,89,36],[141,6,90,4],[141,10,90,8,"t"],[141,11,90,9],[141,14,90,12,"max"],[141,17,90,15],[141,19,90,17,"max"],[141,22,90,20],[141,25,90,23,"t"],[141,26,90,24],[142,4,91,2],[143,4,92,2],[143,11,92,9,"max"],[143,14,92,12],[144,2,93,0],[144,3,93,1],[146,2,95,0],[147,0,96,0],[148,0,97,0],[149,2,98,7],[149,8,98,13,"TIER_LABELS"],[149,19,98,53],[149,22,98,56],[150,4,99,2],[150,5,99,3],[150,7,99,5],[150,11,99,9],[151,4,100,2],[151,5,100,3],[151,7,100,5],[151,11,100,9],[152,4,101,2],[152,5,101,3],[152,7,101,5],[152,11,101,9],[153,4,102,2],[153,5,102,3],[153,7,102,5],[153,11,102,9],[154,4,103,2],[154,5,103,3],[154,7,103,5],[154,11,103,9],[155,4,104,2],[155,5,104,3],[155,7,104,5],[156,2,105,0],[156,3,105,1],[158,2,107,0],[159,0,108,0],[160,0,109,0],[161,2,110,7],[161,8,110,13,"TIER_LABEL_ARRAY"],[161,24,110,69],[161,27,110,72],[161,28,111,2],[162,4,111,4,"tier"],[162,8,111,8],[162,10,111,10],[162,11,111,11],[163,4,111,13,"label"],[163,9,111,18],[163,11,111,20],[164,2,111,25],[164,3,111,26],[164,5,112,2],[165,4,112,4,"tier"],[165,8,112,8],[165,10,112,10],[165,11,112,11],[166,4,112,13,"label"],[166,9,112,18],[166,11,112,20],[167,2,112,25],[167,3,112,26],[167,5,113,2],[168,4,113,4,"tier"],[168,8,113,8],[168,10,113,10],[168,11,113,11],[169,4,113,13,"label"],[169,9,113,18],[169,11,113,20],[170,2,113,25],[170,3,113,26],[170,5,114,2],[171,4,114,4,"tier"],[171,8,114,8],[171,10,114,10],[171,11,114,11],[172,4,114,13,"label"],[172,9,114,18],[172,11,114,20],[173,2,114,25],[173,3,114,26],[173,5,115,2],[174,4,115,4,"tier"],[174,8,115,8],[174,10,115,10],[174,11,115,11],[175,4,115,13,"label"],[175,9,115,18],[175,11,115,20],[176,2,115,25],[176,3,115,26],[176,5,116,2],[177,4,116,4,"tier"],[177,8,116,8],[177,10,116,10],[177,11,116,11],[178,4,116,13,"label"],[178,9,116,18],[178,11,116,20],[179,2,116,26],[179,3,116,27],[179,4,117,1],[180,0,117,2],[180,3]],"functionMap":{"names":["<global>","displayStars","unlockedTierForHero","effectiveTierForHero","resolveTierArt","computeUserMaxUnlockedTier"],"mappings":"AAA;4BCe;CDI;mCEmB;CFO;oCGK;CHM;8BIO;CJiB;0CKK;CLO"},"hasCjsExports":false},"type":"js/module"}]}