{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":149},"end":{"line":5,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  exports.requireUsername = requireUsername;\n  exports.fetchUserHeroes = fetchUserHeroes;\n  exports.promoteHeroStar = promoteHeroStar;\n  exports.fetchUser = fetchUser;\n  exports.performSummon = performSummon;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  // /app/frontend/lib/api.ts\n  // SINGLE SOURCE OF TRUTH for all backend API calls\n  // Screens should import from here to prevent endpoint string drift\n\n  const API_BASE = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL ? `${_expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL}/api` : '/api';\n  const api = axios.default.create({\n    baseURL: API_BASE,\n    timeout: 20000\n  });\n  function requireUsername(username) {\n    if (!username) throw new Error('Missing username');\n    return username;\n  }\n\n  // ─────────────────────────────────────────────────────────────\n  // USER HEROES\n  // ─────────────────────────────────────────────────────────────\n\n  async function fetchUserHeroes(username) {\n    const u = requireUsername(username);\n    const res = await api.get(`/user/${encodeURIComponent(u)}/heroes`);\n    return res.data;\n  }\n\n  // ─────────────────────────────────────────────────────────────\n  // STAR PROMOTION (canonical endpoint)\n  // POST /api/hero/{user_hero_id}/promote-star?username=...\n  // ─────────────────────────────────────────────────────────────\n\n  async function promoteHeroStar(userHeroId, username) {\n    const u = requireUsername(username);\n    const res = await api.post(`/hero/${encodeURIComponent(userHeroId)}/promote-star`, null, {\n      params: {\n        username: u\n      }\n    });\n    return res.data;\n  }\n\n  // ─────────────────────────────────────────────────────────────\n  // USER AUTH / PROFILE\n  // ─────────────────────────────────────────────────────────────\n\n  async function fetchUser(username) {\n    const u = requireUsername(username);\n    const res = await api.get(`/user/${encodeURIComponent(u)}`);\n    return res.data;\n  }\n\n  // ─────────────────────────────────────────────────────────────\n  // GACHA / SUMMON\n  // ─────────────────────────────────────────────────────────────\n\n  async function performSummon(username, summonType) {\n    const u = requireUsername(username);\n    const res = await api.post(`/gacha/summon`, null, {\n      params: {\n        username: u,\n        summon_type: summonType\n      }\n    });\n    return res.data;\n  }\n\n  // Add more hero endpoints here ONLY.\n  // Screens should import from lib/api.ts so route strings never drift again.\n});","lineCount":92,"map":[[12,2,11,0,"Object"],[12,8,11,0],[12,9,11,0,"defineProperty"],[12,23,11,0],[12,24,11,0,"exports"],[12,31,11,0],[13,4,11,0,"enumerable"],[13,14,11,0],[14,4,11,0,"get"],[14,7,11,0],[14,18,11,0,"get"],[14,19,11,0],[15,6,11,0],[15,13,11,0,"api"],[15,16,11,0],[16,4,11,0],[17,2,11,0],[18,2,16,0,"exports"],[18,9,16,0],[18,10,16,0,"requireUsername"],[18,25,16,0],[18,28,16,0,"requireUsername"],[18,43,16,0],[19,2,25,0,"exports"],[19,9,25,0],[19,10,25,0,"fetchUserHeroes"],[19,25,25,0],[19,28,25,0,"fetchUserHeroes"],[19,43,25,0],[20,2,36,0,"exports"],[20,9,36,0],[20,10,36,0,"promoteHeroStar"],[20,25,36,0],[20,28,36,0,"promoteHeroStar"],[20,43,36,0],[21,2,55,0,"exports"],[21,9,55,0],[21,10,55,0,"fetchUser"],[21,19,55,0],[21,22,55,0,"fetchUser"],[21,31,55,0],[22,2,65,0,"exports"],[22,9,65,0],[22,10,65,0,"performSummon"],[22,23,65,0],[22,26,65,0,"performSummon"],[22,39,65,0],[23,2,71,1],[23,6,71,1,"_expoVirtualEnv"],[23,21,71,1],[23,24,71,1,"require"],[23,31,71,1],[23,32,71,1,"_dependencyMap"],[23,46,71,1],[24,2,5,0],[24,6,5,0,"_axios"],[24,12,5,0],[24,15,5,0,"require"],[24,22,5,0],[24,23,5,0,"_dependencyMap"],[24,37,5,0],[25,2,5,0],[25,6,5,0,"axios"],[25,11,5,0],[25,14,5,0,"_interopDefault"],[25,29,5,0],[25,30,5,0,"_axios"],[25,36,5,0],[26,2,1,0],[27,2,2,0],[28,2,3,0],[30,2,7,0],[30,8,7,6,"API_BASE"],[30,16,7,14],[30,19,7,17,"_expoVirtualEnv"],[30,34,7,17],[30,35,7,17,"env"],[30,38,7,17],[30,39,7,17,"EXPO_PUBLIC_BACKEND_URL"],[30,62,7,17],[30,65,8,4],[30,68,8,4,"_expoVirtualEnv"],[30,83,8,4],[30,84,8,4,"env"],[30,87,8,4],[30,88,8,4,"EXPO_PUBLIC_BACKEND_URL"],[30,111,8,4],[30,117,8,48],[30,120,9,4],[30,126,9,10],[31,2,11,7],[31,8,11,13,"api"],[31,11,11,16],[31,14,11,19,"axios"],[31,19,11,24],[31,20,11,24,"default"],[31,27,11,24],[31,28,11,25,"create"],[31,34,11,31],[31,35,11,32],[32,4,12,2,"baseURL"],[32,11,12,9],[32,13,12,11,"API_BASE"],[32,21,12,19],[33,4,13,2,"timeout"],[33,11,13,9],[33,13,13,11],[34,2,14,0],[34,3,14,1],[34,4,14,2],[35,2,16,7],[35,11,16,16,"requireUsername"],[35,26,16,31,"requireUsername"],[35,27,16,32,"username"],[35,35,16,49],[35,37,16,51],[36,4,17,2],[36,8,17,6],[36,9,17,7,"username"],[36,17,17,15],[36,19,17,17],[36,25,17,23],[36,29,17,27,"Error"],[36,34,17,32],[36,35,17,33],[36,53,17,51],[36,54,17,52],[37,4,18,2],[37,11,18,9,"username"],[37,19,18,17],[38,2,19,0],[40,2,21,0],[41,2,22,0],[42,2,23,0],[44,2,25,7],[44,17,25,22,"fetchUserHeroes"],[44,32,25,37,"fetchUserHeroes"],[44,33,25,38,"username"],[44,41,25,54],[44,43,25,56],[45,4,26,2],[45,10,26,8,"u"],[45,11,26,9],[45,14,26,12,"requireUsername"],[45,29,26,27],[45,30,26,28,"username"],[45,38,26,36],[45,39,26,37],[46,4,27,2],[46,10,27,8,"res"],[46,13,27,11],[46,16,27,14],[46,22,27,20,"api"],[46,25,27,23],[46,26,27,24,"get"],[46,29,27,27],[46,30,27,28],[46,39,27,37,"encodeURIComponent"],[46,57,27,55],[46,58,27,56,"u"],[46,59,27,57],[46,60,27,58],[46,69,27,67],[46,70,27,68],[47,4,28,2],[47,11,28,9,"res"],[47,14,28,12],[47,15,28,13,"data"],[47,19,28,17],[48,2,29,0],[50,2,31,0],[51,2,32,0],[52,2,33,0],[53,2,34,0],[55,2,36,7],[55,17,36,22,"promoteHeroStar"],[55,32,36,37,"promoteHeroStar"],[55,33,36,38,"userHeroId"],[55,43,36,56],[55,45,36,58,"username"],[55,53,36,74],[55,55,36,76],[56,4,37,2],[56,10,37,8,"u"],[56,11,37,9],[56,14,37,12,"requireUsername"],[56,29,37,27],[56,30,37,28,"username"],[56,38,37,36],[56,39,37,37],[57,4,38,2],[57,10,38,8,"res"],[57,13,38,11],[57,16,38,14],[57,22,38,20,"api"],[57,25,38,23],[57,26,38,24,"post"],[57,30,38,28],[57,31,39,4],[57,40,39,13,"encodeURIComponent"],[57,58,39,31],[57,59,39,32,"userHeroId"],[57,69,39,42],[57,70,39,43],[57,85,39,58],[57,87,40,4],[57,91,40,8],[57,93,41,4],[58,6,41,6,"params"],[58,12,41,12],[58,14,41,14],[59,8,41,16,"username"],[59,16,41,24],[59,18,41,26,"u"],[60,6,41,28],[61,4,41,30],[61,5,42,2],[61,6,42,3],[62,4,43,2],[62,11,43,9,"res"],[62,14,43,12],[62,15,43,13,"data"],[62,19,43,17],[63,2,49,0],[65,2,51,0],[66,2,52,0],[67,2,53,0],[69,2,55,7],[69,17,55,22,"fetchUser"],[69,26,55,31,"fetchUser"],[69,27,55,32,"username"],[69,35,55,48],[69,37,55,50],[70,4,56,2],[70,10,56,8,"u"],[70,11,56,9],[70,14,56,12,"requireUsername"],[70,29,56,27],[70,30,56,28,"username"],[70,38,56,36],[70,39,56,37],[71,4,57,2],[71,10,57,8,"res"],[71,13,57,11],[71,16,57,14],[71,22,57,20,"api"],[71,25,57,23],[71,26,57,24,"get"],[71,29,57,27],[71,30,57,28],[71,39,57,37,"encodeURIComponent"],[71,57,57,55],[71,58,57,56,"u"],[71,59,57,57],[71,60,57,58],[71,62,57,60],[71,63,57,61],[72,4,58,2],[72,11,58,9,"res"],[72,14,58,12],[72,15,58,13,"data"],[72,19,58,17],[73,2,59,0],[75,2,61,0],[76,2,62,0],[77,2,63,0],[79,2,65,7],[79,17,65,22,"performSummon"],[79,30,65,35,"performSummon"],[79,31,65,36,"username"],[79,39,65,52],[79,41,65,54,"summonType"],[79,51,65,84],[79,53,65,86],[80,4,66,2],[80,10,66,8,"u"],[80,11,66,9],[80,14,66,12,"requireUsername"],[80,29,66,27],[80,30,66,28,"username"],[80,38,66,36],[80,39,66,37],[81,4,67,2],[81,10,67,8,"res"],[81,13,67,11],[81,16,67,14],[81,22,67,20,"api"],[81,25,67,23],[81,26,67,24,"post"],[81,30,67,28],[81,31,67,29],[81,46,67,44],[81,48,67,46],[81,52,67,50],[81,54,67,52],[82,6,68,4,"params"],[82,12,68,10],[82,14,68,12],[83,8,68,14,"username"],[83,16,68,22],[83,18,68,24,"u"],[83,19,68,25],[84,8,68,27,"summon_type"],[84,19,68,38],[84,21,68,40,"summonType"],[85,6,68,51],[86,4,69,2],[86,5,69,3],[86,6,69,4],[87,4,70,2],[87,11,70,9,"res"],[87,14,70,12],[87,15,70,13,"data"],[87,19,70,17],[88,2,71,0],[90,2,73,0],[91,2,74,0],[92,0,74,0],[92,3]],"functionMap":{"names":["<global>","requireUsername","fetchUserHeroes","promoteHeroStar","fetchUser","performSummon"],"mappings":"AAA;OCe;CDG;OEM;CFI;OGO;CHa;OIM;CJI;OKM;CLM"},"hasCjsExports":false},"type":"js/module"}]}