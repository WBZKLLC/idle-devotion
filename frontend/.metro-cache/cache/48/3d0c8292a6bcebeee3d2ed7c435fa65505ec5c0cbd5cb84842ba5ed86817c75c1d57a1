{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":4,"index":27},"end":{"line":3,"column":28,"index":51}},{"start":{"line":7,"column":14,"index":132},"end":{"line":7,"column":38,"index":156}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":2}},{"name":"./utils/node-utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":18,"index":176},"end":{"line":8,"column":50,"index":208}}],"key":"nAIWt1BOOZ86MvoHpjeMwr97UUM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var {\n    _optionalChain\n  } = require(_dependencyMap[0], \"@sentry/utils\");\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const utils = require(_dependencyMap[0], \"@sentry/utils\");\n  const nodeUtils = require(_dependencyMap[1], \"./utils/node-utils.js\");\n\n  /** Tracing integration for node-postgres package */\n  class Postgres {\n    /**\n     * @inheritDoc\n     */\n    static __initStatic() {\n      this.id = 'Postgres';\n    }\n\n    /**\n     * @inheritDoc\n     */\n\n    constructor(options = {}) {\n      this.name = Postgres.id;\n      this._usePgNative = !!options.usePgNative;\n      this._module = options.module;\n    }\n\n    /** @inheritdoc */\n    loadDependency() {\n      return this._module = this._module || utils.loadModule('pg');\n    }\n\n    /**\n     * @inheritDoc\n     */\n    setupOnce(_, getCurrentHub) {\n      if (nodeUtils.shouldDisableAutoInstrumentation(getCurrentHub)) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.log('Postgres Integration is skipped because of instrumenter configuration.');\n        return;\n      }\n      const pkg = this.loadDependency();\n      if (!pkg) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.error('Postgres Integration was unable to require `pg` package.');\n        return;\n      }\n      const Client = this._usePgNative ? _optionalChain([pkg, 'access', _2 => _2.native, 'optionalAccess', _3 => _3.Client]) : pkg.Client;\n      if (!Client) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.error(\"Postgres Integration was unable to access 'pg-native' bindings.\");\n        return;\n      }\n\n      /**\n       * function (query, callback) => void\n       * function (query, params, callback) => void\n       * function (query) => Promise\n       * function (query, params) => Promise\n       * function (pg.Cursor) => pg.Cursor\n       */\n      utils.fill(Client.prototype, 'query', function (orig) {\n        return function (config, values, callback) {\n          const scope = getCurrentHub().getScope();\n          const parentSpan = scope.getSpan();\n          const data = {\n            'db.system': 'postgresql'\n          };\n          try {\n            if (this.database) {\n              data['db.name'] = this.database;\n            }\n            if (this.host) {\n              data['server.address'] = this.host;\n            }\n            if (this.port) {\n              data['server.port'] = this.port;\n            }\n            if (this.user) {\n              data['db.user'] = this.user;\n            }\n          } catch (e) {\n            // ignore\n          }\n          const span = _optionalChain([parentSpan, 'optionalAccess', _4 => _4.startChild, 'call', _5 => _5({\n            description: typeof config === 'string' ? config : config.text,\n            op: 'db',\n            origin: 'auto.db.postgres',\n            data\n          })]);\n          if (typeof callback === 'function') {\n            return orig.call(this, config, values, function (err, result) {\n              _optionalChain([span, 'optionalAccess', _6 => _6.finish, 'call', _7 => _7()]);\n              callback(err, result);\n            });\n          }\n          if (typeof values === 'function') {\n            return orig.call(this, config, function (err, result) {\n              _optionalChain([span, 'optionalAccess', _8 => _8.finish, 'call', _9 => _9()]);\n              values(err, result);\n            });\n          }\n          const rv = typeof values !== 'undefined' ? orig.call(this, config, values) : orig.call(this, config);\n          if (utils.isThenable(rv)) {\n            return rv.then(res => {\n              _optionalChain([span, 'optionalAccess', _10 => _10.finish, 'call', _11 => _11()]);\n              return res;\n            });\n          }\n          _optionalChain([span, 'optionalAccess', _12 => _12.finish, 'call', _13 => _13()]);\n          return rv;\n        };\n      });\n    }\n  }\n  Postgres.__initStatic();\n  exports.Postgres = Postgres;\n});","lineCount":117,"map":[[2,2,1,0],[2,6,1,4],[3,4,2,2,"_optionalChain"],[4,2,3,0],[4,3,3,1],[4,6,3,4,"require"],[4,13,3,11],[4,14,3,11,"_dependencyMap"],[4,28,3,11],[4,48,3,27],[4,49,3,28],[5,2,5,0,"Object"],[5,8,5,6],[5,9,5,7,"defineProperty"],[5,23,5,21],[5,24,5,22,"exports"],[5,31,5,29],[5,33,5,31],[5,45,5,43],[5,47,5,45],[6,4,5,47,"value"],[6,9,5,52],[6,11,5,54],[7,2,5,59],[7,3,5,60],[7,4,5,61],[8,2,7,0],[8,8,7,6,"utils"],[8,13,7,11],[8,16,7,14,"require"],[8,23,7,21],[8,24,7,21,"_dependencyMap"],[8,38,7,21],[8,58,7,37],[8,59,7,38],[9,2,8,0],[9,8,8,6,"nodeUtils"],[9,17,8,15],[9,20,8,18,"require"],[9,27,8,25],[9,28,8,25,"_dependencyMap"],[9,42,8,25],[9,70,8,49],[9,71,8,50],[11,2,10,0],[12,2,11,0],[12,8,11,6,"Postgres"],[12,16,11,14],[12,17,11,16],[13,4,12,2],[14,0,13,0],[15,0,14,0],[16,4,15,3],[16,11,15,10,"__initStatic"],[16,23,15,22,"__initStatic"],[16,24,15,22],[16,26,15,25],[17,6,15,26],[17,10,15,30],[17,11,15,31,"id"],[17,13,15,33],[17,16,15,36],[17,26,15,46],[18,4,15,47],[20,4,17,2],[21,0,18,0],[22,0,19,0],[24,4,21,3,"constructor"],[24,15,21,14,"constructor"],[24,16,21,15,"options"],[24,23,21,22],[24,26,21,25],[24,27,21,26],[24,28,21,27],[24,30,21,29],[25,6,22,4],[25,10,22,8],[25,11,22,9,"name"],[25,15,22,13],[25,18,22,16,"Postgres"],[25,26,22,24],[25,27,22,25,"id"],[25,29,22,27],[26,6,23,4],[26,10,23,8],[26,11,23,9,"_usePgNative"],[26,23,23,21],[26,26,23,24],[26,27,23,25],[26,28,23,26,"options"],[26,35,23,33],[26,36,23,34,"usePgNative"],[26,47,23,45],[27,6,24,4],[27,10,24,8],[27,11,24,9,"_module"],[27,18,24,16],[27,21,24,19,"options"],[27,28,24,26],[27,29,24,27,"module"],[27,35,24,33],[28,4,25,2],[30,4,27,2],[31,4,28,3,"loadDependency"],[31,18,28,17,"loadDependency"],[31,19,28,17],[31,21,28,20],[32,6,29,4],[32,13,29,12],[32,17,29,16],[32,18,29,17,"_module"],[32,25,29,24],[32,28,29,27],[32,32,29,31],[32,33,29,32,"_module"],[32,40,29,39],[32,44,29,43,"utils"],[32,49,29,48],[32,50,29,49,"loadModule"],[32,60,29,59],[32,61,29,60],[32,65,29,64],[32,66,29,65],[33,4,30,2],[35,4,32,2],[36,0,33,0],[37,0,34,0],[38,4,35,3,"setupOnce"],[38,13,35,12,"setupOnce"],[38,14,35,13,"_"],[38,15,35,14],[38,17,35,16,"getCurrentHub"],[38,30,35,29],[38,32,35,31],[39,6,36,4],[39,10,36,8,"nodeUtils"],[39,19,36,17],[39,20,36,18,"shouldDisableAutoInstrumentation"],[39,52,36,50],[39,53,36,51,"getCurrentHub"],[39,66,36,64],[39,67,36,65],[39,69,36,67],[40,8,37,6],[40,9,37,7],[40,16,37,14,"__SENTRY_DEBUG__"],[40,32,37,30],[40,37,37,35],[40,48,37,46],[40,52,37,50,"__SENTRY_DEBUG__"],[40,68,37,66],[40,73,37,71,"utils"],[40,78,37,76],[40,79,37,77,"logger"],[40,85,37,83],[40,86,37,84,"log"],[40,89,37,87],[40,90,37,88],[40,162,37,160],[40,163,37,161],[41,8,38,6],[42,6,39,4],[43,6,41,4],[43,12,41,10,"pkg"],[43,15,41,13],[43,18,41,16],[43,22,41,20],[43,23,41,21,"loadDependency"],[43,37,41,35],[43,38,41,36],[43,39,41,37],[44,6,43,4],[44,10,43,8],[44,11,43,9,"pkg"],[44,14,43,12],[44,16,43,14],[45,8,44,6],[45,9,44,7],[45,16,44,14,"__SENTRY_DEBUG__"],[45,32,44,30],[45,37,44,35],[45,48,44,46],[45,52,44,50,"__SENTRY_DEBUG__"],[45,68,44,66],[45,73,44,71,"utils"],[45,78,44,76],[45,79,44,77,"logger"],[45,85,44,83],[45,86,44,84,"error"],[45,91,44,89],[45,92,44,90],[45,150,44,148],[45,151,44,149],[46,8,45,6],[47,6,46,4],[48,6,48,4],[48,12,48,10,"Client"],[48,18,48,16],[48,21,48,19],[48,25,48,23],[48,26,48,24,"_usePgNative"],[48,38,48,36],[48,41,48,39,"_optionalChain"],[48,55,48,53],[48,56,48,54],[48,57,48,55,"pkg"],[48,60,48,58],[48,62,48,60],[48,70,48,68],[48,72,48,70,"_2"],[48,74,48,72],[48,78,48,76,"_2"],[48,80,48,78],[48,81,48,79,"native"],[48,87,48,85],[48,89,48,87],[48,105,48,103],[48,107,48,105,"_3"],[48,109,48,107],[48,113,48,111,"_3"],[48,115,48,113],[48,116,48,114,"Client"],[48,122,48,120],[48,123,48,121],[48,124,48,122],[48,127,48,125,"pkg"],[48,130,48,128],[48,131,48,129,"Client"],[48,137,48,135],[49,6,50,4],[49,10,50,8],[49,11,50,9,"Client"],[49,17,50,15],[49,19,50,17],[50,8,51,6],[50,9,51,7],[50,16,51,14,"__SENTRY_DEBUG__"],[50,32,51,30],[50,37,51,35],[50,48,51,46],[50,52,51,50,"__SENTRY_DEBUG__"],[50,68,51,66],[50,73,51,71,"utils"],[50,78,51,76],[50,79,51,77,"logger"],[50,85,51,83],[50,86,51,84,"error"],[50,91,51,89],[50,92,51,90],[50,157,51,155],[50,158,51,156],[51,8,52,6],[52,6,53,4],[54,6,55,4],[55,0,56,0],[56,0,57,0],[57,0,58,0],[58,0,59,0],[59,0,60,0],[60,0,61,0],[61,6,62,4,"utils"],[61,11,62,9],[61,12,62,10,"fill"],[61,16,62,14],[61,17,62,15,"Client"],[61,23,62,21],[61,24,62,22,"prototype"],[61,33,62,31],[61,35,62,33],[61,42,62,40],[61,44,62,42],[61,54,62,52,"orig"],[61,58,62,56],[61,60,62,58],[62,8,63,6],[62,15,63,13],[62,25,63,24,"config"],[62,31,63,30],[62,33,63,32,"values"],[62,39,63,38],[62,41,63,40,"callback"],[62,49,63,48],[62,51,63,50],[63,10,64,8],[63,16,64,14,"scope"],[63,21,64,19],[63,24,64,22,"getCurrentHub"],[63,37,64,35],[63,38,64,36],[63,39,64,37],[63,40,64,38,"getScope"],[63,48,64,46],[63,49,64,47],[63,50,64,48],[64,10,65,8],[64,16,65,14,"parentSpan"],[64,26,65,24],[64,29,65,27,"scope"],[64,34,65,32],[64,35,65,33,"getSpan"],[64,42,65,40],[64,43,65,41],[64,44,65,42],[65,10,67,8],[65,16,67,14,"data"],[65,20,67,18],[65,23,67,21],[66,12,68,10],[66,23,68,21],[66,25,68,23],[67,10,69,8],[67,11,69,9],[68,10,71,8],[68,14,71,12],[69,12,72,10],[69,16,72,14],[69,20,72,18],[69,21,72,19,"database"],[69,29,72,27],[69,31,72,29],[70,14,73,12,"data"],[70,18,73,16],[70,19,73,17],[70,28,73,26],[70,29,73,27],[70,32,73,30],[70,36,73,34],[70,37,73,35,"database"],[70,45,73,43],[71,12,74,10],[72,12,75,10],[72,16,75,14],[72,20,75,18],[72,21,75,19,"host"],[72,25,75,23],[72,27,75,25],[73,14,76,12,"data"],[73,18,76,16],[73,19,76,17],[73,35,76,33],[73,36,76,34],[73,39,76,37],[73,43,76,41],[73,44,76,42,"host"],[73,48,76,46],[74,12,77,10],[75,12,78,10],[75,16,78,14],[75,20,78,18],[75,21,78,19,"port"],[75,25,78,23],[75,27,78,25],[76,14,79,12,"data"],[76,18,79,16],[76,19,79,17],[76,32,79,30],[76,33,79,31],[76,36,79,34],[76,40,79,38],[76,41,79,39,"port"],[76,45,79,43],[77,12,80,10],[78,12,81,10],[78,16,81,14],[78,20,81,18],[78,21,81,19,"user"],[78,25,81,23],[78,27,81,25],[79,14,82,12,"data"],[79,18,82,16],[79,19,82,17],[79,28,82,26],[79,29,82,27],[79,32,82,30],[79,36,82,34],[79,37,82,35,"user"],[79,41,82,39],[80,12,83,10],[81,10,84,8],[81,11,84,9],[81,12,84,10],[81,19,84,17,"e"],[81,20,84,18],[81,22,84,20],[82,12,85,10],[83,10,85,10],[84,10,88,8],[84,16,88,14,"span"],[84,20,88,18],[84,23,88,21,"_optionalChain"],[84,37,88,35],[84,38,88,36],[84,39,88,37,"parentSpan"],[84,49,88,47],[84,51,88,49],[84,67,88,65],[84,69,88,67,"_4"],[84,71,88,69],[84,75,88,73,"_4"],[84,77,88,75],[84,78,88,76,"startChild"],[84,88,88,86],[84,90,88,88],[84,96,88,94],[84,98,88,96,"_5"],[84,100,88,98],[84,104,88,102,"_5"],[84,106,88,104],[84,107,88,105],[85,12,89,10,"description"],[85,23,89,21],[85,25,89,23],[85,32,89,30,"config"],[85,38,89,36],[85,43,89,41],[85,51,89,49],[85,54,89,52,"config"],[85,60,89,58],[85,63,89,62,"config"],[85,69,89,68],[85,70,89,71,"text"],[85,74,89,75],[86,12,90,10,"op"],[86,14,90,12],[86,16,90,14],[86,20,90,18],[87,12,91,10,"origin"],[87,18,91,16],[87,20,91,18],[87,38,91,36],[88,12,92,10,"data"],[89,10,93,8],[89,11,93,9],[89,12,93,10],[89,13,93,11],[89,14,93,12],[90,10,95,8],[90,14,95,12],[90,21,95,19,"callback"],[90,29,95,27],[90,34,95,32],[90,44,95,42],[90,46,95,44],[91,12,96,10],[91,19,96,17,"orig"],[91,23,96,21],[91,24,96,22,"call"],[91,28,96,26],[91,29,96,27],[91,33,96,31],[91,35,96,33,"config"],[91,41,96,39],[91,43,96,41,"values"],[91,49,96,47],[91,51,96,49],[91,61,96,59,"err"],[91,64,96,62],[91,66,96,64,"result"],[91,72,96,70],[91,74,96,72],[92,14,97,12,"_optionalChain"],[92,28,97,26],[92,29,97,27],[92,30,97,28,"span"],[92,34,97,32],[92,36,97,34],[92,52,97,50],[92,54,97,52,"_6"],[92,56,97,54],[92,60,97,58,"_6"],[92,62,97,60],[92,63,97,61,"finish"],[92,69,97,67],[92,71,97,69],[92,77,97,75],[92,79,97,77,"_7"],[92,81,97,79],[92,85,97,83,"_7"],[92,87,97,85],[92,88,97,86],[92,89,97,87],[92,90,97,88],[92,91,97,89],[93,14,98,12,"callback"],[93,22,98,20],[93,23,98,21,"err"],[93,26,98,24],[93,28,98,26,"result"],[93,34,98,32],[93,35,98,33],[94,12,99,10],[94,13,99,11],[94,14,99,12],[95,10,100,8],[96,10,102,8],[96,14,102,12],[96,21,102,19,"values"],[96,27,102,25],[96,32,102,30],[96,42,102,40],[96,44,102,42],[97,12,103,10],[97,19,103,17,"orig"],[97,23,103,21],[97,24,103,22,"call"],[97,28,103,26],[97,29,103,27],[97,33,103,31],[97,35,103,33,"config"],[97,41,103,39],[97,43,103,41],[97,53,103,51,"err"],[97,56,103,54],[97,58,103,56,"result"],[97,64,103,62],[97,66,103,64],[98,14,104,12,"_optionalChain"],[98,28,104,26],[98,29,104,27],[98,30,104,28,"span"],[98,34,104,32],[98,36,104,34],[98,52,104,50],[98,54,104,52,"_8"],[98,56,104,54],[98,60,104,58,"_8"],[98,62,104,60],[98,63,104,61,"finish"],[98,69,104,67],[98,71,104,69],[98,77,104,75],[98,79,104,77,"_9"],[98,81,104,79],[98,85,104,83,"_9"],[98,87,104,85],[98,88,104,86],[98,89,104,87],[98,90,104,88],[98,91,104,89],[99,14,105,12,"values"],[99,20,105,18],[99,21,105,19,"err"],[99,24,105,22],[99,26,105,24,"result"],[99,32,105,30],[99,33,105,31],[100,12,106,10],[100,13,106,11],[100,14,106,12],[101,10,107,8],[102,10,109,8],[102,16,109,14,"rv"],[102,18,109,16],[102,21,109,19],[102,28,109,26,"values"],[102,34,109,32],[102,39,109,37],[102,50,109,48],[102,53,109,51,"orig"],[102,57,109,55],[102,58,109,56,"call"],[102,62,109,60],[102,63,109,61],[102,67,109,65],[102,69,109,67,"config"],[102,75,109,73],[102,77,109,75,"values"],[102,83,109,81],[102,84,109,82],[102,87,109,85,"orig"],[102,91,109,89],[102,92,109,90,"call"],[102,96,109,94],[102,97,109,95],[102,101,109,99],[102,103,109,101,"config"],[102,109,109,107],[102,110,109,108],[103,10,111,8],[103,14,111,12,"utils"],[103,19,111,17],[103,20,111,18,"isThenable"],[103,30,111,28],[103,31,111,29,"rv"],[103,33,111,31],[103,34,111,32],[103,36,111,34],[104,12,112,10],[104,19,112,17,"rv"],[104,21,112,19],[104,22,112,20,"then"],[104,26,112,24],[104,27,112,26,"res"],[104,30,112,29],[104,34,112,34],[105,14,113,12,"_optionalChain"],[105,28,113,26],[105,29,113,27],[105,30,113,28,"span"],[105,34,113,32],[105,36,113,34],[105,52,113,50],[105,54,113,52,"_10"],[105,57,113,55],[105,61,113,59,"_10"],[105,64,113,62],[105,65,113,63,"finish"],[105,71,113,69],[105,73,113,71],[105,79,113,77],[105,81,113,79,"_11"],[105,84,113,82],[105,88,113,86,"_11"],[105,91,113,89],[105,92,113,90],[105,93,113,91],[105,94,113,92],[105,95,113,93],[106,14,114,12],[106,21,114,19,"res"],[106,24,114,22],[107,12,115,10],[107,13,115,11],[107,14,115,12],[108,10,116,8],[109,10,118,8,"_optionalChain"],[109,24,118,22],[109,25,118,23],[109,26,118,24,"span"],[109,30,118,28],[109,32,118,30],[109,48,118,46],[109,50,118,48,"_12"],[109,53,118,51],[109,57,118,55,"_12"],[109,60,118,58],[109,61,118,59,"finish"],[109,67,118,65],[109,69,118,67],[109,75,118,73],[109,77,118,75,"_13"],[109,80,118,78],[109,84,118,82,"_13"],[109,87,118,85],[109,88,118,86],[109,89,118,87],[109,90,118,88],[109,91,118,89],[110,10,119,8],[110,17,119,15,"rv"],[110,19,119,17],[111,8,120,6],[111,9,120,7],[112,6,121,4],[112,7,121,5],[112,8,121,6],[113,4,122,2],[114,2,123,0],[115,2,123,1,"Postgres"],[115,10,123,9],[115,11,123,10,"__initStatic"],[115,23,123,22],[115,24,123,23],[115,25,123,24],[116,2,125,0,"exports"],[116,9,125,7],[116,10,125,8,"Postgres"],[116,18,125,16],[116,21,125,19,"Postgres"],[116,29,125,27],[117,0,125,28],[117,3]],"functionMap":{"names":["<global>","Postgres","Postgres.__initStatic","Postgres#constructor","Postgres#loadDependency","Postgres#setupOnce","<anonymous>","utils.fill$argument_2","orig.call$argument_3","orig.call$argument_2","rv.then$argument_0"],"mappings":"AAA;ACU;GCI,6CD;GEM;GFI;GGG;GHE;GIK;sECa,eD,oBC,eD;0CEc;aDC;iDEiC;oDFC,eE,UF,UE;WFE;yCGI;oDHC,eG,UH,UG;WHE;yBIM;oDJC,iBI,UJ,YI;WJE;OCK;KFC;GJC;CDC"},"hasCjsExports":true},"type":"js/module"}]}