{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":559},"end":{"line":16,"column":33,"index":592}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../lib/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":593},"end":{"line":17,"column":71,"index":664}}],"key":"cGGbCGri3M695PzY+v7ylQ+Rxt0=","exportNames":["*"],"imports":1}},{"name":"../lib/entitlements/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":665},"end":{"line":26,"column":35,"index":901}}],"key":"W08TkULB6K5ayFSZK0DQ51a7f14=","exportNames":["*"],"imports":1}},{"name":"../lib/entitlements/legacy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":27,"column":0,"index":902},"end":{"line":31,"column":36,"index":1011}}],"key":"+rKOnoh7xdxUkJQypQ3SMN7jDOc=","exportNames":["*"],"imports":1}},{"name":"../lib/api","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":50,"column":22,"index":1763},"end":{"line":50,"column":42,"index":1783}}],"key":"qv6pIAfHV5HK/E8UlfJgciwW1c8=","exportNames":["*"],"imports":1}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":50,"column":16,"index":1757},"end":{"line":50,"column":42,"index":1783}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}},{"name":"./gameStore","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":60,"column":29,"index":2077},"end":{"line":60,"column":51,"index":2099}},{"start":{"line":70,"column":29,"index":2355},"end":{"line":70,"column":51,"index":2377}}],"key":"EF/vkdn/m34t6a9iVJBbEsaZi+A=","exportNames":["*"],"imports":2}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useEntitlementStore\", {\n    enumerable: true,\n    get: function () {\n      return useEntitlementStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _libStorage = require(_dependencyMap[1], \"../lib/storage\");\n  var _libEntitlementsTypes = require(_dependencyMap[2], \"../lib/entitlements/types\");\n  var _libEntitlementsLegacy = require(_dependencyMap[3], \"../lib/entitlements/legacy\");\n  /**\n   * Entitlement Store - Server Truth Model\n   * \n   * STRICT INVARIANTS:\n   * - Store NEVER grants entitlements - only server can grant\n   * - Store caches server snapshots for UX (offline/fast reads)\n   * - All reads go through gating helpers, not direct store access\n   * - Refresh from server on: startup, post-purchase, manual, gate (stale check)\n   * \n   * PHASE 3.10 - TTL DISCIPLINE:\n   * - Staleness uses server_time (not device time) \n   * - ensureFreshEntitlements() is the canonical refresh entry point\n   * - Fast reads from cache, disciplined refresh on gates\n   */\n\n  // Debug logging helpers\n  const dlog = (...args) => {\n    if (__DEV__) console.log(...args);\n  };\n  const STORAGE_KEY = '@idledevotion/entitlements/v4';\n  const LEGACY_STORAGE_KEY = '@idledevotion/entitlements/v3';\n\n  // Default TTL if server doesn't provide one (5 minutes)\n  const DEFAULT_TTL_SECONDS = 300;\n  // Minimum TTL to prevent runaway refreshes (30 seconds)\n  const MIN_TTL_SECONDS = 30;\n  // Maximum TTL to ensure eventual consistency (1 hour)\n  const MAX_TTL_SECONDS = 3600;\n\n  // API import (lazy to avoid circular deps at module load)\n  let _getEntitlementsSnapshot = null;\n  async function getEntitlementsSnapshotApi() {\n    if (!_getEntitlementsSnapshot) {\n      const api = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[4], _dependencyMap.paths, \"../lib/api\");\n      _getEntitlementsSnapshot = api.getEntitlementsSnapshot;\n    }\n    return _getEntitlementsSnapshot();\n  }\n\n  // Lazy import for gameStore to avoid circular deps\n  let _getAuthEpoch = null;\n  function getAuthEpoch() {\n    if (!_getAuthEpoch) {\n      const {\n        useGameStore\n      } = require(_dependencyMap[6], \"./gameStore\");\n      _getAuthEpoch = () => useGameStore.getState().authEpoch;\n    }\n    return _getAuthEpoch();\n  }\n\n  // Lazy import to check if user is logged in\n  let _getUser = null;\n  function getUser() {\n    if (!_getUser) {\n      const {\n        useGameStore\n      } = require(_dependencyMap[6], \"./gameStore\");\n      _getUser = () => useGameStore.getState().user;\n    }\n    return _getUser();\n  }\n  const useEntitlementStore = (0, _zustand.create)((set, get) => ({\n    snapshot: null,\n    entitlementsByKey: (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n    lastRefreshAt: null,\n    isRefreshing: false,\n    refreshError: null,\n    entitlementEpoch: 0,\n    // Bumped on clear() to invalidate in-flight requests\n\n    /**\n     * Hydrate from cached snapshot on app startup\n     * Does NOT grant - only restores last known server state\n     */\n    hydrateEntitlements: async () => {\n      dlog('[entitlementStore] Hydrating from cache...');\n      try {\n        // Try to load cached snapshot\n        const cached = await (0, _libStorage.storageGet)(STORAGE_KEY);\n        if (cached) {\n          const parsed = JSON.parse(cached);\n          const normalized = Object.assign({}, (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(), parsed.entitlements);\n          set({\n            snapshot: parsed,\n            entitlementsByKey: normalized\n          });\n          dlog('[entitlementStore] Hydrated from cache:', Object.keys(normalized).length, 'keys');\n        }\n\n        // Migrate legacy data if present\n        await migrateLegacyData(set, get);\n      } catch (e) {\n        console.error('[entitlementStore] Hydration error:', e);\n      }\n    },\n    /**\n     * Refresh entitlements from server\n     * This is the ONLY way to get authoritative entitlement state\n     * \n     * Phase 3.10: Also checks global authEpoch for cross-store invalidation\n     */\n    refreshFromServer: async reason => {\n      if (get().isRefreshing) {\n        dlog('[entitlementStore] Already refreshing, skipping');\n        return;\n      }\n      const epochAtStart = get().entitlementEpoch;\n      const authEpochAtStart = getAuthEpoch(); // Global auth epoch for cross-store check\n\n      dlog('[entitlementStore] Refreshing from server, reason:', reason);\n      set({\n        isRefreshing: true,\n        refreshError: null\n      });\n      try {\n        const snap = await getEntitlementsSnapshotApi();\n\n        // Epoch check: ignore late response if clear() was called (logout)\n        if (get().entitlementEpoch !== epochAtStart) {\n          dlog('[entitlementStore] Local epoch mismatch - discarding stale response');\n          set({\n            isRefreshing: false\n          });\n          return;\n        }\n\n        // Global auth epoch check: ignore if user logged out during request\n        if (getAuthEpoch() !== authEpochAtStart) {\n          dlog('[entitlementStore] Auth epoch mismatch - discarding stale response');\n          set({\n            isRefreshing: false\n          });\n          return;\n        }\n\n        // Strict normalization: fill missing keys as not_owned\n        const normalized = Object.assign({}, (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(), snap.entitlements);\n        set({\n          snapshot: snap,\n          entitlementsByKey: normalized,\n          lastRefreshAt: Date.now(),\n          isRefreshing: false\n        });\n\n        // Persist for offline cache\n        await (0, _libStorage.storageSet)(STORAGE_KEY, JSON.stringify(snap));\n        dlog('[entitlementStore] Refreshed from server:', snap.version);\n      } catch (e) {\n        // Epoch check before setting error state\n        if (get().entitlementEpoch !== epochAtStart || getAuthEpoch() !== authEpochAtStart) {\n          dlog('[entitlementStore] Epoch mismatch in error handler - discarding');\n          set({\n            isRefreshing: false\n          });\n          return;\n        }\n        const errorMsg = e?.response?.data?.detail || e?.message || 'Failed to refresh entitlements';\n        console.error('[entitlementStore] Refresh error:', errorMsg);\n        set({\n          isRefreshing: false,\n          refreshError: errorMsg\n        });\n      }\n    },\n    /**\n     * Apply a snapshot directly (used by purchase verify flow)\n     * Skips network call - uses snapshot returned from verify endpoint\n     */\n    applySnapshot: snap => {\n      dlog('[entitlementStore] Applying snapshot directly, version:', snap.version);\n\n      // Strict normalization\n      const normalized = Object.assign({}, (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(), snap.entitlements);\n      set({\n        snapshot: snap,\n        entitlementsByKey: normalized,\n        lastRefreshAt: Date.now(),\n        refreshError: null\n      });\n\n      // Persist for offline cache\n      (0, _libStorage.storageSet)(STORAGE_KEY, JSON.stringify(snap)).catch(() => {});\n    },\n    /**\n     * Phase 3.10: Check if cached entitlements are stale\n     * Uses SERVER time (not device time) for staleness calculation\n     * \n     * Stale if: server_now > server_time + ttl_seconds\n     */\n    isStale: () => {\n      const {\n        snapshot\n      } = get();\n\n      // No snapshot = stale (need to fetch)\n      if (!snapshot) return true;\n\n      // Get server time and TTL from snapshot\n      const serverTimeStr = snapshot.server_time;\n      const ttlSeconds = snapshot.ttl_seconds ?? DEFAULT_TTL_SECONDS;\n\n      // Clamp TTL to reasonable bounds\n      const clampedTtl = Math.max(MIN_TTL_SECONDS, Math.min(MAX_TTL_SECONDS, ttlSeconds));\n      if (!serverTimeStr) {\n        // No server time in snapshot - fall back to device time check\n        const {\n          lastRefreshAt\n        } = get();\n        if (!lastRefreshAt) return true;\n        const deviceNow = Date.now();\n        return deviceNow > lastRefreshAt + clampedTtl * 1000;\n      }\n\n      // Parse server time\n      const serverTime = new Date(serverTimeStr).getTime();\n      if (isNaN(serverTime)) {\n        dlog('[entitlementStore] Invalid server_time in snapshot, treating as stale');\n        return true;\n      }\n\n      // Estimate current server time (server_time + time_since_refresh)\n      const {\n        lastRefreshAt\n      } = get();\n      const timeSinceRefresh = lastRefreshAt ? Date.now() - lastRefreshAt : 0;\n      const estimatedServerNow = serverTime + timeSinceRefresh;\n\n      // Stale if estimated server time exceeds expiry\n      const expiresAt = serverTime + clampedTtl * 1000;\n      const isStale = estimatedServerNow > expiresAt;\n      if (__DEV__ && isStale) {\n        dlog('[entitlementStore] Cache is stale:', {\n          serverTime: new Date(serverTime).toISOString(),\n          estimatedServerNow: new Date(estimatedServerNow).toISOString(),\n          expiresAt: new Date(expiresAt).toISOString(),\n          ttlSeconds: clampedTtl\n        });\n      }\n      return isStale;\n    },\n    /**\n     * Phase 3.10: Canonical refresh entry point\n     * \n     * Use this at premium gates instead of direct refreshFromServer calls.\n     * Fire-and-forget for non-blocking UX, or await for blocking checks.\n     * \n     * Rules:\n     * - If no user logged in → no-op\n     * - If already refreshing → no-op (dedup)\n     * - If not stale → no-op\n     * - If stale → trigger refresh\n     */\n    ensureFreshEntitlements: async reason => {\n      // No user = no entitlements to refresh\n      const user = getUser();\n      if (!user) {\n        dlog('[entitlementStore] ensureFresh: no user, skipping');\n        return;\n      }\n\n      // Already refreshing = dedup\n      if (get().isRefreshing) {\n        dlog('[entitlementStore] ensureFresh: already refreshing, skipping');\n        return;\n      }\n\n      // Not stale = no-op\n      if (!get().isStale()) {\n        dlog('[entitlementStore] ensureFresh: cache is fresh, skipping');\n        return;\n      }\n      dlog('[entitlementStore] ensureFresh: cache stale, refreshing for', reason);\n      await get().refreshFromServer(reason);\n    },\n    /**\n     * Clear all entitlement state (on logout)\n     * Bumps epoch to invalidate any in-flight requests\n     */\n    clear: () => {\n      dlog('[entitlementStore] Clearing state');\n      set(s => ({\n        snapshot: null,\n        entitlementsByKey: (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n        lastRefreshAt: null,\n        refreshError: null,\n        entitlementEpoch: s.entitlementEpoch + 1 // Bump to invalidate in-flight requests\n      }));\n      (0, _libStorage.storageRemove)(STORAGE_KEY).catch(() => {});\n    },\n    /**\n     * Check if user has entitlement (internal use)\n     * Screens should use gating helpers instead\n     */\n    hasEntitlement: key => {\n      const {\n        entitlementsByKey,\n        snapshot\n      } = get();\n      const entitlement = entitlementsByKey[key];\n      if (!entitlement || entitlement.status !== 'owned') return false;\n\n      // Check expiry using server time\n      if (entitlement.expires_at && snapshot?.server_time) {\n        const expiresAt = new Date(entitlement.expires_at).getTime();\n        const serverNow = new Date(snapshot.server_time).getTime();\n        if (serverNow > expiresAt) return false;\n      }\n      return true;\n    },\n    // ═══════════════════════════════════════════════════════════\n    // DEV ONLY METHODS - For testing paywalls/features\n    // These should NEVER be called in production code paths\n    // ═══════════════════════════════════════════════════════════\n\n    devGrantEntitlement: key => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] devGrantEntitlement called in production - BLOCKED');\n        return;\n      }\n      const {\n        entitlementsByKey\n      } = get();\n      const updated = Object.assign({}, entitlementsByKey, {\n        [key]: {\n          key,\n          status: 'owned',\n          granted_at: new Date().toISOString(),\n          reason: 'admin'\n        }\n      });\n\n      // Create fake snapshot for dev\n      const fakeSnapshot = {\n        server_time: new Date().toISOString(),\n        version: Date.now(),\n        username: 'DEV_USER',\n        entitlements: updated,\n        source: 'database'\n      };\n      set({\n        entitlementsByKey: updated,\n        snapshot: fakeSnapshot\n      });\n      dlog('[entitlementStore] DEV: Granted', key);\n    },\n    devRevokeEntitlement: key => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] devRevokeEntitlement called in production - BLOCKED');\n        return;\n      }\n      const {\n        entitlementsByKey\n      } = get();\n      const updated = Object.assign({}, entitlementsByKey, {\n        [key]: {\n          key,\n          status: 'not_owned'\n        }\n      });\n      set({\n        entitlementsByKey: updated\n      });\n      dlog('[entitlementStore] DEV: Revoked', key);\n    },\n    devClearAll: () => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] devClearAll called in production - BLOCKED');\n        return;\n      }\n      set({\n        entitlementsByKey: (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n        snapshot: null\n      });\n      (0, _libStorage.storageRemove)(STORAGE_KEY).catch(() => {});\n      dlog('[entitlementStore] DEV: Cleared all entitlements');\n    }\n  }));\n\n  /**\n   * Migrate legacy entitlement data to new format\n   */\n  async function migrateLegacyData(set, get) {\n    try {\n      const legacyData = await (0, _libStorage.storageGet)(LEGACY_STORAGE_KEY);\n      if (!legacyData) return;\n      dlog('[entitlementStore] Migrating legacy data...');\n      const legacy = JSON.parse(legacyData);\n      const {\n        entitlementsByKey\n      } = get();\n      const updated = Object.assign({}, entitlementsByKey);\n\n      // Migrate each legacy key\n      for (const [oldKey, value] of Object.entries(legacy)) {\n        if (value) {\n          const newKey = (0, _libEntitlementsLegacy.migrateLegacyKey)(oldKey);\n          updated[newKey] = {\n            key: newKey,\n            status: 'owned',\n            granted_at: new Date().toISOString(),\n            reason: 'unknown'\n          };\n          dlog('[entitlementStore] Migrated:', oldKey, '->', newKey);\n        }\n      }\n      set({\n        entitlementsByKey: updated\n      });\n\n      // Remove legacy data after migration\n      await (0, _libStorage.storageRemove)(LEGACY_STORAGE_KEY);\n      dlog('[entitlementStore] Legacy migration complete');\n    } catch (e) {\n      console.error('[entitlementStore] Legacy migration error:', e);\n    }\n  }\n});","lineCount":434,"map":[[7,2,112,0,"Object"],[7,8,112,0],[7,9,112,0,"defineProperty"],[7,23,112,0],[7,24,112,0,"exports"],[7,31,112,0],[8,4,112,0,"enumerable"],[8,14,112,0],[9,4,112,0,"get"],[9,7,112,0],[9,18,112,0,"get"],[9,19,112,0],[10,6,112,0],[10,13,112,0,"useEntitlementStore"],[10,32,112,0],[11,4,112,0],[12,2,112,0],[13,2,16,0],[13,6,16,0,"_zustand"],[13,14,16,0],[13,17,16,0,"require"],[13,24,16,0],[13,25,16,0,"_dependencyMap"],[13,39,16,0],[14,2,17,0],[14,6,17,0,"_libStorage"],[14,17,17,0],[14,20,17,0,"require"],[14,27,17,0],[14,28,17,0,"_dependencyMap"],[14,42,17,0],[15,2,18,0],[15,6,18,0,"_libEntitlementsTypes"],[15,27,18,0],[15,30,18,0,"require"],[15,37,18,0],[15,38,18,0,"_dependencyMap"],[15,52,18,0],[16,2,27,0],[16,6,27,0,"_libEntitlementsLegacy"],[16,28,27,0],[16,31,27,0,"require"],[16,38,27,0],[16,39,27,0,"_dependencyMap"],[16,53,27,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,0,10,0],[27,0,11,0],[28,0,12,0],[29,0,13,0],[30,0,14,0],[32,2,33,0],[33,2,34,0],[33,8,34,6,"dlog"],[33,12,34,10],[33,15,34,13,"dlog"],[33,16,34,14],[33,19,34,17,"args"],[33,23,34,28],[33,28,34,33],[34,4,34,35],[34,8,34,39,"__DEV__"],[34,15,34,46],[34,17,34,48,"console"],[34,24,34,55],[34,25,34,56,"log"],[34,28,34,59],[34,29,34,60],[34,32,34,63,"args"],[34,36,34,67],[34,37,34,68],[35,2,34,70],[35,3,34,71],[36,2,36,0],[36,8,36,6,"STORAGE_KEY"],[36,19,36,17],[36,22,36,20],[36,53,36,51],[37,2,37,0],[37,8,37,6,"LEGACY_STORAGE_KEY"],[37,26,37,24],[37,29,37,27],[37,60,37,58],[39,2,39,0],[40,2,40,0],[40,8,40,6,"DEFAULT_TTL_SECONDS"],[40,27,40,25],[40,30,40,28],[40,33,40,31],[41,2,41,0],[42,2,42,0],[42,8,42,6,"MIN_TTL_SECONDS"],[42,23,42,21],[42,26,42,24],[42,28,42,26],[43,2,43,0],[44,2,44,0],[44,8,44,6,"MAX_TTL_SECONDS"],[44,23,44,21],[44,26,44,24],[44,30,44,28],[46,2,46,0],[47,2,47,0],[47,6,47,4,"_getEntitlementsSnapshot"],[47,30,47,74],[47,33,47,77],[47,37,47,81],[48,2,48,0],[48,17,48,15,"getEntitlementsSnapshotApi"],[48,43,48,41,"getEntitlementsSnapshotApi"],[48,44,48,41],[48,46,48,75],[49,4,49,2],[49,8,49,6],[49,9,49,7,"_getEntitlementsSnapshot"],[49,33,49,31],[49,35,49,33],[50,6,50,4],[50,12,50,10,"api"],[50,15,50,13],[50,18,50,16],[50,24,50,16,"require"],[50,31,50,16],[50,32,50,16,"_dependencyMap"],[50,46,50,16],[50,89,50,16,"_dependencyMap"],[50,103,50,16],[50,108,50,16,"_dependencyMap"],[50,122,50,16],[50,123,50,16,"paths"],[50,128,50,16],[50,143,50,42],[51,6,51,4,"_getEntitlementsSnapshot"],[51,30,51,28],[51,33,51,31,"api"],[51,36,51,34],[51,37,51,35,"getEntitlementsSnapshot"],[51,60,51,58],[52,4,52,2],[53,4,53,2],[53,11,53,9,"_getEntitlementsSnapshot"],[53,35,53,33],[53,36,53,34],[53,37,53,35],[54,2,54,0],[56,2,56,0],[57,2,57,0],[57,6,57,4,"_getAuthEpoch"],[57,19,57,40],[57,22,57,43],[57,26,57,47],[58,2,58,0],[58,11,58,9,"getAuthEpoch"],[58,23,58,21,"getAuthEpoch"],[58,24,58,21],[58,26,58,32],[59,4,59,2],[59,8,59,6],[59,9,59,7,"_getAuthEpoch"],[59,22,59,20],[59,24,59,22],[60,6,60,4],[60,12,60,10],[61,8,60,12,"useGameStore"],[62,6,60,25],[62,7,60,26],[62,10,60,29,"require"],[62,17,60,36],[62,18,60,36,"_dependencyMap"],[62,32,60,36],[62,50,60,50],[62,51,60,51],[63,6,61,4,"_getAuthEpoch"],[63,19,61,17],[63,22,61,20,"_getAuthEpoch"],[63,23,61,20],[63,28,61,26,"useGameStore"],[63,40,61,38],[63,41,61,39,"getState"],[63,49,61,47],[63,50,61,48],[63,51,61,49],[63,52,61,50,"authEpoch"],[63,61,61,59],[64,4,62,2],[65,4,63,2],[65,11,63,9,"_getAuthEpoch"],[65,24,63,22],[65,25,63,23],[65,26,63,24],[66,2,64,0],[68,2,66,0],[69,2,67,0],[69,6,67,4,"_getUser"],[69,14,67,32],[69,17,67,35],[69,21,67,39],[70,2,68,0],[70,11,68,9,"getUser"],[70,18,68,16,"getUser"],[70,19,68,16],[70,21,68,24],[71,4,69,2],[71,8,69,6],[71,9,69,7,"_getUser"],[71,17,69,15],[71,19,69,17],[72,6,70,4],[72,12,70,10],[73,8,70,12,"useGameStore"],[74,6,70,25],[74,7,70,26],[74,10,70,29,"require"],[74,17,70,36],[74,18,70,36,"_dependencyMap"],[74,32,70,36],[74,50,70,50],[74,51,70,51],[75,6,71,4,"_getUser"],[75,14,71,12],[75,17,71,15,"_getUser"],[75,18,71,15],[75,23,71,21,"useGameStore"],[75,35,71,33],[75,36,71,34,"getState"],[75,44,71,42],[75,45,71,43],[75,46,71,44],[75,47,71,45,"user"],[75,51,71,49],[76,4,72,2],[77,4,73,2],[77,11,73,9,"_getUser"],[77,19,73,17],[77,20,73,18],[77,21,73,19],[78,2,74,0],[79,2,112,7],[79,8,112,13,"useEntitlementStore"],[79,27,112,32],[79,30,112,35],[79,34,112,35,"create"],[79,42,112,41],[79,43,112,41,"create"],[79,49,112,41],[79,51,112,65],[79,52,112,66,"set"],[79,55,112,69],[79,57,112,71,"get"],[79,60,112,74],[79,66,112,80],[80,4,113,2,"snapshot"],[80,12,113,10],[80,14,113,12],[80,18,113,16],[81,4,114,2,"entitlementsByKey"],[81,21,114,19],[81,23,114,21],[81,27,114,21,"createEmptyEntitlementsMap"],[81,48,114,47],[81,49,114,47,"createEmptyEntitlementsMap"],[81,75,114,47],[81,77,114,48],[81,78,114,49],[82,4,115,2,"lastRefreshAt"],[82,17,115,15],[82,19,115,17],[82,23,115,21],[83,4,116,2,"isRefreshing"],[83,16,116,14],[83,18,116,16],[83,23,116,21],[84,4,117,2,"refreshError"],[84,16,117,14],[84,18,117,16],[84,22,117,20],[85,4,118,2,"entitlementEpoch"],[85,20,118,18],[85,22,118,20],[85,23,118,21],[86,4,118,24],[88,4,120,2],[89,0,121,0],[90,0,122,0],[91,0,123,0],[92,4,124,2,"hydrateEntitlements"],[92,23,124,21],[92,25,124,23],[92,31,124,23,"hydrateEntitlements"],[92,32,124,23],[92,37,124,35],[93,6,125,4,"dlog"],[93,10,125,8],[93,11,125,9],[93,55,125,53],[93,56,125,54],[94,6,127,4],[94,10,127,8],[95,8,128,6],[96,8,129,6],[96,14,129,12,"cached"],[96,20,129,18],[96,23,129,21],[96,29,129,27],[96,33,129,27,"storageGet"],[96,44,129,37],[96,45,129,37,"storageGet"],[96,55,129,37],[96,57,129,38,"STORAGE_KEY"],[96,68,129,49],[96,69,129,50],[97,8,130,6],[97,12,130,10,"cached"],[97,18,130,16],[97,20,130,18],[98,10,131,8],[98,16,131,14,"parsed"],[98,22,131,20],[98,25,131,23,"JSON"],[98,29,131,27],[98,30,131,28,"parse"],[98,35,131,33],[98,36,131,34,"cached"],[98,42,131,40],[98,43,131,65],[99,10,132,8],[99,16,132,14,"normalized"],[99,26,132,24],[99,29,132,24,"Object"],[99,35,132,24],[99,36,132,24,"assign"],[99,42,132,24],[99,47,132,32],[99,51,132,32,"createEmptyEntitlementsMap"],[99,72,132,58],[99,73,132,58,"createEmptyEntitlementsMap"],[99,99,132,58],[99,101,132,59],[99,102,132,60],[99,104,132,65,"parsed"],[99,110,132,71],[99,111,132,72,"entitlements"],[99,123,132,84],[99,124,132,86],[100,10,133,8,"set"],[100,13,133,11],[100,14,133,12],[101,12,134,10,"snapshot"],[101,20,134,18],[101,22,134,20,"parsed"],[101,28,134,26],[102,12,135,10,"entitlementsByKey"],[102,29,135,27],[102,31,135,29,"normalized"],[103,10,136,8],[103,11,136,9],[103,12,136,10],[104,10,137,8,"dlog"],[104,14,137,12],[104,15,137,13],[104,56,137,54],[104,58,137,56,"Object"],[104,64,137,62],[104,65,137,63,"keys"],[104,69,137,67],[104,70,137,68,"normalized"],[104,80,137,78],[104,81,137,79],[104,82,137,80,"length"],[104,88,137,86],[104,90,137,88],[104,96,137,94],[104,97,137,95],[105,8,138,6],[107,8,140,6],[108,8,141,6],[108,14,141,12,"migrateLegacyData"],[108,31,141,29],[108,32,141,30,"set"],[108,35,141,33],[108,37,141,35,"get"],[108,40,141,38],[108,41,141,39],[109,6,143,4],[109,7,143,5],[109,8,143,6],[109,15,143,13,"e"],[109,16,143,14],[109,18,143,16],[110,8,144,6,"console"],[110,15,144,13],[110,16,144,14,"error"],[110,21,144,19],[110,22,144,20],[110,59,144,57],[110,61,144,59,"e"],[110,62,144,60],[110,63,144,61],[111,6,145,4],[112,4,146,2],[112,5,146,3],[113,4,148,2],[114,0,149,0],[115,0,150,0],[116,0,151,0],[117,0,152,0],[118,0,153,0],[119,4,154,2,"refreshFromServer"],[119,21,154,19],[119,23,154,21],[119,29,154,28,"reason"],[119,35,154,34],[119,39,154,39],[120,6,155,4],[120,10,155,8,"get"],[120,13,155,11],[120,14,155,12],[120,15,155,13],[120,16,155,14,"isRefreshing"],[120,28,155,26],[120,30,155,28],[121,8,156,6,"dlog"],[121,12,156,10],[121,13,156,11],[121,62,156,60],[121,63,156,61],[122,8,157,6],[123,6,158,4],[124,6,160,4],[124,12,160,10,"epochAtStart"],[124,24,160,22],[124,27,160,25,"get"],[124,30,160,28],[124,31,160,29],[124,32,160,30],[124,33,160,31,"entitlementEpoch"],[124,49,160,47],[125,6,161,4],[125,12,161,10,"authEpochAtStart"],[125,28,161,26],[125,31,161,29,"getAuthEpoch"],[125,43,161,41],[125,44,161,42],[125,45,161,43],[125,46,161,44],[125,47,161,46],[127,6,163,4,"dlog"],[127,10,163,8],[127,11,163,9],[127,63,163,61],[127,65,163,63,"reason"],[127,71,163,69],[127,72,163,70],[128,6,164,4,"set"],[128,9,164,7],[128,10,164,8],[129,8,164,10,"isRefreshing"],[129,20,164,22],[129,22,164,24],[129,26,164,28],[130,8,164,30,"refreshError"],[130,20,164,42],[130,22,164,44],[131,6,164,49],[131,7,164,50],[131,8,164,51],[132,6,166,4],[132,10,166,8],[133,8,167,6],[133,14,167,12,"snap"],[133,18,167,16],[133,21,167,19],[133,27,167,25,"getEntitlementsSnapshotApi"],[133,53,167,51],[133,54,167,52],[133,55,167,53],[135,8,169,6],[136,8,170,6],[136,12,170,10,"get"],[136,15,170,13],[136,16,170,14],[136,17,170,15],[136,18,170,16,"entitlementEpoch"],[136,34,170,32],[136,39,170,37,"epochAtStart"],[136,51,170,49],[136,53,170,51],[137,10,171,8,"dlog"],[137,14,171,12],[137,15,171,13],[137,84,171,82],[137,85,171,83],[138,10,172,8,"set"],[138,13,172,11],[138,14,172,12],[139,12,172,14,"isRefreshing"],[139,24,172,26],[139,26,172,28],[140,10,172,34],[140,11,172,35],[140,12,172,36],[141,10,173,8],[142,8,174,6],[144,8,176,6],[145,8,177,6],[145,12,177,10,"getAuthEpoch"],[145,24,177,22],[145,25,177,23],[145,26,177,24],[145,31,177,29,"authEpochAtStart"],[145,47,177,45],[145,49,177,47],[146,10,178,8,"dlog"],[146,14,178,12],[146,15,178,13],[146,83,178,81],[146,84,178,82],[147,10,179,8,"set"],[147,13,179,11],[147,14,179,12],[148,12,179,14,"isRefreshing"],[148,24,179,26],[148,26,179,28],[149,10,179,34],[149,11,179,35],[149,12,179,36],[150,10,180,8],[151,8,181,6],[153,8,183,6],[154,8,184,6],[154,14,184,12,"normalized"],[154,24,184,22],[154,27,184,22,"Object"],[154,33,184,22],[154,34,184,22,"assign"],[154,40,184,22],[154,45,184,30],[154,49,184,30,"createEmptyEntitlementsMap"],[154,70,184,56],[154,71,184,56,"createEmptyEntitlementsMap"],[154,97,184,56],[154,99,184,57],[154,100,184,58],[154,102,184,63,"snap"],[154,106,184,67],[154,107,184,68,"entitlements"],[154,119,184,80],[154,120,184,82],[155,8,186,6,"set"],[155,11,186,9],[155,12,186,10],[156,10,187,8,"snapshot"],[156,18,187,16],[156,20,187,18,"snap"],[156,24,187,22],[157,10,188,8,"entitlementsByKey"],[157,27,188,25],[157,29,188,27,"normalized"],[157,39,188,37],[158,10,189,8,"lastRefreshAt"],[158,23,189,21],[158,25,189,23,"Date"],[158,29,189,27],[158,30,189,28,"now"],[158,33,189,31],[158,34,189,32],[158,35,189,33],[159,10,190,8,"isRefreshing"],[159,22,190,20],[159,24,190,22],[160,8,191,6],[160,9,191,7],[160,10,191,8],[162,8,193,6],[163,8,194,6],[163,14,194,12],[163,18,194,12,"storageSet"],[163,29,194,22],[163,30,194,22,"storageSet"],[163,40,194,22],[163,42,194,23,"STORAGE_KEY"],[163,53,194,34],[163,55,194,36,"JSON"],[163,59,194,40],[163,60,194,41,"stringify"],[163,69,194,50],[163,70,194,51,"snap"],[163,74,194,55],[163,75,194,56],[163,76,194,57],[164,8,196,6,"dlog"],[164,12,196,10],[164,13,196,11],[164,56,196,54],[164,58,196,56,"snap"],[164,62,196,60],[164,63,196,61,"version"],[164,70,196,68],[164,71,196,69],[165,6,198,4],[165,7,198,5],[165,8,198,6],[165,15,198,13,"e"],[165,16,198,19],[165,18,198,21],[166,8,199,6],[167,8,200,6],[167,12,200,10,"get"],[167,15,200,13],[167,16,200,14],[167,17,200,15],[167,18,200,16,"entitlementEpoch"],[167,34,200,32],[167,39,200,37,"epochAtStart"],[167,51,200,49],[167,55,200,53,"getAuthEpoch"],[167,67,200,65],[167,68,200,66],[167,69,200,67],[167,74,200,72,"authEpochAtStart"],[167,90,200,88],[167,92,200,90],[168,10,201,8,"dlog"],[168,14,201,12],[168,15,201,13],[168,80,201,78],[168,81,201,79],[169,10,202,8,"set"],[169,13,202,11],[169,14,202,12],[170,12,202,14,"isRefreshing"],[170,24,202,26],[170,26,202,28],[171,10,202,34],[171,11,202,35],[171,12,202,36],[172,10,203,8],[173,8,204,6],[174,8,206,6],[174,14,206,12,"errorMsg"],[174,22,206,20],[174,25,206,23,"e"],[174,26,206,24],[174,28,206,26,"response"],[174,36,206,34],[174,38,206,36,"data"],[174,42,206,40],[174,44,206,42,"detail"],[174,50,206,48],[174,54,206,52,"e"],[174,55,206,53],[174,57,206,55,"message"],[174,64,206,62],[174,68,206,66],[174,100,206,98],[175,8,207,6,"console"],[175,15,207,13],[175,16,207,14,"error"],[175,21,207,19],[175,22,207,20],[175,57,207,55],[175,59,207,57,"errorMsg"],[175,67,207,65],[175,68,207,66],[176,8,208,6,"set"],[176,11,208,9],[176,12,208,10],[177,10,209,8,"isRefreshing"],[177,22,209,20],[177,24,209,22],[177,29,209,27],[178,10,210,8,"refreshError"],[178,22,210,20],[178,24,210,22,"errorMsg"],[179,8,211,6],[179,9,211,7],[179,10,211,8],[180,6,212,4],[181,4,213,2],[181,5,213,3],[182,4,215,2],[183,0,216,0],[184,0,217,0],[185,0,218,0],[186,4,219,2,"applySnapshot"],[186,17,219,15],[186,19,219,18,"snap"],[186,23,219,44],[186,27,219,49],[187,6,220,4,"dlog"],[187,10,220,8],[187,11,220,9],[187,68,220,66],[187,70,220,68,"snap"],[187,74,220,72],[187,75,220,73,"version"],[187,82,220,80],[187,83,220,81],[189,6,222,4],[190,6,223,4],[190,12,223,10,"normalized"],[190,22,223,20],[190,25,223,20,"Object"],[190,31,223,20],[190,32,223,20,"assign"],[190,38,223,20],[190,43,223,28],[190,47,223,28,"createEmptyEntitlementsMap"],[190,68,223,54],[190,69,223,54,"createEmptyEntitlementsMap"],[190,95,223,54],[190,97,223,55],[190,98,223,56],[190,100,223,61,"snap"],[190,104,223,65],[190,105,223,66,"entitlements"],[190,117,223,78],[190,118,223,80],[191,6,225,4,"set"],[191,9,225,7],[191,10,225,8],[192,8,226,6,"snapshot"],[192,16,226,14],[192,18,226,16,"snap"],[192,22,226,20],[193,8,227,6,"entitlementsByKey"],[193,25,227,23],[193,27,227,25,"normalized"],[193,37,227,35],[194,8,228,6,"lastRefreshAt"],[194,21,228,19],[194,23,228,21,"Date"],[194,27,228,25],[194,28,228,26,"now"],[194,31,228,29],[194,32,228,30],[194,33,228,31],[195,8,229,6,"refreshError"],[195,20,229,18],[195,22,229,20],[196,6,230,4],[196,7,230,5],[196,8,230,6],[198,6,232,4],[199,6,233,4],[199,10,233,4,"storageSet"],[199,21,233,14],[199,22,233,14,"storageSet"],[199,32,233,14],[199,34,233,15,"STORAGE_KEY"],[199,45,233,26],[199,47,233,28,"JSON"],[199,51,233,32],[199,52,233,33,"stringify"],[199,61,233,42],[199,62,233,43,"snap"],[199,66,233,47],[199,67,233,48],[199,68,233,49],[199,69,233,50,"catch"],[199,74,233,55],[199,75,233,56],[199,81,233,62],[199,82,233,63],[199,83,233,64],[199,84,233,65],[200,4,234,2],[200,5,234,3],[201,4,236,2],[202,0,237,0],[203,0,238,0],[204,0,239,0],[205,0,240,0],[206,0,241,0],[207,4,242,2,"isStale"],[207,11,242,9],[207,13,242,11,"isStale"],[207,14,242,11],[207,19,242,17],[208,6,243,4],[208,12,243,10],[209,8,243,12,"snapshot"],[210,6,243,21],[210,7,243,22],[210,10,243,25,"get"],[210,13,243,28],[210,14,243,29],[210,15,243,30],[212,6,245,4],[213,6,246,4],[213,10,246,8],[213,11,246,9,"snapshot"],[213,19,246,17],[213,21,246,19],[213,28,246,26],[213,32,246,30],[215,6,248,4],[216,6,249,4],[216,12,249,10,"serverTimeStr"],[216,25,249,23],[216,28,249,26,"snapshot"],[216,36,249,34],[216,37,249,35,"server_time"],[216,48,249,46],[217,6,250,4],[217,12,250,10,"ttlSeconds"],[217,22,250,20],[217,25,250,23,"snapshot"],[217,33,250,31],[217,34,250,32,"ttl_seconds"],[217,45,250,43],[217,49,250,47,"DEFAULT_TTL_SECONDS"],[217,68,250,66],[219,6,252,4],[220,6,253,4],[220,12,253,10,"clampedTtl"],[220,22,253,20],[220,25,253,23,"Math"],[220,29,253,27],[220,30,253,28,"max"],[220,33,253,31],[220,34,253,32,"MIN_TTL_SECONDS"],[220,49,253,47],[220,51,253,49,"Math"],[220,55,253,53],[220,56,253,54,"min"],[220,59,253,57],[220,60,253,58,"MAX_TTL_SECONDS"],[220,75,253,73],[220,77,253,75,"ttlSeconds"],[220,87,253,85],[220,88,253,86],[220,89,253,87],[221,6,255,4],[221,10,255,8],[221,11,255,9,"serverTimeStr"],[221,24,255,22],[221,26,255,24],[222,8,256,6],[223,8,257,6],[223,14,257,12],[224,10,257,14,"lastRefreshAt"],[225,8,257,28],[225,9,257,29],[225,12,257,32,"get"],[225,15,257,35],[225,16,257,36],[225,17,257,37],[226,8,258,6],[226,12,258,10],[226,13,258,11,"lastRefreshAt"],[226,26,258,24],[226,28,258,26],[226,35,258,33],[226,39,258,37],[227,8,259,6],[227,14,259,12,"deviceNow"],[227,23,259,21],[227,26,259,24,"Date"],[227,30,259,28],[227,31,259,29,"now"],[227,34,259,32],[227,35,259,33],[227,36,259,34],[228,8,260,6],[228,15,260,13,"deviceNow"],[228,24,260,22],[228,27,260,25,"lastRefreshAt"],[228,40,260,38],[228,43,260,42,"clampedTtl"],[228,53,260,52],[228,56,260,55],[228,60,260,60],[229,6,261,4],[231,6,263,4],[232,6,264,4],[232,12,264,10,"serverTime"],[232,22,264,20],[232,25,264,23],[232,29,264,27,"Date"],[232,33,264,31],[232,34,264,32,"serverTimeStr"],[232,47,264,45],[232,48,264,46],[232,49,264,47,"getTime"],[232,56,264,54],[232,57,264,55],[232,58,264,56],[233,6,265,4],[233,10,265,8,"isNaN"],[233,15,265,13],[233,16,265,14,"serverTime"],[233,26,265,24],[233,27,265,25],[233,29,265,27],[234,8,266,6,"dlog"],[234,12,266,10],[234,13,266,11],[234,84,266,82],[234,85,266,83],[235,8,267,6],[235,15,267,13],[235,19,267,17],[236,6,268,4],[238,6,270,4],[239,6,271,4],[239,12,271,10],[240,8,271,12,"lastRefreshAt"],[241,6,271,26],[241,7,271,27],[241,10,271,30,"get"],[241,13,271,33],[241,14,271,34],[241,15,271,35],[242,6,272,4],[242,12,272,10,"timeSinceRefresh"],[242,28,272,26],[242,31,272,29,"lastRefreshAt"],[242,44,272,42],[242,47,272,45,"Date"],[242,51,272,49],[242,52,272,50,"now"],[242,55,272,53],[242,56,272,54],[242,57,272,55],[242,60,272,58,"lastRefreshAt"],[242,73,272,71],[242,76,272,74],[242,77,272,75],[243,6,273,4],[243,12,273,10,"estimatedServerNow"],[243,30,273,28],[243,33,273,31,"serverTime"],[243,43,273,41],[243,46,273,44,"timeSinceRefresh"],[243,62,273,60],[245,6,275,4],[246,6,276,4],[246,12,276,10,"expiresAt"],[246,21,276,19],[246,24,276,22,"serverTime"],[246,34,276,32],[246,37,276,36,"clampedTtl"],[246,47,276,46],[246,50,276,49],[246,54,276,54],[247,6,277,4],[247,12,277,10,"isStale"],[247,19,277,17],[247,22,277,20,"estimatedServerNow"],[247,40,277,38],[247,43,277,41,"expiresAt"],[247,52,277,50],[248,6,279,4],[248,10,279,8,"__DEV__"],[248,17,279,15],[248,21,279,19,"isStale"],[248,28,279,26],[248,30,279,28],[249,8,280,6,"dlog"],[249,12,280,10],[249,13,280,11],[249,49,280,47],[249,51,280,49],[250,10,281,8,"serverTime"],[250,20,281,18],[250,22,281,20],[250,26,281,24,"Date"],[250,30,281,28],[250,31,281,29,"serverTime"],[250,41,281,39],[250,42,281,40],[250,43,281,41,"toISOString"],[250,54,281,52],[250,55,281,53],[250,56,281,54],[251,10,282,8,"estimatedServerNow"],[251,28,282,26],[251,30,282,28],[251,34,282,32,"Date"],[251,38,282,36],[251,39,282,37,"estimatedServerNow"],[251,57,282,55],[251,58,282,56],[251,59,282,57,"toISOString"],[251,70,282,68],[251,71,282,69],[251,72,282,70],[252,10,283,8,"expiresAt"],[252,19,283,17],[252,21,283,19],[252,25,283,23,"Date"],[252,29,283,27],[252,30,283,28,"expiresAt"],[252,39,283,37],[252,40,283,38],[252,41,283,39,"toISOString"],[252,52,283,50],[252,53,283,51],[252,54,283,52],[253,10,284,8,"ttlSeconds"],[253,20,284,18],[253,22,284,20,"clampedTtl"],[254,8,285,6],[254,9,285,7],[254,10,285,8],[255,6,286,4],[256,6,288,4],[256,13,288,11,"isStale"],[256,20,288,18],[257,4,289,2],[257,5,289,3],[258,4,291,2],[259,0,292,0],[260,0,293,0],[261,0,294,0],[262,0,295,0],[263,0,296,0],[264,0,297,0],[265,0,298,0],[266,0,299,0],[267,0,300,0],[268,0,301,0],[269,0,302,0],[270,4,303,2,"ensureFreshEntitlements"],[270,27,303,25],[270,29,303,27],[270,35,303,34,"reason"],[270,41,303,55],[270,45,303,60],[271,6,304,4],[272,6,305,4],[272,12,305,10,"user"],[272,16,305,14],[272,19,305,17,"getUser"],[272,26,305,24],[272,27,305,25],[272,28,305,26],[273,6,306,4],[273,10,306,8],[273,11,306,9,"user"],[273,15,306,13],[273,17,306,15],[274,8,307,6,"dlog"],[274,12,307,10],[274,13,307,11],[274,64,307,62],[274,65,307,63],[275,8,308,6],[276,6,309,4],[278,6,311,4],[279,6,312,4],[279,10,312,8,"get"],[279,13,312,11],[279,14,312,12],[279,15,312,13],[279,16,312,14,"isRefreshing"],[279,28,312,26],[279,30,312,28],[280,8,313,6,"dlog"],[280,12,313,10],[280,13,313,11],[280,75,313,73],[280,76,313,74],[281,8,314,6],[282,6,315,4],[284,6,317,4],[285,6,318,4],[285,10,318,8],[285,11,318,9,"get"],[285,14,318,12],[285,15,318,13],[285,16,318,14],[285,17,318,15,"isStale"],[285,24,318,22],[285,25,318,23],[285,26,318,24],[285,28,318,26],[286,8,319,6,"dlog"],[286,12,319,10],[286,13,319,11],[286,71,319,69],[286,72,319,70],[287,8,320,6],[288,6,321,4],[289,6,323,4,"dlog"],[289,10,323,8],[289,11,323,9],[289,72,323,70],[289,74,323,72,"reason"],[289,80,323,78],[289,81,323,79],[290,6,324,4],[290,12,324,10,"get"],[290,15,324,13],[290,16,324,14],[290,17,324,15],[290,18,324,16,"refreshFromServer"],[290,35,324,33],[290,36,324,34,"reason"],[290,42,324,40],[290,43,324,41],[291,4,325,2],[291,5,325,3],[292,4,327,2],[293,0,328,0],[294,0,329,0],[295,0,330,0],[296,4,331,2,"clear"],[296,9,331,7],[296,11,331,9,"clear"],[296,12,331,9],[296,17,331,15],[297,6,332,4,"dlog"],[297,10,332,8],[297,11,332,9],[297,46,332,44],[297,47,332,45],[298,6,333,4,"set"],[298,9,333,7],[298,10,333,9,"s"],[298,11,333,10],[298,16,333,16],[299,8,334,6,"snapshot"],[299,16,334,14],[299,18,334,16],[299,22,334,20],[300,8,335,6,"entitlementsByKey"],[300,25,335,23],[300,27,335,25],[300,31,335,25,"createEmptyEntitlementsMap"],[300,52,335,51],[300,53,335,51,"createEmptyEntitlementsMap"],[300,79,335,51],[300,81,335,52],[300,82,335,53],[301,8,336,6,"lastRefreshAt"],[301,21,336,19],[301,23,336,21],[301,27,336,25],[302,8,337,6,"refreshError"],[302,20,337,18],[302,22,337,20],[302,26,337,24],[303,8,338,6,"entitlementEpoch"],[303,24,338,22],[303,26,338,24,"s"],[303,27,338,25],[303,28,338,26,"entitlementEpoch"],[303,44,338,42],[303,47,338,45],[303,48,338,46],[303,49,338,49],[304,6,339,4],[304,7,339,5],[304,8,339,6],[304,9,339,7],[305,6,340,4],[305,10,340,4,"storageRemove"],[305,21,340,17],[305,22,340,17,"storageRemove"],[305,35,340,17],[305,37,340,18,"STORAGE_KEY"],[305,48,340,29],[305,49,340,30],[305,50,340,31,"catch"],[305,55,340,36],[305,56,340,37],[305,62,340,43],[305,63,340,44],[305,64,340,45],[305,65,340,46],[306,4,341,2],[306,5,341,3],[307,4,343,2],[308,0,344,0],[309,0,345,0],[310,0,346,0],[311,4,347,2,"hasEntitlement"],[311,18,347,16],[311,20,347,19,"key"],[311,23,347,30],[311,27,347,35],[312,6,348,4],[312,12,348,10],[313,8,348,12,"entitlementsByKey"],[313,25,348,29],[314,8,348,31,"snapshot"],[315,6,348,40],[315,7,348,41],[315,10,348,44,"get"],[315,13,348,47],[315,14,348,48],[315,15,348,49],[316,6,349,4],[316,12,349,10,"entitlement"],[316,23,349,21],[316,26,349,24,"entitlementsByKey"],[316,43,349,41],[316,44,349,42,"key"],[316,47,349,45],[316,48,349,46],[317,6,350,4],[317,10,350,8],[317,11,350,9,"entitlement"],[317,22,350,20],[317,26,350,24,"entitlement"],[317,37,350,35],[317,38,350,36,"status"],[317,44,350,42],[317,49,350,47],[317,56,350,54],[317,58,350,56],[317,65,350,63],[317,70,350,68],[319,6,352,4],[320,6,353,4],[320,10,353,8,"entitlement"],[320,21,353,19],[320,22,353,20,"expires_at"],[320,32,353,30],[320,36,353,34,"snapshot"],[320,44,353,42],[320,46,353,44,"server_time"],[320,57,353,55],[320,59,353,57],[321,8,354,6],[321,14,354,12,"expiresAt"],[321,23,354,21],[321,26,354,24],[321,30,354,28,"Date"],[321,34,354,32],[321,35,354,33,"entitlement"],[321,46,354,44],[321,47,354,45,"expires_at"],[321,57,354,55],[321,58,354,56],[321,59,354,57,"getTime"],[321,66,354,64],[321,67,354,65],[321,68,354,66],[322,8,355,6],[322,14,355,12,"serverNow"],[322,23,355,21],[322,26,355,24],[322,30,355,28,"Date"],[322,34,355,32],[322,35,355,33,"snapshot"],[322,43,355,41],[322,44,355,42,"server_time"],[322,55,355,53],[322,56,355,54],[322,57,355,55,"getTime"],[322,64,355,62],[322,65,355,63],[322,66,355,64],[323,8,356,6],[323,12,356,10,"serverNow"],[323,21,356,19],[323,24,356,22,"expiresAt"],[323,33,356,31],[323,35,356,33],[323,42,356,40],[323,47,356,45],[324,6,357,4],[325,6,359,4],[325,13,359,11],[325,17,359,15],[326,4,360,2],[326,5,360,3],[327,4,362,2],[328,4,363,2],[329,4,364,2],[330,4,365,2],[332,4,367,2,"devGrantEntitlement"],[332,23,367,21],[332,25,367,24,"key"],[332,28,367,35],[332,32,367,40],[333,6,368,4],[333,10,368,8],[333,11,368,9,"__DEV__"],[333,18,368,16],[333,20,368,18],[334,8,369,6,"console"],[334,15,369,13],[334,16,369,14,"warn"],[334,20,369,18],[334,21,369,19],[334,92,369,90],[334,93,369,91],[335,8,370,6],[336,6,371,4],[337,6,373,4],[337,12,373,10],[338,8,373,12,"entitlementsByKey"],[339,6,373,30],[339,7,373,31],[339,10,373,34,"get"],[339,13,373,37],[339,14,373,38],[339,15,373,39],[340,6,374,4],[340,12,374,10,"updated"],[340,19,374,17],[340,22,374,17,"Object"],[340,28,374,17],[340,29,374,17,"assign"],[340,35,374,17],[340,40,375,9,"entitlementsByKey"],[340,57,375,26],[341,8,376,6],[341,9,376,7,"key"],[341,12,376,10],[341,15,376,13],[342,10,377,8,"key"],[342,13,377,11],[343,10,378,8,"status"],[343,16,378,14],[343,18,378,16],[343,25,378,32],[344,10,379,8,"granted_at"],[344,20,379,18],[344,22,379,20],[344,26,379,24,"Date"],[344,30,379,28],[344,31,379,29],[344,32,379,30],[344,33,379,31,"toISOString"],[344,44,379,42],[344,45,379,43],[344,46,379,44],[345,10,380,8,"reason"],[345,16,380,14],[345,18,380,16],[346,8,381,6],[347,6,381,7],[347,8,382,5],[349,6,384,4],[350,6,385,4],[350,12,385,10,"fakeSnapshot"],[350,24,385,44],[350,27,385,47],[351,8,386,6,"server_time"],[351,19,386,17],[351,21,386,19],[351,25,386,23,"Date"],[351,29,386,27],[351,30,386,28],[351,31,386,29],[351,32,386,30,"toISOString"],[351,43,386,41],[351,44,386,42],[351,45,386,43],[352,8,387,6,"version"],[352,15,387,13],[352,17,387,15,"Date"],[352,21,387,19],[352,22,387,20,"now"],[352,25,387,23],[352,26,387,24],[352,27,387,25],[353,8,388,6,"username"],[353,16,388,14],[353,18,388,16],[353,28,388,26],[354,8,389,6,"entitlements"],[354,20,389,18],[354,22,389,20,"updated"],[354,29,389,27],[355,8,390,6,"source"],[355,14,390,12],[355,16,390,14],[356,6,391,4],[356,7,391,5],[357,6,393,4,"set"],[357,9,393,7],[357,10,393,8],[358,8,394,6,"entitlementsByKey"],[358,25,394,23],[358,27,394,25,"updated"],[358,34,394,32],[359,8,395,6,"snapshot"],[359,16,395,14],[359,18,395,16,"fakeSnapshot"],[360,6,396,4],[360,7,396,5],[360,8,396,6],[361,6,397,4,"dlog"],[361,10,397,8],[361,11,397,9],[361,44,397,42],[361,46,397,44,"key"],[361,49,397,47],[361,50,397,48],[362,4,398,2],[362,5,398,3],[363,4,400,2,"devRevokeEntitlement"],[363,24,400,22],[363,26,400,25,"key"],[363,29,400,36],[363,33,400,41],[364,6,401,4],[364,10,401,8],[364,11,401,9,"__DEV__"],[364,18,401,16],[364,20,401,18],[365,8,402,6,"console"],[365,15,402,13],[365,16,402,14,"warn"],[365,20,402,18],[365,21,402,19],[365,93,402,91],[365,94,402,92],[366,8,403,6],[367,6,404,4],[368,6,406,4],[368,12,406,10],[369,8,406,12,"entitlementsByKey"],[370,6,406,30],[370,7,406,31],[370,10,406,34,"get"],[370,13,406,37],[370,14,406,38],[370,15,406,39],[371,6,407,4],[371,12,407,10,"updated"],[371,19,407,17],[371,22,407,17,"Object"],[371,28,407,17],[371,29,407,17,"assign"],[371,35,407,17],[371,40,408,9,"entitlementsByKey"],[371,57,408,26],[372,8,409,6],[372,9,409,7,"key"],[372,12,409,10],[372,15,409,13],[373,10,410,8,"key"],[373,13,410,11],[374,10,411,8,"status"],[374,16,411,14],[374,18,411,16],[375,8,412,6],[376,6,412,7],[376,8,413,5],[377,6,415,4,"set"],[377,9,415,7],[377,10,415,8],[378,8,415,10,"entitlementsByKey"],[378,25,415,27],[378,27,415,29,"updated"],[379,6,415,37],[379,7,415,38],[379,8,415,39],[380,6,416,4,"dlog"],[380,10,416,8],[380,11,416,9],[380,44,416,42],[380,46,416,44,"key"],[380,49,416,47],[380,50,416,48],[381,4,417,2],[381,5,417,3],[382,4,419,2,"devClearAll"],[382,15,419,13],[382,17,419,15,"devClearAll"],[382,18,419,15],[382,23,419,21],[383,6,420,4],[383,10,420,8],[383,11,420,9,"__DEV__"],[383,18,420,16],[383,20,420,18],[384,8,421,6,"console"],[384,15,421,13],[384,16,421,14,"warn"],[384,20,421,18],[384,21,421,19],[384,84,421,82],[384,85,421,83],[385,8,422,6],[386,6,423,4],[387,6,425,4,"set"],[387,9,425,7],[387,10,425,8],[388,8,426,6,"entitlementsByKey"],[388,25,426,23],[388,27,426,25],[388,31,426,25,"createEmptyEntitlementsMap"],[388,52,426,51],[388,53,426,51,"createEmptyEntitlementsMap"],[388,79,426,51],[388,81,426,52],[388,82,426,53],[389,8,427,6,"snapshot"],[389,16,427,14],[389,18,427,16],[390,6,428,4],[390,7,428,5],[390,8,428,6],[391,6,429,4],[391,10,429,4,"storageRemove"],[391,21,429,17],[391,22,429,17,"storageRemove"],[391,35,429,17],[391,37,429,18,"STORAGE_KEY"],[391,48,429,29],[391,49,429,30],[391,50,429,31,"catch"],[391,55,429,36],[391,56,429,37],[391,62,429,43],[391,63,429,44],[391,64,429,45],[391,65,429,46],[392,6,430,4,"dlog"],[392,10,430,8],[392,11,430,9],[392,61,430,59],[392,62,430,60],[393,4,431,2],[394,2,432,0],[394,3,432,1],[394,4,432,2],[394,5,432,3],[396,2,434,0],[397,0,435,0],[398,0,436,0],[399,2,437,0],[399,17,437,15,"migrateLegacyData"],[399,34,437,32,"migrateLegacyData"],[399,35,438,2,"set"],[399,38,438,54],[399,40,439,2,"get"],[399,43,439,34],[399,45,440,2],[400,4,441,2],[400,8,441,6],[401,6,442,4],[401,12,442,10,"legacyData"],[401,22,442,20],[401,25,442,23],[401,31,442,29],[401,35,442,29,"storageGet"],[401,46,442,39],[401,47,442,39,"storageGet"],[401,57,442,39],[401,59,442,40,"LEGACY_STORAGE_KEY"],[401,77,442,58],[401,78,442,59],[402,6,443,4],[402,10,443,8],[402,11,443,9,"legacyData"],[402,21,443,19],[402,23,443,21],[403,6,445,4,"dlog"],[403,10,445,8],[403,11,445,9],[403,56,445,54],[403,57,445,55],[404,6,447,4],[404,12,447,10,"legacy"],[404,18,447,16],[404,21,447,19,"JSON"],[404,25,447,23],[404,26,447,24,"parse"],[404,31,447,29],[404,32,447,30,"legacyData"],[404,42,447,40],[404,43,447,41],[405,6,448,4],[405,12,448,10],[406,8,448,12,"entitlementsByKey"],[407,6,448,30],[407,7,448,31],[407,10,448,34,"get"],[407,13,448,37],[407,14,448,38],[407,15,448,39],[408,6,449,4],[408,12,449,10,"updated"],[408,19,449,17],[408,22,449,17,"Object"],[408,28,449,17],[408,29,449,17,"assign"],[408,35,449,17],[408,40,449,25,"entitlementsByKey"],[408,57,449,42],[408,58,449,44],[410,6,451,4],[411,6,452,4],[411,11,452,9],[411,17,452,15],[411,18,452,16,"oldKey"],[411,24,452,22],[411,26,452,24,"value"],[411,31,452,29],[411,32,452,30],[411,36,452,34,"Object"],[411,42,452,40],[411,43,452,41,"entries"],[411,50,452,48],[411,51,452,49,"legacy"],[411,57,452,55],[411,58,452,56],[411,60,452,58],[412,8,453,6],[412,12,453,10,"value"],[412,17,453,15],[412,19,453,17],[413,10,454,8],[413,16,454,14,"newKey"],[413,22,454,20],[413,25,454,23],[413,29,454,23,"migrateLegacyKey"],[413,51,454,39],[413,52,454,39,"migrateLegacyKey"],[413,68,454,39],[413,70,454,40,"oldKey"],[413,76,454,46],[413,77,454,47],[414,10,455,8,"updated"],[414,17,455,15],[414,18,455,16,"newKey"],[414,24,455,22],[414,25,455,23],[414,28,455,26],[415,12,456,10,"key"],[415,15,456,13],[415,17,456,15,"newKey"],[415,23,456,21],[416,12,457,10,"status"],[416,18,457,16],[416,20,457,18],[416,27,457,25],[417,12,458,10,"granted_at"],[417,22,458,20],[417,24,458,22],[417,28,458,26,"Date"],[417,32,458,30],[417,33,458,31],[417,34,458,32],[417,35,458,33,"toISOString"],[417,46,458,44],[417,47,458,45],[417,48,458,46],[418,12,459,10,"reason"],[418,18,459,16],[418,20,459,18],[419,10,460,8],[419,11,460,9],[420,10,461,8,"dlog"],[420,14,461,12],[420,15,461,13],[420,45,461,43],[420,47,461,45,"oldKey"],[420,53,461,51],[420,55,461,53],[420,59,461,57],[420,61,461,59,"newKey"],[420,67,461,65],[420,68,461,66],[421,8,462,6],[422,6,463,4],[423,6,465,4,"set"],[423,9,465,7],[423,10,465,8],[424,8,465,10,"entitlementsByKey"],[424,25,465,27],[424,27,465,29,"updated"],[425,6,465,37],[425,7,465,38],[425,8,465,39],[427,6,467,4],[428,6,468,4],[428,12,468,10],[428,16,468,10,"storageRemove"],[428,27,468,23],[428,28,468,23,"storageRemove"],[428,41,468,23],[428,43,468,24,"LEGACY_STORAGE_KEY"],[428,61,468,42],[428,62,468,43],[429,6,469,4,"dlog"],[429,10,469,8],[429,11,469,9],[429,57,469,55],[429,58,469,56],[430,4,471,2],[430,5,471,3],[430,6,471,4],[430,13,471,11,"e"],[430,14,471,12],[430,16,471,14],[431,6,472,4,"console"],[431,13,472,11],[431,14,472,12,"error"],[431,19,472,17],[431,20,472,18],[431,64,472,62],[431,66,472,64,"e"],[431,67,472,65],[431,68,472,66],[432,4,473,2],[433,2,474,0],[434,0,474,1],[434,3]],"functionMap":{"names":["<global>","dlog","getEntitlementsSnapshotApi","getAuthEpoch","_getAuthEpoch","getUser","_getUser","create$argument_0","hydrateEntitlements","refreshFromServer","applySnapshot","storageSet._catch$argument_0","isStale","ensureFreshEntitlements","clear","set$argument_0","storageRemove._catch$argument_0","hasEntitlement","devGrantEntitlement","devRevokeEntitlement","devClearAll","migrateLegacyData"],"mappings":"AAA;aCiC,0DD;AEc;CFM;AGI;oBCG,uCD;CHG;AKI;eCG,kCD;CLG;iEOsC;uBCY;GDsB;qBEQ;GF2D;iBGM;wDCc,QD;GHC;WKQ;GL+C;2BMc;GNsB;SOM;QCE;MDM;qCEC,QF;GPC;kBUM;GVa;uBWO;GX+B;wBYE;GZiB;eaE;qCJU,QI;GbE;EPC;AqBK;CrBqC"},"hasCjsExports":false},"type":"js/module"}]}