{"dependencies":[{"name":"./node.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":13,"index":77},"end":{"line":3,"column":33,"index":97}}],"key":"i0CEVblbl+Ewn+OoAZJmuV7+ezU=","exportNames":["*"],"imports":1}},{"name":"./worldwide.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":18,"index":117},"end":{"line":4,"column":43,"index":142}}],"key":"SrQUD3Ho0bI6Tzb2C+2O5n+17C0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const node = require(_dependencyMap[0], \"./node.js\");\n  const worldwide = require(_dependencyMap[1], \"./worldwide.js\");\n\n  // eslint-disable-next-line deprecation/deprecation\n  const WINDOW = worldwide.getGlobalObject();\n\n  /**\n   * An object that can return the current timestamp in seconds since the UNIX epoch.\n   */\n\n  /**\n   * A TimestampSource implementation for environments that do not support the Performance Web API natively.\n   *\n   * Note that this TimestampSource does not use a monotonic clock. A call to `nowSeconds` may return a timestamp earlier\n   * than a previously returned value. We do not try to emulate a monotonic behavior in order to facilitate debugging. It\n   * is more obvious to explain \"why does my span have negative duration\" than \"why my spans have zero duration\".\n   */\n  const dateTimestampSource = {\n    nowSeconds: () => Date.now() / 1000\n  };\n\n  /**\n   * A partial definition of the [Performance Web API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}\n   * for accessing a high-resolution monotonic clock.\n   */\n\n  /**\n   * Returns a wrapper around the native Performance API browser implementation, or undefined for browsers that do not\n   * support the API.\n   *\n   * Wrapping the native API works around differences in behavior from different browsers.\n   */\n  function getBrowserPerformance() {\n    const {\n      performance\n    } = WINDOW;\n    if (!performance || !performance.now) {\n      return undefined;\n    }\n\n    // Replace performance.timeOrigin with our own timeOrigin based on Date.now().\n    //\n    // This is a partial workaround for browsers reporting performance.timeOrigin such that performance.timeOrigin +\n    // performance.now() gives a date arbitrarily in the past.\n    //\n    // Additionally, computing timeOrigin in this way fills the gap for browsers where performance.timeOrigin is\n    // undefined.\n    //\n    // The assumption that performance.timeOrigin + performance.now() ~= Date.now() is flawed, but we depend on it to\n    // interact with data coming out of performance entries.\n    //\n    // Note that despite recommendations against it in the spec, browsers implement the Performance API with a clock that\n    // might stop when the computer is asleep (and perhaps under other circumstances). Such behavior causes\n    // performance.timeOrigin + performance.now() to have an arbitrary skew over Date.now(). In laptop computers, we have\n    // observed skews that can be as long as days, weeks or months.\n    //\n    // See https://github.com/getsentry/sentry-javascript/issues/2590.\n    //\n    // BUG: despite our best intentions, this workaround has its limitations. It mostly addresses timings of pageload\n    // transactions, but ignores the skew built up over time that can aversely affect timestamps of navigation\n    // transactions of long-lived web pages.\n    const timeOrigin = Date.now() - performance.now();\n    return {\n      now: () => performance.now(),\n      timeOrigin\n    };\n  }\n\n  /**\n   * Returns the native Performance API implementation from Node.js. Returns undefined in old Node.js versions that don't\n   * implement the API.\n   */\n  function getNodePerformance() {\n    try {\n      const perfHooks = node.dynamicRequire(module, 'perf_hooks');\n      return perfHooks.performance;\n    } catch (_) {\n      return undefined;\n    }\n  }\n\n  /**\n   * The Performance API implementation for the current platform, if available.\n   */\n  const platformPerformance = node.isNodeEnv() ? getNodePerformance() : getBrowserPerformance();\n  const timestampSource = platformPerformance === undefined ? dateTimestampSource : {\n    nowSeconds: () => (platformPerformance.timeOrigin + platformPerformance.now()) / 1000\n  };\n\n  /**\n   * Returns a timestamp in seconds since the UNIX epoch using the Date API.\n   */\n  const dateTimestampInSeconds = dateTimestampSource.nowSeconds.bind(dateTimestampSource);\n\n  /**\n   * Returns a timestamp in seconds since the UNIX epoch using either the Performance or Date APIs, depending on the\n   * availability of the Performance API.\n   *\n   * See `usingPerformanceAPI` to test whether the Performance API is used.\n   *\n   * BUG: Note that because of how browsers implement the Performance API, the clock might stop when the computer is\n   * asleep. This creates a skew between `dateTimestampInSeconds` and `timestampInSeconds`. The\n   * skew can grow to arbitrary amounts like days, weeks or months.\n   * See https://github.com/getsentry/sentry-javascript/issues/2590.\n   */\n  const timestampInSeconds = timestampSource.nowSeconds.bind(timestampSource);\n\n  /**\n   * Re-exported with an old name for backwards-compatibility.\n   * TODO (v8): Remove this\n   *\n   * @deprecated Use `timestampInSeconds` instead.\n   */\n  const timestampWithMs = timestampInSeconds;\n\n  /**\n   * A boolean that is true when timestampInSeconds uses the Performance API to produce monotonic timestamps.\n   */\n  const usingPerformanceAPI = platformPerformance !== undefined;\n\n  /**\n   * Internal helper to store what is the source of browserPerformanceTimeOrigin below. For debugging only.\n   */\n  exports._browserPerformanceTimeOriginMode = void 0;\n\n  /**\n   * The number of milliseconds since the UNIX epoch. This value is only usable in a browser, and only when the\n   * performance API is available.\n   */\n  const browserPerformanceTimeOrigin = (() => {\n    // Unfortunately browsers may report an inaccurate time origin data, through either performance.timeOrigin or\n    // performance.timing.navigationStart, which results in poor results in performance data. We only treat time origin\n    // data as reliable if they are within a reasonable threshold of the current time.\n\n    const {\n      performance\n    } = WINDOW;\n    if (!performance || !performance.now) {\n      exports._browserPerformanceTimeOriginMode = 'none';\n      return undefined;\n    }\n    const threshold = 3600 * 1000;\n    const performanceNow = performance.now();\n    const dateNow = Date.now();\n\n    // if timeOrigin isn't available set delta to threshold so it isn't used\n    const timeOriginDelta = performance.timeOrigin ? Math.abs(performance.timeOrigin + performanceNow - dateNow) : threshold;\n    const timeOriginIsReliable = timeOriginDelta < threshold;\n\n    // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin\n    // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.\n    // Also as of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always\n    // a valid fallback. In the absence of an initial time provided by the browser, fallback to the current time from the\n    // Date API.\n    // eslint-disable-next-line deprecation/deprecation\n    const navigationStart = performance.timing && performance.timing.navigationStart;\n    const hasNavigationStart = typeof navigationStart === 'number';\n    // if navigationStart isn't available set delta to threshold so it isn't used\n    const navigationStartDelta = hasNavigationStart ? Math.abs(navigationStart + performanceNow - dateNow) : threshold;\n    const navigationStartIsReliable = navigationStartDelta < threshold;\n    if (timeOriginIsReliable || navigationStartIsReliable) {\n      // Use the more reliable time origin\n      if (timeOriginDelta <= navigationStartDelta) {\n        exports._browserPerformanceTimeOriginMode = 'timeOrigin';\n        return performance.timeOrigin;\n      } else {\n        exports._browserPerformanceTimeOriginMode = 'navigationStart';\n        return navigationStart;\n      }\n    }\n\n    // Either both timeOrigin and navigationStart are skewed or neither is available, fallback to Date.\n    exports._browserPerformanceTimeOriginMode = 'dateNow';\n    return dateNow;\n  })();\n  exports.browserPerformanceTimeOrigin = browserPerformanceTimeOrigin;\n  exports.dateTimestampInSeconds = dateTimestampInSeconds;\n  exports.timestampInSeconds = timestampInSeconds;\n  exports.timestampWithMs = timestampWithMs;\n  exports.usingPerformanceAPI = usingPerformanceAPI;\n});","lineCount":185,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"node"],[5,12,3,10],[5,15,3,13,"require"],[5,22,3,20],[5,23,3,20,"_dependencyMap"],[5,37,3,20],[5,53,3,32],[5,54,3,33],[6,2,4,0],[6,8,4,6,"worldwide"],[6,17,4,15],[6,20,4,18,"require"],[6,27,4,25],[6,28,4,25,"_dependencyMap"],[6,42,4,25],[6,63,4,42],[6,64,4,43],[8,2,6,0],[9,2,7,0],[9,8,7,6,"WINDOW"],[9,14,7,12],[9,17,7,15,"worldwide"],[9,26,7,24],[9,27,7,25,"getGlobalObject"],[9,42,7,40],[9,43,7,41],[9,44,7,42],[11,2,9,0],[12,0,10,0],[13,0,11,0],[15,2,13,0],[16,0,14,0],[17,0,15,0],[18,0,16,0],[19,0,17,0],[20,0,18,0],[21,0,19,0],[22,2,20,0],[22,8,20,6,"dateTimestampSource"],[22,27,20,25],[22,30,20,28],[23,4,21,2,"nowSeconds"],[23,14,21,12],[23,16,21,14,"nowSeconds"],[23,17,21,14],[23,22,21,20,"Date"],[23,26,21,24],[23,27,21,25,"now"],[23,30,21,28],[23,31,21,29],[23,32,21,30],[23,35,21,33],[24,2,22,0],[24,3,22,1],[26,2,24,0],[27,0,25,0],[28,0,26,0],[29,0,27,0],[31,2,29,0],[32,0,30,0],[33,0,31,0],[34,0,32,0],[35,0,33,0],[36,0,34,0],[37,2,35,0],[37,11,35,9,"getBrowserPerformance"],[37,32,35,30,"getBrowserPerformance"],[37,33,35,30],[37,35,35,33],[38,4,36,2],[38,10,36,8],[39,6,36,10,"performance"],[40,4,36,22],[40,5,36,23],[40,8,36,26,"WINDOW"],[40,14,36,32],[41,4,37,2],[41,8,37,6],[41,9,37,7,"performance"],[41,20,37,18],[41,24,37,22],[41,25,37,23,"performance"],[41,36,37,34],[41,37,37,35,"now"],[41,40,37,38],[41,42,37,40],[42,6,38,4],[42,13,38,11,"undefined"],[42,22,38,20],[43,4,39,2],[45,4,41,2],[46,4,42,2],[47,4,43,2],[48,4,44,2],[49,4,45,2],[50,4,46,2],[51,4,47,2],[52,4,48,2],[53,4,49,2],[54,4,50,2],[55,4,51,2],[56,4,52,2],[57,4,53,2],[58,4,54,2],[59,4,55,2],[60,4,56,2],[61,4,57,2],[62,4,58,2],[63,4,59,2],[64,4,60,2],[65,4,61,2],[66,4,62,2],[66,10,62,8,"timeOrigin"],[66,20,62,18],[66,23,62,21,"Date"],[66,27,62,25],[66,28,62,26,"now"],[66,31,62,29],[66,32,62,30],[66,33,62,31],[66,36,62,34,"performance"],[66,47,62,45],[66,48,62,46,"now"],[66,51,62,49],[66,52,62,50],[66,53,62,51],[67,4,64,2],[67,11,64,9],[68,6,65,4,"now"],[68,9,65,7],[68,11,65,9,"now"],[68,12,65,9],[68,17,65,15,"performance"],[68,28,65,26],[68,29,65,27,"now"],[68,32,65,30],[68,33,65,31],[68,34,65,32],[69,6,66,4,"timeOrigin"],[70,4,67,2],[70,5,67,3],[71,2,68,0],[73,2,70,0],[74,0,71,0],[75,0,72,0],[76,0,73,0],[77,2,74,0],[77,11,74,9,"getNodePerformance"],[77,29,74,27,"getNodePerformance"],[77,30,74,27],[77,32,74,30],[78,4,75,2],[78,8,75,6],[79,6,76,4],[79,12,76,10,"perfHooks"],[79,21,76,19],[79,24,76,22,"node"],[79,28,76,26],[79,29,76,27,"dynamicRequire"],[79,43,76,41],[79,44,76,42,"module"],[79,50,76,48],[79,52,76,50],[79,64,76,62],[79,65,76,63],[80,6,77,4],[80,13,77,11,"perfHooks"],[80,22,77,20],[80,23,77,21,"performance"],[80,34,77,32],[81,4,78,2],[81,5,78,3],[81,6,78,4],[81,13,78,11,"_"],[81,14,78,12],[81,16,78,14],[82,6,79,4],[82,13,79,11,"undefined"],[82,22,79,20],[83,4,80,2],[84,2,81,0],[86,2,83,0],[87,0,84,0],[88,0,85,0],[89,2,86,0],[89,8,86,6,"platformPerformance"],[89,27,86,25],[89,30,86,28,"node"],[89,34,86,32],[89,35,86,33,"isNodeEnv"],[89,44,86,42],[89,45,86,43],[89,46,86,44],[89,49,86,47,"getNodePerformance"],[89,67,86,65],[89,68,86,66],[89,69,86,67],[89,72,86,70,"getBrowserPerformance"],[89,93,86,91],[89,94,86,92],[89,95,86,93],[90,2,88,0],[90,8,88,6,"timestampSource"],[90,23,88,21],[90,26,89,2,"platformPerformance"],[90,45,89,21],[90,50,89,26,"undefined"],[90,59,89,35],[90,62,90,6,"dateTimestampSource"],[90,81,90,25],[90,84,91,6],[91,4,92,8,"nowSeconds"],[91,14,92,18],[91,16,92,20,"nowSeconds"],[91,17,92,20],[91,22,92,26],[91,23,92,27,"platformPerformance"],[91,42,92,46],[91,43,92,47,"timeOrigin"],[91,53,92,57],[91,56,92,60,"platformPerformance"],[91,75,92,79],[91,76,92,80,"now"],[91,79,92,83],[91,80,92,84],[91,81,92,85],[91,85,92,89],[92,2,93,6],[92,3,93,7],[94,2,95,0],[95,0,96,0],[96,0,97,0],[97,2,98,0],[97,8,98,6,"dateTimestampInSeconds"],[97,30,98,28],[97,33,98,31,"dateTimestampSource"],[97,52,98,50],[97,53,98,51,"nowSeconds"],[97,63,98,61],[97,64,98,62,"bind"],[97,68,98,66],[97,69,98,67,"dateTimestampSource"],[97,88,98,86],[97,89,98,87],[99,2,100,0],[100,0,101,0],[101,0,102,0],[102,0,103,0],[103,0,104,0],[104,0,105,0],[105,0,106,0],[106,0,107,0],[107,0,108,0],[108,0,109,0],[109,0,110,0],[110,2,111,0],[110,8,111,6,"timestampInSeconds"],[110,26,111,24],[110,29,111,27,"timestampSource"],[110,44,111,42],[110,45,111,43,"nowSeconds"],[110,55,111,53],[110,56,111,54,"bind"],[110,60,111,58],[110,61,111,59,"timestampSource"],[110,76,111,74],[110,77,111,75],[112,2,113,0],[113,0,114,0],[114,0,115,0],[115,0,116,0],[116,0,117,0],[117,0,118,0],[118,2,119,0],[118,8,119,6,"timestampWithMs"],[118,23,119,21],[118,26,119,24,"timestampInSeconds"],[118,44,119,42],[120,2,121,0],[121,0,122,0],[122,0,123,0],[123,2,124,0],[123,8,124,6,"usingPerformanceAPI"],[123,27,124,25],[123,30,124,28,"platformPerformance"],[123,49,124,47],[123,54,124,52,"undefined"],[123,63,124,61],[125,2,126,0],[126,0,127,0],[127,0,128,0],[128,2,129,0,"exports"],[128,9,129,7],[128,10,129,8,"_browserPerformanceTimeOriginMode"],[128,43,129,41],[128,46,129,44],[128,51,129,49],[128,52,129,50],[130,2,131,0],[131,0,132,0],[132,0,133,0],[133,0,134,0],[134,2,135,0],[134,8,135,6,"browserPerformanceTimeOrigin"],[134,36,135,34],[134,39,135,37],[134,40,135,38],[134,46,135,44],[135,4,136,2],[136,4,137,2],[137,4,138,2],[139,4,140,2],[139,10,140,8],[140,6,140,10,"performance"],[141,4,140,22],[141,5,140,23],[141,8,140,26,"WINDOW"],[141,14,140,32],[142,4,141,2],[142,8,141,6],[142,9,141,7,"performance"],[142,20,141,18],[142,24,141,22],[142,25,141,23,"performance"],[142,36,141,34],[142,37,141,35,"now"],[142,40,141,38],[142,42,141,40],[143,6,142,4,"exports"],[143,13,142,11],[143,14,142,12,"_browserPerformanceTimeOriginMode"],[143,47,142,45],[143,50,142,48],[143,56,142,54],[144,6,143,4],[144,13,143,11,"undefined"],[144,22,143,20],[145,4,144,2],[146,4,146,2],[146,10,146,8,"threshold"],[146,19,146,17],[146,22,146,20],[146,26,146,24],[146,29,146,27],[146,33,146,31],[147,4,147,2],[147,10,147,8,"performanceNow"],[147,24,147,22],[147,27,147,25,"performance"],[147,38,147,36],[147,39,147,37,"now"],[147,42,147,40],[147,43,147,41],[147,44,147,42],[148,4,148,2],[148,10,148,8,"dateNow"],[148,17,148,15],[148,20,148,18,"Date"],[148,24,148,22],[148,25,148,23,"now"],[148,28,148,26],[148,29,148,27],[148,30,148,28],[150,4,150,2],[151,4,151,2],[151,10,151,8,"timeOriginDelta"],[151,25,151,23],[151,28,151,26,"performance"],[151,39,151,37],[151,40,151,38,"timeOrigin"],[151,50,151,48],[151,53,152,6,"Math"],[151,57,152,10],[151,58,152,11,"abs"],[151,61,152,14],[151,62,152,15,"performance"],[151,73,152,26],[151,74,152,27,"timeOrigin"],[151,84,152,37],[151,87,152,40,"performanceNow"],[151,101,152,54],[151,104,152,57,"dateNow"],[151,111,152,64],[151,112,152,65],[151,115,153,6,"threshold"],[151,124,153,15],[152,4,154,2],[152,10,154,8,"timeOriginIsReliable"],[152,30,154,28],[152,33,154,31,"timeOriginDelta"],[152,48,154,46],[152,51,154,49,"threshold"],[152,60,154,58],[154,4,156,2],[155,4,157,2],[156,4,158,2],[157,4,159,2],[158,4,160,2],[159,4,161,2],[160,4,162,2],[160,10,162,8,"navigationStart"],[160,25,162,23],[160,28,162,26,"performance"],[160,39,162,37],[160,40,162,38,"timing"],[160,46,162,44],[160,50,162,48,"performance"],[160,61,162,59],[160,62,162,60,"timing"],[160,68,162,66],[160,69,162,67,"navigationStart"],[160,84,162,82],[161,4,163,2],[161,10,163,8,"hasNavigationStart"],[161,28,163,26],[161,31,163,29],[161,38,163,36,"navigationStart"],[161,53,163,51],[161,58,163,56],[161,66,163,64],[162,4,164,2],[163,4,165,2],[163,10,165,8,"navigationStartDelta"],[163,30,165,28],[163,33,165,31,"hasNavigationStart"],[163,51,165,49],[163,54,165,52,"Math"],[163,58,165,56],[163,59,165,57,"abs"],[163,62,165,60],[163,63,165,61,"navigationStart"],[163,78,165,76],[163,81,165,79,"performanceNow"],[163,95,165,93],[163,98,165,96,"dateNow"],[163,105,165,103],[163,106,165,104],[163,109,165,107,"threshold"],[163,118,165,116],[164,4,166,2],[164,10,166,8,"navigationStartIsReliable"],[164,35,166,33],[164,38,166,36,"navigationStartDelta"],[164,58,166,56],[164,61,166,59,"threshold"],[164,70,166,68],[165,4,168,2],[165,8,168,6,"timeOriginIsReliable"],[165,28,168,26],[165,32,168,30,"navigationStartIsReliable"],[165,57,168,55],[165,59,168,57],[166,6,169,4],[167,6,170,4],[167,10,170,8,"timeOriginDelta"],[167,25,170,23],[167,29,170,27,"navigationStartDelta"],[167,49,170,47],[167,51,170,49],[168,8,171,6,"exports"],[168,15,171,13],[168,16,171,14,"_browserPerformanceTimeOriginMode"],[168,49,171,47],[168,52,171,50],[168,64,171,62],[169,8,172,6],[169,15,172,13,"performance"],[169,26,172,24],[169,27,172,25,"timeOrigin"],[169,37,172,35],[170,6,173,4],[170,7,173,5],[170,13,173,11],[171,8,174,6,"exports"],[171,15,174,13],[171,16,174,14,"_browserPerformanceTimeOriginMode"],[171,49,174,47],[171,52,174,50],[171,69,174,67],[172,8,175,6],[172,15,175,13,"navigationStart"],[172,30,175,28],[173,6,176,4],[174,4,177,2],[176,4,179,2],[177,4,180,2,"exports"],[177,11,180,9],[177,12,180,10,"_browserPerformanceTimeOriginMode"],[177,45,180,43],[177,48,180,46],[177,57,180,55],[178,4,181,2],[178,11,181,9,"dateNow"],[178,18,181,16],[179,2,182,0],[179,3,182,1],[179,5,182,3],[179,6,182,4],[180,2,184,0,"exports"],[180,9,184,7],[180,10,184,8,"browserPerformanceTimeOrigin"],[180,38,184,36],[180,41,184,39,"browserPerformanceTimeOrigin"],[180,69,184,67],[181,2,185,0,"exports"],[181,9,185,7],[181,10,185,8,"dateTimestampInSeconds"],[181,32,185,30],[181,35,185,33,"dateTimestampInSeconds"],[181,57,185,55],[182,2,186,0,"exports"],[182,9,186,7],[182,10,186,8,"timestampInSeconds"],[182,28,186,26],[182,31,186,29,"timestampInSeconds"],[182,49,186,47],[183,2,187,0,"exports"],[183,9,187,7],[183,10,187,8,"timestampWithMs"],[183,25,187,23],[183,28,187,26,"timestampWithMs"],[183,43,187,41],[184,2,188,0,"exports"],[184,9,188,7],[184,10,188,8,"usingPerformanceAPI"],[184,29,188,27],[184,32,188,30,"usingPerformanceAPI"],[184,51,188,49],[185,0,188,50],[185,3]],"functionMap":{"names":["<global>","dateTimestampSource.nowSeconds","getBrowserPerformance","now","getNodePerformance","nowSeconds","<anonymous>"],"mappings":"AAA;cCoB,uBD;AEc;SC8B,uBD;CFG;AIM;CJO;oBKW,yEL;sCM2C;CN+C"},"hasCjsExports":true},"type":"js/module"}]}