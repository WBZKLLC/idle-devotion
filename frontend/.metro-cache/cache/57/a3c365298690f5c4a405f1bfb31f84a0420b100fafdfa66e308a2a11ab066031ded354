{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":559},"end":{"line":16,"column":33,"index":592}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../lib/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":593},"end":{"line":17,"column":71,"index":664}}],"key":"cGGbCGri3M695PzY+v7ylQ+Rxt0=","exportNames":["*"],"imports":1}},{"name":"../lib/entitlements/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":665},"end":{"line":26,"column":35,"index":901}}],"key":"W08TkULB6K5ayFSZK0DQ51a7f14=","exportNames":["*"],"imports":1}},{"name":"../lib/entitlements/legacy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":27,"column":0,"index":902},"end":{"line":31,"column":36,"index":1011}}],"key":"+rKOnoh7xdxUkJQypQ3SMN7jDOc=","exportNames":["*"],"imports":1}},{"name":"../lib/api","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":50,"column":22,"index":1763},"end":{"line":50,"column":42,"index":1783}}],"key":"qv6pIAfHV5HK/E8UlfJgciwW1c8=","exportNames":["*"],"imports":1}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":50,"column":10,"index":1751},"end":{"line":50,"column":42,"index":1783}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}},{"name":"./gameStore","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":60,"column":29,"index":2077},"end":{"line":60,"column":51,"index":2099}},{"start":{"line":70,"column":29,"index":2355},"end":{"line":70,"column":51,"index":2377}}],"key":"EF/vkdn/m34t6a9iVJBbEsaZi+A=","exportNames":["*"],"imports":2}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useEntitlementStore\", {\n    enumerable: true,\n    get: function () {\n      return useEntitlementStore;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _zustand = require(_dependencyMap[2], \"zustand\");\n  var _libStorage = require(_dependencyMap[3], \"../lib/storage\");\n  var _libEntitlementsTypes = require(_dependencyMap[4], \"../lib/entitlements/types\");\n  var _libEntitlementsLegacy = require(_dependencyMap[5], \"../lib/entitlements/legacy\");\n  /**\n   * Entitlement Store - Server Truth Model\n   * \n   * STRICT INVARIANTS:\n   * - Store NEVER grants entitlements - only server can grant\n   * - Store caches server snapshots for UX (offline/fast reads)\n   * - All reads go through gating helpers, not direct store access\n   * - Refresh from server on: startup, post-purchase, manual, gate (stale check)\n   * \n   * PHASE 3.10 - TTL DISCIPLINE:\n   * - Staleness uses server_time (not device time) \n   * - ensureFreshEntitlements() is the canonical refresh entry point\n   * - Fast reads from cache, disciplined refresh on gates\n   */\n\n  // Debug logging helpers\n  var dlog = function () {\n    if (__DEV__) console.log(...arguments);\n  };\n  var STORAGE_KEY = '@idledevotion/entitlements/v4';\n  var LEGACY_STORAGE_KEY = '@idledevotion/entitlements/v3';\n\n  // Default TTL if server doesn't provide one (5 minutes)\n  var DEFAULT_TTL_SECONDS = 300;\n  // Minimum TTL to prevent runaway refreshes (30 seconds)\n  var MIN_TTL_SECONDS = 30;\n  // Maximum TTL to ensure eventual consistency (1 hour)\n  var MAX_TTL_SECONDS = 3600;\n\n  // API import (lazy to avoid circular deps at module load)\n  var _getEntitlementsSnapshot = null;\n  function getEntitlementsSnapshotApi() {\n    return _getEntitlementsSnapshotApi.apply(this, arguments);\n  } // Lazy import for gameStore to avoid circular deps\n  function _getEntitlementsSnapshotApi() {\n    _getEntitlementsSnapshotApi = (0, _asyncToGenerator.default)(function* () {\n      if (!_getEntitlementsSnapshot) {\n        var api = yield require(_dependencyMap[7], \"expo/internal/async-require-module\")(_dependencyMap[6], _dependencyMap.paths, \"../lib/api\");\n        _getEntitlementsSnapshot = api.getEntitlementsSnapshot;\n      }\n      return _getEntitlementsSnapshot();\n    });\n    return _getEntitlementsSnapshotApi.apply(this, arguments);\n  }\n  var _getAuthEpoch = null;\n  function getAuthEpoch() {\n    if (!_getAuthEpoch) {\n      var _require = require(_dependencyMap[8], \"./gameStore\"),\n        useGameStore = _require.useGameStore;\n      _getAuthEpoch = () => useGameStore.getState().authEpoch;\n    }\n    return _getAuthEpoch();\n  }\n\n  // Lazy import to check if user is logged in\n  var _getUser = null;\n  function getUser() {\n    if (!_getUser) {\n      var _require2 = require(_dependencyMap[8], \"./gameStore\"),\n        useGameStore = _require2.useGameStore;\n      _getUser = () => useGameStore.getState().user;\n    }\n    return _getUser();\n  }\n  var useEntitlementStore = (0, _zustand.create)((set, get) => ({\n    snapshot: null,\n    entitlementsByKey: (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n    lastRefreshAt: null,\n    isRefreshing: false,\n    refreshError: null,\n    entitlementEpoch: 0,\n    // Bumped on clear() to invalidate in-flight requests\n\n    /**\n     * Hydrate from cached snapshot on app startup\n     * Does NOT grant - only restores last known server state\n     */\n    hydrateEntitlements: function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {\n        dlog('[entitlementStore] Hydrating from cache...');\n        try {\n          // Try to load cached snapshot\n          var cached = yield (0, _libStorage.storageGet)(STORAGE_KEY);\n          if (cached) {\n            var parsed = JSON.parse(cached);\n            var normalized = {\n              ...(0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n              ...parsed.entitlements\n            };\n            set({\n              snapshot: parsed,\n              entitlementsByKey: normalized\n            });\n            dlog('[entitlementStore] Hydrated from cache:', Object.keys(normalized).length, 'keys');\n          }\n\n          // Migrate legacy data if present\n          yield migrateLegacyData(set, get);\n        } catch (e) {\n          console.error('[entitlementStore] Hydration error:', e);\n        }\n      });\n      return function hydrateEntitlements() {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    /**\n     * Refresh entitlements from server\n     * This is the ONLY way to get authoritative entitlement state\n     * \n     * Phase 3.10: Also checks global authEpoch for cross-store invalidation\n     */\n    refreshFromServer: function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (reason) {\n        if (get().isRefreshing) {\n          dlog('[entitlementStore] Already refreshing, skipping');\n          return;\n        }\n        var epochAtStart = get().entitlementEpoch;\n        var authEpochAtStart = getAuthEpoch(); // Global auth epoch for cross-store check\n\n        dlog('[entitlementStore] Refreshing from server, reason:', reason);\n        set({\n          isRefreshing: true,\n          refreshError: null\n        });\n        try {\n          var snap = yield getEntitlementsSnapshotApi();\n\n          // Epoch check: ignore late response if clear() was called (logout)\n          if (get().entitlementEpoch !== epochAtStart) {\n            dlog('[entitlementStore] Local epoch mismatch - discarding stale response');\n            set({\n              isRefreshing: false\n            });\n            return;\n          }\n\n          // Global auth epoch check: ignore if user logged out during request\n          if (getAuthEpoch() !== authEpochAtStart) {\n            dlog('[entitlementStore] Auth epoch mismatch - discarding stale response');\n            set({\n              isRefreshing: false\n            });\n            return;\n          }\n\n          // Strict normalization: fill missing keys as not_owned\n          var normalized = {\n            ...(0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n            ...snap.entitlements\n          };\n          set({\n            snapshot: snap,\n            entitlementsByKey: normalized,\n            lastRefreshAt: Date.now(),\n            isRefreshing: false\n          });\n\n          // Persist for offline cache\n          yield (0, _libStorage.storageSet)(STORAGE_KEY, JSON.stringify(snap));\n          dlog('[entitlementStore] Refreshed from server:', snap.version);\n        } catch (e) {\n          // Epoch check before setting error state\n          if (get().entitlementEpoch !== epochAtStart || getAuthEpoch() !== authEpochAtStart) {\n            dlog('[entitlementStore] Epoch mismatch in error handler - discarding');\n            set({\n              isRefreshing: false\n            });\n            return;\n          }\n          var errorMsg = e?.response?.data?.detail || e?.message || 'Failed to refresh entitlements';\n          console.error('[entitlementStore] Refresh error:', errorMsg);\n          set({\n            isRefreshing: false,\n            refreshError: errorMsg\n          });\n        }\n      });\n      return function refreshFromServer(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    /**\n     * Apply a snapshot directly (used by purchase verify flow)\n     * Skips network call - uses snapshot returned from verify endpoint\n     */\n    applySnapshot: snap => {\n      dlog('[entitlementStore] Applying snapshot directly, version:', snap.version);\n\n      // Strict normalization\n      var normalized = {\n        ...(0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n        ...snap.entitlements\n      };\n      set({\n        snapshot: snap,\n        entitlementsByKey: normalized,\n        lastRefreshAt: Date.now(),\n        refreshError: null\n      });\n\n      // Persist for offline cache\n      (0, _libStorage.storageSet)(STORAGE_KEY, JSON.stringify(snap)).catch(() => {});\n    },\n    /**\n     * Phase 3.10: Check if cached entitlements are stale\n     * Uses SERVER time (not device time) for staleness calculation\n     * \n     * Stale if: server_now > server_time + ttl_seconds\n     */\n    isStale: () => {\n      var _get = get(),\n        snapshot = _get.snapshot;\n\n      // No snapshot = stale (need to fetch)\n      if (!snapshot) return true;\n\n      // Get server time and TTL from snapshot\n      var serverTimeStr = snapshot.server_time;\n      var ttlSeconds = snapshot.ttl_seconds ?? DEFAULT_TTL_SECONDS;\n\n      // Clamp TTL to reasonable bounds\n      var clampedTtl = Math.max(MIN_TTL_SECONDS, Math.min(MAX_TTL_SECONDS, ttlSeconds));\n      if (!serverTimeStr) {\n        // No server time in snapshot - fall back to device time check\n        var _get2 = get(),\n          _lastRefreshAt = _get2.lastRefreshAt;\n        if (!_lastRefreshAt) return true;\n        var deviceNow = Date.now();\n        return deviceNow > _lastRefreshAt + clampedTtl * 1000;\n      }\n\n      // Parse server time\n      var serverTime = new Date(serverTimeStr).getTime();\n      if (isNaN(serverTime)) {\n        dlog('[entitlementStore] Invalid server_time in snapshot, treating as stale');\n        return true;\n      }\n\n      // Estimate current server time (server_time + time_since_refresh)\n      var _get3 = get(),\n        lastRefreshAt = _get3.lastRefreshAt;\n      var timeSinceRefresh = lastRefreshAt ? Date.now() - lastRefreshAt : 0;\n      var estimatedServerNow = serverTime + timeSinceRefresh;\n\n      // Stale if estimated server time exceeds expiry\n      var expiresAt = serverTime + clampedTtl * 1000;\n      var isStale = estimatedServerNow > expiresAt;\n      if (__DEV__ && isStale) {\n        dlog('[entitlementStore] Cache is stale:', {\n          serverTime: new Date(serverTime).toISOString(),\n          estimatedServerNow: new Date(estimatedServerNow).toISOString(),\n          expiresAt: new Date(expiresAt).toISOString(),\n          ttlSeconds: clampedTtl\n        });\n      }\n      return isStale;\n    },\n    /**\n     * Phase 3.10: Canonical refresh entry point\n     * \n     * Use this at premium gates instead of direct refreshFromServer calls.\n     * Fire-and-forget for non-blocking UX, or await for blocking checks.\n     * \n     * Rules:\n     * - If no user logged in → no-op\n     * - If already refreshing → no-op (dedup)\n     * - If not stale → no-op\n     * - If stale → trigger refresh\n     */\n    ensureFreshEntitlements: function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (reason) {\n        // No user = no entitlements to refresh\n        var user = getUser();\n        if (!user) {\n          dlog('[entitlementStore] ensureFresh: no user, skipping');\n          return;\n        }\n\n        // Already refreshing = dedup\n        if (get().isRefreshing) {\n          dlog('[entitlementStore] ensureFresh: already refreshing, skipping');\n          return;\n        }\n\n        // Not stale = no-op\n        if (!get().isStale()) {\n          dlog('[entitlementStore] ensureFresh: cache is fresh, skipping');\n          return;\n        }\n        dlog('[entitlementStore] ensureFresh: cache stale, refreshing for', reason);\n        yield get().refreshFromServer(reason);\n      });\n      return function ensureFreshEntitlements(_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }(),\n    /**\n     * Clear all entitlement state (on logout)\n     * Bumps epoch to invalidate any in-flight requests\n     */\n    clear: () => {\n      dlog('[entitlementStore] Clearing state');\n      set(s => ({\n        snapshot: null,\n        entitlementsByKey: (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n        lastRefreshAt: null,\n        refreshError: null,\n        entitlementEpoch: s.entitlementEpoch + 1 // Bump to invalidate in-flight requests\n      }));\n      (0, _libStorage.storageRemove)(STORAGE_KEY).catch(() => {});\n    },\n    /**\n     * Check if user has entitlement (internal use)\n     * Screens should use gating helpers instead\n     */\n    hasEntitlement: key => {\n      var _get4 = get(),\n        entitlementsByKey = _get4.entitlementsByKey,\n        snapshot = _get4.snapshot;\n      var entitlement = entitlementsByKey[key];\n      if (!entitlement || entitlement.status !== 'owned') return false;\n\n      // Check expiry using server time\n      if (entitlement.expires_at && snapshot?.server_time) {\n        var expiresAt = new Date(entitlement.expires_at).getTime();\n        var serverNow = new Date(snapshot.server_time).getTime();\n        if (serverNow > expiresAt) return false;\n      }\n      return true;\n    },\n    // ═══════════════════════════════════════════════════════════\n    // DEV ONLY METHODS - For testing paywalls/features\n    // These should NEVER be called in production code paths\n    // ═══════════════════════════════════════════════════════════\n\n    devGrantEntitlement: key => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] devGrantEntitlement called in production - BLOCKED');\n        return;\n      }\n      var _get5 = get(),\n        entitlementsByKey = _get5.entitlementsByKey;\n      var updated = {\n        ...entitlementsByKey,\n        [key]: {\n          key,\n          status: 'owned',\n          granted_at: new Date().toISOString(),\n          reason: 'admin'\n        }\n      };\n\n      // Create fake snapshot for dev\n      var fakeSnapshot = {\n        server_time: new Date().toISOString(),\n        version: Date.now(),\n        username: 'DEV_USER',\n        entitlements: updated,\n        source: 'database'\n      };\n      set({\n        entitlementsByKey: updated,\n        snapshot: fakeSnapshot\n      });\n      dlog('[entitlementStore] DEV: Granted', key);\n    },\n    devRevokeEntitlement: key => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] devRevokeEntitlement called in production - BLOCKED');\n        return;\n      }\n      var _get6 = get(),\n        entitlementsByKey = _get6.entitlementsByKey;\n      var updated = {\n        ...entitlementsByKey,\n        [key]: {\n          key,\n          status: 'not_owned'\n        }\n      };\n      set({\n        entitlementsByKey: updated\n      });\n      dlog('[entitlementStore] DEV: Revoked', key);\n    },\n    devClearAll: () => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] devClearAll called in production - BLOCKED');\n        return;\n      }\n      set({\n        entitlementsByKey: (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n        snapshot: null\n      });\n      (0, _libStorage.storageRemove)(STORAGE_KEY).catch(() => {});\n      dlog('[entitlementStore] DEV: Cleared all entitlements');\n    }\n  }));\n\n  /**\n   * Migrate legacy entitlement data to new format\n   */\n  function migrateLegacyData(_x3, _x4) {\n    return _migrateLegacyData.apply(this, arguments);\n  }\n  function _migrateLegacyData() {\n    _migrateLegacyData = (0, _asyncToGenerator.default)(function* (set, get) {\n      try {\n        var legacyData = yield (0, _libStorage.storageGet)(LEGACY_STORAGE_KEY);\n        if (!legacyData) return;\n        dlog('[entitlementStore] Migrating legacy data...');\n        var legacy = JSON.parse(legacyData);\n        var _get7 = get(),\n          entitlementsByKey = _get7.entitlementsByKey;\n        var updated = {\n          ...entitlementsByKey\n        };\n\n        // Migrate each legacy key\n        for (var _ref4 of Object.entries(legacy)) {\n          var _ref5 = (0, _slicedToArray.default)(_ref4, 2);\n          var oldKey = _ref5[0];\n          var value = _ref5[1];\n          if (value) {\n            var newKey = (0, _libEntitlementsLegacy.migrateLegacyKey)(oldKey);\n            updated[newKey] = {\n              key: newKey,\n              status: 'owned',\n              granted_at: new Date().toISOString(),\n              reason: 'unknown'\n            };\n            dlog('[entitlementStore] Migrated:', oldKey, '->', newKey);\n          }\n        }\n        set({\n          entitlementsByKey: updated\n        });\n\n        // Remove legacy data after migration\n        yield (0, _libStorage.storageRemove)(LEGACY_STORAGE_KEY);\n        dlog('[entitlementStore] Legacy migration complete');\n      } catch (e) {\n        console.error('[entitlementStore] Legacy migration error:', e);\n      }\n    });\n    return _migrateLegacyData.apply(this, arguments);\n  }\n});","lineCount":475,"map":[[12,2,112,0,"Object"],[12,8,112,0],[12,9,112,0,"defineProperty"],[12,23,112,0],[12,24,112,0,"exports"],[12,31,112,0],[13,4,112,0,"enumerable"],[13,14,112,0],[14,4,112,0,"get"],[14,7,112,0],[14,18,112,0,"get"],[14,19,112,0],[15,6,112,0],[15,13,112,0,"useEntitlementStore"],[15,32,112,0],[16,4,112,0],[17,2,112,0],[18,2,432,4],[18,6,432,4,"_babelRuntimeHelpersSlicedToArray"],[18,39,432,4],[18,42,432,4,"require"],[18,49,432,4],[18,50,432,4,"_dependencyMap"],[18,64,432,4],[19,2,432,4],[19,6,432,4,"_slicedToArray"],[19,20,432,4],[19,23,432,4,"_interopDefault"],[19,38,432,4],[19,39,432,4,"_babelRuntimeHelpersSlicedToArray"],[19,72,432,4],[20,2,432,4],[20,6,432,4,"_babelRuntimeHelpersAsyncToGenerator"],[20,42,432,4],[20,45,432,4,"require"],[20,52,432,4],[20,53,432,4,"_dependencyMap"],[20,67,432,4],[21,2,432,4],[21,6,432,4,"_asyncToGenerator"],[21,23,432,4],[21,26,432,4,"_interopDefault"],[21,41,432,4],[21,42,432,4,"_babelRuntimeHelpersAsyncToGenerator"],[21,78,432,4],[22,2,16,0],[22,6,16,0,"_zustand"],[22,14,16,0],[22,17,16,0,"require"],[22,24,16,0],[22,25,16,0,"_dependencyMap"],[22,39,16,0],[23,2,17,0],[23,6,17,0,"_libStorage"],[23,17,17,0],[23,20,17,0,"require"],[23,27,17,0],[23,28,17,0,"_dependencyMap"],[23,42,17,0],[24,2,18,0],[24,6,18,0,"_libEntitlementsTypes"],[24,27,18,0],[24,30,18,0,"require"],[24,37,18,0],[24,38,18,0,"_dependencyMap"],[24,52,18,0],[25,2,27,0],[25,6,27,0,"_libEntitlementsLegacy"],[25,28,27,0],[25,31,27,0,"require"],[25,38,27,0],[25,39,27,0,"_dependencyMap"],[25,53,27,0],[26,2,1,0],[27,0,2,0],[28,0,3,0],[29,0,4,0],[30,0,5,0],[31,0,6,0],[32,0,7,0],[33,0,8,0],[34,0,9,0],[35,0,10,0],[36,0,11,0],[37,0,12,0],[38,0,13,0],[39,0,14,0],[41,2,33,0],[42,2,34,0],[42,6,34,6,"dlog"],[42,10,34,10],[42,13,34,13],[42,22,34,13,"dlog"],[42,23,34,13],[42,25,34,33],[43,4,34,35],[43,8,34,39,"__DEV__"],[43,15,34,46],[43,17,34,48,"console"],[43,24,34,55],[43,25,34,56,"log"],[43,28,34,59],[43,29,34,60],[43,32,34,60,"arguments"],[43,41,34,67],[43,42,34,68],[44,2,34,70],[44,3,34,71],[45,2,36,0],[45,6,36,6,"STORAGE_KEY"],[45,17,36,17],[45,20,36,20],[45,51,36,51],[46,2,37,0],[46,6,37,6,"LEGACY_STORAGE_KEY"],[46,24,37,24],[46,27,37,27],[46,58,37,58],[48,2,39,0],[49,2,40,0],[49,6,40,6,"DEFAULT_TTL_SECONDS"],[49,25,40,25],[49,28,40,28],[49,31,40,31],[50,2,41,0],[51,2,42,0],[51,6,42,6,"MIN_TTL_SECONDS"],[51,21,42,21],[51,24,42,24],[51,26,42,26],[52,2,43,0],[53,2,44,0],[53,6,44,6,"MAX_TTL_SECONDS"],[53,21,44,21],[53,24,44,24],[53,28,44,28],[55,2,46,0],[56,2,47,0],[56,6,47,4,"_getEntitlementsSnapshot"],[56,30,47,74],[56,33,47,77],[56,37,47,81],[57,2,47,82],[57,11,48,15,"getEntitlementsSnapshotApi"],[57,37,48,41,"getEntitlementsSnapshotApi"],[57,38,48,41],[58,4,48,41],[58,11,48,41,"_getEntitlementsSnapshotApi"],[58,38,48,41],[58,39,48,41,"apply"],[58,44,48,41],[58,51,48,41,"arguments"],[58,60,48,41],[59,2,48,41],[59,4,56,0],[60,2,56,0],[60,11,56,0,"_getEntitlementsSnapshotApi"],[60,39,56,0],[61,4,56,0,"_getEntitlementsSnapshotApi"],[61,31,56,0],[61,38,56,0,"_asyncToGenerator"],[61,55,56,0],[61,56,56,0,"default"],[61,63,56,0],[61,65,48,0],[61,78,48,75],[62,6,49,2],[62,10,49,6],[62,11,49,7,"_getEntitlementsSnapshot"],[62,35,49,31],[62,37,49,33],[63,8,50,4],[63,12,50,10,"api"],[63,15,50,13],[63,24,50,13,"require"],[63,31,50,13],[63,32,50,13,"_dependencyMap"],[63,46,50,13],[63,89,50,13,"_dependencyMap"],[63,103,50,13],[63,108,50,13,"_dependencyMap"],[63,122,50,13],[63,123,50,13,"paths"],[63,128,50,13],[63,143,50,42],[64,8,51,4,"_getEntitlementsSnapshot"],[64,32,51,28],[64,35,51,31,"api"],[64,38,51,34],[64,39,51,35,"getEntitlementsSnapshot"],[64,62,51,58],[65,6,52,2],[66,6,53,2],[66,13,53,9,"_getEntitlementsSnapshot"],[66,37,53,33],[66,38,53,34],[66,39,53,35],[67,4,54,0],[67,5,54,1],[68,4,54,1],[68,11,54,1,"_getEntitlementsSnapshotApi"],[68,38,54,1],[68,39,54,1,"apply"],[68,44,54,1],[68,51,54,1,"arguments"],[68,60,54,1],[69,2,54,1],[70,2,57,0],[70,6,57,4,"_getAuthEpoch"],[70,19,57,40],[70,22,57,43],[70,26,57,47],[71,2,58,0],[71,11,58,9,"getAuthEpoch"],[71,23,58,21,"getAuthEpoch"],[71,24,58,21],[71,26,58,32],[72,4,59,2],[72,8,59,6],[72,9,59,7,"_getAuthEpoch"],[72,22,59,20],[72,24,59,22],[73,6,60,4],[73,10,60,4,"_require"],[73,18,60,4],[73,21,60,29,"require"],[73,28,60,36],[73,29,60,36,"_dependencyMap"],[73,43,60,36],[73,61,60,50],[73,62,60,51],[74,8,60,12,"useGameStore"],[74,20,60,24],[74,23,60,24,"_require"],[74,31,60,24],[74,32,60,12,"useGameStore"],[74,44,60,24],[75,6,61,4,"_getAuthEpoch"],[75,19,61,17],[75,22,61,20,"_getAuthEpoch"],[75,23,61,20],[75,28,61,26,"useGameStore"],[75,40,61,38],[75,41,61,39,"getState"],[75,49,61,47],[75,50,61,48],[75,51,61,49],[75,52,61,50,"authEpoch"],[75,61,61,59],[76,4,62,2],[77,4,63,2],[77,11,63,9,"_getAuthEpoch"],[77,24,63,22],[77,25,63,23],[77,26,63,24],[78,2,64,0],[80,2,66,0],[81,2,67,0],[81,6,67,4,"_getUser"],[81,14,67,32],[81,17,67,35],[81,21,67,39],[82,2,68,0],[82,11,68,9,"getUser"],[82,18,68,16,"getUser"],[82,19,68,16],[82,21,68,24],[83,4,69,2],[83,8,69,6],[83,9,69,7,"_getUser"],[83,17,69,15],[83,19,69,17],[84,6,70,4],[84,10,70,4,"_require2"],[84,19,70,4],[84,22,70,29,"require"],[84,29,70,36],[84,30,70,36,"_dependencyMap"],[84,44,70,36],[84,62,70,50],[84,63,70,51],[85,8,70,12,"useGameStore"],[85,20,70,24],[85,23,70,24,"_require2"],[85,32,70,24],[85,33,70,12,"useGameStore"],[85,45,70,24],[86,6,71,4,"_getUser"],[86,14,71,12],[86,17,71,15,"_getUser"],[86,18,71,15],[86,23,71,21,"useGameStore"],[86,35,71,33],[86,36,71,34,"getState"],[86,44,71,42],[86,45,71,43],[86,46,71,44],[86,47,71,45,"user"],[86,51,71,49],[87,4,72,2],[88,4,73,2],[88,11,73,9,"_getUser"],[88,19,73,17],[88,20,73,18],[88,21,73,19],[89,2,74,0],[90,2,112,7],[90,6,112,13,"useEntitlementStore"],[90,25,112,32],[90,28,112,35],[90,32,112,35,"create"],[90,40,112,41],[90,41,112,41,"create"],[90,47,112,41],[90,49,112,65],[90,50,112,66,"set"],[90,53,112,69],[90,55,112,71,"get"],[90,58,112,74],[90,64,112,80],[91,4,113,2,"snapshot"],[91,12,113,10],[91,14,113,12],[91,18,113,16],[92,4,114,2,"entitlementsByKey"],[92,21,114,19],[92,23,114,21],[92,27,114,21,"createEmptyEntitlementsMap"],[92,48,114,47],[92,49,114,47,"createEmptyEntitlementsMap"],[92,75,114,47],[92,77,114,48],[92,78,114,49],[93,4,115,2,"lastRefreshAt"],[93,17,115,15],[93,19,115,17],[93,23,115,21],[94,4,116,2,"isRefreshing"],[94,16,116,14],[94,18,116,16],[94,23,116,21],[95,4,117,2,"refreshError"],[95,16,117,14],[95,18,117,16],[95,22,117,20],[96,4,118,2,"entitlementEpoch"],[96,20,118,18],[96,22,118,20],[96,23,118,21],[97,4,118,24],[99,4,120,2],[100,0,121,0],[101,0,122,0],[102,0,123,0],[103,4,124,2,"hydrateEntitlements"],[103,23,124,21],[104,6,124,21],[104,10,124,21,"_ref"],[104,14,124,21],[104,21,124,21,"_asyncToGenerator"],[104,38,124,21],[104,39,124,21,"default"],[104,46,124,21],[104,48,124,23],[104,61,124,35],[105,8,125,4,"dlog"],[105,12,125,8],[105,13,125,9],[105,57,125,53],[105,58,125,54],[106,8,127,4],[106,12,127,8],[107,10,128,6],[108,10,129,6],[108,14,129,12,"cached"],[108,20,129,18],[108,29,129,27],[108,33,129,27,"storageGet"],[108,44,129,37],[108,45,129,37,"storageGet"],[108,55,129,37],[108,57,129,38,"STORAGE_KEY"],[108,68,129,49],[108,69,129,50],[109,10,130,6],[109,14,130,10,"cached"],[109,20,130,16],[109,22,130,18],[110,12,131,8],[110,16,131,14,"parsed"],[110,22,131,20],[110,25,131,23,"JSON"],[110,29,131,27],[110,30,131,28,"parse"],[110,35,131,33],[110,36,131,34,"cached"],[110,42,131,40],[110,43,131,65],[111,12,132,8],[111,16,132,14,"normalized"],[111,26,132,24],[111,29,132,27],[112,14,132,29],[112,17,132,32],[112,21,132,32,"createEmptyEntitlementsMap"],[112,42,132,58],[112,43,132,58,"createEmptyEntitlementsMap"],[112,69,132,58],[112,71,132,59],[112,72,132,60],[113,14,132,62],[113,17,132,65,"parsed"],[113,23,132,71],[113,24,132,72,"entitlements"],[114,12,132,85],[114,13,132,86],[115,12,133,8,"set"],[115,15,133,11],[115,16,133,12],[116,14,134,10,"snapshot"],[116,22,134,18],[116,24,134,20,"parsed"],[116,30,134,26],[117,14,135,10,"entitlementsByKey"],[117,31,135,27],[117,33,135,29,"normalized"],[118,12,136,8],[118,13,136,9],[118,14,136,10],[119,12,137,8,"dlog"],[119,16,137,12],[119,17,137,13],[119,58,137,54],[119,60,137,56,"Object"],[119,66,137,62],[119,67,137,63,"keys"],[119,71,137,67],[119,72,137,68,"normalized"],[119,82,137,78],[119,83,137,79],[119,84,137,80,"length"],[119,90,137,86],[119,92,137,88],[119,98,137,94],[119,99,137,95],[120,10,138,6],[122,10,140,6],[123,10,141,6],[123,16,141,12,"migrateLegacyData"],[123,33,141,29],[123,34,141,30,"set"],[123,37,141,33],[123,39,141,35,"get"],[123,42,141,38],[123,43,141,39],[124,8,143,4],[124,9,143,5],[124,10,143,6],[124,17,143,13,"e"],[124,18,143,14],[124,20,143,16],[125,10,144,6,"console"],[125,17,144,13],[125,18,144,14,"error"],[125,23,144,19],[125,24,144,20],[125,61,144,57],[125,63,144,59,"e"],[125,64,144,60],[125,65,144,61],[126,8,145,4],[127,6,146,2],[127,7,146,3],[128,6,146,3],[128,22,124,2,"hydrateEntitlements"],[128,41,124,21,"hydrateEntitlements"],[128,42,124,21],[129,8,124,21],[129,15,124,21,"_ref"],[129,19,124,21],[129,20,124,21,"apply"],[129,25,124,21],[129,32,124,21,"arguments"],[129,41,124,21],[130,6,124,21],[131,4,124,21],[131,7,146,3],[132,4,148,2],[133,0,149,0],[134,0,150,0],[135,0,151,0],[136,0,152,0],[137,0,153,0],[138,4,154,2,"refreshFromServer"],[138,21,154,19],[139,6,154,19],[139,10,154,19,"_ref2"],[139,15,154,19],[139,22,154,19,"_asyncToGenerator"],[139,39,154,19],[139,40,154,19,"default"],[139,47,154,19],[139,49,154,21],[139,60,154,28,"reason"],[139,66,154,34],[139,68,154,39],[140,8,155,4],[140,12,155,8,"get"],[140,15,155,11],[140,16,155,12],[140,17,155,13],[140,18,155,14,"isRefreshing"],[140,30,155,26],[140,32,155,28],[141,10,156,6,"dlog"],[141,14,156,10],[141,15,156,11],[141,64,156,60],[141,65,156,61],[142,10,157,6],[143,8,158,4],[144,8,160,4],[144,12,160,10,"epochAtStart"],[144,24,160,22],[144,27,160,25,"get"],[144,30,160,28],[144,31,160,29],[144,32,160,30],[144,33,160,31,"entitlementEpoch"],[144,49,160,47],[145,8,161,4],[145,12,161,10,"authEpochAtStart"],[145,28,161,26],[145,31,161,29,"getAuthEpoch"],[145,43,161,41],[145,44,161,42],[145,45,161,43],[145,46,161,44],[145,47,161,46],[147,8,163,4,"dlog"],[147,12,163,8],[147,13,163,9],[147,65,163,61],[147,67,163,63,"reason"],[147,73,163,69],[147,74,163,70],[148,8,164,4,"set"],[148,11,164,7],[148,12,164,8],[149,10,164,10,"isRefreshing"],[149,22,164,22],[149,24,164,24],[149,28,164,28],[150,10,164,30,"refreshError"],[150,22,164,42],[150,24,164,44],[151,8,164,49],[151,9,164,50],[151,10,164,51],[152,8,166,4],[152,12,166,8],[153,10,167,6],[153,14,167,12,"snap"],[153,18,167,16],[153,27,167,25,"getEntitlementsSnapshotApi"],[153,53,167,51],[153,54,167,52],[153,55,167,53],[155,10,169,6],[156,10,170,6],[156,14,170,10,"get"],[156,17,170,13],[156,18,170,14],[156,19,170,15],[156,20,170,16,"entitlementEpoch"],[156,36,170,32],[156,41,170,37,"epochAtStart"],[156,53,170,49],[156,55,170,51],[157,12,171,8,"dlog"],[157,16,171,12],[157,17,171,13],[157,86,171,82],[157,87,171,83],[158,12,172,8,"set"],[158,15,172,11],[158,16,172,12],[159,14,172,14,"isRefreshing"],[159,26,172,26],[159,28,172,28],[160,12,172,34],[160,13,172,35],[160,14,172,36],[161,12,173,8],[162,10,174,6],[164,10,176,6],[165,10,177,6],[165,14,177,10,"getAuthEpoch"],[165,26,177,22],[165,27,177,23],[165,28,177,24],[165,33,177,29,"authEpochAtStart"],[165,49,177,45],[165,51,177,47],[166,12,178,8,"dlog"],[166,16,178,12],[166,17,178,13],[166,85,178,81],[166,86,178,82],[167,12,179,8,"set"],[167,15,179,11],[167,16,179,12],[168,14,179,14,"isRefreshing"],[168,26,179,26],[168,28,179,28],[169,12,179,34],[169,13,179,35],[169,14,179,36],[170,12,180,8],[171,10,181,6],[173,10,183,6],[174,10,184,6],[174,14,184,12,"normalized"],[174,24,184,22],[174,27,184,25],[175,12,184,27],[175,15,184,30],[175,19,184,30,"createEmptyEntitlementsMap"],[175,40,184,56],[175,41,184,56,"createEmptyEntitlementsMap"],[175,67,184,56],[175,69,184,57],[175,70,184,58],[176,12,184,60],[176,15,184,63,"snap"],[176,19,184,67],[176,20,184,68,"entitlements"],[177,10,184,81],[177,11,184,82],[178,10,186,6,"set"],[178,13,186,9],[178,14,186,10],[179,12,187,8,"snapshot"],[179,20,187,16],[179,22,187,18,"snap"],[179,26,187,22],[180,12,188,8,"entitlementsByKey"],[180,29,188,25],[180,31,188,27,"normalized"],[180,41,188,37],[181,12,189,8,"lastRefreshAt"],[181,25,189,21],[181,27,189,23,"Date"],[181,31,189,27],[181,32,189,28,"now"],[181,35,189,31],[181,36,189,32],[181,37,189,33],[182,12,190,8,"isRefreshing"],[182,24,190,20],[182,26,190,22],[183,10,191,6],[183,11,191,7],[183,12,191,8],[185,10,193,6],[186,10,194,6],[186,16,194,12],[186,20,194,12,"storageSet"],[186,31,194,22],[186,32,194,22,"storageSet"],[186,42,194,22],[186,44,194,23,"STORAGE_KEY"],[186,55,194,34],[186,57,194,36,"JSON"],[186,61,194,40],[186,62,194,41,"stringify"],[186,71,194,50],[186,72,194,51,"snap"],[186,76,194,55],[186,77,194,56],[186,78,194,57],[187,10,196,6,"dlog"],[187,14,196,10],[187,15,196,11],[187,58,196,54],[187,60,196,56,"snap"],[187,64,196,60],[187,65,196,61,"version"],[187,72,196,68],[187,73,196,69],[188,8,198,4],[188,9,198,5],[188,10,198,6],[188,17,198,13,"e"],[188,18,198,19],[188,20,198,21],[189,10,199,6],[190,10,200,6],[190,14,200,10,"get"],[190,17,200,13],[190,18,200,14],[190,19,200,15],[190,20,200,16,"entitlementEpoch"],[190,36,200,32],[190,41,200,37,"epochAtStart"],[190,53,200,49],[190,57,200,53,"getAuthEpoch"],[190,69,200,65],[190,70,200,66],[190,71,200,67],[190,76,200,72,"authEpochAtStart"],[190,92,200,88],[190,94,200,90],[191,12,201,8,"dlog"],[191,16,201,12],[191,17,201,13],[191,82,201,78],[191,83,201,79],[192,12,202,8,"set"],[192,15,202,11],[192,16,202,12],[193,14,202,14,"isRefreshing"],[193,26,202,26],[193,28,202,28],[194,12,202,34],[194,13,202,35],[194,14,202,36],[195,12,203,8],[196,10,204,6],[197,10,206,6],[197,14,206,12,"errorMsg"],[197,22,206,20],[197,25,206,23,"e"],[197,26,206,24],[197,28,206,26,"response"],[197,36,206,34],[197,38,206,36,"data"],[197,42,206,40],[197,44,206,42,"detail"],[197,50,206,48],[197,54,206,52,"e"],[197,55,206,53],[197,57,206,55,"message"],[197,64,206,62],[197,68,206,66],[197,100,206,98],[198,10,207,6,"console"],[198,17,207,13],[198,18,207,14,"error"],[198,23,207,19],[198,24,207,20],[198,59,207,55],[198,61,207,57,"errorMsg"],[198,69,207,65],[198,70,207,66],[199,10,208,6,"set"],[199,13,208,9],[199,14,208,10],[200,12,209,8,"isRefreshing"],[200,24,209,20],[200,26,209,22],[200,31,209,27],[201,12,210,8,"refreshError"],[201,24,210,20],[201,26,210,22,"errorMsg"],[202,10,211,6],[202,11,211,7],[202,12,211,8],[203,8,212,4],[204,6,213,2],[204,7,213,3],[205,6,213,3],[205,22,154,2,"refreshFromServer"],[205,39,154,19,"refreshFromServer"],[205,40,154,19,"_x"],[205,42,154,19],[206,8,154,19],[206,15,154,19,"_ref2"],[206,20,154,19],[206,21,154,19,"apply"],[206,26,154,19],[206,33,154,19,"arguments"],[206,42,154,19],[207,6,154,19],[208,4,154,19],[208,7,213,3],[209,4,215,2],[210,0,216,0],[211,0,217,0],[212,0,218,0],[213,4,219,2,"applySnapshot"],[213,17,219,15],[213,19,219,18,"snap"],[213,23,219,44],[213,27,219,49],[214,6,220,4,"dlog"],[214,10,220,8],[214,11,220,9],[214,68,220,66],[214,70,220,68,"snap"],[214,74,220,72],[214,75,220,73,"version"],[214,82,220,80],[214,83,220,81],[216,6,222,4],[217,6,223,4],[217,10,223,10,"normalized"],[217,20,223,20],[217,23,223,23],[218,8,223,25],[218,11,223,28],[218,15,223,28,"createEmptyEntitlementsMap"],[218,36,223,54],[218,37,223,54,"createEmptyEntitlementsMap"],[218,63,223,54],[218,65,223,55],[218,66,223,56],[219,8,223,58],[219,11,223,61,"snap"],[219,15,223,65],[219,16,223,66,"entitlements"],[220,6,223,79],[220,7,223,80],[221,6,225,4,"set"],[221,9,225,7],[221,10,225,8],[222,8,226,6,"snapshot"],[222,16,226,14],[222,18,226,16,"snap"],[222,22,226,20],[223,8,227,6,"entitlementsByKey"],[223,25,227,23],[223,27,227,25,"normalized"],[223,37,227,35],[224,8,228,6,"lastRefreshAt"],[224,21,228,19],[224,23,228,21,"Date"],[224,27,228,25],[224,28,228,26,"now"],[224,31,228,29],[224,32,228,30],[224,33,228,31],[225,8,229,6,"refreshError"],[225,20,229,18],[225,22,229,20],[226,6,230,4],[226,7,230,5],[226,8,230,6],[228,6,232,4],[229,6,233,4],[229,10,233,4,"storageSet"],[229,21,233,14],[229,22,233,14,"storageSet"],[229,32,233,14],[229,34,233,15,"STORAGE_KEY"],[229,45,233,26],[229,47,233,28,"JSON"],[229,51,233,32],[229,52,233,33,"stringify"],[229,61,233,42],[229,62,233,43,"snap"],[229,66,233,47],[229,67,233,48],[229,68,233,49],[229,69,233,50,"catch"],[229,74,233,55],[229,75,233,56],[229,81,233,62],[229,82,233,63],[229,83,233,64],[229,84,233,65],[230,4,234,2],[230,5,234,3],[231,4,236,2],[232,0,237,0],[233,0,238,0],[234,0,239,0],[235,0,240,0],[236,0,241,0],[237,4,242,2,"isStale"],[237,11,242,9],[237,13,242,11,"isStale"],[237,14,242,11],[237,19,242,17],[238,6,243,4],[238,10,243,4,"_get"],[238,14,243,4],[238,17,243,25,"get"],[238,20,243,28],[238,21,243,29],[238,22,243,30],[239,8,243,12,"snapshot"],[239,16,243,20],[239,19,243,20,"_get"],[239,23,243,20],[239,24,243,12,"snapshot"],[239,32,243,20],[241,6,245,4],[242,6,246,4],[242,10,246,8],[242,11,246,9,"snapshot"],[242,19,246,17],[242,21,246,19],[242,28,246,26],[242,32,246,30],[244,6,248,4],[245,6,249,4],[245,10,249,10,"serverTimeStr"],[245,23,249,23],[245,26,249,26,"snapshot"],[245,34,249,34],[245,35,249,35,"server_time"],[245,46,249,46],[246,6,250,4],[246,10,250,10,"ttlSeconds"],[246,20,250,20],[246,23,250,23,"snapshot"],[246,31,250,31],[246,32,250,32,"ttl_seconds"],[246,43,250,43],[246,47,250,47,"DEFAULT_TTL_SECONDS"],[246,66,250,66],[248,6,252,4],[249,6,253,4],[249,10,253,10,"clampedTtl"],[249,20,253,20],[249,23,253,23,"Math"],[249,27,253,27],[249,28,253,28,"max"],[249,31,253,31],[249,32,253,32,"MIN_TTL_SECONDS"],[249,47,253,47],[249,49,253,49,"Math"],[249,53,253,53],[249,54,253,54,"min"],[249,57,253,57],[249,58,253,58,"MAX_TTL_SECONDS"],[249,73,253,73],[249,75,253,75,"ttlSeconds"],[249,85,253,85],[249,86,253,86],[249,87,253,87],[250,6,255,4],[250,10,255,8],[250,11,255,9,"serverTimeStr"],[250,24,255,22],[250,26,255,24],[251,8,256,6],[252,8,257,6],[252,12,257,6,"_get2"],[252,17,257,6],[252,20,257,32,"get"],[252,23,257,35],[252,24,257,36],[252,25,257,37],[253,10,257,14,"lastRefreshAt"],[253,24,257,27],[253,27,257,27,"_get2"],[253,32,257,27],[253,33,257,14,"lastRefreshAt"],[253,46,257,27],[254,8,258,6],[254,12,258,10],[254,13,258,11,"lastRefreshAt"],[254,27,258,24],[254,29,258,26],[254,36,258,33],[254,40,258,37],[255,8,259,6],[255,12,259,12,"deviceNow"],[255,21,259,21],[255,24,259,24,"Date"],[255,28,259,28],[255,29,259,29,"now"],[255,32,259,32],[255,33,259,33],[255,34,259,34],[256,8,260,6],[256,15,260,13,"deviceNow"],[256,24,260,22],[256,27,260,25,"lastRefreshAt"],[256,41,260,38],[256,44,260,42,"clampedTtl"],[256,54,260,52],[256,57,260,55],[256,61,260,60],[257,6,261,4],[259,6,263,4],[260,6,264,4],[260,10,264,10,"serverTime"],[260,20,264,20],[260,23,264,23],[260,27,264,27,"Date"],[260,31,264,31],[260,32,264,32,"serverTimeStr"],[260,45,264,45],[260,46,264,46],[260,47,264,47,"getTime"],[260,54,264,54],[260,55,264,55],[260,56,264,56],[261,6,265,4],[261,10,265,8,"isNaN"],[261,15,265,13],[261,16,265,14,"serverTime"],[261,26,265,24],[261,27,265,25],[261,29,265,27],[262,8,266,6,"dlog"],[262,12,266,10],[262,13,266,11],[262,84,266,82],[262,85,266,83],[263,8,267,6],[263,15,267,13],[263,19,267,17],[264,6,268,4],[266,6,270,4],[267,6,271,4],[267,10,271,4,"_get3"],[267,15,271,4],[267,18,271,30,"get"],[267,21,271,33],[267,22,271,34],[267,23,271,35],[268,8,271,12,"lastRefreshAt"],[268,21,271,25],[268,24,271,25,"_get3"],[268,29,271,25],[268,30,271,12,"lastRefreshAt"],[268,43,271,25],[269,6,272,4],[269,10,272,10,"timeSinceRefresh"],[269,26,272,26],[269,29,272,29,"lastRefreshAt"],[269,42,272,42],[269,45,272,45,"Date"],[269,49,272,49],[269,50,272,50,"now"],[269,53,272,53],[269,54,272,54],[269,55,272,55],[269,58,272,58,"lastRefreshAt"],[269,71,272,71],[269,74,272,74],[269,75,272,75],[270,6,273,4],[270,10,273,10,"estimatedServerNow"],[270,28,273,28],[270,31,273,31,"serverTime"],[270,41,273,41],[270,44,273,44,"timeSinceRefresh"],[270,60,273,60],[272,6,275,4],[273,6,276,4],[273,10,276,10,"expiresAt"],[273,19,276,19],[273,22,276,22,"serverTime"],[273,32,276,32],[273,35,276,36,"clampedTtl"],[273,45,276,46],[273,48,276,49],[273,52,276,54],[274,6,277,4],[274,10,277,10,"isStale"],[274,17,277,17],[274,20,277,20,"estimatedServerNow"],[274,38,277,38],[274,41,277,41,"expiresAt"],[274,50,277,50],[275,6,279,4],[275,10,279,8,"__DEV__"],[275,17,279,15],[275,21,279,19,"isStale"],[275,28,279,26],[275,30,279,28],[276,8,280,6,"dlog"],[276,12,280,10],[276,13,280,11],[276,49,280,47],[276,51,280,49],[277,10,281,8,"serverTime"],[277,20,281,18],[277,22,281,20],[277,26,281,24,"Date"],[277,30,281,28],[277,31,281,29,"serverTime"],[277,41,281,39],[277,42,281,40],[277,43,281,41,"toISOString"],[277,54,281,52],[277,55,281,53],[277,56,281,54],[278,10,282,8,"estimatedServerNow"],[278,28,282,26],[278,30,282,28],[278,34,282,32,"Date"],[278,38,282,36],[278,39,282,37,"estimatedServerNow"],[278,57,282,55],[278,58,282,56],[278,59,282,57,"toISOString"],[278,70,282,68],[278,71,282,69],[278,72,282,70],[279,10,283,8,"expiresAt"],[279,19,283,17],[279,21,283,19],[279,25,283,23,"Date"],[279,29,283,27],[279,30,283,28,"expiresAt"],[279,39,283,37],[279,40,283,38],[279,41,283,39,"toISOString"],[279,52,283,50],[279,53,283,51],[279,54,283,52],[280,10,284,8,"ttlSeconds"],[280,20,284,18],[280,22,284,20,"clampedTtl"],[281,8,285,6],[281,9,285,7],[281,10,285,8],[282,6,286,4],[283,6,288,4],[283,13,288,11,"isStale"],[283,20,288,18],[284,4,289,2],[284,5,289,3],[285,4,291,2],[286,0,292,0],[287,0,293,0],[288,0,294,0],[289,0,295,0],[290,0,296,0],[291,0,297,0],[292,0,298,0],[293,0,299,0],[294,0,300,0],[295,0,301,0],[296,0,302,0],[297,4,303,2,"ensureFreshEntitlements"],[297,27,303,25],[298,6,303,25],[298,10,303,25,"_ref3"],[298,15,303,25],[298,22,303,25,"_asyncToGenerator"],[298,39,303,25],[298,40,303,25,"default"],[298,47,303,25],[298,49,303,27],[298,60,303,34,"reason"],[298,66,303,55],[298,68,303,60],[299,8,304,4],[300,8,305,4],[300,12,305,10,"user"],[300,16,305,14],[300,19,305,17,"getUser"],[300,26,305,24],[300,27,305,25],[300,28,305,26],[301,8,306,4],[301,12,306,8],[301,13,306,9,"user"],[301,17,306,13],[301,19,306,15],[302,10,307,6,"dlog"],[302,14,307,10],[302,15,307,11],[302,66,307,62],[302,67,307,63],[303,10,308,6],[304,8,309,4],[306,8,311,4],[307,8,312,4],[307,12,312,8,"get"],[307,15,312,11],[307,16,312,12],[307,17,312,13],[307,18,312,14,"isRefreshing"],[307,30,312,26],[307,32,312,28],[308,10,313,6,"dlog"],[308,14,313,10],[308,15,313,11],[308,77,313,73],[308,78,313,74],[309,10,314,6],[310,8,315,4],[312,8,317,4],[313,8,318,4],[313,12,318,8],[313,13,318,9,"get"],[313,16,318,12],[313,17,318,13],[313,18,318,14],[313,19,318,15,"isStale"],[313,26,318,22],[313,27,318,23],[313,28,318,24],[313,30,318,26],[314,10,319,6,"dlog"],[314,14,319,10],[314,15,319,11],[314,73,319,69],[314,74,319,70],[315,10,320,6],[316,8,321,4],[317,8,323,4,"dlog"],[317,12,323,8],[317,13,323,9],[317,74,323,70],[317,76,323,72,"reason"],[317,82,323,78],[317,83,323,79],[318,8,324,4],[318,14,324,10,"get"],[318,17,324,13],[318,18,324,14],[318,19,324,15],[318,20,324,16,"refreshFromServer"],[318,37,324,33],[318,38,324,34,"reason"],[318,44,324,40],[318,45,324,41],[319,6,325,2],[319,7,325,3],[320,6,325,3],[320,22,303,2,"ensureFreshEntitlements"],[320,45,303,25,"ensureFreshEntitlements"],[320,46,303,25,"_x2"],[320,49,303,25],[321,8,303,25],[321,15,303,25,"_ref3"],[321,20,303,25],[321,21,303,25,"apply"],[321,26,303,25],[321,33,303,25,"arguments"],[321,42,303,25],[322,6,303,25],[323,4,303,25],[323,7,325,3],[324,4,327,2],[325,0,328,0],[326,0,329,0],[327,0,330,0],[328,4,331,2,"clear"],[328,9,331,7],[328,11,331,9,"clear"],[328,12,331,9],[328,17,331,15],[329,6,332,4,"dlog"],[329,10,332,8],[329,11,332,9],[329,46,332,44],[329,47,332,45],[330,6,333,4,"set"],[330,9,333,7],[330,10,333,9,"s"],[330,11,333,10],[330,16,333,16],[331,8,334,6,"snapshot"],[331,16,334,14],[331,18,334,16],[331,22,334,20],[332,8,335,6,"entitlementsByKey"],[332,25,335,23],[332,27,335,25],[332,31,335,25,"createEmptyEntitlementsMap"],[332,52,335,51],[332,53,335,51,"createEmptyEntitlementsMap"],[332,79,335,51],[332,81,335,52],[332,82,335,53],[333,8,336,6,"lastRefreshAt"],[333,21,336,19],[333,23,336,21],[333,27,336,25],[334,8,337,6,"refreshError"],[334,20,337,18],[334,22,337,20],[334,26,337,24],[335,8,338,6,"entitlementEpoch"],[335,24,338,22],[335,26,338,24,"s"],[335,27,338,25],[335,28,338,26,"entitlementEpoch"],[335,44,338,42],[335,47,338,45],[335,48,338,46],[335,49,338,49],[336,6,339,4],[336,7,339,5],[336,8,339,6],[336,9,339,7],[337,6,340,4],[337,10,340,4,"storageRemove"],[337,21,340,17],[337,22,340,17,"storageRemove"],[337,35,340,17],[337,37,340,18,"STORAGE_KEY"],[337,48,340,29],[337,49,340,30],[337,50,340,31,"catch"],[337,55,340,36],[337,56,340,37],[337,62,340,43],[337,63,340,44],[337,64,340,45],[337,65,340,46],[338,4,341,2],[338,5,341,3],[339,4,343,2],[340,0,344,0],[341,0,345,0],[342,0,346,0],[343,4,347,2,"hasEntitlement"],[343,18,347,16],[343,20,347,19,"key"],[343,23,347,30],[343,27,347,35],[344,6,348,4],[344,10,348,4,"_get4"],[344,15,348,4],[344,18,348,44,"get"],[344,21,348,47],[344,22,348,48],[344,23,348,49],[345,8,348,12,"entitlementsByKey"],[345,25,348,29],[345,28,348,29,"_get4"],[345,33,348,29],[345,34,348,12,"entitlementsByKey"],[345,51,348,29],[346,8,348,31,"snapshot"],[346,16,348,39],[346,19,348,39,"_get4"],[346,24,348,39],[346,25,348,31,"snapshot"],[346,33,348,39],[347,6,349,4],[347,10,349,10,"entitlement"],[347,21,349,21],[347,24,349,24,"entitlementsByKey"],[347,41,349,41],[347,42,349,42,"key"],[347,45,349,45],[347,46,349,46],[348,6,350,4],[348,10,350,8],[348,11,350,9,"entitlement"],[348,22,350,20],[348,26,350,24,"entitlement"],[348,37,350,35],[348,38,350,36,"status"],[348,44,350,42],[348,49,350,47],[348,56,350,54],[348,58,350,56],[348,65,350,63],[348,70,350,68],[350,6,352,4],[351,6,353,4],[351,10,353,8,"entitlement"],[351,21,353,19],[351,22,353,20,"expires_at"],[351,32,353,30],[351,36,353,34,"snapshot"],[351,44,353,42],[351,46,353,44,"server_time"],[351,57,353,55],[351,59,353,57],[352,8,354,6],[352,12,354,12,"expiresAt"],[352,21,354,21],[352,24,354,24],[352,28,354,28,"Date"],[352,32,354,32],[352,33,354,33,"entitlement"],[352,44,354,44],[352,45,354,45,"expires_at"],[352,55,354,55],[352,56,354,56],[352,57,354,57,"getTime"],[352,64,354,64],[352,65,354,65],[352,66,354,66],[353,8,355,6],[353,12,355,12,"serverNow"],[353,21,355,21],[353,24,355,24],[353,28,355,28,"Date"],[353,32,355,32],[353,33,355,33,"snapshot"],[353,41,355,41],[353,42,355,42,"server_time"],[353,53,355,53],[353,54,355,54],[353,55,355,55,"getTime"],[353,62,355,62],[353,63,355,63],[353,64,355,64],[354,8,356,6],[354,12,356,10,"serverNow"],[354,21,356,19],[354,24,356,22,"expiresAt"],[354,33,356,31],[354,35,356,33],[354,42,356,40],[354,47,356,45],[355,6,357,4],[356,6,359,4],[356,13,359,11],[356,17,359,15],[357,4,360,2],[357,5,360,3],[358,4,362,2],[359,4,363,2],[360,4,364,2],[361,4,365,2],[363,4,367,2,"devGrantEntitlement"],[363,23,367,21],[363,25,367,24,"key"],[363,28,367,35],[363,32,367,40],[364,6,368,4],[364,10,368,8],[364,11,368,9,"__DEV__"],[364,18,368,16],[364,20,368,18],[365,8,369,6,"console"],[365,15,369,13],[365,16,369,14,"warn"],[365,20,369,18],[365,21,369,19],[365,92,369,90],[365,93,369,91],[366,8,370,6],[367,6,371,4],[368,6,373,4],[368,10,373,4,"_get5"],[368,15,373,4],[368,18,373,34,"get"],[368,21,373,37],[368,22,373,38],[368,23,373,39],[369,8,373,12,"entitlementsByKey"],[369,25,373,29],[369,28,373,29,"_get5"],[369,33,373,29],[369,34,373,12,"entitlementsByKey"],[369,51,373,29],[370,6,374,4],[370,10,374,10,"updated"],[370,17,374,17],[370,20,374,20],[371,8,375,6],[371,11,375,9,"entitlementsByKey"],[371,28,375,26],[372,8,376,6],[372,9,376,7,"key"],[372,12,376,10],[372,15,376,13],[373,10,377,8,"key"],[373,13,377,11],[374,10,378,8,"status"],[374,16,378,14],[374,18,378,16],[374,25,378,32],[375,10,379,8,"granted_at"],[375,20,379,18],[375,22,379,20],[375,26,379,24,"Date"],[375,30,379,28],[375,31,379,29],[375,32,379,30],[375,33,379,31,"toISOString"],[375,44,379,42],[375,45,379,43],[375,46,379,44],[376,10,380,8,"reason"],[376,16,380,14],[376,18,380,16],[377,8,381,6],[378,6,382,4],[378,7,382,5],[380,6,384,4],[381,6,385,4],[381,10,385,10,"fakeSnapshot"],[381,22,385,44],[381,25,385,47],[382,8,386,6,"server_time"],[382,19,386,17],[382,21,386,19],[382,25,386,23,"Date"],[382,29,386,27],[382,30,386,28],[382,31,386,29],[382,32,386,30,"toISOString"],[382,43,386,41],[382,44,386,42],[382,45,386,43],[383,8,387,6,"version"],[383,15,387,13],[383,17,387,15,"Date"],[383,21,387,19],[383,22,387,20,"now"],[383,25,387,23],[383,26,387,24],[383,27,387,25],[384,8,388,6,"username"],[384,16,388,14],[384,18,388,16],[384,28,388,26],[385,8,389,6,"entitlements"],[385,20,389,18],[385,22,389,20,"updated"],[385,29,389,27],[386,8,390,6,"source"],[386,14,390,12],[386,16,390,14],[387,6,391,4],[387,7,391,5],[388,6,393,4,"set"],[388,9,393,7],[388,10,393,8],[389,8,394,6,"entitlementsByKey"],[389,25,394,23],[389,27,394,25,"updated"],[389,34,394,32],[390,8,395,6,"snapshot"],[390,16,395,14],[390,18,395,16,"fakeSnapshot"],[391,6,396,4],[391,7,396,5],[391,8,396,6],[392,6,397,4,"dlog"],[392,10,397,8],[392,11,397,9],[392,44,397,42],[392,46,397,44,"key"],[392,49,397,47],[392,50,397,48],[393,4,398,2],[393,5,398,3],[394,4,400,2,"devRevokeEntitlement"],[394,24,400,22],[394,26,400,25,"key"],[394,29,400,36],[394,33,400,41],[395,6,401,4],[395,10,401,8],[395,11,401,9,"__DEV__"],[395,18,401,16],[395,20,401,18],[396,8,402,6,"console"],[396,15,402,13],[396,16,402,14,"warn"],[396,20,402,18],[396,21,402,19],[396,93,402,91],[396,94,402,92],[397,8,403,6],[398,6,404,4],[399,6,406,4],[399,10,406,4,"_get6"],[399,15,406,4],[399,18,406,34,"get"],[399,21,406,37],[399,22,406,38],[399,23,406,39],[400,8,406,12,"entitlementsByKey"],[400,25,406,29],[400,28,406,29,"_get6"],[400,33,406,29],[400,34,406,12,"entitlementsByKey"],[400,51,406,29],[401,6,407,4],[401,10,407,10,"updated"],[401,17,407,17],[401,20,407,20],[402,8,408,6],[402,11,408,9,"entitlementsByKey"],[402,28,408,26],[403,8,409,6],[403,9,409,7,"key"],[403,12,409,10],[403,15,409,13],[404,10,410,8,"key"],[404,13,410,11],[405,10,411,8,"status"],[405,16,411,14],[405,18,411,16],[406,8,412,6],[407,6,413,4],[407,7,413,5],[408,6,415,4,"set"],[408,9,415,7],[408,10,415,8],[409,8,415,10,"entitlementsByKey"],[409,25,415,27],[409,27,415,29,"updated"],[410,6,415,37],[410,7,415,38],[410,8,415,39],[411,6,416,4,"dlog"],[411,10,416,8],[411,11,416,9],[411,44,416,42],[411,46,416,44,"key"],[411,49,416,47],[411,50,416,48],[412,4,417,2],[412,5,417,3],[413,4,419,2,"devClearAll"],[413,15,419,13],[413,17,419,15,"devClearAll"],[413,18,419,15],[413,23,419,21],[414,6,420,4],[414,10,420,8],[414,11,420,9,"__DEV__"],[414,18,420,16],[414,20,420,18],[415,8,421,6,"console"],[415,15,421,13],[415,16,421,14,"warn"],[415,20,421,18],[415,21,421,19],[415,84,421,82],[415,85,421,83],[416,8,422,6],[417,6,423,4],[418,6,425,4,"set"],[418,9,425,7],[418,10,425,8],[419,8,426,6,"entitlementsByKey"],[419,25,426,23],[419,27,426,25],[419,31,426,25,"createEmptyEntitlementsMap"],[419,52,426,51],[419,53,426,51,"createEmptyEntitlementsMap"],[419,79,426,51],[419,81,426,52],[419,82,426,53],[420,8,427,6,"snapshot"],[420,16,427,14],[420,18,427,16],[421,6,428,4],[421,7,428,5],[421,8,428,6],[422,6,429,4],[422,10,429,4,"storageRemove"],[422,21,429,17],[422,22,429,17,"storageRemove"],[422,35,429,17],[422,37,429,18,"STORAGE_KEY"],[422,48,429,29],[422,49,429,30],[422,50,429,31,"catch"],[422,55,429,36],[422,56,429,37],[422,62,429,43],[422,63,429,44],[422,64,429,45],[422,65,429,46],[423,6,430,4,"dlog"],[423,10,430,8],[423,11,430,9],[423,61,430,59],[423,62,430,60],[424,4,431,2],[425,2,432,0],[425,3,432,1],[425,4,432,2],[425,5,432,3],[427,2,434,0],[428,0,435,0],[429,0,436,0],[430,2,434,0],[430,11,437,15,"migrateLegacyData"],[430,28,437,32,"migrateLegacyData"],[430,29,437,32,"_x3"],[430,32,437,32],[430,34,437,32,"_x4"],[430,37,437,32],[431,4,437,32],[431,11,437,32,"_migrateLegacyData"],[431,29,437,32],[431,30,437,32,"apply"],[431,35,437,32],[431,42,437,32,"arguments"],[431,51,437,32],[432,2,437,32],[433,2,437,32],[433,11,437,32,"_migrateLegacyData"],[433,30,437,32],[434,4,437,32,"_migrateLegacyData"],[434,22,437,32],[434,29,437,32,"_asyncToGenerator"],[434,46,437,32],[434,47,437,32,"default"],[434,54,437,32],[434,56,437,0],[434,67,438,2,"set"],[434,70,438,54],[434,72,439,2,"get"],[434,75,439,34],[434,77,440,2],[435,6,441,2],[435,10,441,6],[436,8,442,4],[436,12,442,10,"legacyData"],[436,22,442,20],[436,31,442,29],[436,35,442,29,"storageGet"],[436,46,442,39],[436,47,442,39,"storageGet"],[436,57,442,39],[436,59,442,40,"LEGACY_STORAGE_KEY"],[436,77,442,58],[436,78,442,59],[437,8,443,4],[437,12,443,8],[437,13,443,9,"legacyData"],[437,23,443,19],[437,25,443,21],[438,8,445,4,"dlog"],[438,12,445,8],[438,13,445,9],[438,58,445,54],[438,59,445,55],[439,8,447,4],[439,12,447,10,"legacy"],[439,18,447,16],[439,21,447,19,"JSON"],[439,25,447,23],[439,26,447,24,"parse"],[439,31,447,29],[439,32,447,30,"legacyData"],[439,42,447,40],[439,43,447,41],[440,8,448,4],[440,12,448,4,"_get7"],[440,17,448,4],[440,20,448,34,"get"],[440,23,448,37],[440,24,448,38],[440,25,448,39],[441,10,448,12,"entitlementsByKey"],[441,27,448,29],[441,30,448,29,"_get7"],[441,35,448,29],[441,36,448,12,"entitlementsByKey"],[441,53,448,29],[442,8,449,4],[442,12,449,10,"updated"],[442,19,449,17],[442,22,449,20],[443,10,449,22],[443,13,449,25,"entitlementsByKey"],[444,8,449,43],[444,9,449,44],[446,8,451,4],[447,8,452,4],[447,17,452,4,"_ref4"],[447,22,452,4],[447,26,452,34,"Object"],[447,32,452,40],[447,33,452,41,"entries"],[447,40,452,48],[447,41,452,49,"legacy"],[447,47,452,55],[447,48,452,56],[447,50,452,58],[448,10,452,58],[448,14,452,58,"_ref5"],[448,19,452,58],[448,26,452,58,"_slicedToArray"],[448,40,452,58],[448,41,452,58,"default"],[448,48,452,58],[448,50,452,58,"_ref4"],[448,55,452,58],[449,10,452,58],[449,14,452,16,"oldKey"],[449,20,452,22],[449,23,452,22,"_ref5"],[449,28,452,22],[450,10,452,22],[450,14,452,24,"value"],[450,19,452,29],[450,22,452,29,"_ref5"],[450,27,452,29],[451,10,453,6],[451,14,453,10,"value"],[451,19,453,15],[451,21,453,17],[452,12,454,8],[452,16,454,14,"newKey"],[452,22,454,20],[452,25,454,23],[452,29,454,23,"migrateLegacyKey"],[452,51,454,39],[452,52,454,39,"migrateLegacyKey"],[452,68,454,39],[452,70,454,40,"oldKey"],[452,76,454,46],[452,77,454,47],[453,12,455,8,"updated"],[453,19,455,15],[453,20,455,16,"newKey"],[453,26,455,22],[453,27,455,23],[453,30,455,26],[454,14,456,10,"key"],[454,17,456,13],[454,19,456,15,"newKey"],[454,25,456,21],[455,14,457,10,"status"],[455,20,457,16],[455,22,457,18],[455,29,457,25],[456,14,458,10,"granted_at"],[456,24,458,20],[456,26,458,22],[456,30,458,26,"Date"],[456,34,458,30],[456,35,458,31],[456,36,458,32],[456,37,458,33,"toISOString"],[456,48,458,44],[456,49,458,45],[456,50,458,46],[457,14,459,10,"reason"],[457,20,459,16],[457,22,459,18],[458,12,460,8],[458,13,460,9],[459,12,461,8,"dlog"],[459,16,461,12],[459,17,461,13],[459,47,461,43],[459,49,461,45,"oldKey"],[459,55,461,51],[459,57,461,53],[459,61,461,57],[459,63,461,59,"newKey"],[459,69,461,65],[459,70,461,66],[460,10,462,6],[461,8,463,4],[462,8,465,4,"set"],[462,11,465,7],[462,12,465,8],[463,10,465,10,"entitlementsByKey"],[463,27,465,27],[463,29,465,29,"updated"],[464,8,465,37],[464,9,465,38],[464,10,465,39],[466,8,467,4],[467,8,468,4],[467,14,468,10],[467,18,468,10,"storageRemove"],[467,29,468,23],[467,30,468,23,"storageRemove"],[467,43,468,23],[467,45,468,24,"LEGACY_STORAGE_KEY"],[467,63,468,42],[467,64,468,43],[468,8,469,4,"dlog"],[468,12,469,8],[468,13,469,9],[468,59,469,55],[468,60,469,56],[469,6,471,2],[469,7,471,3],[469,8,471,4],[469,15,471,11,"e"],[469,16,471,12],[469,18,471,14],[470,8,472,4,"console"],[470,15,472,11],[470,16,472,12,"error"],[470,21,472,17],[470,22,472,18],[470,66,472,62],[470,68,472,64,"e"],[470,69,472,65],[470,70,472,66],[471,6,473,2],[472,4,474,0],[472,5,474,1],[473,4,474,1],[473,11,474,1,"_migrateLegacyData"],[473,29,474,1],[473,30,474,1,"apply"],[473,35,474,1],[473,42,474,1,"arguments"],[473,51,474,1],[474,2,474,1],[475,0,474,1],[475,3]],"functionMap":{"names":["<global>","dlog","getEntitlementsSnapshotApi","getAuthEpoch","_getAuthEpoch","getUser","_getUser","create$argument_0","hydrateEntitlements","refreshFromServer","applySnapshot","storageSet._catch$argument_0","isStale","ensureFreshEntitlements","clear","set$argument_0","storageRemove._catch$argument_0","hasEntitlement","devGrantEntitlement","devRevokeEntitlement","devClearAll","migrateLegacyData"],"mappings":"AAA;aCiC,0DD;AEc;CFM;AGI;oBCG,uCD;CHG;AKI;eCG,kCD;CLG;iEOsC;uBCY;GDsB;qBEQ;GF2D;iBGM;wDCc,QD;GHC;WKQ;GL+C;2BMc;GNsB;SOM;QCE;MDM;qCEC,QF;GPC;kBUM;GVa;uBWO;GX+B;wBYE;GZiB;eaE;qCJU,QI;GbE;EPC;AqBK;CrBqC"},"hasCjsExports":false},"type":"js/module"}]}