{"dependencies":[{"name":"./baggage.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":16,"index":80},"end":{"line":3,"column":39,"index":103}}],"key":"IO8r4jqCjcTqejVGBjINTpRR/ss=","exportNames":["*"],"imports":1}},{"name":"./misc.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":13,"index":118},"end":{"line":4,"column":33,"index":138}}],"key":"bosxJ0QJAQv+IEnjtlnm0jL5MFI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var baggage = require(_dependencyMap[0], \"./baggage.js\");\n  var misc = require(_dependencyMap[1], \"./misc.js\");\n  var TRACEPARENT_REGEXP = new RegExp('^[ \\\\t]*' +\n  // whitespace\n  '([0-9a-f]{32})?' +\n  // trace_id\n  '-?([0-9a-f]{16})?' +\n  // span_id\n  '-?([01])?' +\n  // sampled\n  '[ \\\\t]*$') // whitespace\n  ;\n\n  /**\n   * Extract transaction context data from a `sentry-trace` header.\n   *\n   * @param traceparent Traceparent string\n   *\n   * @returns Object containing data from the header, or undefined if traceparent string is malformed\n   */\n  function extractTraceparentData(traceparent) {\n    if (!traceparent) {\n      return undefined;\n    }\n    var matches = traceparent.match(TRACEPARENT_REGEXP);\n    if (!matches) {\n      return undefined;\n    }\n    var parentSampled;\n    if (matches[3] === '1') {\n      parentSampled = true;\n    } else if (matches[3] === '0') {\n      parentSampled = false;\n    }\n    return {\n      traceId: matches[1],\n      parentSampled,\n      parentSpanId: matches[2]\n    };\n  }\n\n  /**\n   * Create tracing context from incoming headers.\n   */\n  function tracingContextFromHeaders(sentryTrace, baggage$1) {\n    var traceparentData = extractTraceparentData(sentryTrace);\n    var dynamicSamplingContext = baggage.baggageHeaderToDynamicSamplingContext(baggage$1);\n    var _ref = traceparentData || {},\n      traceId = _ref.traceId,\n      parentSpanId = _ref.parentSpanId,\n      parentSampled = _ref.parentSampled;\n    var propagationContext = {\n      traceId: traceId || misc.uuid4(),\n      spanId: misc.uuid4().substring(16),\n      sampled: parentSampled\n    };\n    if (parentSpanId) {\n      propagationContext.parentSpanId = parentSpanId;\n    }\n    if (dynamicSamplingContext) {\n      propagationContext.dsc = dynamicSamplingContext;\n    }\n    return {\n      traceparentData,\n      dynamicSamplingContext,\n      propagationContext\n    };\n  }\n\n  /**\n   * Create sentry-trace header from span context values.\n   */\n  function generateSentryTraceHeader() {\n    var traceId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : misc.uuid4();\n    var spanId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : misc.uuid4().substring(16);\n    var sampled = arguments.length > 2 ? arguments[2] : undefined;\n    var sampledString = '';\n    if (sampled !== undefined) {\n      sampledString = sampled ? '-1' : '-0';\n    }\n    return `${traceId}-${spanId}${sampledString}`;\n  }\n  exports.TRACEPARENT_REGEXP = TRACEPARENT_REGEXP;\n  exports.extractTraceparentData = extractTraceparentData;\n  exports.generateSentryTraceHeader = generateSentryTraceHeader;\n  exports.tracingContextFromHeaders = tracingContextFromHeaders;\n});","lineCount":91,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,6,3,6,"baggage"],[5,13,3,13],[5,16,3,16,"require"],[5,23,3,23],[5,24,3,23,"_dependencyMap"],[5,38,3,23],[5,57,3,38],[5,58,3,39],[6,2,4,0],[6,6,4,6,"misc"],[6,10,4,10],[6,13,4,13,"require"],[6,20,4,20],[6,21,4,20,"_dependencyMap"],[6,35,4,20],[6,51,4,32],[6,52,4,33],[7,2,6,0],[7,6,6,6,"TRACEPARENT_REGEXP"],[7,24,6,24],[7,27,6,27],[7,31,6,31,"RegExp"],[7,37,6,37],[7,38,7,2],[7,48,7,12],[8,2,7,15],[9,2,8,4],[9,19,8,21],[10,2,8,24],[11,2,9,4],[11,21,9,23],[12,2,9,26],[13,2,10,4],[13,13,10,15],[14,2,10,18],[15,2,11,4],[15,12,12,0],[15,13,12,1],[15,14,11,16],[16,2,12,1],[18,2,14,0],[19,0,15,0],[20,0,16,0],[21,0,17,0],[22,0,18,0],[23,0,19,0],[24,0,20,0],[25,2,21,0],[25,11,21,9,"extractTraceparentData"],[25,33,21,31,"extractTraceparentData"],[25,34,21,32,"traceparent"],[25,45,21,43],[25,47,21,45],[26,4,22,2],[26,8,22,6],[26,9,22,7,"traceparent"],[26,20,22,18],[26,22,22,20],[27,6,23,4],[27,13,23,11,"undefined"],[27,22,23,20],[28,4,24,2],[29,4,26,2],[29,8,26,8,"matches"],[29,15,26,15],[29,18,26,18,"traceparent"],[29,29,26,29],[29,30,26,30,"match"],[29,35,26,35],[29,36,26,36,"TRACEPARENT_REGEXP"],[29,54,26,54],[29,55,26,55],[30,4,27,2],[30,8,27,6],[30,9,27,7,"matches"],[30,16,27,14],[30,18,27,16],[31,6,28,4],[31,13,28,11,"undefined"],[31,22,28,20],[32,4,29,2],[33,4,31,2],[33,8,31,6,"parentSampled"],[33,21,31,19],[34,4,32,2],[34,8,32,6,"matches"],[34,15,32,13],[34,16,32,14],[34,17,32,15],[34,18,32,16],[34,23,32,21],[34,26,32,24],[34,28,32,26],[35,6,33,4,"parentSampled"],[35,19,33,17],[35,22,33,20],[35,26,33,24],[36,4,34,2],[36,5,34,3],[36,11,34,9],[36,15,34,13,"matches"],[36,22,34,20],[36,23,34,21],[36,24,34,22],[36,25,34,23],[36,30,34,28],[36,33,34,31],[36,35,34,33],[37,6,35,4,"parentSampled"],[37,19,35,17],[37,22,35,20],[37,27,35,25],[38,4,36,2],[39,4,38,2],[39,11,38,9],[40,6,39,4,"traceId"],[40,13,39,11],[40,15,39,13,"matches"],[40,22,39,20],[40,23,39,21],[40,24,39,22],[40,25,39,23],[41,6,40,4,"parentSampled"],[41,19,40,17],[42,6,41,4,"parentSpanId"],[42,18,41,16],[42,20,41,18,"matches"],[42,27,41,25],[42,28,41,26],[42,29,41,27],[43,4,42,2],[43,5,42,3],[44,2,43,0],[46,2,45,0],[47,0,46,0],[48,0,47,0],[49,2,48,0],[49,11,48,9,"tracingContextFromHeaders"],[49,36,48,34,"tracingContextFromHeaders"],[49,37,49,2,"sentryTrace"],[49,48,49,13],[49,50,50,2,"baggage$1"],[49,59,50,11],[49,61,53,1],[50,4,54,2],[50,8,54,8,"traceparentData"],[50,23,54,23],[50,26,54,26,"extractTraceparentData"],[50,48,54,48],[50,49,54,49,"sentryTrace"],[50,60,54,60],[50,61,54,61],[51,4,55,2],[51,8,55,8,"dynamicSamplingContext"],[51,30,55,30],[51,33,55,33,"baggage"],[51,40,55,40],[51,41,55,41,"baggageHeaderToDynamicSamplingContext"],[51,78,55,78],[51,79,55,79,"baggage$1"],[51,88,55,88],[51,89,55,89],[52,4,57,2],[52,8,57,2,"_ref"],[52,12,57,2],[52,15,57,51,"traceparentData"],[52,30,57,66],[52,34,57,70],[52,35,57,71],[52,36,57,72],[53,6,57,10,"traceId"],[53,13,57,17],[53,16,57,17,"_ref"],[53,20,57,17],[53,21,57,10,"traceId"],[53,28,57,17],[54,6,57,19,"parentSpanId"],[54,18,57,31],[54,21,57,31,"_ref"],[54,25,57,31],[54,26,57,19,"parentSpanId"],[54,38,57,31],[55,6,57,33,"parentSampled"],[55,19,57,46],[55,22,57,46,"_ref"],[55,26,57,46],[55,27,57,33,"parentSampled"],[55,40,57,46],[56,4,59,2],[56,8,59,8,"propagationContext"],[56,26,59,26],[56,29,59,29],[57,6,60,4,"traceId"],[57,13,60,11],[57,15,60,13,"traceId"],[57,22,60,20],[57,26,60,24,"misc"],[57,30,60,28],[57,31,60,29,"uuid4"],[57,36,60,34],[57,37,60,35],[57,38,60,36],[58,6,61,4,"spanId"],[58,12,61,10],[58,14,61,12,"misc"],[58,18,61,16],[58,19,61,17,"uuid4"],[58,24,61,22],[58,25,61,23],[58,26,61,24],[58,27,61,25,"substring"],[58,36,61,34],[58,37,61,35],[58,39,61,37],[58,40,61,38],[59,6,62,4,"sampled"],[59,13,62,11],[59,15,62,13,"parentSampled"],[60,4,63,2],[60,5,63,3],[61,4,65,2],[61,8,65,6,"parentSpanId"],[61,20,65,18],[61,22,65,20],[62,6,66,4,"propagationContext"],[62,24,66,22],[62,25,66,23,"parentSpanId"],[62,37,66,35],[62,40,66,38,"parentSpanId"],[62,52,66,50],[63,4,67,2],[64,4,69,2],[64,8,69,6,"dynamicSamplingContext"],[64,30,69,28],[64,32,69,30],[65,6,70,4,"propagationContext"],[65,24,70,22],[65,25,70,23,"dsc"],[65,28,70,26],[65,31,70,29,"dynamicSamplingContext"],[65,53,70,51],[66,4,71,2],[67,4,73,2],[67,11,73,9],[68,6,74,4,"traceparentData"],[68,21,74,19],[69,6,75,4,"dynamicSamplingContext"],[69,28,75,26],[70,6,76,4,"propagationContext"],[71,4,77,2],[71,5,77,3],[72,2,78,0],[74,2,80,0],[75,0,81,0],[76,0,82,0],[77,2,83,0],[77,11,83,9,"generateSentryTraceHeader"],[77,36,83,34,"generateSentryTraceHeader"],[77,37,83,34],[77,39,87,2],[78,4,87,2],[78,8,84,2,"traceId"],[78,15,84,9],[78,18,84,9,"arguments"],[78,27,84,9],[78,28,84,9,"length"],[78,34,84,9],[78,42,84,9,"arguments"],[78,51,84,9],[78,59,84,9,"undefined"],[78,68,84,9],[78,71,84,9,"arguments"],[78,80,84,9],[78,86,84,12,"misc"],[78,90,84,16],[78,91,84,17,"uuid4"],[78,96,84,22],[78,97,84,23],[78,98,84,24],[79,4,84,24],[79,8,85,2,"spanId"],[79,14,85,8],[79,17,85,8,"arguments"],[79,26,85,8],[79,27,85,8,"length"],[79,33,85,8],[79,41,85,8,"arguments"],[79,50,85,8],[79,58,85,8,"undefined"],[79,67,85,8],[79,70,85,8,"arguments"],[79,79,85,8],[79,85,85,11,"misc"],[79,89,85,15],[79,90,85,16,"uuid4"],[79,95,85,21],[79,96,85,22],[79,97,85,23],[79,98,85,24,"substring"],[79,107,85,33],[79,108,85,34],[79,110,85,36],[79,111,85,37],[80,4,85,37],[80,8,86,2,"sampled"],[80,15,86,9],[80,18,86,9,"arguments"],[80,27,86,9],[80,28,86,9,"length"],[80,34,86,9],[80,41,86,9,"arguments"],[80,50,86,9],[80,56,86,9,"undefined"],[80,65,86,9],[81,4,88,2],[81,8,88,6,"sampledString"],[81,21,88,19],[81,24,88,22],[81,26,88,24],[82,4,89,2],[82,8,89,6,"sampled"],[82,15,89,13],[82,20,89,18,"undefined"],[82,29,89,27],[82,31,89,29],[83,6,90,4,"sampledString"],[83,19,90,17],[83,22,90,20,"sampled"],[83,29,90,27],[83,32,90,30],[83,36,90,34],[83,39,90,37],[83,43,90,41],[84,4,91,2],[85,4,92,2],[85,11,92,9],[85,14,92,12,"traceId"],[85,21,92,19],[85,25,92,23,"spanId"],[85,31,92,29],[85,34,92,32,"sampledString"],[85,47,92,45],[85,49,92,47],[86,2,93,0],[87,2,95,0,"exports"],[87,9,95,7],[87,10,95,8,"TRACEPARENT_REGEXP"],[87,28,95,26],[87,31,95,29,"TRACEPARENT_REGEXP"],[87,49,95,47],[88,2,96,0,"exports"],[88,9,96,7],[88,10,96,8,"extractTraceparentData"],[88,32,96,30],[88,35,96,33,"extractTraceparentData"],[88,57,96,55],[89,2,97,0,"exports"],[89,9,97,7],[89,10,97,8,"generateSentryTraceHeader"],[89,35,97,33],[89,38,97,36,"generateSentryTraceHeader"],[89,63,97,61],[90,2,98,0,"exports"],[90,9,98,7],[90,10,98,8,"tracingContextFromHeaders"],[90,35,98,33],[90,38,98,36,"tracingContextFromHeaders"],[90,63,98,61],[91,0,98,62],[91,3]],"functionMap":{"names":["<global>","extractTraceparentData","tracingContextFromHeaders","generateSentryTraceHeader"],"mappings":"AAA;ACoB;CDsB;AEK;CF8B;AGK;CHU"},"hasCjsExports":true},"type":"js/module"}]}