{"dependencies":[{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":811},"end":{"line":19,"column":37,"index":848}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"./products","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":849},"end":{"line":20,"column":57,"index":906}}],"key":"QLsEbhN001YxKPoY7MJ1qVaW9gw=","exportNames":["*"],"imports":1}},{"name":"../telemetry/events","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":907},"end":{"line":21,"column":52,"index":959}}],"key":"k7LZwhoWMWET/ud396YGvDlODrM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.goToPaywall = goToPaywall;\n  exports.goToStore = goToStore;\n  exports.goToPurchaseSuccess = goToPurchaseSuccess;\n  exports.getPaywallRoute = getPaywallRoute;\n  exports.getStoreRoute = getStoreRoute;\n  exports.getSafeReturnTo = getSafeReturnTo;\n  exports.useCurrentPath = useCurrentPath;\n  var _expoRouter = require(_dependencyMap[0], \"expo-router\");\n  var _products = require(_dependencyMap[1], \"./products\");\n  var _telemetryEvents = require(_dependencyMap[2], \"../telemetry/events\");\n  // /app/frontend/lib/entitlements/navigation.ts\n  // CANONICAL Premium Navigation - single entry point for all paywall routing\n  //\n  // STRICT INVARIANTS:\n  // 1. All premium navigation MUST go through these helpers\n  // 2. Direct router.push('/paid-features') or router.push('/store') is FORBIDDEN\n  // 3. If productKey is omitted, defaults to PAYWALL_HUB (documented policy)\n  // 4. source MUST be a known PaywallSource (no arbitrary strings in prod)\n  // 5. returnTo is sanitized (must start with /, max 256 chars)\n  // 6. Telemetry is ONLY emitted from this file (guards enforce)\n  //\n  // This ensures:\n  // - Analytics/telemetry for all premium funnels\n  // - Single place to change paywall route\n  // - Consistent UX for premium denial flows\n  // - Easy debugging of purchase funnels\n  // - No silent misroutes from implicit defaults\n\n  // Debug logging\n  const dlog = (...args) => {\n    if (__DEV__) console.log('[navigation]', ...args);\n  };\n\n  // ==============================================================\n  // TELEMETRY DEDUPE - Prevent spam from double-taps/rerenders\n  // ==============================================================\n  const DEDUPE_WINDOW_MS = 1500; // 1.5 seconds\n  let lastPaywallOpenedAt = 0;\n  let lastStoreOpenedAt = 0;\n  function shouldEmitPaywallEvent() {\n    const now = Date.now();\n    if (now - lastPaywallOpenedAt < DEDUPE_WINDOW_MS) {\n      dlog('paywall_opened dedupe - skipping');\n      return false;\n    }\n    lastPaywallOpenedAt = now;\n    return true;\n  }\n  function shouldEmitStoreEvent() {\n    const now = Date.now();\n    if (now - lastStoreOpenedAt < DEDUPE_WINDOW_MS) {\n      dlog('store_opened dedupe - skipping');\n      return false;\n    }\n    lastStoreOpenedAt = now;\n    return true;\n  }\n\n  // ==============================================================\n  // TYPES\n  // ==============================================================\n\n  /**\n   * Source of the paywall navigation (for analytics + debugging)\n   * \n   * STRICT: Only these known values are allowed.\n   * Adding a new source requires updating this type.\n   */\n\n  // Fallback (should be rare, logged as warning)\n\n  // Known sources for validation\n  const KNOWN_SOURCES = new Set(['cinematic_gate', 'battle_pass', 'store', 'profile', 'hero_detail', 'gating_alert', 'equipment', 'gacha', 'campaign', 'unknown']);\n\n  /**\n   * Options for paywall navigation\n   */\n\n  /**\n   * The ONE route for premium purchases\n   * Change this ONLY here to update all premium navigation\n   */\n  const PAYWALL_ROUTE = '/paid-features';\n  const STORE_ROUTE = '/store';\n\n  // Constraints\n  const MAX_RETURN_TO_LENGTH = 256;\n\n  /**\n   * Sanitize returnTo path to prevent weird routing state\n   * - Must start with '/'\n   * - Strip query fragments\n   * - Clamp length to MAX_RETURN_TO_LENGTH\n   */\n  function sanitizeReturnTo(returnTo) {\n    if (!returnTo) return undefined;\n\n    // Must start with /\n    if (!returnTo.startsWith('/')) {\n      if (__DEV__) console.warn('[navigation] returnTo must start with /, got:', returnTo);\n      return undefined;\n    }\n\n    // Strip query params and fragments (keep clean path only)\n    let cleaned = returnTo.split('?')[0].split('#')[0];\n\n    // Clamp length\n    if (cleaned.length > MAX_RETURN_TO_LENGTH) {\n      if (__DEV__) console.warn('[navigation] returnTo too long, truncating');\n      cleaned = cleaned.substring(0, MAX_RETURN_TO_LENGTH);\n    }\n    return cleaned;\n  }\n\n  /**\n   * Validate and normalize source\n   */\n  function normalizeSource(source) {\n    if (KNOWN_SOURCES.has(source)) {\n      return source;\n    }\n    if (__DEV__) {\n      console.warn('[navigation] Unknown PaywallSource:', source, '- defaulting to \"unknown\"');\n    }\n    return 'unknown';\n  }\n\n  /**\n   * Canonical entry point for all paywall/premium navigation\n   * \n   * USE THIS instead of router.push('/paid-features') or router.push('/store')\n   * \n   * POLICY: If productKey is omitted, routes to general paywall hub.\n   * This is deterministic and documented - Paywall component shows all products.\n   * \n   * TELEMETRY: Emits 'paywall_opened' event (with 1.5s dedupe window)\n   * \n   * @example\n   * // From cinematic gate (specific product)\n   * goToPaywall({ productKey: 'PREMIUM_CINEMATICS_PACK', source: 'cinematic_gate', heroId: hero.id });\n   * \n   * // From battle pass (specific product)\n   * goToPaywall({ productKey: 'PREMIUM_SUBSCRIPTION', source: 'battle_pass' });\n   * \n   * // Generic premium denial (no specific product - shows all options)\n   * goToPaywall({ source: 'gating_alert' });\n   */\n  function goToPaywall(opts) {\n    const {\n      productKey,\n      heroId,\n      returnTo\n    } = opts;\n\n    // Normalize source (strict validation)\n    const source = normalizeSource(opts.source);\n\n    // Sanitize returnTo\n    const cleanReturnTo = sanitizeReturnTo(returnTo);\n    dlog('goToPaywall:', {\n      productKey,\n      source,\n      heroId,\n      returnTo: cleanReturnTo\n    });\n\n    // Phase 3.13: Emit telemetry (with dedupe to prevent spam)\n    if (shouldEmitPaywallEvent()) {\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.PAYWALL_OPENED, {\n        source,\n        productKey: productKey ?? null,\n        heroId: heroId ?? null,\n        returnTo: cleanReturnTo ?? null,\n        isHub: !productKey // True if going to general hub (no specific product)\n      });\n    }\n\n    // Build query params\n    const params = new URLSearchParams();\n    if (productKey) {\n      params.set('productKey', productKey);\n      // Also include productId for convenience\n      const product = (0, _products.getProduct)(productKey);\n      if (product) {\n        params.set('productId', product.productId);\n      }\n    }\n    // NOTE: If productKey is omitted, Paywall shows general hub (all products)\n    // This is documented policy, not an implicit default\n\n    // Source is always set (normalized above)\n    params.set('source', source);\n    if (heroId) {\n      params.set('heroId', heroId);\n    }\n    if (cleanReturnTo) {\n      params.set('returnTo', cleanReturnTo);\n    }\n\n    // Build final route\n    const queryString = params.toString();\n    const route = queryString ? `${PAYWALL_ROUTE}?${queryString}` : PAYWALL_ROUTE;\n    _expoRouter.router.push(route);\n  }\n\n  /**\n   * Navigate to the general store/shop screen\n   * Use this for browsing, not for specific premium denial flows\n   * \n   * TELEMETRY: Emits 'store_opened' event (with 1.5s dedupe window)\n   */\n  function goToStore(source) {\n    const normalizedSource = source ? normalizeSource(source) : 'store';\n    dlog('goToStore:', {\n      source: normalizedSource\n    });\n\n    // Phase 3.13: Emit telemetry (with dedupe to prevent spam)\n    if (shouldEmitStoreEvent()) {\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.STORE_OPENED, {\n        source: normalizedSource\n      });\n    }\n    _expoRouter.router.push(`${STORE_ROUTE}?source=${normalizedSource}`);\n  }\n\n  /**\n   * Navigate to purchase success screen (optional, for post-purchase UX)\n   */\n  function goToPurchaseSuccess(opts) {\n    dlog('goToPurchaseSuccess:', opts);\n\n    // Sanitize returnTo\n    const cleanReturnTo = sanitizeReturnTo(opts?.returnTo);\n\n    // For now, just go back or to a success route\n    // This can be expanded to show a dedicated success screen\n    if (cleanReturnTo) {\n      _expoRouter.router.replace(cleanReturnTo);\n    } else {\n      _expoRouter.router.back();\n    }\n  }\n\n  /**\n   * Get the paywall route for use in gating helpers\n   * (Internal use - screens should use goToPaywall instead)\n   */\n  function getPaywallRoute() {\n    return PAYWALL_ROUTE;\n  }\n\n  /**\n   * Get the store route\n   * (Internal use - screens should use goToStore instead)\n   */\n  function getStoreRoute() {\n    return STORE_ROUTE;\n  }\n\n  // ==============================================================\n  // Phase 3.19.5: Safe Return Path Helper\n  // ==============================================================\n\n  /**\n   * Generate a stable return path so Paywall/Store can send the player back\n   * without each screen inventing logic.\n   * \n   * - Default returnTo: current pathname (no query, sanitized)\n   * - If route is already /paid-features or /store, return '/' (prevents loops)\n   * - If route is undefined, return '/'\n   * \n   * @param currentPath - The current route pathname\n   * @returns A safe, sanitized return path\n   */\n  function getSafeReturnTo(currentPath) {\n    // Clean up the path first\n    const cleaned = sanitizeReturnTo(currentPath ?? '/');\n\n    // If sanitization failed, go to home\n    if (!cleaned) return '/';\n\n    // Prevent navigation loops - if already on paywall/store routes, go home\n    const loopRoutes = [PAYWALL_ROUTE, STORE_ROUTE, '/paid-features', '/store'];\n    if (loopRoutes.some(route => cleaned === route || cleaned.startsWith(route + '?'))) {\n      return '/';\n    }\n    return cleaned;\n  }\n\n  /**\n   * Get current route path (for use in components that need returnTo)\n   * This is a helper that works with expo-router\n   */\n  function useCurrentPath() {\n    // In expo-router, we can use the segments or pathname\n    // For now, return a placeholder that components can override\n    return '/';\n  }\n});","lineCount":306,"map":[[7,2,175,0,"exports"],[7,9,175,0],[7,10,175,0,"goToPaywall"],[7,21,175,0],[7,24,175,0,"goToPaywall"],[7,35,175,0],[8,2,237,0,"exports"],[8,9,237,0],[8,10,237,0,"goToStore"],[8,19,237,0],[8,22,237,0,"goToStore"],[8,31,237,0],[9,2,254,0,"exports"],[9,9,254,0],[9,10,254,0,"goToPurchaseSuccess"],[9,29,254,0],[9,32,254,0,"goToPurchaseSuccess"],[9,51,254,0],[10,2,276,0,"exports"],[10,9,276,0],[10,10,276,0,"getPaywallRoute"],[10,25,276,0],[10,28,276,0,"getPaywallRoute"],[10,43,276,0],[11,2,284,0,"exports"],[11,9,284,0],[11,10,284,0,"getStoreRoute"],[11,23,284,0],[11,26,284,0,"getStoreRoute"],[11,39,284,0],[12,2,303,0,"exports"],[12,9,303,0],[12,10,303,0,"getSafeReturnTo"],[12,25,303,0],[12,28,303,0,"getSafeReturnTo"],[12,43,303,0],[13,2,323,0,"exports"],[13,9,323,0],[13,10,323,0,"useCurrentPath"],[13,24,323,0],[13,27,323,0,"useCurrentPath"],[13,41,323,0],[14,2,19,0],[14,6,19,0,"_expoRouter"],[14,17,19,0],[14,20,19,0,"require"],[14,27,19,0],[14,28,19,0,"_dependencyMap"],[14,42,19,0],[15,2,20,0],[15,6,20,0,"_products"],[15,15,20,0],[15,18,20,0,"require"],[15,25,20,0],[15,26,20,0,"_dependencyMap"],[15,40,20,0],[16,2,21,0],[16,6,21,0,"_telemetryEvents"],[16,22,21,0],[16,25,21,0,"require"],[16,32,21,0],[16,33,21,0,"_dependencyMap"],[16,47,21,0],[17,2,1,0],[18,2,2,0],[19,2,3,0],[20,2,4,0],[21,2,5,0],[22,2,6,0],[23,2,7,0],[24,2,8,0],[25,2,9,0],[26,2,10,0],[27,2,11,0],[28,2,12,0],[29,2,13,0],[30,2,14,0],[31,2,15,0],[32,2,16,0],[33,2,17,0],[35,2,23,0],[36,2,24,0],[36,8,24,6,"dlog"],[36,12,24,10],[36,15,24,13,"dlog"],[36,16,24,14],[36,19,24,17,"args"],[36,23,24,28],[36,28,24,33],[37,4,24,35],[37,8,24,39,"__DEV__"],[37,15,24,46],[37,17,24,48,"console"],[37,24,24,55],[37,25,24,56,"log"],[37,28,24,59],[37,29,24,60],[37,43,24,74],[37,45,24,76],[37,48,24,79,"args"],[37,52,24,83],[37,53,24,84],[38,2,24,86],[38,3,24,87],[40,2,26,0],[41,2,27,0],[42,2,28,0],[43,2,29,0],[43,8,29,6,"DEDUPE_WINDOW_MS"],[43,24,29,22],[43,27,29,25],[43,31,29,29],[43,32,29,30],[43,33,29,31],[44,2,30,0],[44,6,30,4,"lastPaywallOpenedAt"],[44,25,30,23],[44,28,30,26],[44,29,30,27],[45,2,31,0],[45,6,31,4,"lastStoreOpenedAt"],[45,23,31,21],[45,26,31,24],[45,27,31,25],[46,2,33,0],[46,11,33,9,"shouldEmitPaywallEvent"],[46,33,33,31,"shouldEmitPaywallEvent"],[46,34,33,31],[46,36,33,43],[47,4,34,2],[47,10,34,8,"now"],[47,13,34,11],[47,16,34,14,"Date"],[47,20,34,18],[47,21,34,19,"now"],[47,24,34,22],[47,25,34,23],[47,26,34,24],[48,4,35,2],[48,8,35,6,"now"],[48,11,35,9],[48,14,35,12,"lastPaywallOpenedAt"],[48,33,35,31],[48,36,35,34,"DEDUPE_WINDOW_MS"],[48,52,35,50],[48,54,35,52],[49,6,36,4,"dlog"],[49,10,36,8],[49,11,36,9],[49,45,36,43],[49,46,36,44],[50,6,37,4],[50,13,37,11],[50,18,37,16],[51,4,38,2],[52,4,39,2,"lastPaywallOpenedAt"],[52,23,39,21],[52,26,39,24,"now"],[52,29,39,27],[53,4,40,2],[53,11,40,9],[53,15,40,13],[54,2,41,0],[55,2,43,0],[55,11,43,9,"shouldEmitStoreEvent"],[55,31,43,29,"shouldEmitStoreEvent"],[55,32,43,29],[55,34,43,41],[56,4,44,2],[56,10,44,8,"now"],[56,13,44,11],[56,16,44,14,"Date"],[56,20,44,18],[56,21,44,19,"now"],[56,24,44,22],[56,25,44,23],[56,26,44,24],[57,4,45,2],[57,8,45,6,"now"],[57,11,45,9],[57,14,45,12,"lastStoreOpenedAt"],[57,31,45,29],[57,34,45,32,"DEDUPE_WINDOW_MS"],[57,50,45,48],[57,52,45,50],[58,6,46,4,"dlog"],[58,10,46,8],[58,11,46,9],[58,43,46,41],[58,44,46,42],[59,6,47,4],[59,13,47,11],[59,18,47,16],[60,4,48,2],[61,4,49,2,"lastStoreOpenedAt"],[61,21,49,19],[61,24,49,22,"now"],[61,27,49,25],[62,4,50,2],[62,11,50,9],[62,15,50,13],[63,2,51,0],[65,2,53,0],[66,2,54,0],[67,2,55,0],[69,2,57,0],[70,0,58,0],[71,0,59,0],[72,0,60,0],[73,0,61,0],[74,0,62,0],[76,2,73,27],[78,2,75,0],[79,2,76,0],[79,8,76,6,"KNOWN_SOURCES"],[79,21,76,19],[79,24,76,22],[79,28,76,26,"Set"],[79,31,76,29],[79,32,76,45],[79,33,77,2],[79,49,77,18],[79,51,77,20],[79,64,77,33],[79,66,77,35],[79,73,77,42],[79,75,77,44],[79,84,77,53],[79,86,77,55],[79,99,77,68],[79,101,78,2],[79,115,78,16],[79,117,78,18],[79,128,78,29],[79,130,78,31],[79,137,78,38],[79,139,78,40],[79,149,78,50],[79,151,78,52],[79,160,78,61],[79,161,79,1],[79,162,79,2],[81,2,81,0],[82,0,82,0],[83,0,83,0],[85,2,104,0],[86,0,105,0],[87,0,106,0],[88,0,107,0],[89,2,108,0],[89,8,108,6,"PAYWALL_ROUTE"],[89,21,108,19],[89,24,108,22],[89,40,108,47],[90,2,109,0],[90,8,109,6,"STORE_ROUTE"],[90,19,109,17],[90,22,109,20],[90,30,109,37],[92,2,111,0],[93,2,112,0],[93,8,112,6,"MAX_RETURN_TO_LENGTH"],[93,28,112,26],[93,31,112,29],[93,34,112,32],[95,2,114,0],[96,0,115,0],[97,0,116,0],[98,0,117,0],[99,0,118,0],[100,0,119,0],[101,2,120,0],[101,11,120,9,"sanitizeReturnTo"],[101,27,120,25,"sanitizeReturnTo"],[101,28,120,26,"returnTo"],[101,36,120,54],[101,38,120,76],[102,4,121,2],[102,8,121,6],[102,9,121,7,"returnTo"],[102,17,121,15],[102,19,121,17],[102,26,121,24,"undefined"],[102,35,121,33],[104,4,123,2],[105,4,124,2],[105,8,124,6],[105,9,124,7,"returnTo"],[105,17,124,15],[105,18,124,16,"startsWith"],[105,28,124,26],[105,29,124,27],[105,32,124,30],[105,33,124,31],[105,35,124,33],[106,6,125,4],[106,10,125,8,"__DEV__"],[106,17,125,15],[106,19,125,17,"console"],[106,26,125,24],[106,27,125,25,"warn"],[106,31,125,29],[106,32,125,30],[106,79,125,77],[106,81,125,79,"returnTo"],[106,89,125,87],[106,90,125,88],[107,6,126,4],[107,13,126,11,"undefined"],[107,22,126,20],[108,4,127,2],[110,4,129,2],[111,4,130,2],[111,8,130,6,"cleaned"],[111,15,130,13],[111,18,130,16,"returnTo"],[111,26,130,24],[111,27,130,25,"split"],[111,32,130,30],[111,33,130,31],[111,36,130,34],[111,37,130,35],[111,38,130,36],[111,39,130,37],[111,40,130,38],[111,41,130,39,"split"],[111,46,130,44],[111,47,130,45],[111,50,130,48],[111,51,130,49],[111,52,130,50],[111,53,130,51],[111,54,130,52],[113,4,132,2],[114,4,133,2],[114,8,133,6,"cleaned"],[114,15,133,13],[114,16,133,14,"length"],[114,22,133,20],[114,25,133,23,"MAX_RETURN_TO_LENGTH"],[114,45,133,43],[114,47,133,45],[115,6,134,4],[115,10,134,8,"__DEV__"],[115,17,134,15],[115,19,134,17,"console"],[115,26,134,24],[115,27,134,25,"warn"],[115,31,134,29],[115,32,134,30],[115,76,134,74],[115,77,134,75],[116,6,135,4,"cleaned"],[116,13,135,11],[116,16,135,14,"cleaned"],[116,23,135,21],[116,24,135,22,"substring"],[116,33,135,31],[116,34,135,32],[116,35,135,33],[116,37,135,35,"MAX_RETURN_TO_LENGTH"],[116,57,135,55],[116,58,135,56],[117,4,136,2],[118,4,138,2],[118,11,138,9,"cleaned"],[118,18,138,16],[119,2,139,0],[121,2,141,0],[122,0,142,0],[123,0,143,0],[124,2,144,0],[124,11,144,9,"normalizeSource"],[124,26,144,24,"normalizeSource"],[124,27,144,25,"source"],[124,33,144,46],[124,35,144,63],[125,4,145,2],[125,8,145,6,"KNOWN_SOURCES"],[125,21,145,19],[125,22,145,20,"has"],[125,25,145,23],[125,26,145,24,"source"],[125,32,145,30],[125,33,145,31],[125,35,145,33],[126,6,146,4],[126,13,146,11,"source"],[126,19,146,17],[127,4,147,2],[128,4,149,2],[128,8,149,6,"__DEV__"],[128,15,149,13],[128,17,149,15],[129,6,150,4,"console"],[129,13,150,11],[129,14,150,12,"warn"],[129,18,150,16],[129,19,150,17],[129,56,150,54],[129,58,150,56,"source"],[129,64,150,62],[129,66,150,64],[129,93,150,91],[129,94,150,92],[130,4,151,2],[131,4,152,2],[131,11,152,9],[131,20,152,18],[132,2,153,0],[134,2,155,0],[135,0,156,0],[136,0,157,0],[137,0,158,0],[138,0,159,0],[139,0,160,0],[140,0,161,0],[141,0,162,0],[142,0,163,0],[143,0,164,0],[144,0,165,0],[145,0,166,0],[146,0,167,0],[147,0,168,0],[148,0,169,0],[149,0,170,0],[150,0,171,0],[151,0,172,0],[152,0,173,0],[153,0,174,0],[154,2,175,7],[154,11,175,16,"goToPaywall"],[154,22,175,27,"goToPaywall"],[154,23,175,28,"opts"],[154,27,175,52],[154,29,175,60],[155,4,176,2],[155,10,176,8],[156,6,176,10,"productKey"],[156,16,176,20],[157,6,176,22,"heroId"],[157,12,176,28],[158,6,176,30,"returnTo"],[159,4,176,39],[159,5,176,40],[159,8,176,43,"opts"],[159,12,176,47],[161,4,178,2],[162,4,179,2],[162,10,179,8,"source"],[162,16,179,14],[162,19,179,17,"normalizeSource"],[162,34,179,32],[162,35,179,33,"opts"],[162,39,179,37],[162,40,179,38,"source"],[162,46,179,44],[162,47,179,45],[164,4,181,2],[165,4,182,2],[165,10,182,8,"cleanReturnTo"],[165,23,182,21],[165,26,182,24,"sanitizeReturnTo"],[165,42,182,40],[165,43,182,41,"returnTo"],[165,51,182,49],[165,52,182,50],[166,4,184,2,"dlog"],[166,8,184,6],[166,9,184,7],[166,23,184,21],[166,25,184,23],[167,6,184,25,"productKey"],[167,16,184,35],[168,6,184,37,"source"],[168,12,184,43],[169,6,184,45,"heroId"],[169,12,184,51],[170,6,184,53,"returnTo"],[170,14,184,61],[170,16,184,63,"cleanReturnTo"],[171,4,184,77],[171,5,184,78],[171,6,184,79],[173,4,186,2],[174,4,187,2],[174,8,187,6,"shouldEmitPaywallEvent"],[174,30,187,28],[174,31,187,29],[174,32,187,30],[174,34,187,32],[175,6,188,4],[175,10,188,4,"track"],[175,26,188,9],[175,27,188,9,"track"],[175,32,188,9],[175,34,188,10,"Events"],[175,50,188,16],[175,51,188,16,"Events"],[175,57,188,16],[175,58,188,17,"PAYWALL_OPENED"],[175,72,188,31],[175,74,188,33],[176,8,189,6,"source"],[176,14,189,12],[177,8,190,6,"productKey"],[177,18,190,16],[177,20,190,18,"productKey"],[177,30,190,28],[177,34,190,32],[177,38,190,36],[178,8,191,6,"heroId"],[178,14,191,12],[178,16,191,14,"heroId"],[178,22,191,20],[178,26,191,24],[178,30,191,28],[179,8,192,6,"returnTo"],[179,16,192,14],[179,18,192,16,"cleanReturnTo"],[179,31,192,29],[179,35,192,33],[179,39,192,37],[180,8,193,6,"isHub"],[180,13,193,11],[180,15,193,13],[180,16,193,14,"productKey"],[180,26,193,24],[180,27,193,27],[181,6,194,4],[181,7,194,5],[181,8,194,6],[182,4,195,2],[184,4,197,2],[185,4,198,2],[185,10,198,8,"params"],[185,16,198,14],[185,19,198,17],[185,23,198,21,"URLSearchParams"],[185,38,198,36],[185,39,198,37],[185,40,198,38],[186,4,200,2],[186,8,200,6,"productKey"],[186,18,200,16],[186,20,200,18],[187,6,201,4,"params"],[187,12,201,10],[187,13,201,11,"set"],[187,16,201,14],[187,17,201,15],[187,29,201,27],[187,31,201,29,"productKey"],[187,41,201,39],[187,42,201,40],[188,6,202,4],[189,6,203,4],[189,12,203,10,"product"],[189,19,203,17],[189,22,203,20],[189,26,203,20,"getProduct"],[189,35,203,30],[189,36,203,30,"getProduct"],[189,46,203,30],[189,48,203,31,"productKey"],[189,58,203,41],[189,59,203,42],[190,6,204,4],[190,10,204,8,"product"],[190,17,204,15],[190,19,204,17],[191,8,205,6,"params"],[191,14,205,12],[191,15,205,13,"set"],[191,18,205,16],[191,19,205,17],[191,30,205,28],[191,32,205,30,"product"],[191,39,205,37],[191,40,205,38,"productId"],[191,49,205,47],[191,50,205,48],[192,6,206,4],[193,4,207,2],[194,4,208,2],[195,4,209,2],[197,4,211,2],[198,4,212,2,"params"],[198,10,212,8],[198,11,212,9,"set"],[198,14,212,12],[198,15,212,13],[198,23,212,21],[198,25,212,23,"source"],[198,31,212,29],[198,32,212,30],[199,4,214,2],[199,8,214,6,"heroId"],[199,14,214,12],[199,16,214,14],[200,6,215,4,"params"],[200,12,215,10],[200,13,215,11,"set"],[200,16,215,14],[200,17,215,15],[200,25,215,23],[200,27,215,25,"heroId"],[200,33,215,31],[200,34,215,32],[201,4,216,2],[202,4,218,2],[202,8,218,6,"cleanReturnTo"],[202,21,218,19],[202,23,218,21],[203,6,219,4,"params"],[203,12,219,10],[203,13,219,11,"set"],[203,16,219,14],[203,17,219,15],[203,27,219,25],[203,29,219,27,"cleanReturnTo"],[203,42,219,40],[203,43,219,41],[204,4,220,2],[206,4,222,2],[207,4,223,2],[207,10,223,8,"queryString"],[207,21,223,19],[207,24,223,22,"params"],[207,30,223,28],[207,31,223,29,"toString"],[207,39,223,37],[207,40,223,38],[207,41,223,39],[208,4,224,2],[208,10,224,8,"route"],[208,15,224,13],[208,18,224,16,"queryString"],[208,29,224,27],[208,32,225,6],[208,35,225,9,"PAYWALL_ROUTE"],[208,48,225,22],[208,52,225,26,"queryString"],[208,63,225,37],[208,65,225,39],[208,68,226,6,"PAYWALL_ROUTE"],[208,81,226,19],[209,4,228,2,"router"],[209,15,228,8],[209,16,228,8,"router"],[209,22,228,8],[209,23,228,9,"push"],[209,27,228,13],[209,28,228,14,"route"],[209,33,228,26],[209,34,228,27],[210,2,229,0],[212,2,231,0],[213,0,232,0],[214,0,233,0],[215,0,234,0],[216,0,235,0],[217,0,236,0],[218,2,237,7],[218,11,237,16,"goToStore"],[218,20,237,25,"goToStore"],[218,21,237,26,"source"],[218,27,237,48],[218,29,237,56],[219,4,238,2],[219,10,238,8,"normalizedSource"],[219,26,238,24],[219,29,238,27,"source"],[219,35,238,33],[219,38,238,36,"normalizeSource"],[219,53,238,51],[219,54,238,52,"source"],[219,60,238,58],[219,61,238,59],[219,64,238,62],[219,71,238,69],[220,4,239,2,"dlog"],[220,8,239,6],[220,9,239,7],[220,21,239,19],[220,23,239,21],[221,6,239,23,"source"],[221,12,239,29],[221,14,239,31,"normalizedSource"],[222,4,239,48],[222,5,239,49],[222,6,239,50],[224,4,241,2],[225,4,242,2],[225,8,242,6,"shouldEmitStoreEvent"],[225,28,242,26],[225,29,242,27],[225,30,242,28],[225,32,242,30],[226,6,243,4],[226,10,243,4,"track"],[226,26,243,9],[226,27,243,9,"track"],[226,32,243,9],[226,34,243,10,"Events"],[226,50,243,16],[226,51,243,16,"Events"],[226,57,243,16],[226,58,243,17,"STORE_OPENED"],[226,70,243,29],[226,72,243,31],[227,8,244,6,"source"],[227,14,244,12],[227,16,244,14,"normalizedSource"],[228,6,245,4],[228,7,245,5],[228,8,245,6],[229,4,246,2],[230,4,248,2,"router"],[230,15,248,8],[230,16,248,8,"router"],[230,22,248,8],[230,23,248,9,"push"],[230,27,248,13],[230,28,248,14],[230,31,248,17,"STORE_ROUTE"],[230,42,248,28],[230,53,248,39,"normalizedSource"],[230,69,248,55],[230,71,248,64],[230,72,248,65],[231,2,249,0],[233,2,251,0],[234,0,252,0],[235,0,253,0],[236,2,254,7],[236,11,254,16,"goToPurchaseSuccess"],[236,30,254,35,"goToPurchaseSuccess"],[236,31,254,36,"opts"],[236,35,257,1],[236,37,257,9],[237,4,258,2,"dlog"],[237,8,258,6],[237,9,258,7],[237,31,258,29],[237,33,258,31,"opts"],[237,37,258,35],[237,38,258,36],[239,4,260,2],[240,4,261,2],[240,10,261,8,"cleanReturnTo"],[240,23,261,21],[240,26,261,24,"sanitizeReturnTo"],[240,42,261,40],[240,43,261,41,"opts"],[240,47,261,45],[240,49,261,47,"returnTo"],[240,57,261,55],[240,58,261,56],[242,4,263,2],[243,4,264,2],[244,4,265,2],[244,8,265,6,"cleanReturnTo"],[244,21,265,19],[244,23,265,21],[245,6,266,4,"router"],[245,17,266,10],[245,18,266,10,"router"],[245,24,266,10],[245,25,266,11,"replace"],[245,32,266,18],[245,33,266,19,"cleanReturnTo"],[245,46,266,39],[245,47,266,40],[246,4,267,2],[246,5,267,3],[246,11,267,9],[247,6,268,4,"router"],[247,17,268,10],[247,18,268,10,"router"],[247,24,268,10],[247,25,268,11,"back"],[247,29,268,15],[247,30,268,16],[247,31,268,17],[248,4,269,2],[249,2,270,0],[251,2,272,0],[252,0,273,0],[253,0,274,0],[254,0,275,0],[255,2,276,7],[255,11,276,16,"getPaywallRoute"],[255,26,276,31,"getPaywallRoute"],[255,27,276,31],[255,29,276,42],[256,4,277,2],[256,11,277,9,"PAYWALL_ROUTE"],[256,24,277,22],[257,2,278,0],[259,2,280,0],[260,0,281,0],[261,0,282,0],[262,0,283,0],[263,2,284,7],[263,11,284,16,"getStoreRoute"],[263,24,284,29,"getStoreRoute"],[263,25,284,29],[263,27,284,40],[264,4,285,2],[264,11,285,9,"STORE_ROUTE"],[264,22,285,20],[265,2,286,0],[267,2,288,0],[268,2,289,0],[269,2,290,0],[271,2,292,0],[272,0,293,0],[273,0,294,0],[274,0,295,0],[275,0,296,0],[276,0,297,0],[277,0,298,0],[278,0,299,0],[279,0,300,0],[280,0,301,0],[281,0,302,0],[282,2,303,7],[282,11,303,16,"getSafeReturnTo"],[282,26,303,31,"getSafeReturnTo"],[282,27,303,32,"currentPath"],[282,38,303,52],[282,40,303,62],[283,4,304,2],[284,4,305,2],[284,10,305,8,"cleaned"],[284,17,305,15],[284,20,305,18,"sanitizeReturnTo"],[284,36,305,34],[284,37,305,35,"currentPath"],[284,48,305,46],[284,52,305,50],[284,55,305,53],[284,56,305,54],[286,4,307,2],[287,4,308,2],[287,8,308,6],[287,9,308,7,"cleaned"],[287,16,308,14],[287,18,308,16],[287,25,308,23],[287,28,308,26],[289,4,310,2],[290,4,311,2],[290,10,311,8,"loopRoutes"],[290,20,311,18],[290,23,311,21],[290,24,311,22,"PAYWALL_ROUTE"],[290,37,311,35],[290,39,311,37,"STORE_ROUTE"],[290,50,311,48],[290,52,311,50],[290,68,311,66],[290,70,311,68],[290,78,311,76],[290,79,311,77],[291,4,312,2],[291,8,312,6,"loopRoutes"],[291,18,312,16],[291,19,312,17,"some"],[291,23,312,21],[291,24,312,22,"route"],[291,29,312,27],[291,33,312,31,"cleaned"],[291,40,312,38],[291,45,312,43,"route"],[291,50,312,48],[291,54,312,52,"cleaned"],[291,61,312,59],[291,62,312,60,"startsWith"],[291,72,312,70],[291,73,312,71,"route"],[291,78,312,76],[291,81,312,79],[291,84,312,82],[291,85,312,83],[291,86,312,84],[291,88,312,86],[292,6,313,4],[292,13,313,11],[292,16,313,14],[293,4,314,2],[294,4,316,2],[294,11,316,9,"cleaned"],[294,18,316,16],[295,2,317,0],[297,2,319,0],[298,0,320,0],[299,0,321,0],[300,0,322,0],[301,2,323,7],[301,11,323,16,"useCurrentPath"],[301,25,323,30,"useCurrentPath"],[301,26,323,30],[301,28,323,41],[302,4,324,2],[303,4,325,2],[304,4,326,2],[304,11,326,9],[304,14,326,12],[305,2,327,0],[306,0,327,1],[306,3]],"functionMap":{"names":["<global>","dlog","shouldEmitPaywallEvent","shouldEmitStoreEvent","sanitizeReturnTo","normalizeSource","goToPaywall","goToStore","goToPurchaseSuccess","getPaywallRoute","getStoreRoute","getSafeReturnTo","loopRoutes.some$argument_0","useCurrentPath"],"mappings":"AAA;aCuB,0ED;AES;CFQ;AGE;CHQ;AIqE;CJmB;AKK;CLS;OMsB;CNsD;OOQ;CPY;OQK;CRgB;OSM;CTE;OUM;CVE;OWiB;sBCS,6DD;CXK;OaM;CbI"},"hasCjsExports":false},"type":"js/module"}]}