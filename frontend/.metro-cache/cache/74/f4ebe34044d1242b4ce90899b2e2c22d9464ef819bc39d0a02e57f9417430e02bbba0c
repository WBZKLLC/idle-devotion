{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":13,"index":77},"end":{"line":3,"column":36,"index":100}}],"key":"CPmndeSLDuCg/s3oFguorTUVcN0=","exportNames":["*"],"imports":1}},{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":14,"index":116},"end":{"line":4,"column":38,"index":140}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _asyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\").default;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var core = require(_dependencyMap[1], \"@sentry/core\");\n  var utils = require(_dependencyMap[2], \"@sentry/utils\");\n\n  // 'Store', 'promisifyRequest' and 'createStore' were originally copied from the 'idb-keyval' package before being\n  // modified and simplified: https://github.com/jakearchibald/idb-keyval\n  //\n  // At commit: 0420a704fd6cbb4225429c536b1f61112d012fca\n  // Original licence:\n\n  // Copyright 2016, Jake Archibald\n  //\n  // Licensed under the Apache License, Version 2.0 (the \"License\");\n  // you may not use this file except in compliance with the License.\n  // You may obtain a copy of the License at\n  //\n  //   http://www.apache.org/licenses/LICENSE-2.0\n  //\n  // Unless required by applicable law or agreed to in writing, software\n  // distributed under the License is distributed on an \"AS IS\" BASIS,\n  // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  // See the License for the specific language governing permissions and\n  // limitations under the License.\n\n  function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n      // @ts-expect-error - file size hacks\n      request.oncomplete = request.onsuccess = () => resolve(request.result);\n      // @ts-expect-error - file size hacks\n      request.onabort = request.onerror = () => reject(request.error);\n    });\n  }\n\n  /** Create or open an IndexedDb store */\n  function createStore(dbName, storeName) {\n    var request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    var dbp = promisifyRequest(request);\n    return callback => dbp.then(db => callback(db.transaction(storeName, 'readwrite').objectStore(storeName)));\n  }\n  function keys(store) {\n    return promisifyRequest(store.getAllKeys());\n  }\n\n  /** Insert into the store */\n  function _insert(store, value, maxQueueSize) {\n    return store(store => {\n      return keys(store).then(keys => {\n        if (keys.length >= maxQueueSize) {\n          return;\n        }\n\n        // We insert with an incremented key so that the entries are popped in order\n        store.put(value, Math.max(...keys, 0) + 1);\n        return promisifyRequest(store.transaction);\n      });\n    });\n  }\n\n  /** Pop the oldest value from the store */\n  function _pop(store) {\n    return store(store => {\n      return keys(store).then(keys => {\n        if (keys.length === 0) {\n          return undefined;\n        }\n        return promisifyRequest(store.get(keys[0])).then(value => {\n          store.delete(keys[0]);\n          return promisifyRequest(store.transaction).then(() => value);\n        });\n      });\n    });\n  }\n  function createIndexedDbStore(options) {\n    var store;\n\n    // Lazily create the store only when it's needed\n    function getStore() {\n      if (store == undefined) {\n        store = createStore(options.dbName || 'sentry-offline', options.storeName || 'queue');\n      }\n      return store;\n    }\n    return {\n      insert: function () {\n        var _ref = _asyncToGenerator(function* (env) {\n          try {\n            var serialized = yield utils.serializeEnvelope(env, options.textEncoder);\n            yield _insert(getStore(), serialized, options.maxQueueSize || 30);\n          } catch (_) {\n            //\n          }\n        });\n        return function insert(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      pop: function () {\n        var _ref2 = _asyncToGenerator(function* () {\n          try {\n            var deserialized = yield _pop(getStore());\n            if (deserialized) {\n              return utils.parseEnvelope(deserialized, options.textEncoder || new TextEncoder(), options.textDecoder || new TextDecoder());\n            }\n          } catch (_) {\n            //\n          }\n          return undefined;\n        });\n        return function pop() {\n          return _ref2.apply(this, arguments);\n        };\n      }()\n    };\n  }\n  function makeIndexedDbOfflineTransport(createTransport) {\n    return options => createTransport({\n      ...options,\n      createStore: createIndexedDbStore\n    });\n  }\n\n  /**\n   * Creates a transport that uses IndexedDb to store events when offline.\n   */\n  function makeBrowserOfflineTransport(createTransport) {\n    return makeIndexedDbOfflineTransport(core.makeOfflineTransport(createTransport));\n  }\n  exports.createStore = createStore;\n  exports.insert = _insert;\n  exports.makeBrowserOfflineTransport = makeBrowserOfflineTransport;\n  exports.pop = _pop;\n});","lineCount":137,"map":[[3,2,1,0,"Object"],[3,8,1,6],[3,9,1,7,"defineProperty"],[3,23,1,21],[3,24,1,22,"exports"],[3,31,1,29],[3,33,1,31],[3,45,1,43],[3,47,1,45],[4,4,1,47,"value"],[4,9,1,52],[4,11,1,54],[5,2,1,59],[5,3,1,60],[5,4,1,61],[6,2,3,0],[6,6,3,6,"core"],[6,10,3,10],[6,13,3,13,"require"],[6,20,3,20],[6,21,3,20,"_dependencyMap"],[6,35,3,20],[6,54,3,35],[6,55,3,36],[7,2,4,0],[7,6,4,6,"utils"],[7,11,4,11],[7,14,4,14,"require"],[7,21,4,21],[7,22,4,21,"_dependencyMap"],[7,36,4,21],[7,56,4,37],[7,57,4,38],[9,2,6,0],[10,2,7,0],[11,2,8,0],[12,2,9,0],[13,2,10,0],[15,2,12,0],[16,2,13,0],[17,2,14,0],[18,2,15,0],[19,2,16,0],[20,2,17,0],[21,2,18,0],[22,2,19,0],[23,2,20,0],[24,2,21,0],[25,2,22,0],[26,2,23,0],[27,2,24,0],[29,2,26,0],[29,11,26,9,"promisifyRequest"],[29,27,26,25,"promisifyRequest"],[29,28,26,26,"request"],[29,35,26,33],[29,37,26,35],[30,4,27,2],[30,11,27,9],[30,15,27,13,"Promise"],[30,22,27,20],[30,23,27,21],[30,24,27,22,"resolve"],[30,31,27,29],[30,33,27,31,"reject"],[30,39,27,37],[30,44,27,42],[31,6,28,4],[32,6,29,4,"request"],[32,13,29,11],[32,14,29,12,"oncomplete"],[32,24,29,22],[32,27,29,25,"request"],[32,34,29,32],[32,35,29,33,"onsuccess"],[32,44,29,42],[32,47,29,45],[32,53,29,51,"resolve"],[32,60,29,58],[32,61,29,59,"request"],[32,68,29,66],[32,69,29,67,"result"],[32,75,29,73],[32,76,29,74],[33,6,30,4],[34,6,31,4,"request"],[34,13,31,11],[34,14,31,12,"onabort"],[34,21,31,19],[34,24,31,22,"request"],[34,31,31,29],[34,32,31,30,"onerror"],[34,39,31,37],[34,42,31,40],[34,48,31,46,"reject"],[34,54,31,52],[34,55,31,53,"request"],[34,62,31,60],[34,63,31,61,"error"],[34,68,31,66],[34,69,31,67],[35,4,32,2],[35,5,32,3],[35,6,32,4],[36,2,33,0],[38,2,35,0],[39,2,36,0],[39,11,36,9,"createStore"],[39,22,36,20,"createStore"],[39,23,36,21,"dbName"],[39,29,36,27],[39,31,36,29,"storeName"],[39,40,36,38],[39,42,36,40],[40,4,37,2],[40,8,37,8,"request"],[40,15,37,15],[40,18,37,18,"indexedDB"],[40,27,37,27],[40,28,37,28,"open"],[40,32,37,32],[40,33,37,33,"dbName"],[40,39,37,39],[40,40,37,40],[41,4,38,2,"request"],[41,11,38,9],[41,12,38,10,"onupgradeneeded"],[41,27,38,25],[41,30,38,28],[41,36,38,34,"request"],[41,43,38,41],[41,44,38,42,"result"],[41,50,38,48],[41,51,38,49,"createObjectStore"],[41,68,38,66],[41,69,38,67,"storeName"],[41,78,38,76],[41,79,38,77],[42,4,39,2],[42,8,39,8,"dbp"],[42,11,39,11],[42,14,39,14,"promisifyRequest"],[42,30,39,30],[42,31,39,31,"request"],[42,38,39,38],[42,39,39,39],[43,4,41,2],[43,11,41,9,"callback"],[43,19,41,17],[43,23,41,21,"dbp"],[43,26,41,24],[43,27,41,25,"then"],[43,31,41,29],[43,32,41,30,"db"],[43,34,41,32],[43,38,41,36,"callback"],[43,46,41,44],[43,47,41,45,"db"],[43,49,41,47],[43,50,41,48,"transaction"],[43,61,41,59],[43,62,41,60,"storeName"],[43,71,41,69],[43,73,41,71],[43,84,41,82],[43,85,41,83],[43,86,41,84,"objectStore"],[43,97,41,95],[43,98,41,96,"storeName"],[43,107,41,105],[43,108,41,106],[43,109,41,107],[43,110,41,108],[44,2,42,0],[45,2,44,0],[45,11,44,9,"keys"],[45,15,44,13,"keys"],[45,16,44,14,"store"],[45,21,44,19],[45,23,44,21],[46,4,45,2],[46,11,45,9,"promisifyRequest"],[46,27,45,25],[46,28,45,26,"store"],[46,33,45,31],[46,34,45,32,"getAllKeys"],[46,44,45,42],[46,45,45,43],[46,46,45,45],[46,47,45,46],[47,2,46,0],[49,2,48,0],[50,2,49,0],[50,11,49,9,"insert"],[50,18,49,15,"insert"],[50,19,49,16,"store"],[50,24,49,21],[50,26,49,23,"value"],[50,31,49,28],[50,33,49,30,"maxQueueSize"],[50,45,49,42],[50,47,49,44],[51,4,50,2],[51,11,50,9,"store"],[51,16,50,14],[51,17,50,15,"store"],[51,22,50,20],[51,26,50,24],[52,6,51,4],[52,13,51,11,"keys"],[52,17,51,15],[52,18,51,16,"store"],[52,23,51,21],[52,24,51,22],[52,25,51,23,"then"],[52,29,51,27],[52,30,51,28,"keys"],[52,34,51,32],[52,38,51,36],[53,8,52,6],[53,12,52,10,"keys"],[53,16,52,14],[53,17,52,15,"length"],[53,23,52,21],[53,27,52,25,"maxQueueSize"],[53,39,52,37],[53,41,52,39],[54,10,53,8],[55,8,54,6],[57,8,56,6],[58,8,57,6,"store"],[58,13,57,11],[58,14,57,12,"put"],[58,17,57,15],[58,18,57,16,"value"],[58,23,57,21],[58,25,57,23,"Math"],[58,29,57,27],[58,30,57,28,"max"],[58,33,57,31],[58,34,57,32],[58,37,57,35,"keys"],[58,41,57,39],[58,43,57,41],[58,44,57,42],[58,45,57,43],[58,48,57,46],[58,49,57,47],[58,50,57,48],[59,8,58,6],[59,15,58,13,"promisifyRequest"],[59,31,58,29],[59,32,58,30,"store"],[59,37,58,35],[59,38,58,36,"transaction"],[59,49,58,47],[59,50,58,48],[60,6,59,4],[60,7,59,5],[60,8,59,6],[61,4,60,2],[61,5,60,3],[61,6,60,4],[62,2,61,0],[64,2,63,0],[65,2,64,0],[65,11,64,9,"pop"],[65,15,64,12,"pop"],[65,16,64,13,"store"],[65,21,64,18],[65,23,64,20],[66,4,65,2],[66,11,65,9,"store"],[66,16,65,14],[66,17,65,15,"store"],[66,22,65,20],[66,26,65,24],[67,6,66,4],[67,13,66,11,"keys"],[67,17,66,15],[67,18,66,16,"store"],[67,23,66,21],[67,24,66,22],[67,25,66,23,"then"],[67,29,66,27],[67,30,66,28,"keys"],[67,34,66,32],[67,38,66,36],[68,8,67,6],[68,12,67,10,"keys"],[68,16,67,14],[68,17,67,15,"length"],[68,23,67,21],[68,28,67,26],[68,29,67,27],[68,31,67,29],[69,10,68,8],[69,17,68,15,"undefined"],[69,26,68,24],[70,8,69,6],[71,8,71,6],[71,15,71,13,"promisifyRequest"],[71,31,71,29],[71,32,71,30,"store"],[71,37,71,35],[71,38,71,36,"get"],[71,41,71,39],[71,42,71,40,"keys"],[71,46,71,44],[71,47,71,45],[71,48,71,46],[71,49,71,47],[71,50,71,48],[71,51,71,49],[71,52,71,50,"then"],[71,56,71,54],[71,57,71,55,"value"],[71,62,71,60],[71,66,71,64],[72,10,72,8,"store"],[72,15,72,13],[72,16,72,14,"delete"],[72,22,72,20],[72,23,72,21,"keys"],[72,27,72,25],[72,28,72,26],[72,29,72,27],[72,30,72,28],[72,31,72,29],[73,10,73,8],[73,17,73,15,"promisifyRequest"],[73,33,73,31],[73,34,73,32,"store"],[73,39,73,37],[73,40,73,38,"transaction"],[73,51,73,49],[73,52,73,50],[73,53,73,51,"then"],[73,57,73,55],[73,58,73,56],[73,64,73,62,"value"],[73,69,73,67],[73,70,73,68],[74,8,74,6],[74,9,74,7],[74,10,74,8],[75,6,75,4],[75,7,75,5],[75,8,75,6],[76,4,76,2],[76,5,76,3],[76,6,76,4],[77,2,77,0],[78,2,79,0],[78,11,79,9,"createIndexedDbStore"],[78,31,79,29,"createIndexedDbStore"],[78,32,79,30,"options"],[78,39,79,37],[78,41,79,39],[79,4,80,2],[79,8,80,6,"store"],[79,13,80,11],[81,4,82,2],[82,4,83,2],[82,13,83,11,"getStore"],[82,21,83,19,"getStore"],[82,22,83,19],[82,24,83,22],[83,6,84,4],[83,10,84,8,"store"],[83,15,84,13],[83,19,84,17,"undefined"],[83,28,84,26],[83,30,84,28],[84,8,85,6,"store"],[84,13,85,11],[84,16,85,14,"createStore"],[84,27,85,25],[84,28,85,26,"options"],[84,35,85,33],[84,36,85,34,"dbName"],[84,42,85,40],[84,46,85,44],[84,62,85,60],[84,64,85,62,"options"],[84,71,85,69],[84,72,85,70,"storeName"],[84,81,85,79],[84,85,85,83],[84,92,85,90],[84,93,85,91],[85,6,86,4],[86,6,88,4],[86,13,88,11,"store"],[86,18,88,16],[87,4,89,2],[88,4,91,2],[88,11,91,9],[89,6,92,4,"insert"],[89,12,92,10],[90,8,92,10],[90,12,92,10,"_ref"],[90,16,92,10],[90,19,92,10,"_asyncToGenerator"],[90,36,92,10],[90,37,92,12],[90,48,92,19,"env"],[90,51,92,22],[90,53,92,27],[91,10,93,6],[91,14,93,10],[92,12,94,8],[92,16,94,14,"serialized"],[92,26,94,24],[92,35,94,33,"utils"],[92,40,94,38],[92,41,94,39,"serializeEnvelope"],[92,58,94,56],[92,59,94,57,"env"],[92,62,94,60],[92,64,94,62,"options"],[92,71,94,69],[92,72,94,70,"textEncoder"],[92,83,94,81],[92,84,94,82],[93,12,95,8],[93,18,95,14,"insert"],[93,25,95,20],[93,26,95,21,"getStore"],[93,34,95,29],[93,35,95,30],[93,36,95,31],[93,38,95,33,"serialized"],[93,48,95,43],[93,50,95,45,"options"],[93,57,95,52],[93,58,95,53,"maxQueueSize"],[93,70,95,65],[93,74,95,69],[93,76,95,71],[93,77,95,72],[94,10,96,6],[94,11,96,7],[94,12,96,8],[94,19,96,15,"_"],[94,20,96,16],[94,22,96,18],[95,12,97,8],[96,10,97,8],[97,8,99,4],[97,9,99,5],[98,8,99,5],[98,24,92,4,"insert"],[98,30,92,10,"insert"],[98,31,92,10,"_x"],[98,33,92,10],[99,10,92,10],[99,17,92,10,"_ref"],[99,21,92,10],[99,22,92,10,"apply"],[99,27,92,10],[99,34,92,10,"arguments"],[99,43,92,10],[100,8,92,10],[101,6,92,10],[101,9,99,5],[102,6,100,4,"pop"],[102,9,100,7],[103,8,100,7],[103,12,100,7,"_ref2"],[103,17,100,7],[103,20,100,7,"_asyncToGenerator"],[103,37,100,7],[103,38,100,9],[103,51,100,21],[104,10,101,6],[104,14,101,10],[105,12,102,8],[105,16,102,14,"deserialized"],[105,28,102,26],[105,37,102,35,"pop"],[105,41,102,38],[105,42,102,39,"getStore"],[105,50,102,47],[105,51,102,48],[105,52,102,49],[105,53,102,50],[106,12,103,8],[106,16,103,12,"deserialized"],[106,28,103,24],[106,30,103,26],[107,14,104,10],[107,21,104,17,"utils"],[107,26,104,22],[107,27,104,23,"parseEnvelope"],[107,40,104,36],[107,41,105,12,"deserialized"],[107,53,105,24],[107,55,106,12,"options"],[107,62,106,19],[107,63,106,20,"textEncoder"],[107,74,106,31],[107,78,106,35],[107,82,106,39,"TextEncoder"],[107,93,106,50],[107,94,106,51],[107,95,106,52],[107,97,107,12,"options"],[107,104,107,19],[107,105,107,20,"textDecoder"],[107,116,107,31],[107,120,107,35],[107,124,107,39,"TextDecoder"],[107,135,107,50],[107,136,107,51],[107,137,108,10],[107,138,108,11],[108,12,109,8],[109,10,110,6],[109,11,110,7],[109,12,110,8],[109,19,110,15,"_"],[109,20,110,16],[109,22,110,18],[110,12,111,8],[111,10,111,8],[112,10,114,6],[112,17,114,13,"undefined"],[112,26,114,22],[113,8,115,4],[113,9,115,5],[114,8,115,5],[114,24,100,4,"pop"],[114,27,100,7,"pop"],[114,28,100,7],[115,10,100,7],[115,17,100,7,"_ref2"],[115,22,100,7],[115,23,100,7,"apply"],[115,28,100,7],[115,35,100,7,"arguments"],[115,44,100,7],[116,8,100,7],[117,6,100,7],[118,4,116,2],[118,5,116,3],[119,2,117,0],[120,2,119,0],[120,11,119,9,"makeIndexedDbOfflineTransport"],[120,40,119,38,"makeIndexedDbOfflineTransport"],[120,41,120,2,"createTransport"],[120,56,120,17],[120,58,121,2],[121,4,122,2],[121,11,122,9,"options"],[121,18,122,16],[121,22,122,20,"createTransport"],[121,37,122,35],[121,38,122,36],[122,6,122,38],[122,9,122,41,"options"],[122,16,122,48],[123,6,122,50,"createStore"],[123,17,122,61],[123,19,122,63,"createIndexedDbStore"],[124,4,122,84],[124,5,122,85],[124,6,122,86],[125,2,123,0],[127,2,125,0],[128,0,126,0],[129,0,127,0],[130,2,128,0],[130,11,128,9,"makeBrowserOfflineTransport"],[130,38,128,36,"makeBrowserOfflineTransport"],[130,39,129,2,"createTransport"],[130,54,129,17],[130,56,130,2],[131,4,131,2],[131,11,131,9,"makeIndexedDbOfflineTransport"],[131,40,131,38],[131,41,131,39,"core"],[131,45,131,43],[131,46,131,44,"makeOfflineTransport"],[131,66,131,64],[131,67,131,65,"createTransport"],[131,82,131,80],[131,83,131,81],[131,84,131,82],[132,2,132,0],[133,2,134,0,"exports"],[133,9,134,7],[133,10,134,8,"createStore"],[133,21,134,19],[133,24,134,22,"createStore"],[133,35,134,33],[134,2,135,0,"exports"],[134,9,135,7],[134,10,135,8,"insert"],[134,16,135,14],[134,19,135,17,"insert"],[134,26,135,23],[135,2,136,0,"exports"],[135,9,136,7],[135,10,136,8,"makeBrowserOfflineTransport"],[135,37,136,35],[135,40,136,38,"makeBrowserOfflineTransport"],[135,67,136,65],[136,2,137,0,"exports"],[136,9,137,7],[136,10,137,8,"pop"],[136,13,137,11],[136,16,137,14,"pop"],[136,20,137,17],[137,0,137,18],[137,3]],"functionMap":{"names":["<global>","promisifyRequest","Promise$argument_0","request.onsuccess","request.onerror","createStore","request.onupgradeneeded","<anonymous>","dbp.then$argument_0","keys","insert","store$argument_0","keys.then$argument_0","pop","promisifyRequest.then$argument_0","createIndexedDbStore","getStore","makeIndexedDbOfflineTransport","makeBrowserOfflineTransport"],"mappings":"AAA;ACyB;qBCC;6CCE,6BD;wCEE,2BF;GDC;CDC;AKG;4BCE,iDD;SEG,qBC,6ED,CF;CLC;ASE;CTE;AUG;eCC;4BCC;KDQ;GDC;CVC;AaG;eFC;4BCC;uDEK;OFG;KDC;GEC;CbC;AeE;ECI;GDM;YLG;KKO;SFC;KEe;CfE;AiBE;SVG,6EU;CjBC;AkBK;ClBI"},"hasCjsExports":true},"type":"js/module"}]}