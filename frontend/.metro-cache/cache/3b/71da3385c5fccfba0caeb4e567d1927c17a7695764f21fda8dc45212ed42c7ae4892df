{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":14,"index":78},"end":{"line":3,"column":38,"index":102}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var utils = require(_dependencyMap[0], \"@sentry/utils\");\n\n  /** Keys are source filename/url, values are metadata objects. */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  var filenameMetadataMap = new Map();\n  /** Set of stack strings that have already been parsed. */\n  var parsedStacks = new Set();\n  function ensureMetadataStacksAreParsed(parser) {\n    if (!utils.GLOBAL_OBJ._sentryModuleMetadata) {\n      return;\n    }\n    for (var stack of Object.keys(utils.GLOBAL_OBJ._sentryModuleMetadata)) {\n      var metadata = utils.GLOBAL_OBJ._sentryModuleMetadata[stack];\n      if (parsedStacks.has(stack)) {\n        continue;\n      }\n\n      // Ensure this stack doesn't get parsed again\n      parsedStacks.add(stack);\n      var frames = parser(stack);\n\n      // Go through the frames starting from the top of the stack and find the first one with a filename\n      for (var frame of frames.reverse()) {\n        if (frame.filename) {\n          // Save the metadata for this filename\n          filenameMetadataMap.set(frame.filename, metadata);\n          break;\n        }\n      }\n    }\n  }\n\n  /**\n   * Retrieve metadata for a specific JavaScript file URL.\n   *\n   * Metadata is injected by the Sentry bundler plugins using the `_experiments.moduleMetadata` config option.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  function getMetadataForUrl(parser, filename) {\n    ensureMetadataStacksAreParsed(parser);\n    return filenameMetadataMap.get(filename);\n  }\n\n  /**\n   * Adds metadata to stack frames.\n   *\n   * Metadata is injected by the Sentry bundler plugins using the `_experiments.moduleMetadata` config option.\n   */\n  function addMetadataToStackFrames(parser, event) {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      event.exception.values.forEach(exception => {\n        if (!exception.stacktrace) {\n          return;\n        }\n        for (var frame of exception.stacktrace.frames || []) {\n          if (!frame.filename) {\n            continue;\n          }\n          var metadata = getMetadataForUrl(parser, frame.filename);\n          if (metadata) {\n            frame.module_metadata = metadata;\n          }\n        }\n      });\n    } catch (_) {\n      // To save bundle size we're just try catching here instead of checking for the existence of all the different objects.\n    }\n  }\n\n  /**\n   * Strips metadata from stack frames.\n   */\n  function stripMetadataFromStackFrames(event) {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      event.exception.values.forEach(exception => {\n        if (!exception.stacktrace) {\n          return;\n        }\n        for (var frame of exception.stacktrace.frames || []) {\n          delete frame.module_metadata;\n        }\n      });\n    } catch (_) {\n      // To save bundle size we're just try catching here instead of checking for the existence of all the different objects.\n    }\n  }\n  exports.addMetadataToStackFrames = addMetadataToStackFrames;\n  exports.getMetadataForUrl = getMetadataForUrl;\n  exports.stripMetadataFromStackFrames = stripMetadataFromStackFrames;\n});","lineCount":96,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,6,3,6,"utils"],[5,11,3,11],[5,14,3,14,"require"],[5,21,3,21],[5,22,3,21,"_dependencyMap"],[5,36,3,21],[5,56,3,37],[5,57,3,38],[7,2,5,0],[8,2,6,0],[9,2,7,0],[9,6,7,6,"filenameMetadataMap"],[9,25,7,25],[9,28,7,28],[9,32,7,32,"Map"],[9,35,7,35],[9,36,7,36],[9,37,7,37],[10,2,8,0],[11,2,9,0],[11,6,9,6,"parsedStacks"],[11,18,9,18],[11,21,9,21],[11,25,9,25,"Set"],[11,28,9,28],[11,29,9,29],[11,30,9,30],[12,2,11,0],[12,11,11,9,"ensureMetadataStacksAreParsed"],[12,40,11,38,"ensureMetadataStacksAreParsed"],[12,41,11,39,"parser"],[12,47,11,45],[12,49,11,47],[13,4,12,2],[13,8,12,6],[13,9,12,7,"utils"],[13,14,12,12],[13,15,12,13,"GLOBAL_OBJ"],[13,25,12,23],[13,26,12,24,"_sentryModuleMetadata"],[13,47,12,45],[13,49,12,47],[14,6,13,4],[15,4,14,2],[16,4,16,2],[16,9,16,7],[16,13,16,13,"stack"],[16,18,16,18],[16,22,16,22,"Object"],[16,28,16,28],[16,29,16,29,"keys"],[16,33,16,33],[16,34,16,34,"utils"],[16,39,16,39],[16,40,16,40,"GLOBAL_OBJ"],[16,50,16,50],[16,51,16,51,"_sentryModuleMetadata"],[16,72,16,72],[16,73,16,73],[16,75,16,75],[17,6,17,4],[17,10,17,10,"metadata"],[17,18,17,18],[17,21,17,21,"utils"],[17,26,17,26],[17,27,17,27,"GLOBAL_OBJ"],[17,37,17,37],[17,38,17,38,"_sentryModuleMetadata"],[17,59,17,59],[17,60,17,60,"stack"],[17,65,17,65],[17,66,17,66],[18,6,19,4],[18,10,19,8,"parsedStacks"],[18,22,19,20],[18,23,19,21,"has"],[18,26,19,24],[18,27,19,25,"stack"],[18,32,19,30],[18,33,19,31],[18,35,19,33],[19,8,20,6],[20,6,21,4],[22,6,23,4],[23,6,24,4,"parsedStacks"],[23,18,24,16],[23,19,24,17,"add"],[23,22,24,20],[23,23,24,21,"stack"],[23,28,24,26],[23,29,24,27],[24,6,26,4],[24,10,26,10,"frames"],[24,16,26,16],[24,19,26,19,"parser"],[24,25,26,25],[24,26,26,26,"stack"],[24,31,26,31],[24,32,26,32],[26,6,28,4],[27,6,29,4],[27,11,29,9],[27,15,29,15,"frame"],[27,20,29,20],[27,24,29,24,"frames"],[27,30,29,30],[27,31,29,31,"reverse"],[27,38,29,38],[27,39,29,39],[27,40,29,40],[27,42,29,42],[28,8,30,6],[28,12,30,10,"frame"],[28,17,30,15],[28,18,30,16,"filename"],[28,26,30,24],[28,28,30,26],[29,10,31,8],[30,10,32,8,"filenameMetadataMap"],[30,29,32,27],[30,30,32,28,"set"],[30,33,32,31],[30,34,32,32,"frame"],[30,39,32,37],[30,40,32,38,"filename"],[30,48,32,46],[30,50,32,48,"metadata"],[30,58,32,56],[30,59,32,57],[31,10,33,8],[32,8,34,6],[33,6,35,4],[34,4,36,2],[35,2,37,0],[37,2,39,0],[38,0,40,0],[39,0,41,0],[40,0,42,0],[41,0,43,0],[42,2,44,0],[43,2,45,0],[43,11,45,9,"getMetadataForUrl"],[43,28,45,26,"getMetadataForUrl"],[43,29,45,27,"parser"],[43,35,45,33],[43,37,45,35,"filename"],[43,45,45,43],[43,47,45,45],[44,4,46,2,"ensureMetadataStacksAreParsed"],[44,33,46,31],[44,34,46,32,"parser"],[44,40,46,38],[44,41,46,39],[45,4,47,2],[45,11,47,9,"filenameMetadataMap"],[45,30,47,28],[45,31,47,29,"get"],[45,34,47,32],[45,35,47,33,"filename"],[45,43,47,41],[45,44,47,42],[46,2,48,0],[48,2,50,0],[49,0,51,0],[50,0,52,0],[51,0,53,0],[52,0,54,0],[53,2,55,0],[53,11,55,9,"addMetadataToStackFrames"],[53,35,55,33,"addMetadataToStackFrames"],[53,36,55,34,"parser"],[53,42,55,40],[53,44,55,42,"event"],[53,49,55,47],[53,51,55,49],[54,4,56,2],[54,8,56,6],[55,6,57,4],[56,6,58,4,"event"],[56,11,58,9],[56,12,58,10,"exception"],[56,21,58,19],[56,22,58,20,"values"],[56,28,58,26],[56,29,58,27,"forEach"],[56,36,58,34],[56,37,58,35,"exception"],[56,46,58,44],[56,50,58,48],[57,8,59,6],[57,12,59,10],[57,13,59,11,"exception"],[57,22,59,20],[57,23,59,21,"stacktrace"],[57,33,59,31],[57,35,59,33],[58,10,60,8],[59,8,61,6],[60,8,63,6],[60,13,63,11],[60,17,63,17,"frame"],[60,22,63,22],[60,26,63,26,"exception"],[60,35,63,35],[60,36,63,36,"stacktrace"],[60,46,63,46],[60,47,63,47,"frames"],[60,53,63,53],[60,57,63,57],[60,59,63,59],[60,61,63,61],[61,10,64,8],[61,14,64,12],[61,15,64,13,"frame"],[61,20,64,18],[61,21,64,19,"filename"],[61,29,64,27],[61,31,64,29],[62,12,65,10],[63,10,66,8],[64,10,68,8],[64,14,68,14,"metadata"],[64,22,68,22],[64,25,68,25,"getMetadataForUrl"],[64,42,68,42],[64,43,68,43,"parser"],[64,49,68,49],[64,51,68,51,"frame"],[64,56,68,56],[64,57,68,57,"filename"],[64,65,68,65],[64,66,68,66],[65,10,70,8],[65,14,70,12,"metadata"],[65,22,70,20],[65,24,70,22],[66,12,71,10,"frame"],[66,17,71,15],[66,18,71,16,"module_metadata"],[66,33,71,31],[66,36,71,34,"metadata"],[66,44,71,42],[67,10,72,8],[68,8,73,6],[69,6,74,4],[69,7,74,5],[69,8,74,6],[70,4,75,2],[70,5,75,3],[70,6,75,4],[70,13,75,11,"_"],[70,14,75,12],[70,16,75,14],[71,6,76,4],[72,4,76,4],[73,2,78,0],[75,2,80,0],[76,0,81,0],[77,0,82,0],[78,2,83,0],[78,11,83,9,"stripMetadataFromStackFrames"],[78,39,83,37,"stripMetadataFromStackFrames"],[78,40,83,38,"event"],[78,45,83,43],[78,47,83,45],[79,4,84,2],[79,8,84,6],[80,6,85,4],[81,6,86,4,"event"],[81,11,86,9],[81,12,86,10,"exception"],[81,21,86,19],[81,22,86,20,"values"],[81,28,86,26],[81,29,86,27,"forEach"],[81,36,86,34],[81,37,86,35,"exception"],[81,46,86,44],[81,50,86,48],[82,8,87,6],[82,12,87,10],[82,13,87,11,"exception"],[82,22,87,20],[82,23,87,21,"stacktrace"],[82,33,87,31],[82,35,87,33],[83,10,88,8],[84,8,89,6],[85,8,91,6],[85,13,91,11],[85,17,91,17,"frame"],[85,22,91,22],[85,26,91,26,"exception"],[85,35,91,35],[85,36,91,36,"stacktrace"],[85,46,91,46],[85,47,91,47,"frames"],[85,53,91,53],[85,57,91,57],[85,59,91,59],[85,61,91,61],[86,10,92,8],[86,17,92,15,"frame"],[86,22,92,20],[86,23,92,21,"module_metadata"],[86,38,92,36],[87,8,93,6],[88,6,94,4],[88,7,94,5],[88,8,94,6],[89,4,95,2],[89,5,95,3],[89,6,95,4],[89,13,95,11,"_"],[89,14,95,12],[89,16,95,14],[90,6,96,4],[91,4,96,4],[92,2,98,0],[93,2,100,0,"exports"],[93,9,100,7],[93,10,100,8,"addMetadataToStackFrames"],[93,34,100,32],[93,37,100,35,"addMetadataToStackFrames"],[93,61,100,59],[94,2,101,0,"exports"],[94,9,101,7],[94,10,101,8,"getMetadataForUrl"],[94,27,101,25],[94,30,101,28,"getMetadataForUrl"],[94,47,101,45],[95,2,102,0,"exports"],[95,9,102,7],[95,10,102,8,"stripMetadataFromStackFrames"],[95,38,102,36],[95,41,102,39,"stripMetadataFromStackFrames"],[95,69,102,67],[96,0,102,68],[96,3]],"functionMap":{"names":["<global>","ensureMetadataStacksAreParsed","getMetadataForUrl","addMetadataToStackFrames","event.exception.values.forEach$argument_0","stripMetadataFromStackFrames"],"mappings":"AAA;ACU;CD0B;AEQ;CFG;AGO;mCCG;KDgB;CHI;AKK;mCDG;KCQ;CLI"},"hasCjsExports":true},"type":"js/module"}]}