{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":16,"index":80},"end":{"line":3,"column":40,"index":104}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}},{"name":"./hubextensions.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":22,"index":128},"end":{"line":4,"column":51,"index":157}}],"key":"7HjDwovq+/jLcBJGE1VlN+5bInU=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":14,"index":173},"end":{"line":5,"column":35,"index":194}}],"key":"v6h+l9IeOWbEcXdtKQqd2f4now4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _classCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\").default;\n  var _createClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\").default;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var utils$1 = require(_dependencyMap[2], \"@sentry/utils\");\n  var hubextensions = require(_dependencyMap[3], \"./hubextensions.js\");\n  var utils = require(_dependencyMap[4], \"./utils.js\");\n\n  /**\n   * Browser profiling integration. Stores any event that has contexts[\"profile\"][\"profile_id\"]\n   * This exists because we do not want to await async profiler.stop calls as transaction.finish is called\n   * in a synchronous context. Instead, we handle sending the profile async from the promise callback and\n   * rely on being able to pull the event from the cache when we need to construct the envelope. This makes the\n   * integration less reliable as we might be dropping profiles when the cache is full.\n   *\n   * @experimental\n   */\n  var BrowserProfilingIntegration = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function BrowserProfilingIntegration() {\n      _classCallCheck(this, BrowserProfilingIntegration);\n      this.name = BrowserProfilingIntegration.id;\n    }\n\n    /**\n     * @inheritDoc\n     */\n    return _createClass(BrowserProfilingIntegration, [{\n      key: \"setupOnce\",\n      value: function setupOnce(_addGlobalEventProcessor, getCurrentHub) {\n        this.getCurrentHub = getCurrentHub;\n        var hub = this.getCurrentHub();\n        var client = hub.getClient();\n        var scope = hub.getScope();\n        var transaction = scope.getTransaction();\n        if (transaction && utils.isAutomatedPageLoadTransaction(transaction)) {\n          if (utils.shouldProfileTransaction(transaction)) {\n            hubextensions.startProfileForTransaction(transaction);\n          }\n        }\n        if (client && typeof client.on === 'function') {\n          client.on('startTransaction', transaction => {\n            if (utils.shouldProfileTransaction(transaction)) {\n              hubextensions.startProfileForTransaction(transaction);\n            }\n          });\n          client.on('beforeEnvelope', envelope => {\n            // if not profiles are in queue, there is nothing to add to the envelope.\n            if (!utils.getActiveProfilesCount()) {\n              return;\n            }\n            var profiledTransactionEvents = utils.findProfiledTransactionsFromEnvelope(envelope);\n            if (!profiledTransactionEvents.length) {\n              return;\n            }\n            var profilesToAddToEnvelope = [];\n            for (var profiledTransaction of profiledTransactionEvents) {\n              var context = profiledTransaction && profiledTransaction.contexts;\n              var profile_id = context && context['profile'] && context['profile']['profile_id'];\n              var start_timestamp = context && context['profile'] && context['profile']['start_timestamp'];\n              if (typeof profile_id !== 'string') {\n                (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils$1.logger.log('[Profiling] cannot find profile for a transaction without a profile context');\n                continue;\n              }\n              if (!profile_id) {\n                (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils$1.logger.log('[Profiling] cannot find profile for a transaction without a profile context');\n                continue;\n              }\n\n              // Remove the profile from the transaction context before sending, relay will take care of the rest.\n              if (context && context['profile']) {\n                delete context.profile;\n              }\n              var profile = utils.takeProfileFromGlobalCache(profile_id);\n              if (!profile) {\n                (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils$1.logger.log(`[Profiling] Could not retrieve profile for transaction: ${profile_id}`);\n                continue;\n              }\n              var profileEvent = utils.createProfilingEvent(profile_id, start_timestamp, profile, profiledTransaction);\n              if (profileEvent) {\n                profilesToAddToEnvelope.push(profileEvent);\n              }\n            }\n            utils.addProfilesToEnvelope(envelope, profilesToAddToEnvelope);\n          });\n        } else {\n          utils$1.logger.warn('[Profiling] Client does not support hooks, profiling will be disabled');\n        }\n      }\n    }], [{\n      key: \"__initStatic\",\n      value: function __initStatic() {\n        this.id = 'BrowserProfilingIntegration';\n      }\n    }]);\n  }();\n  BrowserProfilingIntegration.__initStatic();\n  exports.BrowserProfilingIntegration = BrowserProfilingIntegration;\n});","lineCount":102,"map":[[4,2,1,0,"Object"],[4,8,1,6],[4,9,1,7,"defineProperty"],[4,23,1,21],[4,24,1,22,"exports"],[4,31,1,29],[4,33,1,31],[4,45,1,43],[4,47,1,45],[5,4,1,47,"value"],[5,9,1,52],[5,11,1,54],[6,2,1,59],[6,3,1,60],[6,4,1,61],[7,2,3,0],[7,6,3,6,"utils$1"],[7,13,3,13],[7,16,3,16,"require"],[7,23,3,23],[7,24,3,23,"_dependencyMap"],[7,38,3,23],[7,58,3,39],[7,59,3,40],[8,2,4,0],[8,6,4,6,"hubextensions"],[8,19,4,19],[8,22,4,22,"require"],[8,29,4,29],[8,30,4,29,"_dependencyMap"],[8,44,4,29],[8,69,4,50],[8,70,4,51],[9,2,5,0],[9,6,5,6,"utils"],[9,11,5,11],[9,14,5,14,"require"],[9,21,5,21],[9,22,5,21,"_dependencyMap"],[9,36,5,21],[9,53,5,34],[9,54,5,35],[11,2,7,0],[12,0,8,0],[13,0,9,0],[14,0,10,0],[15,0,11,0],[16,0,12,0],[17,0,13,0],[18,0,14,0],[19,0,15,0],[20,2,7,0],[20,6,16,6,"BrowserProfilingIntegration"],[20,33,16,33],[21,4,16,33],[23,4,19,3],[23,13,19,3,"BrowserProfilingIntegration"],[23,41,19,3],[23,43,19,17],[24,6,19,17,"_classCallCheck"],[24,21,19,17],[24,28,19,17,"BrowserProfilingIntegration"],[24,55,19,17],[25,6,20,4],[25,10,20,8],[25,11,20,9,"name"],[25,15,20,13],[25,18,20,16,"BrowserProfilingIntegration"],[25,45,20,43],[25,46,20,44,"id"],[25,48,20,46],[26,4,21,2],[28,4,23,2],[29,0,24,0],[30,0,25,0],[31,4,23,2],[31,11,23,2,"_createClass"],[31,23,23,2],[31,24,23,2,"BrowserProfilingIntegration"],[31,51,23,2],[32,6,23,2,"key"],[32,9,23,2],[33,6,23,2,"value"],[33,11,23,2],[33,13,26,3],[33,22,26,3,"setupOnce"],[33,31,26,12,"setupOnce"],[33,32,26,13,"_addGlobalEventProcessor"],[33,56,26,37],[33,58,26,39,"getCurrentHub"],[33,71,26,52],[33,73,26,54],[34,8,27,4],[34,12,27,8],[34,13,27,9,"getCurrentHub"],[34,26,27,22],[34,29,27,25,"getCurrentHub"],[34,42,27,38],[35,8,29,4],[35,12,29,10,"hub"],[35,15,29,13],[35,18,29,16],[35,22,29,20],[35,23,29,21,"getCurrentHub"],[35,36,29,34],[35,37,29,35],[35,38,29,36],[36,8,30,4],[36,12,30,10,"client"],[36,18,30,16],[36,21,30,19,"hub"],[36,24,30,22],[36,25,30,23,"getClient"],[36,34,30,32],[36,35,30,33],[36,36,30,34],[37,8,31,4],[37,12,31,10,"scope"],[37,17,31,15],[37,20,31,18,"hub"],[37,23,31,21],[37,24,31,22,"getScope"],[37,32,31,30],[37,33,31,31],[37,34,31,32],[38,8,33,4],[38,12,33,10,"transaction"],[38,23,33,21],[38,26,33,24,"scope"],[38,31,33,29],[38,32,33,30,"getTransaction"],[38,46,33,44],[38,47,33,45],[38,48,33,46],[39,8,35,4],[39,12,35,8,"transaction"],[39,23,35,19],[39,27,35,23,"utils"],[39,32,35,28],[39,33,35,29,"isAutomatedPageLoadTransaction"],[39,63,35,59],[39,64,35,60,"transaction"],[39,75,35,71],[39,76,35,72],[39,78,35,74],[40,10,36,6],[40,14,36,10,"utils"],[40,19,36,15],[40,20,36,16,"shouldProfileTransaction"],[40,44,36,40],[40,45,36,41,"transaction"],[40,56,36,52],[40,57,36,53],[40,59,36,55],[41,12,37,8,"hubextensions"],[41,25,37,21],[41,26,37,22,"startProfileForTransaction"],[41,52,37,48],[41,53,37,49,"transaction"],[41,64,37,60],[41,65,37,61],[42,10,38,6],[43,8,39,4],[44,8,41,4],[44,12,41,8,"client"],[44,18,41,14],[44,22,41,18],[44,29,41,25,"client"],[44,35,41,31],[44,36,41,32,"on"],[44,38,41,34],[44,43,41,39],[44,53,41,49],[44,55,41,51],[45,10,42,6,"client"],[45,16,42,12],[45,17,42,13,"on"],[45,19,42,15],[45,20,42,16],[45,38,42,34],[45,40,42,37,"transaction"],[45,51,42,48],[45,55,42,53],[46,12,43,8],[46,16,43,12,"utils"],[46,21,43,17],[46,22,43,18,"shouldProfileTransaction"],[46,46,43,42],[46,47,43,43,"transaction"],[46,58,43,54],[46,59,43,55],[46,61,43,57],[47,14,44,10,"hubextensions"],[47,27,44,23],[47,28,44,24,"startProfileForTransaction"],[47,54,44,50],[47,55,44,51,"transaction"],[47,66,44,62],[47,67,44,63],[48,12,45,8],[49,10,46,6],[49,11,46,7],[49,12,46,8],[50,10,48,6,"client"],[50,16,48,12],[50,17,48,13,"on"],[50,19,48,15],[50,20,48,16],[50,36,48,32],[50,38,48,35,"envelope"],[50,46,48,43],[50,50,48,48],[51,12,49,8],[52,12,50,8],[52,16,50,12],[52,17,50,13,"utils"],[52,22,50,18],[52,23,50,19,"getActiveProfilesCount"],[52,45,50,41],[52,46,50,42],[52,47,50,43],[52,49,50,45],[53,14,51,10],[54,12,52,8],[55,12,54,8],[55,16,54,14,"profiledTransactionEvents"],[55,41,54,39],[55,44,54,42,"utils"],[55,49,54,47],[55,50,54,48,"findProfiledTransactionsFromEnvelope"],[55,86,54,84],[55,87,54,85,"envelope"],[55,95,54,93],[55,96,54,94],[56,12,55,8],[56,16,55,12],[56,17,55,13,"profiledTransactionEvents"],[56,42,55,38],[56,43,55,39,"length"],[56,49,55,45],[56,51,55,47],[57,14,56,10],[58,12,57,8],[59,12,59,8],[59,16,59,14,"profilesToAddToEnvelope"],[59,39,59,37],[59,42,59,40],[59,44,59,42],[60,12,61,8],[60,17,61,13],[60,21,61,19,"profiledTransaction"],[60,40,61,38],[60,44,61,42,"profiledTransactionEvents"],[60,69,61,67],[60,71,61,69],[61,14,62,10],[61,18,62,16,"context"],[61,25,62,23],[61,28,62,26,"profiledTransaction"],[61,47,62,45],[61,51,62,49,"profiledTransaction"],[61,70,62,68],[61,71,62,69,"contexts"],[61,79,62,77],[62,14,63,10],[62,18,63,16,"profile_id"],[62,28,63,26],[62,31,63,29,"context"],[62,38,63,36],[62,42,63,40,"context"],[62,49,63,47],[62,50,63,48],[62,59,63,57],[62,60,63,58],[62,64,63,62,"context"],[62,71,63,69],[62,72,63,70],[62,81,63,79],[62,82,63,80],[62,83,63,81],[62,95,63,93],[62,96,63,94],[63,14,64,10],[63,18,64,16,"start_timestamp"],[63,33,64,31],[63,36,64,34,"context"],[63,43,64,41],[63,47,64,45,"context"],[63,54,64,52],[63,55,64,53],[63,64,64,62],[63,65,64,63],[63,69,64,67,"context"],[63,76,64,74],[63,77,64,75],[63,86,64,84],[63,87,64,85],[63,88,64,86],[63,105,64,103],[63,106,64,104],[64,14,66,10],[64,18,66,14],[64,25,66,21,"profile_id"],[64,35,66,31],[64,40,66,36],[64,48,66,44],[64,50,66,46],[65,16,67,12],[65,17,67,13],[65,24,67,20,"__SENTRY_DEBUG__"],[65,40,67,36],[65,45,67,41],[65,56,67,52],[65,60,67,56,"__SENTRY_DEBUG__"],[65,76,67,72],[65,81,68,14,"utils$1"],[65,88,68,21],[65,89,68,22,"logger"],[65,95,68,28],[65,96,68,29,"log"],[65,99,68,32],[65,100,68,33],[65,177,68,110],[65,178,68,111],[66,16,69,12],[67,14,70,10],[68,14,72,10],[68,18,72,14],[68,19,72,15,"profile_id"],[68,29,72,25],[68,31,72,27],[69,16,73,12],[69,17,73,13],[69,24,73,20,"__SENTRY_DEBUG__"],[69,40,73,36],[69,45,73,41],[69,56,73,52],[69,60,73,56,"__SENTRY_DEBUG__"],[69,76,73,72],[69,81,74,14,"utils$1"],[69,88,74,21],[69,89,74,22,"logger"],[69,95,74,28],[69,96,74,29,"log"],[69,99,74,32],[69,100,74,33],[69,177,74,110],[69,178,74,111],[70,16,75,12],[71,14,76,10],[73,14,78,10],[74,14,79,10],[74,18,79,14,"context"],[74,25,79,21],[74,29,79,25,"context"],[74,36,79,32],[74,37,79,33],[74,46,79,42],[74,47,79,43],[74,49,79,45],[75,16,80,12],[75,23,80,19,"context"],[75,30,80,26],[75,31,80,27,"profile"],[75,38,80,34],[76,14,81,10],[77,14,83,10],[77,18,83,16,"profile"],[77,25,83,23],[77,28,83,26,"utils"],[77,33,83,31],[77,34,83,32,"takeProfileFromGlobalCache"],[77,60,83,58],[77,61,83,59,"profile_id"],[77,71,83,69],[77,72,83,70],[78,14,84,10],[78,18,84,14],[78,19,84,15,"profile"],[78,26,84,22],[78,28,84,24],[79,16,85,12],[79,17,85,13],[79,24,85,20,"__SENTRY_DEBUG__"],[79,40,85,36],[79,45,85,41],[79,56,85,52],[79,60,85,56,"__SENTRY_DEBUG__"],[79,76,85,72],[79,81,85,77,"utils$1"],[79,88,85,84],[79,89,85,85,"logger"],[79,95,85,91],[79,96,85,92,"log"],[79,99,85,95],[79,100,85,96],[79,159,85,155,"profile_id"],[79,169,85,165],[79,171,85,167],[79,172,85,168],[80,16,86,12],[81,14,87,10],[82,14,89,10],[82,18,89,16,"profileEvent"],[82,30,89,28],[82,33,89,31,"utils"],[82,38,89,36],[82,39,89,37,"createProfilingEvent"],[82,59,89,57],[82,60,90,12,"profile_id"],[82,70,90,22],[82,72,91,12,"start_timestamp"],[82,87,91,27],[82,89,92,12,"profile"],[82,96,92,19],[82,98,93,12,"profiledTransaction"],[82,117,94,10],[82,118,94,11],[83,14,95,10],[83,18,95,14,"profileEvent"],[83,30,95,26],[83,32,95,28],[84,16,96,12,"profilesToAddToEnvelope"],[84,39,96,35],[84,40,96,36,"push"],[84,44,96,40],[84,45,96,41,"profileEvent"],[84,57,96,53],[84,58,96,54],[85,14,97,10],[86,12,98,8],[87,12,100,8,"utils"],[87,17,100,13],[87,18,100,14,"addProfilesToEnvelope"],[87,39,100,35],[87,40,100,36,"envelope"],[87,48,100,44],[87,50,100,46,"profilesToAddToEnvelope"],[87,73,100,69],[87,74,100,70],[88,10,101,6],[88,11,101,7],[88,12,101,8],[89,8,102,4],[89,9,102,5],[89,15,102,11],[90,10,103,6,"utils$1"],[90,17,103,13],[90,18,103,14,"logger"],[90,24,103,20],[90,25,103,21,"warn"],[90,29,103,25],[90,30,103,26],[90,101,103,97],[90,102,103,98],[91,8,104,4],[92,6,105,2],[93,4,105,3],[94,6,105,3,"key"],[94,9,105,3],[95,6,105,3,"value"],[95,11,105,3],[95,13,17,3],[95,22,17,10,"__initStatic"],[95,34,17,22,"__initStatic"],[95,35,17,22],[95,37,17,25],[96,8,17,26],[96,12,17,30],[96,13,17,31,"id"],[96,15,17,33],[96,18,17,36],[96,47,17,65],[97,6,17,66],[98,4,17,67],[99,2,17,67],[100,2,106,2,"BrowserProfilingIntegration"],[100,29,106,29],[100,30,106,30,"__initStatic"],[100,42,106,42],[100,43,106,43],[100,44,106,44],[101,2,108,0,"exports"],[101,9,108,7],[101,10,108,8,"BrowserProfilingIntegration"],[101,37,108,35],[101,40,108,38,"BrowserProfilingIntegration"],[101,67,108,65],[102,0,108,66],[102,3]],"functionMap":{"names":["<global>","BrowserProfilingIntegration","BrowserProfilingIntegration.__initStatic","BrowserProfilingIntegration#constructor","BrowserProfilingIntegration#setupOnce","client.on$argument_1"],"mappings":"AAA;ACe;GCC,gED;GEE;GFE;GGK;oCCgB;ODI;kCCE;ODqD;GHI;CDC"},"hasCjsExports":true},"type":"js/module"}]}