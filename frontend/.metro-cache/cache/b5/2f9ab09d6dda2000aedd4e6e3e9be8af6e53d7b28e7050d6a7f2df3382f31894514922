{"dependencies":[{"name":"./baggage.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":16,"index":80},"end":{"line":3,"column":39,"index":103}}],"key":"IO8r4jqCjcTqejVGBjINTpRR/ss=","exportNames":["*"],"imports":1}},{"name":"./misc.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":13,"index":118},"end":{"line":4,"column":33,"index":138}}],"key":"bosxJ0QJAQv+IEnjtlnm0jL5MFI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const baggage = require(_dependencyMap[0], \"./baggage.js\");\n  const misc = require(_dependencyMap[1], \"./misc.js\");\n  const TRACEPARENT_REGEXP = new RegExp('^[ \\\\t]*' +\n  // whitespace\n  '([0-9a-f]{32})?' +\n  // trace_id\n  '-?([0-9a-f]{16})?' +\n  // span_id\n  '-?([01])?' +\n  // sampled\n  '[ \\\\t]*$') // whitespace\n  ;\n\n  /**\n   * Extract transaction context data from a `sentry-trace` header.\n   *\n   * @param traceparent Traceparent string\n   *\n   * @returns Object containing data from the header, or undefined if traceparent string is malformed\n   */\n  function extractTraceparentData(traceparent) {\n    if (!traceparent) {\n      return undefined;\n    }\n    const matches = traceparent.match(TRACEPARENT_REGEXP);\n    if (!matches) {\n      return undefined;\n    }\n    let parentSampled;\n    if (matches[3] === '1') {\n      parentSampled = true;\n    } else if (matches[3] === '0') {\n      parentSampled = false;\n    }\n    return {\n      traceId: matches[1],\n      parentSampled,\n      parentSpanId: matches[2]\n    };\n  }\n\n  /**\n   * Create tracing context from incoming headers.\n   */\n  function tracingContextFromHeaders(sentryTrace, baggage$1) {\n    const traceparentData = extractTraceparentData(sentryTrace);\n    const dynamicSamplingContext = baggage.baggageHeaderToDynamicSamplingContext(baggage$1);\n    const {\n      traceId,\n      parentSpanId,\n      parentSampled\n    } = traceparentData || {};\n    const propagationContext = {\n      traceId: traceId || misc.uuid4(),\n      spanId: misc.uuid4().substring(16),\n      sampled: parentSampled\n    };\n    if (parentSpanId) {\n      propagationContext.parentSpanId = parentSpanId;\n    }\n    if (dynamicSamplingContext) {\n      propagationContext.dsc = dynamicSamplingContext;\n    }\n    return {\n      traceparentData,\n      dynamicSamplingContext,\n      propagationContext\n    };\n  }\n\n  /**\n   * Create sentry-trace header from span context values.\n   */\n  function generateSentryTraceHeader(traceId = misc.uuid4(), spanId = misc.uuid4().substring(16), sampled) {\n    let sampledString = '';\n    if (sampled !== undefined) {\n      sampledString = sampled ? '-1' : '-0';\n    }\n    return `${traceId}-${spanId}${sampledString}`;\n  }\n  exports.TRACEPARENT_REGEXP = TRACEPARENT_REGEXP;\n  exports.extractTraceparentData = extractTraceparentData;\n  exports.generateSentryTraceHeader = generateSentryTraceHeader;\n  exports.tracingContextFromHeaders = tracingContextFromHeaders;\n});","lineCount":89,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"baggage"],[5,15,3,13],[5,18,3,16,"require"],[5,25,3,23],[5,26,3,23,"_dependencyMap"],[5,40,3,23],[5,59,3,38],[5,60,3,39],[6,2,4,0],[6,8,4,6,"misc"],[6,12,4,10],[6,15,4,13,"require"],[6,22,4,20],[6,23,4,20,"_dependencyMap"],[6,37,4,20],[6,53,4,32],[6,54,4,33],[7,2,6,0],[7,8,6,6,"TRACEPARENT_REGEXP"],[7,26,6,24],[7,29,6,27],[7,33,6,31,"RegExp"],[7,39,6,37],[7,40,7,2],[7,50,7,12],[8,2,7,15],[9,2,8,4],[9,19,8,21],[10,2,8,24],[11,2,9,4],[11,21,9,23],[12,2,9,26],[13,2,10,4],[13,13,10,15],[14,2,10,18],[15,2,11,4],[15,12,12,0],[15,13,12,1],[15,14,11,16],[16,2,12,1],[18,2,14,0],[19,0,15,0],[20,0,16,0],[21,0,17,0],[22,0,18,0],[23,0,19,0],[24,0,20,0],[25,2,21,0],[25,11,21,9,"extractTraceparentData"],[25,33,21,31,"extractTraceparentData"],[25,34,21,32,"traceparent"],[25,45,21,43],[25,47,21,45],[26,4,22,2],[26,8,22,6],[26,9,22,7,"traceparent"],[26,20,22,18],[26,22,22,20],[27,6,23,4],[27,13,23,11,"undefined"],[27,22,23,20],[28,4,24,2],[29,4,26,2],[29,10,26,8,"matches"],[29,17,26,15],[29,20,26,18,"traceparent"],[29,31,26,29],[29,32,26,30,"match"],[29,37,26,35],[29,38,26,36,"TRACEPARENT_REGEXP"],[29,56,26,54],[29,57,26,55],[30,4,27,2],[30,8,27,6],[30,9,27,7,"matches"],[30,16,27,14],[30,18,27,16],[31,6,28,4],[31,13,28,11,"undefined"],[31,22,28,20],[32,4,29,2],[33,4,31,2],[33,8,31,6,"parentSampled"],[33,21,31,19],[34,4,32,2],[34,8,32,6,"matches"],[34,15,32,13],[34,16,32,14],[34,17,32,15],[34,18,32,16],[34,23,32,21],[34,26,32,24],[34,28,32,26],[35,6,33,4,"parentSampled"],[35,19,33,17],[35,22,33,20],[35,26,33,24],[36,4,34,2],[36,5,34,3],[36,11,34,9],[36,15,34,13,"matches"],[36,22,34,20],[36,23,34,21],[36,24,34,22],[36,25,34,23],[36,30,34,28],[36,33,34,31],[36,35,34,33],[37,6,35,4,"parentSampled"],[37,19,35,17],[37,22,35,20],[37,27,35,25],[38,4,36,2],[39,4,38,2],[39,11,38,9],[40,6,39,4,"traceId"],[40,13,39,11],[40,15,39,13,"matches"],[40,22,39,20],[40,23,39,21],[40,24,39,22],[40,25,39,23],[41,6,40,4,"parentSampled"],[41,19,40,17],[42,6,41,4,"parentSpanId"],[42,18,41,16],[42,20,41,18,"matches"],[42,27,41,25],[42,28,41,26],[42,29,41,27],[43,4,42,2],[43,5,42,3],[44,2,43,0],[46,2,45,0],[47,0,46,0],[48,0,47,0],[49,2,48,0],[49,11,48,9,"tracingContextFromHeaders"],[49,36,48,34,"tracingContextFromHeaders"],[49,37,49,2,"sentryTrace"],[49,48,49,13],[49,50,50,2,"baggage$1"],[49,59,50,11],[49,61,53,1],[50,4,54,2],[50,10,54,8,"traceparentData"],[50,25,54,23],[50,28,54,26,"extractTraceparentData"],[50,50,54,48],[50,51,54,49,"sentryTrace"],[50,62,54,60],[50,63,54,61],[51,4,55,2],[51,10,55,8,"dynamicSamplingContext"],[51,32,55,30],[51,35,55,33,"baggage"],[51,42,55,40],[51,43,55,41,"baggageHeaderToDynamicSamplingContext"],[51,80,55,78],[51,81,55,79,"baggage$1"],[51,90,55,88],[51,91,55,89],[52,4,57,2],[52,10,57,8],[53,6,57,10,"traceId"],[53,13,57,17],[54,6,57,19,"parentSpanId"],[54,18,57,31],[55,6,57,33,"parentSampled"],[56,4,57,47],[56,5,57,48],[56,8,57,51,"traceparentData"],[56,23,57,66],[56,27,57,70],[56,28,57,71],[56,29,57,72],[57,4,59,2],[57,10,59,8,"propagationContext"],[57,28,59,26],[57,31,59,29],[58,6,60,4,"traceId"],[58,13,60,11],[58,15,60,13,"traceId"],[58,22,60,20],[58,26,60,24,"misc"],[58,30,60,28],[58,31,60,29,"uuid4"],[58,36,60,34],[58,37,60,35],[58,38,60,36],[59,6,61,4,"spanId"],[59,12,61,10],[59,14,61,12,"misc"],[59,18,61,16],[59,19,61,17,"uuid4"],[59,24,61,22],[59,25,61,23],[59,26,61,24],[59,27,61,25,"substring"],[59,36,61,34],[59,37,61,35],[59,39,61,37],[59,40,61,38],[60,6,62,4,"sampled"],[60,13,62,11],[60,15,62,13,"parentSampled"],[61,4,63,2],[61,5,63,3],[62,4,65,2],[62,8,65,6,"parentSpanId"],[62,20,65,18],[62,22,65,20],[63,6,66,4,"propagationContext"],[63,24,66,22],[63,25,66,23,"parentSpanId"],[63,37,66,35],[63,40,66,38,"parentSpanId"],[63,52,66,50],[64,4,67,2],[65,4,69,2],[65,8,69,6,"dynamicSamplingContext"],[65,30,69,28],[65,32,69,30],[66,6,70,4,"propagationContext"],[66,24,70,22],[66,25,70,23,"dsc"],[66,28,70,26],[66,31,70,29,"dynamicSamplingContext"],[66,53,70,51],[67,4,71,2],[68,4,73,2],[68,11,73,9],[69,6,74,4,"traceparentData"],[69,21,74,19],[70,6,75,4,"dynamicSamplingContext"],[70,28,75,26],[71,6,76,4,"propagationContext"],[72,4,77,2],[72,5,77,3],[73,2,78,0],[75,2,80,0],[76,0,81,0],[77,0,82,0],[78,2,83,0],[78,11,83,9,"generateSentryTraceHeader"],[78,36,83,34,"generateSentryTraceHeader"],[78,37,84,2,"traceId"],[78,44,84,9],[78,47,84,12,"misc"],[78,51,84,16],[78,52,84,17,"uuid4"],[78,57,84,22],[78,58,84,23],[78,59,84,24],[78,61,85,2,"spanId"],[78,67,85,8],[78,70,85,11,"misc"],[78,74,85,15],[78,75,85,16,"uuid4"],[78,80,85,21],[78,81,85,22],[78,82,85,23],[78,83,85,24,"substring"],[78,92,85,33],[78,93,85,34],[78,95,85,36],[78,96,85,37],[78,98,86,2,"sampled"],[78,105,86,9],[78,107,87,2],[79,4,88,2],[79,8,88,6,"sampledString"],[79,21,88,19],[79,24,88,22],[79,26,88,24],[80,4,89,2],[80,8,89,6,"sampled"],[80,15,89,13],[80,20,89,18,"undefined"],[80,29,89,27],[80,31,89,29],[81,6,90,4,"sampledString"],[81,19,90,17],[81,22,90,20,"sampled"],[81,29,90,27],[81,32,90,30],[81,36,90,34],[81,39,90,37],[81,43,90,41],[82,4,91,2],[83,4,92,2],[83,11,92,9],[83,14,92,12,"traceId"],[83,21,92,19],[83,25,92,23,"spanId"],[83,31,92,29],[83,34,92,32,"sampledString"],[83,47,92,45],[83,49,92,47],[84,2,93,0],[85,2,95,0,"exports"],[85,9,95,7],[85,10,95,8,"TRACEPARENT_REGEXP"],[85,28,95,26],[85,31,95,29,"TRACEPARENT_REGEXP"],[85,49,95,47],[86,2,96,0,"exports"],[86,9,96,7],[86,10,96,8,"extractTraceparentData"],[86,32,96,30],[86,35,96,33,"extractTraceparentData"],[86,57,96,55],[87,2,97,0,"exports"],[87,9,97,7],[87,10,97,8,"generateSentryTraceHeader"],[87,35,97,33],[87,38,97,36,"generateSentryTraceHeader"],[87,63,97,61],[88,2,98,0,"exports"],[88,9,98,7],[88,10,98,8,"tracingContextFromHeaders"],[88,35,98,33],[88,38,98,36,"tracingContextFromHeaders"],[88,63,98,61],[89,0,98,62],[89,3]],"functionMap":{"names":["<global>","extractTraceparentData","tracingContextFromHeaders","generateSentryTraceHeader"],"mappings":"AAA;ACoB;CDsB;AEK;CF8B;AGK;CHU"},"hasCjsExports":true},"type":"js/module"}]}