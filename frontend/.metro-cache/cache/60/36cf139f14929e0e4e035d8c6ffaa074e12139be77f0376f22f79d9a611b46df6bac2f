{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.validateConfig = validateConfig;\n  exports.getBackendUrl = getBackendUrl;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  // /app/frontend/lib/config/validate.ts\n  // Startup config validation - catches misconfig early\n  // Phase 3.15: Enhanced with production build assertions\n\n  /**\n   * Detect if this is likely a production/release build\n   * Uses Expo's __DEV__ flag as primary indicator\n   */\n  function isProductionBuild() {\n    return !__DEV__;\n  }\n\n  /**\n   * Validate critical configuration at startup\n   * In dev: throws immediately on missing config\n   * In prod: logs error but doesn't crash (graceful degradation)\n   * \n   * Phase 3.15: Enhanced with production-specific validations\n   */\n  function validateConfig() {\n    const errors = [];\n    const warnings = [];\n    const isProd = isProductionBuild();\n\n    // ==========================================================================\n    // REQUIRED: Backend URL\n    // ==========================================================================\n    const backend = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n    if (!backend) {\n      errors.push('Missing EXPO_PUBLIC_BACKEND_URL');\n    } else if (!backend.startsWith('http://') && !backend.startsWith('https://')) {\n      errors.push('EXPO_PUBLIC_BACKEND_URL must start with http:// or https://');\n    } else if (isProd && !backend.startsWith('https://')) {\n      // Phase 3.15: Production builds SHOULD use HTTPS\n      warnings.push('EXPO_PUBLIC_BACKEND_URL should use https:// in production');\n    }\n\n    // ==========================================================================\n    // RECOMMENDED: Sentry DSN (critical for prod crash reporting)\n    // ==========================================================================\n    const sentryDsn = _expoVirtualEnv.env.EXPO_PUBLIC_SENTRY_DSN;\n    if (!sentryDsn && isProd) {\n      warnings.push('No EXPO_PUBLIC_SENTRY_DSN - crash reporting disabled in production');\n    }\n\n    // ==========================================================================\n    // RECOMMENDED: Analytics (optional but useful for production)\n    // ==========================================================================\n    const analyticsEnabled = _expoVirtualEnv.env.EXPO_PUBLIC_ANALYTICS_ENABLED;\n    if (isProd && analyticsEnabled !== 'true') {\n      // Just informational - analytics is optional\n      console.log('[config] Analytics disabled in production (EXPO_PUBLIC_ANALYTICS_ENABLED !== \"true\")');\n    }\n\n    // ==========================================================================\n    // INFO: RevenueCat (client-side SDK - only warn if missing)\n    // ==========================================================================\n    const revenueCatKey = _expoVirtualEnv.env.EXPO_PUBLIC_REVENUECAT_API_KEY;\n    if (!revenueCatKey && isProd) {\n      warnings.push('No EXPO_PUBLIC_REVENUECAT_API_KEY - RevenueCat SDK disabled');\n    }\n\n    // ==========================================================================\n    // Report warnings (logged but don't prevent startup)\n    // ==========================================================================\n    if (warnings.length > 0) {\n      const warningMsg = `[config] Configuration warnings:\\n${warnings.map(w => `  ⚠️ ${w}`).join('\\n')}`;\n      console.warn(warningMsg);\n    }\n\n    // ==========================================================================\n    // Report errors (critical issues)\n    // ==========================================================================\n    if (errors.length > 0) {\n      const message = `[config] Configuration errors:\\n${errors.map(e => `  ❌ ${e}`).join('\\n')}`;\n      if (__DEV__) {\n        // In dev, throw to make it obvious\n        throw new Error(message);\n      } else {\n        // In prod, log but don't crash - app may still partially work\n        console.error(message);\n      }\n    }\n\n    // Success\n    if (errors.length === 0) {\n      console.log(`[config] ✅ Configuration validated (${isProd ? 'production' : 'development'} mode)`);\n    }\n  }\n\n  /**\n   * Get validated backend URL\n   */\n  function getBackendUrl() {\n    const url = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n    if (!url) {\n      throw new Error('EXPO_PUBLIC_BACKEND_URL is not configured');\n    }\n    return url.replace(/\\/$/, ''); // Remove trailing slash\n  }\n});","lineCount":110,"map":[[7,2,20,0,"exports"],[7,9,20,0],[7,10,20,0,"validateConfig"],[7,24,20,0],[7,27,20,0,"validateConfig"],[7,41,20,0],[8,2,95,0,"exports"],[8,9,95,0],[8,10,95,0,"getBackendUrl"],[8,23,95,0],[8,26,95,0,"getBackendUrl"],[8,39,95,0],[9,2,101,1],[9,6,101,1,"_expoVirtualEnv"],[9,21,101,1],[9,24,101,1,"require"],[9,31,101,1],[9,32,101,1,"_dependencyMap"],[9,46,101,1],[10,2,1,0],[11,2,2,0],[12,2,3,0],[14,2,5,0],[15,0,6,0],[16,0,7,0],[17,0,8,0],[18,2,9,0],[18,11,9,9,"isProductionBuild"],[18,28,9,26,"isProductionBuild"],[18,29,9,26],[18,31,9,38],[19,4,10,2],[19,11,10,9],[19,12,10,10,"__DEV__"],[19,19,10,17],[20,2,11,0],[22,2,13,0],[23,0,14,0],[24,0,15,0],[25,0,16,0],[26,0,17,0],[27,0,18,0],[28,0,19,0],[29,2,20,7],[29,11,20,16,"validateConfig"],[29,25,20,30,"validateConfig"],[29,26,20,30],[29,28,20,39],[30,4,21,2],[30,10,21,8,"errors"],[30,16,21,24],[30,19,21,27],[30,21,21,29],[31,4,22,2],[31,10,22,8,"warnings"],[31,18,22,26],[31,21,22,29],[31,23,22,31],[32,4,23,2],[32,10,23,8,"isProd"],[32,16,23,14],[32,19,23,17,"isProductionBuild"],[32,36,23,34],[32,37,23,35],[32,38,23,36],[34,4,25,2],[35,4,26,2],[36,4,27,2],[37,4,28,2],[37,10,28,8,"backend"],[37,17,28,15],[37,20,28,15,"_expoVirtualEnv"],[37,35,28,15],[37,36,28,15,"env"],[37,39,28,15],[37,40,28,15,"EXPO_PUBLIC_BACKEND_URL"],[37,63,28,53],[38,4,29,2],[38,8,29,6],[38,9,29,7,"backend"],[38,16,29,14],[38,18,29,16],[39,6,30,4,"errors"],[39,12,30,10],[39,13,30,11,"push"],[39,17,30,15],[39,18,30,16],[39,51,30,49],[39,52,30,50],[40,4,31,2],[40,5,31,3],[40,11,31,9],[40,15,31,13],[40,16,31,14,"backend"],[40,23,31,21],[40,24,31,22,"startsWith"],[40,34,31,32],[40,35,31,33],[40,44,31,42],[40,45,31,43],[40,49,31,47],[40,50,31,48,"backend"],[40,57,31,55],[40,58,31,56,"startsWith"],[40,68,31,66],[40,69,31,67],[40,79,31,77],[40,80,31,78],[40,82,31,80],[41,6,32,4,"errors"],[41,12,32,10],[41,13,32,11,"push"],[41,17,32,15],[41,18,32,16],[41,79,32,77],[41,80,32,78],[42,4,33,2],[42,5,33,3],[42,11,33,9],[42,15,33,13,"isProd"],[42,21,33,19],[42,25,33,23],[42,26,33,24,"backend"],[42,33,33,31],[42,34,33,32,"startsWith"],[42,44,33,42],[42,45,33,43],[42,55,33,53],[42,56,33,54],[42,58,33,56],[43,6,34,4],[44,6,35,4,"warnings"],[44,14,35,12],[44,15,35,13,"push"],[44,19,35,17],[44,20,35,18],[44,79,35,77],[44,80,35,78],[45,4,36,2],[47,4,38,2],[48,4,39,2],[49,4,40,2],[50,4,41,2],[50,10,41,8,"sentryDsn"],[50,19,41,17],[50,22,41,17,"_expoVirtualEnv"],[50,37,41,17],[50,38,41,17,"env"],[50,41,41,17],[50,42,41,17,"EXPO_PUBLIC_SENTRY_DSN"],[50,64,41,54],[51,4,42,2],[51,8,42,6],[51,9,42,7,"sentryDsn"],[51,18,42,16],[51,22,42,20,"isProd"],[51,28,42,26],[51,30,42,28],[52,6,43,4,"warnings"],[52,14,43,12],[52,15,43,13,"push"],[52,19,43,17],[52,20,43,18],[52,88,43,86],[52,89,43,87],[53,4,44,2],[55,4,46,2],[56,4,47,2],[57,4,48,2],[58,4,49,2],[58,10,49,8,"analyticsEnabled"],[58,26,49,24],[58,29,49,24,"_expoVirtualEnv"],[58,44,49,24],[58,45,49,24,"env"],[58,48,49,24],[58,49,49,24,"EXPO_PUBLIC_ANALYTICS_ENABLED"],[58,78,49,68],[59,4,50,2],[59,8,50,6,"isProd"],[59,14,50,12],[59,18,50,16,"analyticsEnabled"],[59,34,50,32],[59,39,50,37],[59,45,50,43],[59,47,50,45],[60,6,51,4],[61,6,52,4,"console"],[61,13,52,11],[61,14,52,12,"log"],[61,17,52,15],[61,18,52,16],[61,104,52,102],[61,105,52,103],[62,4,53,2],[64,4,55,2],[65,4,56,2],[66,4,57,2],[67,4,58,2],[67,10,58,8,"revenueCatKey"],[67,23,58,21],[67,26,58,21,"_expoVirtualEnv"],[67,41,58,21],[67,42,58,21,"env"],[67,45,58,21],[67,46,58,21,"EXPO_PUBLIC_REVENUECAT_API_KEY"],[67,76,58,66],[68,4,59,2],[68,8,59,6],[68,9,59,7,"revenueCatKey"],[68,22,59,20],[68,26,59,24,"isProd"],[68,32,59,30],[68,34,59,32],[69,6,60,4,"warnings"],[69,14,60,12],[69,15,60,13,"push"],[69,19,60,17],[69,20,60,18],[69,81,60,79],[69,82,60,80],[70,4,61,2],[72,4,63,2],[73,4,64,2],[74,4,65,2],[75,4,66,2],[75,8,66,6,"warnings"],[75,16,66,14],[75,17,66,15,"length"],[75,23,66,21],[75,26,66,24],[75,27,66,25],[75,29,66,27],[76,6,67,4],[76,12,67,10,"warningMsg"],[76,22,67,20],[76,25,67,23],[76,62,67,60,"warnings"],[76,70,67,68],[76,71,67,69,"map"],[76,74,67,72],[76,75,67,73,"w"],[76,76,67,74],[76,80,67,78],[76,88,67,86,"w"],[76,89,67,87],[76,91,67,89],[76,92,67,90],[76,93,67,91,"join"],[76,97,67,95],[76,98,67,96],[76,102,67,100],[76,103,67,101],[76,105,67,103],[77,6,68,4,"console"],[77,13,68,11],[77,14,68,12,"warn"],[77,18,68,16],[77,19,68,17,"warningMsg"],[77,29,68,27],[77,30,68,28],[78,4,69,2],[80,4,71,2],[81,4,72,2],[82,4,73,2],[83,4,74,2],[83,8,74,6,"errors"],[83,14,74,12],[83,15,74,13,"length"],[83,21,74,19],[83,24,74,22],[83,25,74,23],[83,27,74,25],[84,6,75,4],[84,12,75,10,"message"],[84,19,75,17],[84,22,75,20],[84,57,75,55,"errors"],[84,63,75,61],[84,64,75,62,"map"],[84,67,75,65],[84,68,75,66,"e"],[84,69,75,67],[84,73,75,71],[84,80,75,78,"e"],[84,81,75,79],[84,83,75,81],[84,84,75,82],[84,85,75,83,"join"],[84,89,75,87],[84,90,75,88],[84,94,75,92],[84,95,75,93],[84,97,75,95],[85,6,77,4],[85,10,77,8,"__DEV__"],[85,17,77,15],[85,19,77,17],[86,8,78,6],[87,8,79,6],[87,14,79,12],[87,18,79,16,"Error"],[87,23,79,21],[87,24,79,22,"message"],[87,31,79,29],[87,32,79,30],[88,6,80,4],[88,7,80,5],[88,13,80,11],[89,8,81,6],[90,8,82,6,"console"],[90,15,82,13],[90,16,82,14,"error"],[90,21,82,19],[90,22,82,20,"message"],[90,29,82,27],[90,30,82,28],[91,6,83,4],[92,4,84,2],[94,4,86,2],[95,4,87,2],[95,8,87,6,"errors"],[95,14,87,12],[95,15,87,13,"length"],[95,21,87,19],[95,26,87,24],[95,27,87,25],[95,29,87,27],[96,6,88,4,"console"],[96,13,88,11],[96,14,88,12,"log"],[96,17,88,15],[96,18,88,16],[96,57,88,55,"isProd"],[96,63,88,61],[96,66,88,64],[96,78,88,76],[96,81,88,79],[96,94,88,92],[96,102,88,100],[96,103,88,101],[97,4,89,2],[98,2,90,0],[100,2,92,0],[101,0,93,0],[102,0,94,0],[103,2,95,7],[103,11,95,16,"getBackendUrl"],[103,24,95,29,"getBackendUrl"],[103,25,95,29],[103,27,95,40],[104,4,96,2],[104,10,96,8,"url"],[104,13,96,11],[104,16,96,11,"_expoVirtualEnv"],[104,31,96,11],[104,32,96,11,"env"],[104,35,96,11],[104,36,96,11,"EXPO_PUBLIC_BACKEND_URL"],[104,59,96,49],[105,4,97,2],[105,8,97,6],[105,9,97,7,"url"],[105,12,97,10],[105,14,97,12],[106,6,98,4],[106,12,98,10],[106,16,98,14,"Error"],[106,21,98,19],[106,22,98,20],[106,65,98,63],[106,66,98,64],[107,4,99,2],[108,4,100,2],[108,11,100,9,"url"],[108,14,100,12],[108,15,100,13,"replace"],[108,22,100,20],[108,23,100,21],[108,28,100,26],[108,30,100,28],[108,32,100,30],[108,33,100,31],[108,34,100,32],[108,35,100,33],[109,2,101,0],[110,0,101,1],[110,3]],"functionMap":{"names":["<global>","isProductionBuild","validateConfig","warnings.map$argument_0","errors.map$argument_0","getBackendUrl"],"mappings":"AAA;ACQ;CDE;OES;yEC+C,gBD;kEEQ,eF;CFe;OKK;CLM"},"hasCjsExports":false},"type":"js/module"}]}