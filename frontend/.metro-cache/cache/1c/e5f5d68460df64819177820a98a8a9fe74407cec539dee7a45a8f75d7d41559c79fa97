{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":13,"index":77},"end":{"line":3,"column":36,"index":100}}],"key":"CPmndeSLDuCg/s3oFguorTUVcN0=","exportNames":["*"],"imports":1}},{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":16,"index":118},"end":{"line":4,"column":40,"index":142}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":14,"index":158},"end":{"line":5,"column":35,"index":179}}],"key":"v6h+l9IeOWbEcXdtKQqd2f4now4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const core = require(_dependencyMap[0], \"@sentry/core\");\n  const utils$1 = require(_dependencyMap[1], \"@sentry/utils\");\n  const utils = require(_dependencyMap[2], \"./utils.js\");\n\n  /**\n   * Creates a Transport that uses the Fetch API to send events to Sentry.\n   */\n  function makeFetchTransport(options, nativeFetch = utils.getNativeFetchImplementation()) {\n    let pendingBodySize = 0;\n    let pendingCount = 0;\n    function makeRequest(request) {\n      const requestSize = request.body.length;\n      pendingBodySize += requestSize;\n      pendingCount++;\n      const requestOptions = {\n        body: request.body,\n        method: 'POST',\n        referrerPolicy: 'origin',\n        headers: options.headers,\n        // Outgoing requests are usually cancelled when navigating to a different page, causing a \"TypeError: Failed to\n        // fetch\" error and sending a \"network_error\" client-outcome - in Chrome, the request status shows \"(cancelled)\".\n        // The `keepalive` flag keeps outgoing requests alive, even when switching pages. We want this since we're\n        // frequently sending events right before the user is switching pages (eg. whenfinishing navigation transactions).\n        // Gotchas:\n        // - `keepalive` isn't supported by Firefox\n        // - As per spec (https://fetch.spec.whatwg.org/#http-network-or-cache-fetch):\n        //   If the sum of contentLength and inflightKeepaliveBytes is greater than 64 kibibytes, then return a network error.\n        //   We will therefore only activate the flag when we're below that limit.\n        // There is also a limit of requests that can be open at the same time, so we also limit this to 15\n        // See https://github.com/getsentry/sentry-javascript/pull/7553 for details\n        keepalive: pendingBodySize <= 60000 && pendingCount < 15,\n        ...options.fetchOptions\n      };\n      try {\n        return nativeFetch(options.url, requestOptions).then(response => {\n          pendingBodySize -= requestSize;\n          pendingCount--;\n          return {\n            statusCode: response.status,\n            headers: {\n              'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n              'retry-after': response.headers.get('Retry-After')\n            }\n          };\n        });\n      } catch (e) {\n        utils.clearCachedFetchImplementation();\n        pendingBodySize -= requestSize;\n        pendingCount--;\n        return utils$1.rejectedSyncPromise(e);\n      }\n    }\n    return core.createTransport(options, makeRequest);\n  }\n  exports.makeFetchTransport = makeFetchTransport;\n});","lineCount":60,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"core"],[5,12,3,10],[5,15,3,13,"require"],[5,22,3,20],[5,23,3,20,"_dependencyMap"],[5,37,3,20],[5,56,3,35],[5,57,3,36],[6,2,4,0],[6,8,4,6,"utils$1"],[6,15,4,13],[6,18,4,16,"require"],[6,25,4,23],[6,26,4,23,"_dependencyMap"],[6,40,4,23],[6,60,4,39],[6,61,4,40],[7,2,5,0],[7,8,5,6,"utils"],[7,13,5,11],[7,16,5,14,"require"],[7,23,5,21],[7,24,5,21,"_dependencyMap"],[7,38,5,21],[7,55,5,34],[7,56,5,35],[9,2,7,0],[10,0,8,0],[11,0,9,0],[12,2,10,0],[12,11,10,9,"makeFetchTransport"],[12,29,10,27,"makeFetchTransport"],[12,30,11,2,"options"],[12,37,11,9],[12,39,12,2,"nativeFetch"],[12,50,12,13],[12,53,12,16,"utils"],[12,58,12,21],[12,59,12,22,"getNativeFetchImplementation"],[12,87,12,50],[12,88,12,51],[12,89,12,52],[12,91,13,2],[13,4,14,2],[13,8,14,6,"pendingBodySize"],[13,23,14,21],[13,26,14,24],[13,27,14,25],[14,4,15,2],[14,8,15,6,"pendingCount"],[14,20,15,18],[14,23,15,21],[14,24,15,22],[15,4,17,2],[15,13,17,11,"makeRequest"],[15,24,17,22,"makeRequest"],[15,25,17,23,"request"],[15,32,17,30],[15,34,17,32],[16,6,18,4],[16,12,18,10,"requestSize"],[16,23,18,21],[16,26,18,24,"request"],[16,33,18,31],[16,34,18,32,"body"],[16,38,18,36],[16,39,18,37,"length"],[16,45,18,43],[17,6,19,4,"pendingBodySize"],[17,21,19,19],[17,25,19,23,"requestSize"],[17,36,19,34],[18,6,20,4,"pendingCount"],[18,18,20,16],[18,20,20,18],[19,6,22,4],[19,12,22,10,"requestOptions"],[19,26,22,24],[19,29,22,27],[20,8,23,6,"body"],[20,12,23,10],[20,14,23,12,"request"],[20,21,23,19],[20,22,23,20,"body"],[20,26,23,24],[21,8,24,6,"method"],[21,14,24,12],[21,16,24,14],[21,22,24,20],[22,8,25,6,"referrerPolicy"],[22,22,25,20],[22,24,25,22],[22,32,25,30],[23,8,26,6,"headers"],[23,15,26,13],[23,17,26,15,"options"],[23,24,26,22],[23,25,26,23,"headers"],[23,32,26,30],[24,8,27,6],[25,8,28,6],[26,8,29,6],[27,8,30,6],[28,8,31,6],[29,8,32,6],[30,8,33,6],[31,8,34,6],[32,8,35,6],[33,8,36,6],[34,8,37,6],[35,8,38,6,"keepalive"],[35,17,38,15],[35,19,38,17,"pendingBodySize"],[35,34,38,32],[35,38,38,36],[35,43,38,41],[35,47,38,45,"pendingCount"],[35,59,38,57],[35,62,38,60],[35,64,38,62],[36,8,39,6],[36,11,39,9,"options"],[36,18,39,16],[36,19,39,17,"fetchOptions"],[37,6,40,4],[37,7,40,5],[38,6,42,4],[38,10,42,8],[39,8,43,6],[39,15,43,13,"nativeFetch"],[39,26,43,24],[39,27,43,25,"options"],[39,34,43,32],[39,35,43,33,"url"],[39,38,43,36],[39,40,43,38,"requestOptions"],[39,54,43,52],[39,55,43,53],[39,56,43,54,"then"],[39,60,43,58],[39,61,43,59,"response"],[39,69,43,67],[39,73,43,71],[40,10,44,8,"pendingBodySize"],[40,25,44,23],[40,29,44,27,"requestSize"],[40,40,44,38],[41,10,45,8,"pendingCount"],[41,22,45,20],[41,24,45,22],[42,10,46,8],[42,17,46,15],[43,12,47,10,"statusCode"],[43,22,47,20],[43,24,47,22,"response"],[43,32,47,30],[43,33,47,31,"status"],[43,39,47,37],[44,12,48,10,"headers"],[44,19,48,17],[44,21,48,19],[45,14,49,12],[45,36,49,34],[45,38,49,36,"response"],[45,46,49,44],[45,47,49,45,"headers"],[45,54,49,52],[45,55,49,53,"get"],[45,58,49,56],[45,59,49,57],[45,81,49,79],[45,82,49,80],[46,14,50,12],[46,27,50,25],[46,29,50,27,"response"],[46,37,50,35],[46,38,50,36,"headers"],[46,45,50,43],[46,46,50,44,"get"],[46,49,50,47],[46,50,50,48],[46,63,50,61],[47,12,51,10],[48,10,52,8],[48,11,52,9],[49,8,53,6],[49,9,53,7],[49,10,53,8],[50,6,54,4],[50,7,54,5],[50,8,54,6],[50,15,54,13,"e"],[50,16,54,14],[50,18,54,16],[51,8,55,6,"utils"],[51,13,55,11],[51,14,55,12,"clearCachedFetchImplementation"],[51,44,55,42],[51,45,55,43],[51,46,55,44],[52,8,56,6,"pendingBodySize"],[52,23,56,21],[52,27,56,25,"requestSize"],[52,38,56,36],[53,8,57,6,"pendingCount"],[53,20,57,18],[53,22,57,20],[54,8,58,6],[54,15,58,13,"utils$1"],[54,22,58,20],[54,23,58,21,"rejectedSyncPromise"],[54,42,58,40],[54,43,58,41,"e"],[54,44,58,42],[54,45,58,43],[55,6,59,4],[56,4,60,2],[57,4,62,2],[57,11,62,9,"core"],[57,15,62,13],[57,16,62,14,"createTransport"],[57,31,62,29],[57,32,62,30,"options"],[57,39,62,37],[57,41,62,39,"makeRequest"],[57,52,62,50],[57,53,62,51],[58,2,63,0],[59,2,65,0,"exports"],[59,9,65,7],[59,10,65,8,"makeFetchTransport"],[59,28,65,26],[59,31,65,29,"makeFetchTransport"],[59,49,65,47],[60,0,65,48],[60,3]],"functionMap":{"names":["<global>","makeFetchTransport","makeRequest","nativeFetch.then$argument_0"],"mappings":"AAA;ACS;ECO;2DC0B;ODU;GDO;CDG"},"hasCjsExports":true},"type":"js/module"}]}