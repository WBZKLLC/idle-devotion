{"dependencies":[{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":811},"end":{"line":19,"column":37,"index":848}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"./products","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":849},"end":{"line":20,"column":57,"index":906}}],"key":"QLsEbhN001YxKPoY7MJ1qVaW9gw=","exportNames":["*"],"imports":1}},{"name":"../telemetry/events","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":907},"end":{"line":21,"column":52,"index":959}}],"key":"k7LZwhoWMWET/ud396YGvDlODrM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"KNOWN_SOURCES\", {\n    enumerable: true,\n    get: function () {\n      return KNOWN_SOURCES;\n    }\n  });\n  exports.goToPaywall = goToPaywall;\n  exports.goToStore = goToStore;\n  exports.goToPurchaseSuccess = goToPurchaseSuccess;\n  exports.getPaywallRoute = getPaywallRoute;\n  exports.getStoreRoute = getStoreRoute;\n  exports.getSafeReturnTo = getSafeReturnTo;\n  exports.useCurrentPath = useCurrentPath;\n  var _expoRouter = require(_dependencyMap[0], \"expo-router\");\n  var _products = require(_dependencyMap[1], \"./products\");\n  var _telemetryEvents = require(_dependencyMap[2], \"../telemetry/events\");\n  // /app/frontend/lib/entitlements/navigation.ts\n  // CANONICAL Premium Navigation - single entry point for all paywall routing\n  //\n  // STRICT INVARIANTS:\n  // 1. All premium navigation MUST go through these helpers\n  // 2. Direct router.push('/paid-features') or router.push('/store') is FORBIDDEN\n  // 3. If productKey is omitted, defaults to PAYWALL_HUB (documented policy)\n  // 4. source MUST be a known PaywallSource (no arbitrary strings in prod)\n  // 5. returnTo is sanitized (must start with /, max 256 chars)\n  // 6. Telemetry is ONLY emitted from this file (guards enforce)\n  //\n  // This ensures:\n  // - Analytics/telemetry for all premium funnels\n  // - Single place to change paywall route\n  // - Consistent UX for premium denial flows\n  // - Easy debugging of purchase funnels\n  // - No silent misroutes from implicit defaults\n\n  // Debug logging\n  const dlog = (...args) => {\n    if (__DEV__) console.log('[navigation]', ...args);\n  };\n\n  // ==============================================================\n  // TELEMETRY DEDUPE - Prevent spam from double-taps/rerenders\n  // ==============================================================\n  const DEDUPE_WINDOW_MS = 1500; // 1.5 seconds\n  let lastPaywallOpenedAt = 0;\n  let lastStoreOpenedAt = 0;\n  function shouldEmitPaywallEvent() {\n    const now = Date.now();\n    if (now - lastPaywallOpenedAt < DEDUPE_WINDOW_MS) {\n      dlog('paywall_opened dedupe - skipping');\n      return false;\n    }\n    lastPaywallOpenedAt = now;\n    return true;\n  }\n  function shouldEmitStoreEvent() {\n    const now = Date.now();\n    if (now - lastStoreOpenedAt < DEDUPE_WINDOW_MS) {\n      dlog('store_opened dedupe - skipping');\n      return false;\n    }\n    lastStoreOpenedAt = now;\n    return true;\n  }\n\n  // ==============================================================\n  // TYPES\n  // ==============================================================\n\n  /**\n   * Source of the paywall navigation (for analytics + debugging)\n   * \n   * STRICT: Only these known values are allowed.\n   * Adding a new source requires updating this type.\n   */\n\n  // Fallback (should be rare, logged as warning)\n\n  // Known sources for validation (exported for type checking)\n  const KNOWN_SOURCES = new Set(['cinematic_gate', 'battle_pass', 'store', 'profile', 'hero_detail', 'gating_alert', 'gating_check', 'equipment', 'gacha', 'campaign', 'unknown']);\n\n  /**\n   * Options for paywall navigation\n   */\n\n  /**\n   * The ONE route for premium purchases\n   * Change this ONLY here to update all premium navigation\n   */\n  const PAYWALL_ROUTE = '/paid-features';\n  const STORE_ROUTE = '/store';\n\n  // Constraints\n  const MAX_RETURN_TO_LENGTH = 256;\n\n  /**\n   * Sanitize returnTo path to prevent weird routing state\n   * - Must start with '/'\n   * - Strip query fragments\n   * - Clamp length to MAX_RETURN_TO_LENGTH\n   */\n  function sanitizeReturnTo(returnTo) {\n    if (!returnTo) return undefined;\n\n    // Must start with /\n    if (!returnTo.startsWith('/')) {\n      if (__DEV__) console.warn('[navigation] returnTo must start with /, got:', returnTo);\n      return undefined;\n    }\n\n    // Strip query params and fragments (keep clean path only)\n    let cleaned = returnTo.split('?')[0].split('#')[0];\n\n    // Clamp length\n    if (cleaned.length > MAX_RETURN_TO_LENGTH) {\n      if (__DEV__) console.warn('[navigation] returnTo too long, truncating');\n      cleaned = cleaned.substring(0, MAX_RETURN_TO_LENGTH);\n    }\n    return cleaned;\n  }\n\n  /**\n   * Validate and normalize source\n   */\n  function normalizeSource(source) {\n    if (KNOWN_SOURCES.has(source)) {\n      return source;\n    }\n    if (__DEV__) {\n      console.warn('[navigation] Unknown PaywallSource:', source, '- defaulting to \"unknown\"');\n    }\n    return 'unknown';\n  }\n\n  /**\n   * Canonical entry point for all paywall/premium navigation\n   * \n   * USE THIS instead of router.push('/paid-features') or router.push('/store')\n   * \n   * POLICY: If productKey is omitted, routes to general paywall hub.\n   * This is deterministic and documented - Paywall component shows all products.\n   * \n   * TELEMETRY: Emits 'paywall_opened' event (with 1.5s dedupe window)\n   * \n   * @example\n   * // From cinematic gate (specific product)\n   * goToPaywall({ productKey: 'PREMIUM_CINEMATICS_PACK', source: 'cinematic_gate', heroId: hero.id });\n   * \n   * // From battle pass (specific product)\n   * goToPaywall({ productKey: 'PREMIUM_SUBSCRIPTION', source: 'battle_pass' });\n   * \n   * // Generic premium denial (no specific product - shows all options)\n   * goToPaywall({ source: 'gating_alert' });\n   */\n  function goToPaywall(opts) {\n    const {\n      productKey,\n      heroId,\n      returnTo\n    } = opts;\n\n    // Normalize source (strict validation)\n    const source = normalizeSource(opts.source);\n\n    // Sanitize returnTo\n    const cleanReturnTo = sanitizeReturnTo(returnTo);\n    dlog('goToPaywall:', {\n      productKey,\n      source,\n      heroId,\n      returnTo: cleanReturnTo\n    });\n\n    // Phase 3.13: Emit telemetry (with dedupe to prevent spam)\n    if (shouldEmitPaywallEvent()) {\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.PAYWALL_OPENED, {\n        source,\n        productKey: productKey ?? null,\n        heroId: heroId ?? null,\n        returnTo: cleanReturnTo ?? null,\n        isHub: !productKey // True if going to general hub (no specific product)\n      });\n    }\n\n    // Build query params\n    const params = new URLSearchParams();\n    if (productKey) {\n      params.set('productKey', productKey);\n      // Also include productId for convenience\n      const product = (0, _products.getProduct)(productKey);\n      if (product) {\n        params.set('productId', product.productId);\n      }\n    }\n    // NOTE: If productKey is omitted, Paywall shows general hub (all products)\n    // This is documented policy, not an implicit default\n\n    // Source is always set (normalized above)\n    params.set('source', source);\n    if (heroId) {\n      params.set('heroId', heroId);\n    }\n    if (cleanReturnTo) {\n      params.set('returnTo', cleanReturnTo);\n    }\n\n    // Build final route\n    const queryString = params.toString();\n    const route = queryString ? `${PAYWALL_ROUTE}?${queryString}` : PAYWALL_ROUTE;\n    _expoRouter.router.push(route);\n  }\n\n  /**\n   * Navigate to the general store/shop screen\n   * Use this for browsing, not for specific premium denial flows\n   * \n   * TELEMETRY: Emits 'store_opened' event (with 1.5s dedupe window)\n   */\n  function goToStore(source) {\n    const normalizedSource = source ? normalizeSource(source) : 'store';\n    dlog('goToStore:', {\n      source: normalizedSource\n    });\n\n    // Phase 3.13: Emit telemetry (with dedupe to prevent spam)\n    if (shouldEmitStoreEvent()) {\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.STORE_OPENED, {\n        source: normalizedSource\n      });\n    }\n    _expoRouter.router.push(`${STORE_ROUTE}?source=${normalizedSource}`);\n  }\n\n  /**\n   * Navigate to purchase success screen (optional, for post-purchase UX)\n   */\n  function goToPurchaseSuccess(opts) {\n    dlog('goToPurchaseSuccess:', opts);\n\n    // Sanitize returnTo\n    const cleanReturnTo = sanitizeReturnTo(opts?.returnTo);\n\n    // For now, just go back or to a success route\n    // This can be expanded to show a dedicated success screen\n    if (cleanReturnTo) {\n      _expoRouter.router.replace(cleanReturnTo);\n    } else {\n      _expoRouter.router.back();\n    }\n  }\n\n  /**\n   * Get the paywall route for use in gating helpers\n   * (Internal use - screens should use goToPaywall instead)\n   */\n  function getPaywallRoute() {\n    return PAYWALL_ROUTE;\n  }\n\n  /**\n   * Get the store route\n   * (Internal use - screens should use goToStore instead)\n   */\n  function getStoreRoute() {\n    return STORE_ROUTE;\n  }\n\n  // ==============================================================\n  // Phase 3.19.5: Safe Return Path Helper\n  // ==============================================================\n\n  /**\n   * Generate a stable return path so Paywall/Store can send the player back\n   * without each screen inventing logic.\n   * \n   * - Default returnTo: current pathname (no query, sanitized)\n   * - If route is already /paid-features or /store, return '/' (prevents loops)\n   * - If route is undefined, return '/'\n   * \n   * @param currentPath - The current route pathname\n   * @returns A safe, sanitized return path\n   */\n  function getSafeReturnTo(currentPath) {\n    // Clean up the path first\n    const cleaned = sanitizeReturnTo(currentPath ?? '/');\n\n    // If sanitization failed, go to home\n    if (!cleaned) return '/';\n\n    // Prevent navigation loops - if already on paywall/store routes, go home\n    const loopRoutes = [PAYWALL_ROUTE, STORE_ROUTE, '/paid-features', '/store'];\n    if (loopRoutes.some(route => cleaned === route || cleaned.startsWith(route + '?'))) {\n      return '/';\n    }\n    return cleaned;\n  }\n\n  /**\n   * Get current route path (for use in components that need returnTo)\n   * This is a helper that works with expo-router\n   */\n  function useCurrentPath() {\n    // In expo-router, we can use the segments or pathname\n    // For now, return a placeholder that components can override\n    return '/';\n  }\n});","lineCount":312,"map":[[7,2,77,0,"Object"],[7,8,77,0],[7,9,77,0,"defineProperty"],[7,23,77,0],[7,24,77,0,"exports"],[7,31,77,0],[8,4,77,0,"enumerable"],[8,14,77,0],[9,4,77,0,"get"],[9,7,77,0],[9,18,77,0,"get"],[9,19,77,0],[10,6,77,0],[10,13,77,0,"KNOWN_SOURCES"],[10,26,77,0],[11,4,77,0],[12,2,77,0],[13,2,176,0,"exports"],[13,9,176,0],[13,10,176,0,"goToPaywall"],[13,21,176,0],[13,24,176,0,"goToPaywall"],[13,35,176,0],[14,2,238,0,"exports"],[14,9,238,0],[14,10,238,0,"goToStore"],[14,19,238,0],[14,22,238,0,"goToStore"],[14,31,238,0],[15,2,255,0,"exports"],[15,9,255,0],[15,10,255,0,"goToPurchaseSuccess"],[15,29,255,0],[15,32,255,0,"goToPurchaseSuccess"],[15,51,255,0],[16,2,277,0,"exports"],[16,9,277,0],[16,10,277,0,"getPaywallRoute"],[16,25,277,0],[16,28,277,0,"getPaywallRoute"],[16,43,277,0],[17,2,285,0,"exports"],[17,9,285,0],[17,10,285,0,"getStoreRoute"],[17,23,285,0],[17,26,285,0,"getStoreRoute"],[17,39,285,0],[18,2,304,0,"exports"],[18,9,304,0],[18,10,304,0,"getSafeReturnTo"],[18,25,304,0],[18,28,304,0,"getSafeReturnTo"],[18,43,304,0],[19,2,324,0,"exports"],[19,9,324,0],[19,10,324,0,"useCurrentPath"],[19,24,324,0],[19,27,324,0,"useCurrentPath"],[19,41,324,0],[20,2,19,0],[20,6,19,0,"_expoRouter"],[20,17,19,0],[20,20,19,0,"require"],[20,27,19,0],[20,28,19,0,"_dependencyMap"],[20,42,19,0],[21,2,20,0],[21,6,20,0,"_products"],[21,15,20,0],[21,18,20,0,"require"],[21,25,20,0],[21,26,20,0,"_dependencyMap"],[21,40,20,0],[22,2,21,0],[22,6,21,0,"_telemetryEvents"],[22,22,21,0],[22,25,21,0,"require"],[22,32,21,0],[22,33,21,0,"_dependencyMap"],[22,47,21,0],[23,2,1,0],[24,2,2,0],[25,2,3,0],[26,2,4,0],[27,2,5,0],[28,2,6,0],[29,2,7,0],[30,2,8,0],[31,2,9,0],[32,2,10,0],[33,2,11,0],[34,2,12,0],[35,2,13,0],[36,2,14,0],[37,2,15,0],[38,2,16,0],[39,2,17,0],[41,2,23,0],[42,2,24,0],[42,8,24,6,"dlog"],[42,12,24,10],[42,15,24,13,"dlog"],[42,16,24,14],[42,19,24,17,"args"],[42,23,24,28],[42,28,24,33],[43,4,24,35],[43,8,24,39,"__DEV__"],[43,15,24,46],[43,17,24,48,"console"],[43,24,24,55],[43,25,24,56,"log"],[43,28,24,59],[43,29,24,60],[43,43,24,74],[43,45,24,76],[43,48,24,79,"args"],[43,52,24,83],[43,53,24,84],[44,2,24,86],[44,3,24,87],[46,2,26,0],[47,2,27,0],[48,2,28,0],[49,2,29,0],[49,8,29,6,"DEDUPE_WINDOW_MS"],[49,24,29,22],[49,27,29,25],[49,31,29,29],[49,32,29,30],[49,33,29,31],[50,2,30,0],[50,6,30,4,"lastPaywallOpenedAt"],[50,25,30,23],[50,28,30,26],[50,29,30,27],[51,2,31,0],[51,6,31,4,"lastStoreOpenedAt"],[51,23,31,21],[51,26,31,24],[51,27,31,25],[52,2,33,0],[52,11,33,9,"shouldEmitPaywallEvent"],[52,33,33,31,"shouldEmitPaywallEvent"],[52,34,33,31],[52,36,33,43],[53,4,34,2],[53,10,34,8,"now"],[53,13,34,11],[53,16,34,14,"Date"],[53,20,34,18],[53,21,34,19,"now"],[53,24,34,22],[53,25,34,23],[53,26,34,24],[54,4,35,2],[54,8,35,6,"now"],[54,11,35,9],[54,14,35,12,"lastPaywallOpenedAt"],[54,33,35,31],[54,36,35,34,"DEDUPE_WINDOW_MS"],[54,52,35,50],[54,54,35,52],[55,6,36,4,"dlog"],[55,10,36,8],[55,11,36,9],[55,45,36,43],[55,46,36,44],[56,6,37,4],[56,13,37,11],[56,18,37,16],[57,4,38,2],[58,4,39,2,"lastPaywallOpenedAt"],[58,23,39,21],[58,26,39,24,"now"],[58,29,39,27],[59,4,40,2],[59,11,40,9],[59,15,40,13],[60,2,41,0],[61,2,43,0],[61,11,43,9,"shouldEmitStoreEvent"],[61,31,43,29,"shouldEmitStoreEvent"],[61,32,43,29],[61,34,43,41],[62,4,44,2],[62,10,44,8,"now"],[62,13,44,11],[62,16,44,14,"Date"],[62,20,44,18],[62,21,44,19,"now"],[62,24,44,22],[62,25,44,23],[62,26,44,24],[63,4,45,2],[63,8,45,6,"now"],[63,11,45,9],[63,14,45,12,"lastStoreOpenedAt"],[63,31,45,29],[63,34,45,32,"DEDUPE_WINDOW_MS"],[63,50,45,48],[63,52,45,50],[64,6,46,4,"dlog"],[64,10,46,8],[64,11,46,9],[64,43,46,41],[64,44,46,42],[65,6,47,4],[65,13,47,11],[65,18,47,16],[66,4,48,2],[67,4,49,2,"lastStoreOpenedAt"],[67,21,49,19],[67,24,49,22,"now"],[67,27,49,25],[68,4,50,2],[68,11,50,9],[68,15,50,13],[69,2,51,0],[71,2,53,0],[72,2,54,0],[73,2,55,0],[75,2,57,0],[76,0,58,0],[77,0,59,0],[78,0,60,0],[79,0,61,0],[80,0,62,0],[82,2,74,27],[84,2,76,0],[85,2,77,7],[85,8,77,13,"KNOWN_SOURCES"],[85,21,77,26],[85,24,77,29],[85,28,77,33,"Set"],[85,31,77,36],[85,32,77,52],[85,33,78,2],[85,49,78,18],[85,51,78,20],[85,64,78,33],[85,66,78,35],[85,73,78,42],[85,75,78,44],[85,84,78,53],[85,86,78,55],[85,99,78,68],[85,101,79,2],[85,115,79,16],[85,117,79,18],[85,131,79,32],[85,133,79,34],[85,144,79,45],[85,146,79,47],[85,153,79,54],[85,155,79,56],[85,165,79,66],[85,167,79,68],[85,176,79,77],[85,177,80,1],[85,178,80,2],[87,2,82,0],[88,0,83,0],[89,0,84,0],[91,2,105,0],[92,0,106,0],[93,0,107,0],[94,0,108,0],[95,2,109,0],[95,8,109,6,"PAYWALL_ROUTE"],[95,21,109,19],[95,24,109,22],[95,40,109,47],[96,2,110,0],[96,8,110,6,"STORE_ROUTE"],[96,19,110,17],[96,22,110,20],[96,30,110,37],[98,2,112,0],[99,2,113,0],[99,8,113,6,"MAX_RETURN_TO_LENGTH"],[99,28,113,26],[99,31,113,29],[99,34,113,32],[101,2,115,0],[102,0,116,0],[103,0,117,0],[104,0,118,0],[105,0,119,0],[106,0,120,0],[107,2,121,0],[107,11,121,9,"sanitizeReturnTo"],[107,27,121,25,"sanitizeReturnTo"],[107,28,121,26,"returnTo"],[107,36,121,54],[107,38,121,76],[108,4,122,2],[108,8,122,6],[108,9,122,7,"returnTo"],[108,17,122,15],[108,19,122,17],[108,26,122,24,"undefined"],[108,35,122,33],[110,4,124,2],[111,4,125,2],[111,8,125,6],[111,9,125,7,"returnTo"],[111,17,125,15],[111,18,125,16,"startsWith"],[111,28,125,26],[111,29,125,27],[111,32,125,30],[111,33,125,31],[111,35,125,33],[112,6,126,4],[112,10,126,8,"__DEV__"],[112,17,126,15],[112,19,126,17,"console"],[112,26,126,24],[112,27,126,25,"warn"],[112,31,126,29],[112,32,126,30],[112,79,126,77],[112,81,126,79,"returnTo"],[112,89,126,87],[112,90,126,88],[113,6,127,4],[113,13,127,11,"undefined"],[113,22,127,20],[114,4,128,2],[116,4,130,2],[117,4,131,2],[117,8,131,6,"cleaned"],[117,15,131,13],[117,18,131,16,"returnTo"],[117,26,131,24],[117,27,131,25,"split"],[117,32,131,30],[117,33,131,31],[117,36,131,34],[117,37,131,35],[117,38,131,36],[117,39,131,37],[117,40,131,38],[117,41,131,39,"split"],[117,46,131,44],[117,47,131,45],[117,50,131,48],[117,51,131,49],[117,52,131,50],[117,53,131,51],[117,54,131,52],[119,4,133,2],[120,4,134,2],[120,8,134,6,"cleaned"],[120,15,134,13],[120,16,134,14,"length"],[120,22,134,20],[120,25,134,23,"MAX_RETURN_TO_LENGTH"],[120,45,134,43],[120,47,134,45],[121,6,135,4],[121,10,135,8,"__DEV__"],[121,17,135,15],[121,19,135,17,"console"],[121,26,135,24],[121,27,135,25,"warn"],[121,31,135,29],[121,32,135,30],[121,76,135,74],[121,77,135,75],[122,6,136,4,"cleaned"],[122,13,136,11],[122,16,136,14,"cleaned"],[122,23,136,21],[122,24,136,22,"substring"],[122,33,136,31],[122,34,136,32],[122,35,136,33],[122,37,136,35,"MAX_RETURN_TO_LENGTH"],[122,57,136,55],[122,58,136,56],[123,4,137,2],[124,4,139,2],[124,11,139,9,"cleaned"],[124,18,139,16],[125,2,140,0],[127,2,142,0],[128,0,143,0],[129,0,144,0],[130,2,145,0],[130,11,145,9,"normalizeSource"],[130,26,145,24,"normalizeSource"],[130,27,145,25,"source"],[130,33,145,46],[130,35,145,63],[131,4,146,2],[131,8,146,6,"KNOWN_SOURCES"],[131,21,146,19],[131,22,146,20,"has"],[131,25,146,23],[131,26,146,24,"source"],[131,32,146,30],[131,33,146,31],[131,35,146,33],[132,6,147,4],[132,13,147,11,"source"],[132,19,147,17],[133,4,148,2],[134,4,150,2],[134,8,150,6,"__DEV__"],[134,15,150,13],[134,17,150,15],[135,6,151,4,"console"],[135,13,151,11],[135,14,151,12,"warn"],[135,18,151,16],[135,19,151,17],[135,56,151,54],[135,58,151,56,"source"],[135,64,151,62],[135,66,151,64],[135,93,151,91],[135,94,151,92],[136,4,152,2],[137,4,153,2],[137,11,153,9],[137,20,153,18],[138,2,154,0],[140,2,156,0],[141,0,157,0],[142,0,158,0],[143,0,159,0],[144,0,160,0],[145,0,161,0],[146,0,162,0],[147,0,163,0],[148,0,164,0],[149,0,165,0],[150,0,166,0],[151,0,167,0],[152,0,168,0],[153,0,169,0],[154,0,170,0],[155,0,171,0],[156,0,172,0],[157,0,173,0],[158,0,174,0],[159,0,175,0],[160,2,176,7],[160,11,176,16,"goToPaywall"],[160,22,176,27,"goToPaywall"],[160,23,176,28,"opts"],[160,27,176,52],[160,29,176,60],[161,4,177,2],[161,10,177,8],[162,6,177,10,"productKey"],[162,16,177,20],[163,6,177,22,"heroId"],[163,12,177,28],[164,6,177,30,"returnTo"],[165,4,177,39],[165,5,177,40],[165,8,177,43,"opts"],[165,12,177,47],[167,4,179,2],[168,4,180,2],[168,10,180,8,"source"],[168,16,180,14],[168,19,180,17,"normalizeSource"],[168,34,180,32],[168,35,180,33,"opts"],[168,39,180,37],[168,40,180,38,"source"],[168,46,180,44],[168,47,180,45],[170,4,182,2],[171,4,183,2],[171,10,183,8,"cleanReturnTo"],[171,23,183,21],[171,26,183,24,"sanitizeReturnTo"],[171,42,183,40],[171,43,183,41,"returnTo"],[171,51,183,49],[171,52,183,50],[172,4,185,2,"dlog"],[172,8,185,6],[172,9,185,7],[172,23,185,21],[172,25,185,23],[173,6,185,25,"productKey"],[173,16,185,35],[174,6,185,37,"source"],[174,12,185,43],[175,6,185,45,"heroId"],[175,12,185,51],[176,6,185,53,"returnTo"],[176,14,185,61],[176,16,185,63,"cleanReturnTo"],[177,4,185,77],[177,5,185,78],[177,6,185,79],[179,4,187,2],[180,4,188,2],[180,8,188,6,"shouldEmitPaywallEvent"],[180,30,188,28],[180,31,188,29],[180,32,188,30],[180,34,188,32],[181,6,189,4],[181,10,189,4,"track"],[181,26,189,9],[181,27,189,9,"track"],[181,32,189,9],[181,34,189,10,"Events"],[181,50,189,16],[181,51,189,16,"Events"],[181,57,189,16],[181,58,189,17,"PAYWALL_OPENED"],[181,72,189,31],[181,74,189,33],[182,8,190,6,"source"],[182,14,190,12],[183,8,191,6,"productKey"],[183,18,191,16],[183,20,191,18,"productKey"],[183,30,191,28],[183,34,191,32],[183,38,191,36],[184,8,192,6,"heroId"],[184,14,192,12],[184,16,192,14,"heroId"],[184,22,192,20],[184,26,192,24],[184,30,192,28],[185,8,193,6,"returnTo"],[185,16,193,14],[185,18,193,16,"cleanReturnTo"],[185,31,193,29],[185,35,193,33],[185,39,193,37],[186,8,194,6,"isHub"],[186,13,194,11],[186,15,194,13],[186,16,194,14,"productKey"],[186,26,194,24],[186,27,194,27],[187,6,195,4],[187,7,195,5],[187,8,195,6],[188,4,196,2],[190,4,198,2],[191,4,199,2],[191,10,199,8,"params"],[191,16,199,14],[191,19,199,17],[191,23,199,21,"URLSearchParams"],[191,38,199,36],[191,39,199,37],[191,40,199,38],[192,4,201,2],[192,8,201,6,"productKey"],[192,18,201,16],[192,20,201,18],[193,6,202,4,"params"],[193,12,202,10],[193,13,202,11,"set"],[193,16,202,14],[193,17,202,15],[193,29,202,27],[193,31,202,29,"productKey"],[193,41,202,39],[193,42,202,40],[194,6,203,4],[195,6,204,4],[195,12,204,10,"product"],[195,19,204,17],[195,22,204,20],[195,26,204,20,"getProduct"],[195,35,204,30],[195,36,204,30,"getProduct"],[195,46,204,30],[195,48,204,31,"productKey"],[195,58,204,41],[195,59,204,42],[196,6,205,4],[196,10,205,8,"product"],[196,17,205,15],[196,19,205,17],[197,8,206,6,"params"],[197,14,206,12],[197,15,206,13,"set"],[197,18,206,16],[197,19,206,17],[197,30,206,28],[197,32,206,30,"product"],[197,39,206,37],[197,40,206,38,"productId"],[197,49,206,47],[197,50,206,48],[198,6,207,4],[199,4,208,2],[200,4,209,2],[201,4,210,2],[203,4,212,2],[204,4,213,2,"params"],[204,10,213,8],[204,11,213,9,"set"],[204,14,213,12],[204,15,213,13],[204,23,213,21],[204,25,213,23,"source"],[204,31,213,29],[204,32,213,30],[205,4,215,2],[205,8,215,6,"heroId"],[205,14,215,12],[205,16,215,14],[206,6,216,4,"params"],[206,12,216,10],[206,13,216,11,"set"],[206,16,216,14],[206,17,216,15],[206,25,216,23],[206,27,216,25,"heroId"],[206,33,216,31],[206,34,216,32],[207,4,217,2],[208,4,219,2],[208,8,219,6,"cleanReturnTo"],[208,21,219,19],[208,23,219,21],[209,6,220,4,"params"],[209,12,220,10],[209,13,220,11,"set"],[209,16,220,14],[209,17,220,15],[209,27,220,25],[209,29,220,27,"cleanReturnTo"],[209,42,220,40],[209,43,220,41],[210,4,221,2],[212,4,223,2],[213,4,224,2],[213,10,224,8,"queryString"],[213,21,224,19],[213,24,224,22,"params"],[213,30,224,28],[213,31,224,29,"toString"],[213,39,224,37],[213,40,224,38],[213,41,224,39],[214,4,225,2],[214,10,225,8,"route"],[214,15,225,13],[214,18,225,16,"queryString"],[214,29,225,27],[214,32,226,6],[214,35,226,9,"PAYWALL_ROUTE"],[214,48,226,22],[214,52,226,26,"queryString"],[214,63,226,37],[214,65,226,39],[214,68,227,6,"PAYWALL_ROUTE"],[214,81,227,19],[215,4,229,2,"router"],[215,15,229,8],[215,16,229,8,"router"],[215,22,229,8],[215,23,229,9,"push"],[215,27,229,13],[215,28,229,14,"route"],[215,33,229,26],[215,34,229,27],[216,2,230,0],[218,2,232,0],[219,0,233,0],[220,0,234,0],[221,0,235,0],[222,0,236,0],[223,0,237,0],[224,2,238,7],[224,11,238,16,"goToStore"],[224,20,238,25,"goToStore"],[224,21,238,26,"source"],[224,27,238,48],[224,29,238,56],[225,4,239,2],[225,10,239,8,"normalizedSource"],[225,26,239,24],[225,29,239,27,"source"],[225,35,239,33],[225,38,239,36,"normalizeSource"],[225,53,239,51],[225,54,239,52,"source"],[225,60,239,58],[225,61,239,59],[225,64,239,62],[225,71,239,69],[226,4,240,2,"dlog"],[226,8,240,6],[226,9,240,7],[226,21,240,19],[226,23,240,21],[227,6,240,23,"source"],[227,12,240,29],[227,14,240,31,"normalizedSource"],[228,4,240,48],[228,5,240,49],[228,6,240,50],[230,4,242,2],[231,4,243,2],[231,8,243,6,"shouldEmitStoreEvent"],[231,28,243,26],[231,29,243,27],[231,30,243,28],[231,32,243,30],[232,6,244,4],[232,10,244,4,"track"],[232,26,244,9],[232,27,244,9,"track"],[232,32,244,9],[232,34,244,10,"Events"],[232,50,244,16],[232,51,244,16,"Events"],[232,57,244,16],[232,58,244,17,"STORE_OPENED"],[232,70,244,29],[232,72,244,31],[233,8,245,6,"source"],[233,14,245,12],[233,16,245,14,"normalizedSource"],[234,6,246,4],[234,7,246,5],[234,8,246,6],[235,4,247,2],[236,4,249,2,"router"],[236,15,249,8],[236,16,249,8,"router"],[236,22,249,8],[236,23,249,9,"push"],[236,27,249,13],[236,28,249,14],[236,31,249,17,"STORE_ROUTE"],[236,42,249,28],[236,53,249,39,"normalizedSource"],[236,69,249,55],[236,71,249,64],[236,72,249,65],[237,2,250,0],[239,2,252,0],[240,0,253,0],[241,0,254,0],[242,2,255,7],[242,11,255,16,"goToPurchaseSuccess"],[242,30,255,35,"goToPurchaseSuccess"],[242,31,255,36,"opts"],[242,35,258,1],[242,37,258,9],[243,4,259,2,"dlog"],[243,8,259,6],[243,9,259,7],[243,31,259,29],[243,33,259,31,"opts"],[243,37,259,35],[243,38,259,36],[245,4,261,2],[246,4,262,2],[246,10,262,8,"cleanReturnTo"],[246,23,262,21],[246,26,262,24,"sanitizeReturnTo"],[246,42,262,40],[246,43,262,41,"opts"],[246,47,262,45],[246,49,262,47,"returnTo"],[246,57,262,55],[246,58,262,56],[248,4,264,2],[249,4,265,2],[250,4,266,2],[250,8,266,6,"cleanReturnTo"],[250,21,266,19],[250,23,266,21],[251,6,267,4,"router"],[251,17,267,10],[251,18,267,10,"router"],[251,24,267,10],[251,25,267,11,"replace"],[251,32,267,18],[251,33,267,19,"cleanReturnTo"],[251,46,267,39],[251,47,267,40],[252,4,268,2],[252,5,268,3],[252,11,268,9],[253,6,269,4,"router"],[253,17,269,10],[253,18,269,10,"router"],[253,24,269,10],[253,25,269,11,"back"],[253,29,269,15],[253,30,269,16],[253,31,269,17],[254,4,270,2],[255,2,271,0],[257,2,273,0],[258,0,274,0],[259,0,275,0],[260,0,276,0],[261,2,277,7],[261,11,277,16,"getPaywallRoute"],[261,26,277,31,"getPaywallRoute"],[261,27,277,31],[261,29,277,42],[262,4,278,2],[262,11,278,9,"PAYWALL_ROUTE"],[262,24,278,22],[263,2,279,0],[265,2,281,0],[266,0,282,0],[267,0,283,0],[268,0,284,0],[269,2,285,7],[269,11,285,16,"getStoreRoute"],[269,24,285,29,"getStoreRoute"],[269,25,285,29],[269,27,285,40],[270,4,286,2],[270,11,286,9,"STORE_ROUTE"],[270,22,286,20],[271,2,287,0],[273,2,289,0],[274,2,290,0],[275,2,291,0],[277,2,293,0],[278,0,294,0],[279,0,295,0],[280,0,296,0],[281,0,297,0],[282,0,298,0],[283,0,299,0],[284,0,300,0],[285,0,301,0],[286,0,302,0],[287,0,303,0],[288,2,304,7],[288,11,304,16,"getSafeReturnTo"],[288,26,304,31,"getSafeReturnTo"],[288,27,304,32,"currentPath"],[288,38,304,52],[288,40,304,62],[289,4,305,2],[290,4,306,2],[290,10,306,8,"cleaned"],[290,17,306,15],[290,20,306,18,"sanitizeReturnTo"],[290,36,306,34],[290,37,306,35,"currentPath"],[290,48,306,46],[290,52,306,50],[290,55,306,53],[290,56,306,54],[292,4,308,2],[293,4,309,2],[293,8,309,6],[293,9,309,7,"cleaned"],[293,16,309,14],[293,18,309,16],[293,25,309,23],[293,28,309,26],[295,4,311,2],[296,4,312,2],[296,10,312,8,"loopRoutes"],[296,20,312,18],[296,23,312,21],[296,24,312,22,"PAYWALL_ROUTE"],[296,37,312,35],[296,39,312,37,"STORE_ROUTE"],[296,50,312,48],[296,52,312,50],[296,68,312,66],[296,70,312,68],[296,78,312,76],[296,79,312,77],[297,4,313,2],[297,8,313,6,"loopRoutes"],[297,18,313,16],[297,19,313,17,"some"],[297,23,313,21],[297,24,313,22,"route"],[297,29,313,27],[297,33,313,31,"cleaned"],[297,40,313,38],[297,45,313,43,"route"],[297,50,313,48],[297,54,313,52,"cleaned"],[297,61,313,59],[297,62,313,60,"startsWith"],[297,72,313,70],[297,73,313,71,"route"],[297,78,313,76],[297,81,313,79],[297,84,313,82],[297,85,313,83],[297,86,313,84],[297,88,313,86],[298,6,314,4],[298,13,314,11],[298,16,314,14],[299,4,315,2],[300,4,317,2],[300,11,317,9,"cleaned"],[300,18,317,16],[301,2,318,0],[303,2,320,0],[304,0,321,0],[305,0,322,0],[306,0,323,0],[307,2,324,7],[307,11,324,16,"useCurrentPath"],[307,25,324,30,"useCurrentPath"],[307,26,324,30],[307,28,324,41],[308,4,325,2],[309,4,326,2],[310,4,327,2],[310,11,327,9],[310,14,327,12],[311,2,328,0],[312,0,328,1],[312,3]],"functionMap":{"names":["<global>","dlog","shouldEmitPaywallEvent","shouldEmitStoreEvent","sanitizeReturnTo","normalizeSource","goToPaywall","goToStore","goToPurchaseSuccess","getPaywallRoute","getStoreRoute","getSafeReturnTo","loopRoutes.some$argument_0","useCurrentPath"],"mappings":"AAA;aCuB,0ED;AES;CFQ;AGE;CHQ;AIsE;CJmB;AKK;CLS;OMsB;CNsD;OOQ;CPY;OQK;CRgB;OSM;CTE;OUM;CVE;OWiB;sBCS,6DD;CXK;OaM;CbI"},"hasCjsExports":false},"type":"js/module"}]}