{"dependencies":[{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":227},"end":{"line":6,"column":37,"index":264}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../../stores/entitlementStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":265},"end":{"line":7,"column":68,"index":333}}],"key":"T9mnBESpZyYD0JmqLo9WlYP7WXA=","exportNames":["*"],"imports":1}},{"name":"./types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":334},"end":{"line":8,"column":42,"index":376}}],"key":"iV91Bk2eI9buML90FP6cK2SM5h0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.hasEntitlement = hasEntitlement;\n  exports.requireEntitlement = requireEntitlement;\n  exports.useHasEntitlement = useHasEntitlement;\n  exports.hasPremiumCinematicsPack = hasPremiumCinematicsPack;\n  exports.hasHeroCinematic = hasHeroCinematic;\n  exports.canAccessHeroCinematic = canAccessHeroCinematic;\n  exports.requireCinematicAccess = requireCinematicAccess;\n  exports.hasProSubscription = hasProSubscription;\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[0], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  var _expoRouter = require(_dependencyMap[1], \"expo-router\");\n  var _storesEntitlementStore = require(_dependencyMap[2], \"../../stores/entitlementStore\");\n  var _types = require(_dependencyMap[3], \"./types\");\n  // /app/frontend/lib/entitlements/gating.ts\n  // Entitlement gating helpers - enforce premium access at UI/navigation level\n  // Server-side enforcement is separate (backend must also reject)\n\n  /**\n   * Check if user has a specific entitlement\n   * Use this for simple boolean checks in UI\n   */\n  function hasEntitlement(key) {\n    return _storesEntitlementStore.useEntitlementStore.getState().hasEntitlement(key);\n  }\n\n  /**\n   * Require entitlement or show paywall\n   * Use this for guarding premium actions/navigation\n   * \n   * @returns true if entitled, false if blocked (and redirected to paywall)\n   */\n  function requireEntitlement(key, options) {\n    const isEntitled = hasEntitlement(key);\n    if (isEntitled) {\n      return true;\n    }\n    const {\n      alertTitle = 'Premium Feature',\n      alertMessage = 'This feature requires a premium purchase.',\n      showPaywall = true,\n      paywallRoute = '/store'\n    } = options ?? {};\n    Alert.default.alert(alertTitle, alertMessage, showPaywall ? [{\n      text: 'Cancel',\n      style: 'cancel'\n    }, {\n      text: 'View Store',\n      onPress: () => _expoRouter.router.push(paywallRoute)\n    }] : [{\n      text: 'OK'\n    }]);\n    return false;\n  }\n\n  /**\n   * Hook version of hasEntitlement for reactive components\n   */\n  function useHasEntitlement(key) {\n    return (0, _storesEntitlementStore.useEntitlementStore)(s => s.hasEntitlement(key));\n  }\n\n  /**\n   * Check premium cinematics pack ownership\n   */\n  function hasPremiumCinematicsPack() {\n    return hasEntitlement(_types.EntitlementKeys.PREMIUM_CINEMATICS_PACK);\n  }\n\n  /**\n   * Check specific hero cinematic ownership\n   */\n  function hasHeroCinematic(heroId) {\n    return hasEntitlement(_types.EntitlementKeys.premiumCinematicOwned(heroId));\n  }\n\n  /**\n   * Check if user can access any premium cinematic\n   * (either owns pack or individual hero cinematic)\n   */\n  function canAccessHeroCinematic(heroId) {\n    return hasPremiumCinematicsPack() || hasHeroCinematic(heroId);\n  }\n\n  /**\n   * Require premium cinematic access or show paywall\n   */\n  function requireCinematicAccess(heroId) {\n    if (canAccessHeroCinematic(heroId)) {\n      return true;\n    }\n    return requireEntitlement(_types.EntitlementKeys.PREMIUM_CINEMATICS_PACK, {\n      alertTitle: 'Premium Cinematic',\n      alertMessage: 'Unlock this cinematic with the Premium Cinematics Pack or purchase it individually.'\n    });\n  }\n\n  /**\n   * Check Pro subscription status\n   */\n  function hasProSubscription() {\n    return hasEntitlement(_types.EntitlementKeys.PRO_SUBSCRIPTION);\n  }\n});","lineCount":114,"map":[[12,2,14,0,"exports"],[12,9,14,0],[12,10,14,0,"hasEntitlement"],[12,24,14,0],[12,27,14,0,"hasEntitlement"],[12,41,14,0],[13,2,24,0,"exports"],[13,9,24,0],[13,10,24,0,"requireEntitlement"],[13,28,24,0],[13,31,24,0,"requireEntitlement"],[13,49,24,0],[14,2,66,0,"exports"],[14,9,66,0],[14,10,66,0,"useHasEntitlement"],[14,27,66,0],[14,30,66,0,"useHasEntitlement"],[14,47,66,0],[15,2,73,0,"exports"],[15,9,73,0],[15,10,73,0,"hasPremiumCinematicsPack"],[15,34,73,0],[15,37,73,0,"hasPremiumCinematicsPack"],[15,61,73,0],[16,2,80,0,"exports"],[16,9,80,0],[16,10,80,0,"hasHeroCinematic"],[16,26,80,0],[16,29,80,0,"hasHeroCinematic"],[16,45,80,0],[17,2,88,0,"exports"],[17,9,88,0],[17,10,88,0,"canAccessHeroCinematic"],[17,32,88,0],[17,35,88,0,"canAccessHeroCinematic"],[17,57,88,0],[18,2,95,0,"exports"],[18,9,95,0],[18,10,95,0,"requireCinematicAccess"],[18,32,95,0],[18,35,95,0,"requireCinematicAccess"],[18,57,95,0],[19,2,112,0,"exports"],[19,9,112,0],[19,10,112,0,"hasProSubscription"],[19,28,112,0],[19,31,112,0,"hasProSubscription"],[19,49,112,0],[20,2,114,1],[20,6,114,1,"_reactNativeWebDistExportsAlert"],[20,37,114,1],[20,40,114,1,"require"],[20,47,114,1],[20,48,114,1,"_dependencyMap"],[20,62,114,1],[21,2,114,1],[21,6,114,1,"Alert"],[21,11,114,1],[21,14,114,1,"_interopDefault"],[21,29,114,1],[21,30,114,1,"_reactNativeWebDistExportsAlert"],[21,61,114,1],[22,2,6,0],[22,6,6,0,"_expoRouter"],[22,17,6,0],[22,20,6,0,"require"],[22,27,6,0],[22,28,6,0,"_dependencyMap"],[22,42,6,0],[23,2,7,0],[23,6,7,0,"_storesEntitlementStore"],[23,29,7,0],[23,32,7,0,"require"],[23,39,7,0],[23,40,7,0,"_dependencyMap"],[23,54,7,0],[24,2,8,0],[24,6,8,0,"_types"],[24,12,8,0],[24,15,8,0,"require"],[24,22,8,0],[24,23,8,0,"_dependencyMap"],[24,37,8,0],[25,2,1,0],[26,2,2,0],[27,2,3,0],[29,2,10,0],[30,0,11,0],[31,0,12,0],[32,0,13,0],[33,2,14,7],[33,11,14,16,"hasEntitlement"],[33,25,14,30,"hasEntitlement"],[33,26,14,31,"key"],[33,29,14,42],[33,31,14,53],[34,4,15,2],[34,11,15,9,"useEntitlementStore"],[34,34,15,28],[34,35,15,28,"useEntitlementStore"],[34,54,15,28],[34,55,15,29,"getState"],[34,63,15,37],[34,64,15,38],[34,65,15,39],[34,66,15,40,"hasEntitlement"],[34,80,15,54],[34,81,15,55,"key"],[34,84,15,58],[34,85,15,59],[35,2,16,0],[37,2,18,0],[38,0,19,0],[39,0,20,0],[40,0,21,0],[41,0,22,0],[42,0,23,0],[43,2,24,7],[43,11,24,16,"requireEntitlement"],[43,29,24,34,"requireEntitlement"],[43,30,25,2,"key"],[43,33,25,13],[43,35,26,2,"options"],[43,42,31,3],[43,44,32,11],[44,4,33,2],[44,10,33,8,"isEntitled"],[44,20,33,18],[44,23,33,21,"hasEntitlement"],[44,37,33,35],[44,38,33,36,"key"],[44,41,33,39],[44,42,33,40],[45,4,35,2],[45,8,35,6,"isEntitled"],[45,18,35,16],[45,20,35,18],[46,6,36,4],[46,13,36,11],[46,17,36,15],[47,4,37,2],[48,4,39,2],[48,10,39,8],[49,6,40,4,"alertTitle"],[49,16,40,14],[49,19,40,17],[49,36,40,34],[50,6,41,4,"alertMessage"],[50,18,41,16],[50,21,41,19],[50,64,41,62],[51,6,42,4,"showPaywall"],[51,17,42,15],[51,20,42,18],[51,24,42,22],[52,6,43,4,"paywallRoute"],[52,18,43,16],[52,21,43,19],[53,4,44,2],[53,5,44,3],[53,8,44,6,"options"],[53,15,44,13],[53,19,44,17],[53,20,44,18],[53,21,44,19],[54,4,46,2,"Alert"],[54,9,46,7],[54,10,46,7,"default"],[54,17,46,7],[54,18,46,8,"alert"],[54,23,46,13],[54,24,47,4,"alertTitle"],[54,34,47,14],[54,36,48,4,"alertMessage"],[54,48,48,16],[54,50,49,4,"showPaywall"],[54,61,49,15],[54,64,50,8],[54,65,51,10],[55,6,51,12,"text"],[55,10,51,16],[55,12,51,18],[55,20,51,26],[56,6,51,28,"style"],[56,11,51,33],[56,13,51,35],[57,4,51,44],[57,5,51,45],[57,7,52,10],[58,6,53,12,"text"],[58,10,53,16],[58,12,53,18],[58,24,53,30],[59,6,54,12,"onPress"],[59,13,54,19],[59,15,54,21,"onPress"],[59,16,54,21],[59,21,54,27,"router"],[59,32,54,33],[59,33,54,33,"router"],[59,39,54,33],[59,40,54,34,"push"],[59,44,54,38],[59,45,54,39,"paywallRoute"],[59,57,54,58],[60,4,55,10],[60,5,55,11],[60,6,56,9],[60,9,57,8],[60,10,57,9],[61,6,57,11,"text"],[61,10,57,15],[61,12,57,17],[62,4,57,22],[62,5,57,23],[62,6,58,2],[62,7,58,3],[63,4,60,2],[63,11,60,9],[63,16,60,14],[64,2,61,0],[66,2,63,0],[67,0,64,0],[68,0,65,0],[69,2,66,7],[69,11,66,16,"useHasEntitlement"],[69,28,66,33,"useHasEntitlement"],[69,29,66,34,"key"],[69,32,66,45],[69,34,66,56],[70,4,67,2],[70,11,67,9],[70,15,67,9,"useEntitlementStore"],[70,38,67,28],[70,39,67,28,"useEntitlementStore"],[70,58,67,28],[70,60,67,29,"s"],[70,61,67,30],[70,65,67,34,"s"],[70,66,67,35],[70,67,67,36,"hasEntitlement"],[70,81,67,50],[70,82,67,51,"key"],[70,85,67,54],[70,86,67,55],[70,87,67,56],[71,2,68,0],[73,2,70,0],[74,0,71,0],[75,0,72,0],[76,2,73,7],[76,11,73,16,"hasPremiumCinematicsPack"],[76,35,73,40,"hasPremiumCinematicsPack"],[76,36,73,40],[76,38,73,52],[77,4,74,2],[77,11,74,9,"hasEntitlement"],[77,25,74,23],[77,26,74,24,"EntitlementKeys"],[77,32,74,39],[77,33,74,39,"EntitlementKeys"],[77,48,74,39],[77,49,74,40,"PREMIUM_CINEMATICS_PACK"],[77,72,74,63],[77,73,74,64],[78,2,75,0],[80,2,77,0],[81,0,78,0],[82,0,79,0],[83,2,80,7],[83,11,80,16,"hasHeroCinematic"],[83,27,80,32,"hasHeroCinematic"],[83,28,80,33,"heroId"],[83,34,80,47],[83,36,80,58],[84,4,81,2],[84,11,81,9,"hasEntitlement"],[84,25,81,23],[84,26,81,24,"EntitlementKeys"],[84,32,81,39],[84,33,81,39,"EntitlementKeys"],[84,48,81,39],[84,49,81,40,"premiumCinematicOwned"],[84,70,81,61],[84,71,81,62,"heroId"],[84,77,81,68],[84,78,81,69],[84,79,81,70],[85,2,82,0],[87,2,84,0],[88,0,85,0],[89,0,86,0],[90,0,87,0],[91,2,88,7],[91,11,88,16,"canAccessHeroCinematic"],[91,33,88,38,"canAccessHeroCinematic"],[91,34,88,39,"heroId"],[91,40,88,53],[91,42,88,64],[92,4,89,2],[92,11,89,9,"hasPremiumCinematicsPack"],[92,35,89,33],[92,36,89,34],[92,37,89,35],[92,41,89,39,"hasHeroCinematic"],[92,57,89,55],[92,58,89,56,"heroId"],[92,64,89,62],[92,65,89,63],[93,2,90,0],[95,2,92,0],[96,0,93,0],[97,0,94,0],[98,2,95,7],[98,11,95,16,"requireCinematicAccess"],[98,33,95,38,"requireCinematicAccess"],[98,34,95,39,"heroId"],[98,40,95,53],[98,42,95,64],[99,4,96,2],[99,8,96,6,"canAccessHeroCinematic"],[99,30,96,28],[99,31,96,29,"heroId"],[99,37,96,35],[99,38,96,36],[99,40,96,38],[100,6,97,4],[100,13,97,11],[100,17,97,15],[101,4,98,2],[102,4,100,2],[102,11,100,9,"requireEntitlement"],[102,29,100,27],[102,30,101,4,"EntitlementKeys"],[102,36,101,19],[102,37,101,19,"EntitlementKeys"],[102,52,101,19],[102,53,101,20,"PREMIUM_CINEMATICS_PACK"],[102,76,101,43],[102,78,102,4],[103,6,103,6,"alertTitle"],[103,16,103,16],[103,18,103,18],[103,37,103,37],[104,6,104,6,"alertMessage"],[104,18,104,18],[104,20,104,20],[105,4,105,4],[105,5,106,2],[105,6,106,3],[106,2,107,0],[108,2,109,0],[109,0,110,0],[110,0,111,0],[111,2,112,7],[111,11,112,16,"hasProSubscription"],[111,29,112,34,"hasProSubscription"],[111,30,112,34],[111,32,112,46],[112,4,113,2],[112,11,113,9,"hasEntitlement"],[112,25,113,23],[112,26,113,24,"EntitlementKeys"],[112,32,113,39],[112,33,113,39,"EntitlementKeys"],[112,48,113,39],[112,49,113,40,"PRO_SUBSCRIPTION"],[112,65,113,56],[112,66,113,57],[113,2,114,0],[114,0,114,1],[114,3]],"functionMap":{"names":["<global>","hasEntitlement","requireEntitlement","onPress","useHasEntitlement","useEntitlementStore$argument_0","hasPremiumCinematicsPack","hasHeroCinematic","canAccessHeroCinematic","requireCinematicAccess","hasProSubscription"],"mappings":"AAA;OCa;CDE;OEQ;qBC8B,sCD;CFO;OIK;6BCC,0BD;CJC;OMK;CNE;OOK;CPE;OQM;CRE;OSK;CTY;OUK;CVE"},"hasCjsExports":false},"type":"js/module"}]}