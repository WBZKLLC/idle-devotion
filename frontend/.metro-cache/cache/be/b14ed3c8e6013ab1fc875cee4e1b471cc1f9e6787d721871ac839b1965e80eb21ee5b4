{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getFriendsSummary = getFriendsSummary;\n  exports.getFriendsList = getFriendsList;\n  exports.getFriendRequests = getFriendRequests;\n  exports.acceptFriendRequest = acceptFriendRequest;\n  exports.declineFriendRequest = declineFriendRequest;\n  exports.searchPlayers = searchPlayers;\n  exports.sendFriendRequest = sendFriendRequest;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  // /app/frontend/lib/api/friends.ts\n  // Phase 3.23.2: Friends API Layer\n  //\n  // Canonical API calls for friends system.\n  // Graceful error handling â€” returns defaults on failure.\n\n  const API_BASE = _expoVirtualEnv.env.EXPO_PUBLIC_API_URL || '';\n\n  /**\n   * Get friends summary (badge counts)\n   */\n  async function getFriendsSummary(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/friends/summary/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch friends summary');\n      return await res.json();\n    } catch {\n      return {\n        pendingRequests: 0,\n        totalFriends: 0\n      };\n    }\n  }\n\n  /**\n   * Get friends list\n   */\n  async function getFriendsList(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/friends/list/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch friends list');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get friend requests\n   */\n  async function getFriendRequests(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/friends/requests/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch friend requests');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Accept friend request\n   */\n  async function acceptFriendRequest(username, requestId) {\n    const res = await fetch(`${API_BASE}/api/friends/requests/${username}/${requestId}/accept`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to accept request');\n  }\n\n  /**\n   * Decline friend request\n   */\n  async function declineFriendRequest(username, requestId) {\n    const res = await fetch(`${API_BASE}/api/friends/requests/${username}/${requestId}/decline`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to decline request');\n  }\n\n  /**\n   * Search for players\n   */\n  async function searchPlayers(query) {\n    if (!query || query.length < 2) return [];\n    try {\n      const res = await fetch(`${API_BASE}/api/friends/search?q=${encodeURIComponent(query)}`);\n      if (!res.ok) throw new Error('Failed to search players');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Send friend request\n   */\n  async function sendFriendRequest(fromUsername, toUsername) {\n    const res = await fetch(`${API_BASE}/api/friends/requests/send`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: fromUsername,\n        to: toUsername\n      })\n    });\n    if (!res.ok) throw new Error('Failed to send request');\n  }\n});","lineCount":115,"map":[[7,2,12,0,"exports"],[7,9,12,0],[7,10,12,0,"getFriendsSummary"],[7,27,12,0],[7,30,12,0,"getFriendsSummary"],[7,47,12,0],[8,2,28,0,"exports"],[8,9,28,0],[8,10,28,0,"getFriendsList"],[8,24,28,0],[8,27,28,0,"getFriendsList"],[8,41,28,0],[9,2,47,0,"exports"],[9,9,47,0],[9,10,47,0,"getFriendRequests"],[9,27,47,0],[9,30,47,0,"getFriendRequests"],[9,47,47,0],[10,2,64,0,"exports"],[10,9,64,0],[10,10,64,0,"acceptFriendRequest"],[10,29,64,0],[10,32,64,0,"acceptFriendRequest"],[10,51,64,0],[11,2,74,0,"exports"],[11,9,74,0],[11,10,74,0,"declineFriendRequest"],[11,30,74,0],[11,33,74,0,"declineFriendRequest"],[11,53,74,0],[12,2,84,0,"exports"],[12,9,84,0],[12,10,84,0,"searchPlayers"],[12,23,84,0],[12,26,84,0,"searchPlayers"],[12,39,84,0],[13,2,105,0,"exports"],[13,9,105,0],[13,10,105,0,"sendFriendRequest"],[13,27,105,0],[13,30,105,0,"sendFriendRequest"],[13,47,105,0],[14,2,112,1],[14,6,112,1,"_expoVirtualEnv"],[14,21,112,1],[14,24,112,1,"require"],[14,31,112,1],[14,32,112,1,"_dependencyMap"],[14,46,112,1],[15,2,1,0],[16,2,2,0],[17,2,3,0],[18,2,4,0],[19,2,5,0],[21,2,7,0],[21,8,7,6,"API_BASE"],[21,16,7,14],[21,19,7,17,"_expoVirtualEnv"],[21,34,7,17],[21,35,7,17,"env"],[21,38,7,17],[21,39,7,17,"EXPO_PUBLIC_API_URL"],[21,58,7,17],[21,62,7,52],[21,64,7,54],[23,2,9,0],[24,0,10,0],[25,0,11,0],[26,2,12,7],[26,17,12,22,"getFriendsSummary"],[26,34,12,39,"getFriendsSummary"],[26,35,12,40,"username"],[26,43,12,56],[26,45,15,3],[27,4,16,2],[27,8,16,6],[28,6,17,4],[28,12,17,10,"res"],[28,15,17,13],[28,18,17,16],[28,24,17,22,"fetch"],[28,29,17,27],[28,30,17,28],[28,33,17,31,"API_BASE"],[28,41,17,39],[28,65,17,63,"username"],[28,73,17,71],[28,75,17,73],[28,76,17,74],[29,6,18,4],[29,10,18,8],[29,11,18,9,"res"],[29,14,18,12],[29,15,18,13,"ok"],[29,17,18,15],[29,19,18,17],[29,25,18,23],[29,29,18,27,"Error"],[29,34,18,32],[29,35,18,33],[29,68,18,66],[29,69,18,67],[30,6,19,4],[30,13,19,11],[30,19,19,17,"res"],[30,22,19,20],[30,23,19,21,"json"],[30,27,19,25],[30,28,19,26],[30,29,19,27],[31,4,20,2],[31,5,20,3],[31,6,20,4],[31,12,20,10],[32,6,21,4],[32,13,21,11],[33,8,21,13,"pendingRequests"],[33,23,21,28],[33,25,21,30],[33,26,21,31],[34,8,21,33,"totalFriends"],[34,20,21,45],[34,22,21,47],[35,6,21,49],[35,7,21,50],[36,4,22,2],[37,2,23,0],[39,2,25,0],[40,0,26,0],[41,0,27,0],[42,2,28,7],[42,17,28,22,"getFriendsList"],[42,31,28,36,"getFriendsList"],[42,32,28,37,"username"],[42,40,28,53],[42,42,34,4],[43,4,35,2],[43,8,35,6],[44,6,36,4],[44,12,36,10,"res"],[44,15,36,13],[44,18,36,16],[44,24,36,22,"fetch"],[44,29,36,27],[44,30,36,28],[44,33,36,31,"API_BASE"],[44,41,36,39],[44,62,36,60,"username"],[44,70,36,68],[44,72,36,70],[44,73,36,71],[45,6,37,4],[45,10,37,8],[45,11,37,9,"res"],[45,14,37,12],[45,15,37,13,"ok"],[45,17,37,15],[45,19,37,17],[45,25,37,23],[45,29,37,27,"Error"],[45,34,37,32],[45,35,37,33],[45,65,37,63],[45,66,37,64],[46,6,38,4],[46,13,38,11],[46,19,38,17,"res"],[46,22,38,20],[46,23,38,21,"json"],[46,27,38,25],[46,28,38,26],[46,29,38,27],[47,4,39,2],[47,5,39,3],[47,6,39,4],[47,12,39,10],[48,6,40,4],[48,13,40,11],[48,15,40,13],[49,4,41,2],[50,2,42,0],[52,2,44,0],[53,0,45,0],[54,0,46,0],[55,2,47,7],[55,17,47,22,"getFriendRequests"],[55,34,47,39,"getFriendRequests"],[55,35,47,40,"username"],[55,43,47,56],[55,45,51,4],[56,4,52,2],[56,8,52,6],[57,6,53,4],[57,12,53,10,"res"],[57,15,53,13],[57,18,53,16],[57,24,53,22,"fetch"],[57,29,53,27],[57,30,53,28],[57,33,53,31,"API_BASE"],[57,41,53,39],[57,66,53,64,"username"],[57,74,53,72],[57,76,53,74],[57,77,53,75],[58,6,54,4],[58,10,54,8],[58,11,54,9,"res"],[58,14,54,12],[58,15,54,13,"ok"],[58,17,54,15],[58,19,54,17],[58,25,54,23],[58,29,54,27,"Error"],[58,34,54,32],[58,35,54,33],[58,68,54,66],[58,69,54,67],[59,6,55,4],[59,13,55,11],[59,19,55,17,"res"],[59,22,55,20],[59,23,55,21,"json"],[59,27,55,25],[59,28,55,26],[59,29,55,27],[60,4,56,2],[60,5,56,3],[60,6,56,4],[60,12,56,10],[61,6,57,4],[61,13,57,11],[61,15,57,13],[62,4,58,2],[63,2,59,0],[65,2,61,0],[66,0,62,0],[67,0,63,0],[68,2,64,7],[68,17,64,22,"acceptFriendRequest"],[68,36,64,41,"acceptFriendRequest"],[68,37,64,42,"username"],[68,45,64,58],[68,47,64,60,"requestId"],[68,56,64,77],[68,58,64,94],[69,4,65,2],[69,10,65,8,"res"],[69,13,65,11],[69,16,65,14],[69,22,65,20,"fetch"],[69,27,65,25],[69,28,65,26],[69,31,65,29,"API_BASE"],[69,39,65,37],[69,64,65,62,"username"],[69,72,65,70],[69,76,65,74,"requestId"],[69,85,65,83],[69,94,65,92],[69,96,65,94],[70,6,66,4,"method"],[70,12,66,10],[70,14,66,12],[71,4,67,2],[71,5,67,3],[71,6,67,4],[72,4,68,2],[72,8,68,6],[72,9,68,7,"res"],[72,12,68,10],[72,13,68,11,"ok"],[72,15,68,13],[72,17,68,15],[72,23,68,21],[72,27,68,25,"Error"],[72,32,68,30],[72,33,68,31],[72,59,68,57],[72,60,68,58],[73,2,69,0],[75,2,71,0],[76,0,72,0],[77,0,73,0],[78,2,74,7],[78,17,74,22,"declineFriendRequest"],[78,37,74,42,"declineFriendRequest"],[78,38,74,43,"username"],[78,46,74,59],[78,48,74,61,"requestId"],[78,57,74,78],[78,59,74,95],[79,4,75,2],[79,10,75,8,"res"],[79,13,75,11],[79,16,75,14],[79,22,75,20,"fetch"],[79,27,75,25],[79,28,75,26],[79,31,75,29,"API_BASE"],[79,39,75,37],[79,64,75,62,"username"],[79,72,75,70],[79,76,75,74,"requestId"],[79,85,75,83],[79,95,75,93],[79,97,75,95],[80,6,76,4,"method"],[80,12,76,10],[80,14,76,12],[81,4,77,2],[81,5,77,3],[81,6,77,4],[82,4,78,2],[82,8,78,6],[82,9,78,7,"res"],[82,12,78,10],[82,13,78,11,"ok"],[82,15,78,13],[82,17,78,15],[82,23,78,21],[82,27,78,25,"Error"],[82,32,78,30],[82,33,78,31],[82,60,78,58],[82,61,78,59],[83,2,79,0],[85,2,81,0],[86,0,82,0],[87,0,83,0],[88,2,84,7],[88,17,84,22,"searchPlayers"],[88,30,84,35,"searchPlayers"],[88,31,84,36,"query"],[88,36,84,49],[88,38,90,4],[89,4,91,2],[89,8,91,6],[89,9,91,7,"query"],[89,14,91,12],[89,18,91,16,"query"],[89,23,91,21],[89,24,91,22,"length"],[89,30,91,28],[89,33,91,31],[89,34,91,32],[89,36,91,34],[89,43,91,41],[89,45,91,43],[90,4,93,2],[90,8,93,6],[91,6,94,4],[91,12,94,10,"res"],[91,15,94,13],[91,18,94,16],[91,24,94,22,"fetch"],[91,29,94,27],[91,30,94,28],[91,33,94,31,"API_BASE"],[91,41,94,39],[91,66,94,64,"encodeURIComponent"],[91,84,94,82],[91,85,94,83,"query"],[91,90,94,88],[91,91,94,89],[91,93,94,91],[91,94,94,92],[92,6,95,4],[92,10,95,8],[92,11,95,9,"res"],[92,14,95,12],[92,15,95,13,"ok"],[92,17,95,15],[92,19,95,17],[92,25,95,23],[92,29,95,27,"Error"],[92,34,95,32],[92,35,95,33],[92,61,95,59],[92,62,95,60],[93,6,96,4],[93,13,96,11],[93,19,96,17,"res"],[93,22,96,20],[93,23,96,21,"json"],[93,27,96,25],[93,28,96,26],[93,29,96,27],[94,4,97,2],[94,5,97,3],[94,6,97,4],[94,12,97,10],[95,6,98,4],[95,13,98,11],[95,15,98,13],[96,4,99,2],[97,2,100,0],[99,2,102,0],[100,0,103,0],[101,0,104,0],[102,2,105,7],[102,17,105,22,"sendFriendRequest"],[102,34,105,39,"sendFriendRequest"],[102,35,105,40,"fromUsername"],[102,47,105,60],[102,49,105,62,"toUsername"],[102,59,105,80],[102,61,105,97],[103,4,106,2],[103,10,106,8,"res"],[103,13,106,11],[103,16,106,14],[103,22,106,20,"fetch"],[103,27,106,25],[103,28,106,26],[103,31,106,29,"API_BASE"],[103,39,106,37],[103,67,106,65],[103,69,106,67],[104,6,107,4,"method"],[104,12,107,10],[104,14,107,12],[104,20,107,18],[105,6,108,4,"headers"],[105,13,108,11],[105,15,108,13],[106,8,108,15],[106,22,108,29],[106,24,108,31],[107,6,108,50],[107,7,108,51],[108,6,109,4,"body"],[108,10,109,8],[108,12,109,10,"JSON"],[108,16,109,14],[108,17,109,15,"stringify"],[108,26,109,24],[108,27,109,25],[109,8,109,27,"from"],[109,12,109,31],[109,14,109,33,"fromUsername"],[109,26,109,45],[110,8,109,47,"to"],[110,10,109,49],[110,12,109,51,"toUsername"],[111,6,109,62],[111,7,109,63],[112,4,110,2],[112,5,110,3],[112,6,110,4],[113,4,111,2],[113,8,111,6],[113,9,111,7,"res"],[113,12,111,10],[113,13,111,11,"ok"],[113,15,111,13],[113,17,111,15],[113,23,111,21],[113,27,111,25,"Error"],[113,32,111,30],[113,33,111,31],[113,57,111,55],[113,58,111,56],[114,2,112,0],[115,0,112,1],[115,3]],"functionMap":{"names":["<global>","getFriendsSummary","getFriendsList","getFriendRequests","acceptFriendRequest","declineFriendRequest","searchPlayers","sendFriendRequest"],"mappings":"AAA;OCW;CDW;OEK;CFc;OGK;CHY;OIK;CJK;OKK;CLK;OMK;CNgB;OOK;CPO"},"hasCjsExports":false},"type":"js/module"}]}