{"dependencies":[{"name":"./lib/bindReporter.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":53,"index":53}}],"key":"yZXTUsWh1M46DyxIbZ88NUHRymg=","exportNames":["*"],"imports":1}},{"name":"./lib/getActivationStart.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":54},"end":{"line":2,"column":65,"index":119}}],"key":"GdWeY/Ul63HmG3e9yq4TWUwqk0M=","exportNames":["*"],"imports":1}},{"name":"./lib/getVisibilityWatcher.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":69,"index":189}}],"key":"nHtaM9v//YlxGAv+O3W06C++qp8=","exportNames":["*"],"imports":1}},{"name":"./lib/initMetric.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":190},"end":{"line":4,"column":49,"index":239}}],"key":"3h8m+kvAV2o3xN93IHHrmBqzs4s=","exportNames":["*"],"imports":1}},{"name":"./lib/observe.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":240},"end":{"line":5,"column":43,"index":283}}],"key":"Cz2RoRvLyGQyofIDJmcgFo6dicM=","exportNames":["*"],"imports":1}},{"name":"./lib/onHidden.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":284},"end":{"line":6,"column":45,"index":329}}],"key":"Me8dIXVCoQX50hAKyNiBvASIs+8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"onLCP\", {\n    enumerable: true,\n    get: function () {\n      return onLCP;\n    }\n  });\n  var _libBindReporterJs = require(_dependencyMap[0], \"./lib/bindReporter.js\");\n  var _libGetActivationStartJs = require(_dependencyMap[1], \"./lib/getActivationStart.js\");\n  var _libGetVisibilityWatcherJs = require(_dependencyMap[2], \"./lib/getVisibilityWatcher.js\");\n  var _libInitMetricJs = require(_dependencyMap[3], \"./lib/initMetric.js\");\n  var _libObserveJs = require(_dependencyMap[4], \"./lib/observe.js\");\n  var _libOnHiddenJs = require(_dependencyMap[5], \"./lib/onHidden.js\");\n  /*\n   * Copyright 2020 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  const reportedMetricIDs = {};\n\n  /**\n   * Calculates the [LCP](https://web.dev/lcp/) value for the current page and\n   * calls the `callback` function once the value is ready (along with the\n   * relevant `largest-contentful-paint` performance entry used to determine the\n   * value). The reported value is a `DOMHighResTimeStamp`.\n   */\n  const onLCP = onReport => {\n    const visibilityWatcher = (0, _libGetVisibilityWatcherJs.getVisibilityWatcher)();\n    const metric = (0, _libInitMetricJs.initMetric)('LCP');\n    let report;\n    const handleEntries = entries => {\n      const lastEntry = entries[entries.length - 1];\n      if (lastEntry) {\n        // The startTime attribute returns the value of the renderTime if it is\n        // not 0, and the value of the loadTime otherwise. The activationStart\n        // reference is used because LCP should be relative to page activation\n        // rather than navigation start if the page was prerendered.\n        const value = Math.max(lastEntry.startTime - (0, _libGetActivationStartJs.getActivationStart)(), 0);\n\n        // Only report if the page wasn't hidden prior to LCP.\n        if (value < visibilityWatcher.firstHiddenTime) {\n          metric.value = value;\n          metric.entries = [lastEntry];\n          report();\n        }\n      }\n    };\n    const po = (0, _libObserveJs.observe)('largest-contentful-paint', handleEntries);\n    if (po) {\n      report = (0, _libBindReporterJs.bindReporter)(onReport, metric);\n      const stopListening = () => {\n        if (!reportedMetricIDs[metric.id]) {\n          handleEntries(po.takeRecords());\n          po.disconnect();\n          reportedMetricIDs[metric.id] = true;\n          report(true);\n        }\n      };\n\n      // Stop listening after input. Note: while scrolling is an input that\n      // stop LCP observation, it's unreliable since it can be programmatically\n      // generated. See: https://github.com/GoogleChrome/web-vitals/issues/75\n      ['keydown', 'click'].forEach(type => {\n        addEventListener(type, stopListening, {\n          once: true,\n          capture: true\n        });\n      });\n      (0, _libOnHiddenJs.onHidden)(stopListening, true);\n      return stopListening;\n    }\n    return;\n  };\n});","lineCount":90,"map":[[7,2,84,0,"Object"],[7,8,84,0],[7,9,84,0,"defineProperty"],[7,23,84,0],[7,24,84,0,"exports"],[7,31,84,0],[8,4,84,0,"enumerable"],[8,14,84,0],[9,4,84,0,"get"],[9,7,84,0],[9,18,84,0,"get"],[9,19,84,0],[10,6,84,0],[10,13,84,9,"onLCP"],[10,18,84,14],[11,4,84,14],[12,2,84,14],[13,2,1,0],[13,6,1,0,"_libBindReporterJs"],[13,24,1,0],[13,27,1,0,"require"],[13,34,1,0],[13,35,1,0,"_dependencyMap"],[13,49,1,0],[14,2,2,0],[14,6,2,0,"_libGetActivationStartJs"],[14,30,2,0],[14,33,2,0,"require"],[14,40,2,0],[14,41,2,0,"_dependencyMap"],[14,55,2,0],[15,2,3,0],[15,6,3,0,"_libGetVisibilityWatcherJs"],[15,32,3,0],[15,35,3,0,"require"],[15,42,3,0],[15,43,3,0,"_dependencyMap"],[15,57,3,0],[16,2,4,0],[16,6,4,0,"_libInitMetricJs"],[16,22,4,0],[16,25,4,0,"require"],[16,32,4,0],[16,33,4,0,"_dependencyMap"],[16,47,4,0],[17,2,5,0],[17,6,5,0,"_libObserveJs"],[17,19,5,0],[17,22,5,0,"require"],[17,29,5,0],[17,30,5,0,"_dependencyMap"],[17,44,5,0],[18,2,6,0],[18,6,6,0,"_libOnHiddenJs"],[18,20,6,0],[18,23,6,0,"require"],[18,30,6,0],[18,31,6,0,"_dependencyMap"],[18,45,6,0],[19,2,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,0,20,0],[32,0,21,0],[33,0,22,0],[35,2,24,0],[35,8,24,6,"reportedMetricIDs"],[35,25,24,23],[35,28,24,26],[35,29,24,27],[35,30,24,28],[37,2,26,0],[38,0,27,0],[39,0,28,0],[40,0,29,0],[41,0,30,0],[42,0,31,0],[43,2,32,0],[43,8,32,6,"onLCP"],[43,13,32,11],[43,16,32,15,"onReport"],[43,24,32,23],[43,28,32,28],[44,4,33,2],[44,10,33,8,"visibilityWatcher"],[44,27,33,25],[44,30,33,28],[44,34,33,28,"getVisibilityWatcher"],[44,60,33,48],[44,61,33,48,"getVisibilityWatcher"],[44,81,33,48],[44,83,33,49],[44,84,33,50],[45,4,34,2],[45,10,34,8,"metric"],[45,16,34,14],[45,19,34,17],[45,23,34,17,"initMetric"],[45,39,34,27],[45,40,34,27,"initMetric"],[45,50,34,27],[45,52,34,28],[45,57,34,33],[45,58,34,34],[46,4,35,2],[46,8,35,6,"report"],[46,14,35,12],[47,4,37,2],[47,10,37,8,"handleEntries"],[47,23,37,21],[47,26,37,25,"entries"],[47,33,37,32],[47,37,37,37],[48,6,38,4],[48,12,38,10,"lastEntry"],[48,21,38,19],[48,24,38,22,"entries"],[48,31,38,29],[48,32,38,30,"entries"],[48,39,38,37],[48,40,38,38,"length"],[48,46,38,44],[48,49,38,47],[48,50,38,48],[48,51,38,49],[49,6,39,4],[49,10,39,8,"lastEntry"],[49,19,39,17],[49,21,39,19],[50,8,40,6],[51,8,41,6],[52,8,42,6],[53,8,43,6],[54,8,44,6],[54,14,44,12,"value"],[54,19,44,17],[54,22,44,20,"Math"],[54,26,44,24],[54,27,44,25,"max"],[54,30,44,28],[54,31,44,29,"lastEntry"],[54,40,44,38],[54,41,44,39,"startTime"],[54,50,44,48],[54,53,44,51],[54,57,44,51,"getActivationStart"],[54,81,44,69],[54,82,44,69,"getActivationStart"],[54,100,44,69],[54,102,44,70],[54,103,44,71],[54,105,44,73],[54,106,44,74],[54,107,44,75],[56,8,46,6],[57,8,47,6],[57,12,47,10,"value"],[57,17,47,15],[57,20,47,18,"visibilityWatcher"],[57,37,47,35],[57,38,47,36,"firstHiddenTime"],[57,53,47,51],[57,55,47,53],[58,10,48,8,"metric"],[58,16,48,14],[58,17,48,15,"value"],[58,22,48,20],[58,25,48,23,"value"],[58,30,48,28],[59,10,49,8,"metric"],[59,16,49,14],[59,17,49,15,"entries"],[59,24,49,22],[59,27,49,25],[59,28,49,26,"lastEntry"],[59,37,49,35],[59,38,49,36],[60,10,50,8,"report"],[60,16,50,14],[60,17,50,15],[60,18,50,16],[61,8,51,6],[62,6,52,4],[63,4,53,2],[63,5,53,3],[64,4,55,2],[64,10,55,8,"po"],[64,12,55,10],[64,15,55,13],[64,19,55,13,"observe"],[64,32,55,20],[64,33,55,20,"observe"],[64,40,55,20],[64,42,55,21],[64,68,55,47],[64,70,55,49,"handleEntries"],[64,83,55,62],[64,84,55,63],[65,4,57,2],[65,8,57,6,"po"],[65,10,57,8],[65,12,57,10],[66,6,58,4,"report"],[66,12,58,10],[66,15,58,13],[66,19,58,13,"bindReporter"],[66,37,58,25],[66,38,58,25,"bindReporter"],[66,50,58,25],[66,52,58,26,"onReport"],[66,60,58,34],[66,62,58,36,"metric"],[66,68,58,42],[66,69,58,43],[67,6,60,4],[67,12,60,10,"stopListening"],[67,25,60,23],[67,28,60,26,"stopListening"],[67,29,60,26],[67,34,60,32],[68,8,61,6],[68,12,61,10],[68,13,61,11,"reportedMetricIDs"],[68,30,61,28],[68,31,61,29,"metric"],[68,37,61,35],[68,38,61,36,"id"],[68,40,61,38],[68,41,61,39],[68,43,61,41],[69,10,62,8,"handleEntries"],[69,23,62,21],[69,24,62,22,"po"],[69,26,62,24],[69,27,62,25,"takeRecords"],[69,38,62,36],[69,39,62,37],[69,40,62,39],[69,41,62,40],[70,10,63,8,"po"],[70,12,63,10],[70,13,63,11,"disconnect"],[70,23,63,21],[70,24,63,22],[70,25,63,23],[71,10,64,8,"reportedMetricIDs"],[71,27,64,25],[71,28,64,26,"metric"],[71,34,64,32],[71,35,64,33,"id"],[71,37,64,35],[71,38,64,36],[71,41,64,39],[71,45,64,43],[72,10,65,8,"report"],[72,16,65,14],[72,17,65,15],[72,21,65,19],[72,22,65,20],[73,8,66,6],[74,6,67,4],[74,7,67,5],[76,6,69,4],[77,6,70,4],[78,6,71,4],[79,6,72,4],[79,7,72,5],[79,16,72,14],[79,18,72,16],[79,25,72,23],[79,26,72,24],[79,27,72,25,"forEach"],[79,34,72,32],[79,35,72,33,"type"],[79,39,72,37],[79,43,72,41],[80,8,73,6,"addEventListener"],[80,24,73,22],[80,25,73,23,"type"],[80,29,73,27],[80,31,73,29,"stopListening"],[80,44,73,42],[80,46,73,44],[81,10,73,46,"once"],[81,14,73,50],[81,16,73,52],[81,20,73,56],[82,10,73,58,"capture"],[82,17,73,65],[82,19,73,67],[83,8,73,72],[83,9,73,73],[83,10,73,74],[84,6,74,4],[84,7,74,5],[84,8,74,6],[85,6,76,4],[85,10,76,4,"onHidden"],[85,24,76,12],[85,25,76,12,"onHidden"],[85,33,76,12],[85,35,76,13,"stopListening"],[85,48,76,26],[85,50,76,28],[85,54,76,32],[85,55,76,33],[86,6,78,4],[86,13,78,11,"stopListening"],[86,26,78,24],[87,4,79,2],[88,4,81,2],[89,2,82,0],[89,3,82,1],[90,0,82,2],[90,3]],"functionMap":{"names":["<global>","onLCP","handleEntries","stopListening","forEach$argument_0"],"mappings":"AAA;cC+B;wBCK;GDgB;0BEO;KFO;iCGK;KHE;CDQ"},"hasCjsExports":false},"type":"js/module"}]}