{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":255},"end":{"line":9,"column":44,"index":299}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../../stores/gameStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":300},"end":{"line":10,"column":54,"index":354}}],"key":"RlyH1X8PAExLXk9v+2eohdpRBPU=","exportNames":["*"],"imports":1}},{"name":"../api/mail","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":355},"end":{"line":11,"column":45,"index":400}}],"key":"xAIkQNProhN280OQ4yIfwb7crxk=","exportNames":["*"],"imports":1}},{"name":"../api/friends","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":401},"end":{"line":12,"column":51,"index":452}}],"key":"4HVKDNfDaTp3qLLcQOHFtMi5LQg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(); // /app/frontend/lib/ui/badges.ts\n  // Phase 3.23.2: Badge selectors with real API data\n  //\n  // Centralized badge state derived from API calls.\n  // Graceful degradation â€” returns defaults on failure.\n  //\n  // \"Quiet when empty. Truthful when there's something.\"\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useRailBadges = useRailBadges;\n  exports.useMailBadge = useMailBadge;\n  exports.useFriendsBadge = useFriendsBadge;\n  exports.useEventsBadge = useEventsBadge;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _storesGameStore = require(_dependencyMap[1], \"../../stores/gameStore\");\n  var _apiMail = require(_dependencyMap[2], \"../api/mail\");\n  var _apiFriends = require(_dependencyMap[3], \"../api/friends\");\n  /**\n   * Get all rail badges at once (with API calls)\n   * Returns badge values for mail, friends, events\n   * \n   * Badge logic:\n   * - mail: rewardsAvailable + unreadMessages + giftsAvailable (cap at 9+)\n   * - friends: pendingRequests\n   * - events: true if active events (stubbed for now)\n   */\n  function useRailBadges() {\n    _s();\n    const user = (0, _storesGameStore.useGameStore)(s => s.user);\n    const [badges, setBadges] = (0, _react.useState)({\n      mail: 1,\n      // Default: daily rewards available\n      friends: undefined,\n      events: true // Default: events available\n    });\n    (0, _react.useEffect)(() => {\n      if (!user?.username) return;\n      let cancelled = false;\n      const fetchBadges = async () => {\n        try {\n          const [mailData, friendsData] = await Promise.all([(0, _apiMail.getMailSummary)(user.username).catch(() => ({\n            rewardsAvailable: 1,\n            unreadMessages: 0,\n            giftsAvailable: 0\n          })), (0, _apiFriends.getFriendsSummary)(user.username).catch(() => ({\n            pendingRequests: 0,\n            totalFriends: 0\n          }))]);\n          if (cancelled) return;\n          const mailTotal = mailData.rewardsAvailable + mailData.unreadMessages + mailData.giftsAvailable;\n          setBadges({\n            mail: mailTotal > 0 ? mailTotal : undefined,\n            friends: friendsData.pendingRequests > 0 ? friendsData.pendingRequests : undefined,\n            events: true // TODO: Wire to actual events API when available\n          });\n        } catch {\n          // Keep defaults on error\n        }\n      };\n      fetchBadges();\n\n      // Refresh badges every 60 seconds\n      const interval = setInterval(fetchBadges, 60000);\n      return () => {\n        cancelled = true;\n        clearInterval(interval);\n      };\n    }, [user?.username]);\n    return badges;\n  }\n\n  /**\n   * Get mail badge count (standalone hook)\n   */\n  _s(useRailBadges, \"lXAk1Qrvl/HISgCqCoPTMxNSNJ8=\", false, function () {\n    return [_storesGameStore.useGameStore];\n  });\n  function useMailBadge() {\n    _s2();\n    const user = (0, _storesGameStore.useGameStore)(s => s.user);\n    const [badge, setBadge] = (0, _react.useState)(1); // Default: daily rewards available\n\n    (0, _react.useEffect)(() => {\n      if (!user?.username) return;\n      (0, _apiMail.getMailSummary)(user.username).then(data => {\n        const total = data.rewardsAvailable + data.unreadMessages + data.giftsAvailable;\n        setBadge(total);\n      }).catch(() => {\n        // Keep default\n      });\n    }, [user?.username]);\n    return badge;\n  }\n\n  /**\n   * Get friends badge count (standalone hook)\n   */\n  _s2(useMailBadge, \"GV8SAwgaE15s2pWm054nCCpKQ0s=\", false, function () {\n    return [_storesGameStore.useGameStore];\n  });\n  function useFriendsBadge() {\n    _s3();\n    const user = (0, _storesGameStore.useGameStore)(s => s.user);\n    const [badge, setBadge] = (0, _react.useState)(0);\n    (0, _react.useEffect)(() => {\n      if (!user?.username) return;\n      (0, _apiFriends.getFriendsSummary)(user.username).then(data => {\n        setBadge(data.pendingRequests);\n      }).catch(() => {\n        // Keep default\n      });\n    }, [user?.username]);\n    return badge;\n  }\n\n  /**\n   * Get events badge (standalone hook)\n   * TODO: Wire to actual events API\n   */\n  _s3(useFriendsBadge, \"AsjkWuFDEDwZoc82lIpYPLQcKS0=\", false, function () {\n    return [_storesGameStore.useGameStore];\n  });\n  function useEventsBadge() {\n    // For now, return true to indicate \"events available\"\n    return true;\n  }\n});","lineCount":133,"map":[[6,26,1,0],[7,2,2,0],[8,2,3,0],[9,2,4,0],[10,2,5,0],[11,2,6,0],[12,2,7,0],[13,2,7,0,"Object"],[13,8,7,0],[13,9,7,0,"defineProperty"],[13,23,7,0],[13,24,7,0,"exports"],[13,31,7,0],[14,4,7,0,"value"],[14,9,7,0],[15,2,7,0],[16,2,29,0,"exports"],[16,9,29,0],[16,10,29,0,"useRailBadges"],[16,23,29,0],[16,26,29,0,"useRailBadges"],[16,39,29,0],[17,2,80,0,"exports"],[17,9,80,0],[17,10,80,0,"useMailBadge"],[17,22,80,0],[17,25,80,0,"useMailBadge"],[17,37,80,0],[18,2,103,0,"exports"],[18,9,103,0],[18,10,103,0,"useFriendsBadge"],[18,25,103,0],[18,28,103,0,"useFriendsBadge"],[18,43,103,0],[19,2,126,0,"exports"],[19,9,126,0],[19,10,126,0,"useEventsBadge"],[19,24,126,0],[19,27,126,0,"useEventsBadge"],[19,41,126,0],[20,2,9,0],[20,6,9,0,"_react"],[20,12,9,0],[20,15,9,0,"require"],[20,22,9,0],[20,23,9,0,"_dependencyMap"],[20,37,9,0],[21,2,10,0],[21,6,10,0,"_storesGameStore"],[21,22,10,0],[21,25,10,0,"require"],[21,32,10,0],[21,33,10,0,"_dependencyMap"],[21,47,10,0],[22,2,11,0],[22,6,11,0,"_apiMail"],[22,14,11,0],[22,17,11,0,"require"],[22,24,11,0],[22,25,11,0,"_dependencyMap"],[22,39,11,0],[23,2,12,0],[23,6,12,0,"_apiFriends"],[23,17,12,0],[23,20,12,0,"require"],[23,27,12,0],[23,28,12,0,"_dependencyMap"],[23,42,12,0],[24,2,20,0],[25,0,21,0],[26,0,22,0],[27,0,23,0],[28,0,24,0],[29,0,25,0],[30,0,26,0],[31,0,27,0],[32,0,28,0],[33,2,29,7],[33,11,29,16,"useRailBadges"],[33,24,29,29,"useRailBadges"],[33,25,29,29],[33,27,29,44],[34,4,29,44,"_s"],[34,6,29,44],[35,4,30,2],[35,10,30,8,"user"],[35,14,30,12],[35,17,30,15],[35,21,30,15,"useGameStore"],[35,37,30,27],[35,38,30,27,"useGameStore"],[35,50,30,27],[35,52,30,29,"s"],[35,53,30,30],[35,57,30,35,"s"],[35,58,30,36],[35,59,30,37,"user"],[35,63,30,41],[35,64,30,42],[36,4,31,2],[36,10,31,8],[36,11,31,9,"badges"],[36,17,31,15],[36,19,31,17,"setBadges"],[36,28,31,26],[36,29,31,27],[36,32,31,30],[36,36,31,30,"useState"],[36,42,31,38],[36,43,31,38,"useState"],[36,51,31,38],[36,53,31,51],[37,6,32,4,"mail"],[37,10,32,8],[37,12,32,10],[37,13,32,11],[38,6,32,13],[39,6,33,4,"friends"],[39,13,33,11],[39,15,33,13,"undefined"],[39,24,33,22],[40,6,34,4,"events"],[40,12,34,10],[40,14,34,12],[40,18,34,16],[40,19,34,18],[41,4,35,2],[41,5,35,3],[41,6,35,4],[42,4,37,2],[42,8,37,2,"useEffect"],[42,14,37,11],[42,15,37,11,"useEffect"],[42,24,37,11],[42,26,37,12],[42,32,37,18],[43,6,38,4],[43,10,38,8],[43,11,38,9,"user"],[43,15,38,13],[43,17,38,15,"username"],[43,25,38,23],[43,27,38,25],[44,6,40,4],[44,10,40,8,"cancelled"],[44,19,40,17],[44,22,40,20],[44,27,40,25],[45,6,42,4],[45,12,42,10,"fetchBadges"],[45,23,42,21],[45,26,42,24],[45,32,42,24,"fetchBadges"],[45,33,42,24],[45,38,42,36],[46,8,43,6],[46,12,43,10],[47,10,44,8],[47,16,44,14],[47,17,44,15,"mailData"],[47,25,44,23],[47,27,44,25,"friendsData"],[47,38,44,36],[47,39,44,37],[47,42,44,40],[47,48,44,46,"Promise"],[47,55,44,53],[47,56,44,54,"all"],[47,59,44,57],[47,60,44,58],[47,61,45,10],[47,65,45,10,"getMailSummary"],[47,73,45,24],[47,74,45,24,"getMailSummary"],[47,88,45,24],[47,90,45,25,"user"],[47,94,45,29],[47,95,45,30,"username"],[47,103,45,38],[47,104,45,39],[47,105,45,40,"catch"],[47,110,45,45],[47,111,45,46],[47,118,45,53],[48,12,45,55,"rewardsAvailable"],[48,28,45,71],[48,30,45,73],[48,31,45,74],[49,12,45,76,"unreadMessages"],[49,26,45,90],[49,28,45,92],[49,29,45,93],[50,12,45,95,"giftsAvailable"],[50,26,45,109],[50,28,45,111],[51,10,45,113],[51,11,45,114],[51,12,45,115],[51,13,45,116],[51,15,46,10],[51,19,46,10,"getFriendsSummary"],[51,30,46,27],[51,31,46,27,"getFriendsSummary"],[51,48,46,27],[51,50,46,28,"user"],[51,54,46,32],[51,55,46,33,"username"],[51,63,46,41],[51,64,46,42],[51,65,46,43,"catch"],[51,70,46,48],[51,71,46,49],[51,78,46,56],[52,12,46,58,"pendingRequests"],[52,27,46,73],[52,29,46,75],[52,30,46,76],[53,12,46,78,"totalFriends"],[53,24,46,90],[53,26,46,92],[54,10,46,94],[54,11,46,95],[54,12,46,96],[54,13,46,97],[54,14,47,9],[54,15,47,10],[55,10,49,8],[55,14,49,12,"cancelled"],[55,23,49,21],[55,25,49,23],[56,10,51,8],[56,16,51,14,"mailTotal"],[56,25,51,23],[56,28,51,26,"mailData"],[56,36,51,34],[56,37,51,35,"rewardsAvailable"],[56,53,51,51],[56,56,51,54,"mailData"],[56,64,51,62],[56,65,51,63,"unreadMessages"],[56,79,51,77],[56,82,51,80,"mailData"],[56,90,51,88],[56,91,51,89,"giftsAvailable"],[56,105,51,103],[57,10,53,8,"setBadges"],[57,19,53,17],[57,20,53,18],[58,12,54,10,"mail"],[58,16,54,14],[58,18,54,16,"mailTotal"],[58,27,54,25],[58,30,54,28],[58,31,54,29],[58,34,54,32,"mailTotal"],[58,43,54,41],[58,46,54,44,"undefined"],[58,55,54,53],[59,12,55,10,"friends"],[59,19,55,17],[59,21,55,19,"friendsData"],[59,32,55,30],[59,33,55,31,"pendingRequests"],[59,48,55,46],[59,51,55,49],[59,52,55,50],[59,55,55,53,"friendsData"],[59,66,55,64],[59,67,55,65,"pendingRequests"],[59,82,55,80],[59,85,55,83,"undefined"],[59,94,55,92],[60,12,56,10,"events"],[60,18,56,16],[60,20,56,18],[60,24,56,22],[60,25,56,24],[61,10,57,8],[61,11,57,9],[61,12,57,10],[62,8,58,6],[62,9,58,7],[62,10,58,8],[62,16,58,14],[63,10,59,8],[64,8,59,8],[65,6,61,4],[65,7,61,5],[66,6,63,4,"fetchBadges"],[66,17,63,15],[66,18,63,16],[66,19,63,17],[68,6,65,4],[69,6,66,4],[69,12,66,10,"interval"],[69,20,66,18],[69,23,66,21,"setInterval"],[69,34,66,32],[69,35,66,33,"fetchBadges"],[69,46,66,44],[69,48,66,46],[69,53,66,51],[69,54,66,52],[70,6,68,4],[70,13,68,11],[70,19,68,17],[71,8,69,6,"cancelled"],[71,17,69,15],[71,20,69,18],[71,24,69,22],[72,8,70,6,"clearInterval"],[72,21,70,19],[72,22,70,20,"interval"],[72,30,70,28],[72,31,70,29],[73,6,71,4],[73,7,71,5],[74,4,72,2],[74,5,72,3],[74,7,72,5],[74,8,72,6,"user"],[74,12,72,10],[74,14,72,12,"username"],[74,22,72,20],[74,23,72,21],[74,24,72,22],[75,4,74,2],[75,11,74,9,"badges"],[75,17,74,15],[76,2,75,0],[78,2,77,0],[79,0,78,0],[80,0,79,0],[81,2,77,0,"_s"],[81,4,77,0],[81,5,29,16,"useRailBadges"],[81,18,29,29],[82,4,29,29],[82,12,30,15,"useGameStore"],[82,28,30,27],[82,29,30,27,"useGameStore"],[82,41,30,27],[83,2,30,27],[84,2,80,7],[84,11,80,16,"useMailBadge"],[84,23,80,28,"useMailBadge"],[84,24,80,28],[84,26,80,39],[85,4,80,39,"_s2"],[85,7,80,39],[86,4,81,2],[86,10,81,8,"user"],[86,14,81,12],[86,17,81,15],[86,21,81,15,"useGameStore"],[86,37,81,27],[86,38,81,27,"useGameStore"],[86,50,81,27],[86,52,81,29,"s"],[86,53,81,30],[86,57,81,35,"s"],[86,58,81,36],[86,59,81,37,"user"],[86,63,81,41],[86,64,81,42],[87,4,82,2],[87,10,82,8],[87,11,82,9,"badge"],[87,16,82,14],[87,18,82,16,"setBadge"],[87,26,82,24],[87,27,82,25],[87,30,82,28],[87,34,82,28,"useState"],[87,40,82,36],[87,41,82,36,"useState"],[87,49,82,36],[87,51,82,37],[87,52,82,38],[87,53,82,39],[87,54,82,40],[87,55,82,41],[89,4,84,2],[89,8,84,2,"useEffect"],[89,14,84,11],[89,15,84,11,"useEffect"],[89,24,84,11],[89,26,84,12],[89,32,84,18],[90,6,85,4],[90,10,85,8],[90,11,85,9,"user"],[90,15,85,13],[90,17,85,15,"username"],[90,25,85,23],[90,27,85,25],[91,6,87,4],[91,10,87,4,"getMailSummary"],[91,18,87,18],[91,19,87,18,"getMailSummary"],[91,33,87,18],[91,35,87,19,"user"],[91,39,87,23],[91,40,87,24,"username"],[91,48,87,32],[91,49,87,33],[91,50,88,7,"then"],[91,54,88,11],[91,55,88,13,"data"],[91,59,88,17],[91,63,88,22],[92,8,89,8],[92,14,89,14,"total"],[92,19,89,19],[92,22,89,22,"data"],[92,26,89,26],[92,27,89,27,"rewardsAvailable"],[92,43,89,43],[92,46,89,46,"data"],[92,50,89,50],[92,51,89,51,"unreadMessages"],[92,65,89,65],[92,68,89,68,"data"],[92,72,89,72],[92,73,89,73,"giftsAvailable"],[92,87,89,87],[93,8,90,8,"setBadge"],[93,16,90,16],[93,17,90,17,"total"],[93,22,90,22],[93,23,90,23],[94,6,91,6],[94,7,91,7],[94,8,91,8],[94,9,92,7,"catch"],[94,14,92,12],[94,15,92,13],[94,21,92,19],[95,8,93,8],[96,6,93,8],[96,7,94,7],[96,8,94,8],[97,4,95,2],[97,5,95,3],[97,7,95,5],[97,8,95,6,"user"],[97,12,95,10],[97,14,95,12,"username"],[97,22,95,20],[97,23,95,21],[97,24,95,22],[98,4,97,2],[98,11,97,9,"badge"],[98,16,97,14],[99,2,98,0],[101,2,100,0],[102,0,101,0],[103,0,102,0],[104,2,100,0,"_s2"],[104,5,100,0],[104,6,80,16,"useMailBadge"],[104,18,80,28],[105,4,80,28],[105,12,81,15,"useGameStore"],[105,28,81,27],[105,29,81,27,"useGameStore"],[105,41,81,27],[106,2,81,27],[107,2,103,7],[107,11,103,16,"useFriendsBadge"],[107,26,103,31,"useFriendsBadge"],[107,27,103,31],[107,29,103,42],[108,4,103,42,"_s3"],[108,7,103,42],[109,4,104,2],[109,10,104,8,"user"],[109,14,104,12],[109,17,104,15],[109,21,104,15,"useGameStore"],[109,37,104,27],[109,38,104,27,"useGameStore"],[109,50,104,27],[109,52,104,29,"s"],[109,53,104,30],[109,57,104,35,"s"],[109,58,104,36],[109,59,104,37,"user"],[109,63,104,41],[109,64,104,42],[110,4,105,2],[110,10,105,8],[110,11,105,9,"badge"],[110,16,105,14],[110,18,105,16,"setBadge"],[110,26,105,24],[110,27,105,25],[110,30,105,28],[110,34,105,28,"useState"],[110,40,105,36],[110,41,105,36,"useState"],[110,49,105,36],[110,51,105,37],[110,52,105,38],[110,53,105,39],[111,4,107,2],[111,8,107,2,"useEffect"],[111,14,107,11],[111,15,107,11,"useEffect"],[111,24,107,11],[111,26,107,12],[111,32,107,18],[112,6,108,4],[112,10,108,8],[112,11,108,9,"user"],[112,15,108,13],[112,17,108,15,"username"],[112,25,108,23],[112,27,108,25],[113,6,110,4],[113,10,110,4,"getFriendsSummary"],[113,21,110,21],[113,22,110,21,"getFriendsSummary"],[113,39,110,21],[113,41,110,22,"user"],[113,45,110,26],[113,46,110,27,"username"],[113,54,110,35],[113,55,110,36],[113,56,111,7,"then"],[113,60,111,11],[113,61,111,13,"data"],[113,65,111,17],[113,69,111,22],[114,8,112,8,"setBadge"],[114,16,112,16],[114,17,112,17,"data"],[114,21,112,21],[114,22,112,22,"pendingRequests"],[114,37,112,37],[114,38,112,38],[115,6,113,6],[115,7,113,7],[115,8,113,8],[115,9,114,7,"catch"],[115,14,114,12],[115,15,114,13],[115,21,114,19],[116,8,115,8],[117,6,115,8],[117,7,116,7],[117,8,116,8],[118,4,117,2],[118,5,117,3],[118,7,117,5],[118,8,117,6,"user"],[118,12,117,10],[118,14,117,12,"username"],[118,22,117,20],[118,23,117,21],[118,24,117,22],[119,4,119,2],[119,11,119,9,"badge"],[119,16,119,14],[120,2,120,0],[122,2,122,0],[123,0,123,0],[124,0,124,0],[125,0,125,0],[126,2,122,0,"_s3"],[126,5,122,0],[126,6,103,16,"useFriendsBadge"],[126,21,103,31],[127,4,103,31],[127,12,104,15,"useGameStore"],[127,28,104,27],[127,29,104,27,"useGameStore"],[127,41,104,27],[128,2,104,27],[129,2,126,7],[129,11,126,16,"useEventsBadge"],[129,25,126,30,"useEventsBadge"],[129,26,126,30],[129,28,126,42],[130,4,127,2],[131,4,128,2],[131,11,128,9],[131,15,128,13],[132,2,129,0],[133,0,129,1],[133,3]],"functionMap":{"names":["<global>","useRailBadges","useGameStore$argument_0","useEffect$argument_0","fetchBadges","getMailSummary._catch$argument_0","getFriendsSummary._catch$argument_0","<anonymous>","useMailBadge","getMailSummary.then$argument_0","getMailSummary.then._catch$argument_0","useFriendsBadge","getFriendsSummary.then$argument_0","getFriendsSummary.then._catch$argument_0","useEventsBadge"],"mappings":"AAA;OC4B;4BCC,aD;YEO;wBCK;8CCG,qED;iDEC,+CF;KDe;WIO;KJG;GFC;CDG;OQK;4BNC,aM;YLG;YMI;ONG;aOC;OPE;GKC;CRG;OWK;4BTC,aS;YRG;YSI;OTE;aUC;OVE;GQC;CXG;OcM;CdG"},"hasCjsExports":false},"type":"js/module"}]}