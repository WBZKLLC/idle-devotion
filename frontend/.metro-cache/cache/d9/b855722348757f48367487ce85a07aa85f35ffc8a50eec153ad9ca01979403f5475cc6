{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":14,"index":78},"end":{"line":3,"column":38,"index":102}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _classCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\").default;\n  var _createClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\").default;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var utils = require(_dependencyMap[2], \"@sentry/utils\");\n  var WINDOW = utils.GLOBAL_OBJ;\n  var DEFAULT_LINES_OF_CONTEXT = 7;\n\n  /**\n   * Collects source context lines around the lines of stackframes pointing to JS embedded in\n   * the current page's HTML.\n   *\n   * This integration DOES NOT work for stack frames pointing to JS files that are loaded by the browser.\n   * For frames pointing to files, context lines are added during ingestion and symbolication\n   * by attempting to download the JS files to the Sentry backend.\n   *\n   * Use this integration if you have inline JS code in HTML pages that can't be accessed\n   * by our backend (e.g. due to a login-protected page).\n   */\n  var ContextLines = /*#__PURE__*/function () {\n    \"use strict\";\n\n    /**\n     * @inheritDoc\n     */\n\n    function ContextLines() {\n      var _options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      _classCallCheck(this, ContextLines);\n      this._options = _options;\n      this.name = ContextLines.id;\n    }\n\n    /**\n     * @inheritDoc\n     */\n    return _createClass(ContextLines, [{\n      key: \"setupOnce\",\n      value: function setupOnce(_addGlobaleventProcessor, _getCurrentHub) {\n        // noop\n      }\n\n      /** @inheritDoc */\n    }, {\n      key: \"processEvent\",\n      value: function processEvent(event) {\n        return this.addSourceContext(event);\n      }\n\n      /**\n       * Processes an event and adds context lines.\n       *\n       * TODO (v8): Make this internal/private\n       */\n    }, {\n      key: \"addSourceContext\",\n      value: function addSourceContext(event) {\n        var doc = WINDOW.document;\n        var htmlFilename = WINDOW.location && utils.stripUrlQueryAndFragment(WINDOW.location.href);\n        if (!doc || !htmlFilename) {\n          return event;\n        }\n        var exceptions = event.exception && event.exception.values;\n        if (!exceptions || !exceptions.length) {\n          return event;\n        }\n        var html = doc.documentElement.innerHTML;\n        if (!html) {\n          return event;\n        }\n        var htmlLines = ['<!DOCTYPE html>', '<html>', ...html.split('\\n'), '</html>'];\n        exceptions.forEach(exception => {\n          var stacktrace = exception.stacktrace;\n          if (stacktrace && stacktrace.frames) {\n            stacktrace.frames = stacktrace.frames.map(frame => applySourceContextToFrame(frame, htmlLines, htmlFilename, this._options.frameContextLines != null ? this._options.frameContextLines : DEFAULT_LINES_OF_CONTEXT));\n          }\n        });\n        return event;\n      }\n    }], [{\n      key: \"__initStatic\",\n      value:\n      /**\n       * @inheritDoc\n       */\n      function __initStatic() {\n        this.id = 'ContextLines';\n      }\n    }]);\n  }();\n  ContextLines.__initStatic();\n\n  /**\n   * Only exported for testing\n   */\n  function applySourceContextToFrame(frame, htmlLines, htmlFilename, linesOfContext) {\n    if (frame.filename !== htmlFilename || !frame.lineno || !htmlLines.length) {\n      return frame;\n    }\n    utils.addContextToFrame(htmlLines, frame, linesOfContext);\n    return frame;\n  }\n  exports.ContextLines = ContextLines;\n  exports.applySourceContextToFrame = applySourceContextToFrame;\n});","lineCount":107,"map":[[4,2,1,0,"Object"],[4,8,1,6],[4,9,1,7,"defineProperty"],[4,23,1,21],[4,24,1,22,"exports"],[4,31,1,29],[4,33,1,31],[4,45,1,43],[4,47,1,45],[5,4,1,47,"value"],[5,9,1,52],[5,11,1,54],[6,2,1,59],[6,3,1,60],[6,4,1,61],[7,2,3,0],[7,6,3,6,"utils"],[7,11,3,11],[7,14,3,14,"require"],[7,21,3,21],[7,22,3,21,"_dependencyMap"],[7,36,3,21],[7,56,3,37],[7,57,3,38],[8,2,5,0],[8,6,5,6,"WINDOW"],[8,12,5,12],[8,15,5,15,"utils"],[8,20,5,20],[8,21,5,21,"GLOBAL_OBJ"],[8,31,5,31],[9,2,7,0],[9,6,7,6,"DEFAULT_LINES_OF_CONTEXT"],[9,30,7,30],[9,33,7,33],[9,34,7,34],[11,2,9,0],[12,0,10,0],[13,0,11,0],[14,0,12,0],[15,0,13,0],[16,0,14,0],[17,0,15,0],[18,0,16,0],[19,0,17,0],[20,0,18,0],[21,0,19,0],[22,2,9,0],[22,6,20,6,"ContextLines"],[22,18,20,18],[23,4,20,18],[25,4,26,2],[26,0,27,0],[27,0,28,0],[29,4,30,3],[29,13,30,3,"ContextLines"],[29,26,30,3],[29,28,30,32],[30,6,30,32],[30,10,30,17,"_options"],[30,18,30,25],[30,21,30,25,"arguments"],[30,30,30,25],[30,31,30,25,"length"],[30,37,30,25],[30,45,30,25,"arguments"],[30,54,30,25],[30,62,30,25,"undefined"],[30,71,30,25],[30,74,30,25,"arguments"],[30,83,30,25],[30,89,30,28],[30,90,30,29],[30,91,30,30],[31,6,30,30,"_classCallCheck"],[31,21,30,30],[31,28,30,30,"ContextLines"],[31,40,30,30],[32,6,30,33],[32,10,30,37],[32,11,30,38,"_options"],[32,19,30,46],[32,22,30,49,"_options"],[32,30,30,57],[33,6,31,4],[33,10,31,8],[33,11,31,9,"name"],[33,15,31,13],[33,18,31,16,"ContextLines"],[33,30,31,28],[33,31,31,29,"id"],[33,33,31,31],[34,4,32,2],[36,4,34,2],[37,0,35,0],[38,0,36,0],[39,4,34,2],[39,11,34,2,"_createClass"],[39,23,34,2],[39,24,34,2,"ContextLines"],[39,36,34,2],[40,6,34,2,"key"],[40,9,34,2],[41,6,34,2,"value"],[41,11,34,2],[41,13,37,3],[41,22,37,3,"setupOnce"],[41,31,37,12,"setupOnce"],[41,32,37,13,"_addGlobaleventProcessor"],[41,56,37,37],[41,58,37,39,"_getCurrentHub"],[41,72,37,53],[41,74,37,55],[42,8,38,4],[43,6,38,4],[45,6,41,2],[46,4,41,2],[47,6,41,2,"key"],[47,9,41,2],[48,6,41,2,"value"],[48,11,41,2],[48,13,42,3],[48,22,42,3,"processEvent"],[48,34,42,15,"processEvent"],[48,35,42,16,"event"],[48,40,42,21],[48,42,42,23],[49,8,43,4],[49,15,43,11],[49,19,43,15],[49,20,43,16,"addSourceContext"],[49,36,43,32],[49,37,43,33,"event"],[49,42,43,38],[49,43,43,39],[50,6,44,2],[52,6,46,2],[53,0,47,0],[54,0,48,0],[55,0,49,0],[56,0,50,0],[57,4,46,2],[58,6,46,2,"key"],[58,9,46,2],[59,6,46,2,"value"],[59,11,46,2],[59,13,51,3],[59,22,51,3,"addSourceContext"],[59,38,51,19,"addSourceContext"],[59,39,51,20,"event"],[59,44,51,25],[59,46,51,27],[60,8,52,4],[60,12,52,10,"doc"],[60,15,52,13],[60,18,52,16,"WINDOW"],[60,24,52,22],[60,25,52,23,"document"],[60,33,52,31],[61,8,53,4],[61,12,53,10,"htmlFilename"],[61,24,53,22],[61,27,53,25,"WINDOW"],[61,33,53,31],[61,34,53,32,"location"],[61,42,53,40],[61,46,53,44,"utils"],[61,51,53,49],[61,52,53,50,"stripUrlQueryAndFragment"],[61,76,53,74],[61,77,53,75,"WINDOW"],[61,83,53,81],[61,84,53,82,"location"],[61,92,53,90],[61,93,53,91,"href"],[61,97,53,95],[61,98,53,96],[62,8,54,4],[62,12,54,8],[62,13,54,9,"doc"],[62,16,54,12],[62,20,54,16],[62,21,54,17,"htmlFilename"],[62,33,54,29],[62,35,54,31],[63,10,55,6],[63,17,55,13,"event"],[63,22,55,18],[64,8,56,4],[65,8,58,4],[65,12,58,10,"exceptions"],[65,22,58,20],[65,25,58,23,"event"],[65,30,58,28],[65,31,58,29,"exception"],[65,40,58,38],[65,44,58,42,"event"],[65,49,58,47],[65,50,58,48,"exception"],[65,59,58,57],[65,60,58,58,"values"],[65,66,58,64],[66,8,59,4],[66,12,59,8],[66,13,59,9,"exceptions"],[66,23,59,19],[66,27,59,23],[66,28,59,24,"exceptions"],[66,38,59,34],[66,39,59,35,"length"],[66,45,59,41],[66,47,59,43],[67,10,60,6],[67,17,60,13,"event"],[67,22,60,18],[68,8,61,4],[69,8,63,4],[69,12,63,10,"html"],[69,16,63,14],[69,19,63,17,"doc"],[69,22,63,20],[69,23,63,21,"documentElement"],[69,38,63,36],[69,39,63,37,"innerHTML"],[69,48,63,46],[70,8,64,4],[70,12,64,8],[70,13,64,9,"html"],[70,17,64,13],[70,19,64,15],[71,10,65,6],[71,17,65,13,"event"],[71,22,65,18],[72,8,66,4],[73,8,68,4],[73,12,68,10,"htmlLines"],[73,21,68,19],[73,24,68,22],[73,25,68,23],[73,42,68,40],[73,44,68,42],[73,52,68,50],[73,54,68,52],[73,57,68,55,"html"],[73,61,68,59],[73,62,68,60,"split"],[73,67,68,65],[73,68,68,66],[73,72,68,70],[73,73,68,71],[73,75,68,73],[73,84,68,82],[73,85,68,83],[74,8,70,4,"exceptions"],[74,18,70,14],[74,19,70,15,"forEach"],[74,26,70,22],[74,27,70,23,"exception"],[74,36,70,32],[74,40,70,36],[75,10,71,6],[75,14,71,12,"stacktrace"],[75,24,71,22],[75,27,71,25,"exception"],[75,36,71,34],[75,37,71,35,"stacktrace"],[75,47,71,45],[76,10,72,6],[76,14,72,10,"stacktrace"],[76,24,72,20],[76,28,72,24,"stacktrace"],[76,38,72,34],[76,39,72,35,"frames"],[76,45,72,41],[76,47,72,43],[77,12,73,8,"stacktrace"],[77,22,73,18],[77,23,73,19,"frames"],[77,29,73,25],[77,32,73,28,"stacktrace"],[77,42,73,38],[77,43,73,39,"frames"],[77,49,73,45],[77,50,73,46,"map"],[77,53,73,49],[77,54,73,50,"frame"],[77,59,73,55],[77,63,74,10,"applySourceContextToFrame"],[77,88,74,35],[77,89,75,12,"frame"],[77,94,75,17],[77,96,76,12,"htmlLines"],[77,105,76,21],[77,107,77,12,"htmlFilename"],[77,119,77,24],[77,121,78,12],[77,125,78,16],[77,126,78,17,"_options"],[77,134,78,25],[77,135,78,26,"frameContextLines"],[77,152,78,43],[77,156,78,47],[77,160,78,51],[77,163,78,54],[77,167,78,58],[77,168,78,59,"_options"],[77,176,78,67],[77,177,78,68,"frameContextLines"],[77,194,78,85],[77,197,78,88,"DEFAULT_LINES_OF_CONTEXT"],[77,221,79,10],[77,222,80,8],[77,223,80,9],[78,10,81,6],[79,8,82,4],[79,9,82,5],[79,10,82,6],[80,8,84,4],[80,15,84,11,"event"],[80,20,84,16],[81,6,85,2],[82,4,85,3],[83,6,85,3,"key"],[83,9,85,3],[84,6,85,3,"value"],[84,11,85,3],[85,6,21,2],[86,0,22,0],[87,0,23,0],[88,6,24,3],[88,15,24,10,"__initStatic"],[88,27,24,22,"__initStatic"],[88,28,24,22],[88,30,24,25],[89,8,24,26],[89,12,24,30],[89,13,24,31,"id"],[89,15,24,33],[89,18,24,36],[89,32,24,50],[90,6,24,51],[91,4,24,52],[92,2,24,52],[93,2,86,2,"ContextLines"],[93,14,86,14],[93,15,86,15,"__initStatic"],[93,27,86,27],[93,28,86,28],[93,29,86,29],[95,2,88,0],[96,0,89,0],[97,0,90,0],[98,2,91,0],[98,11,91,9,"applySourceContextToFrame"],[98,36,91,34,"applySourceContextToFrame"],[98,37,92,2,"frame"],[98,42,92,7],[98,44,93,2,"htmlLines"],[98,53,93,11],[98,55,94,2,"htmlFilename"],[98,67,94,14],[98,69,95,2,"linesOfContext"],[98,83,95,16],[98,85,96,2],[99,4,97,2],[99,8,97,6,"frame"],[99,13,97,11],[99,14,97,12,"filename"],[99,22,97,20],[99,27,97,25,"htmlFilename"],[99,39,97,37],[99,43,97,41],[99,44,97,42,"frame"],[99,49,97,47],[99,50,97,48,"lineno"],[99,56,97,54],[99,60,97,58],[99,61,97,59,"htmlLines"],[99,70,97,68],[99,71,97,69,"length"],[99,77,97,75],[99,79,97,77],[100,6,98,4],[100,13,98,11,"frame"],[100,18,98,16],[101,4,99,2],[102,4,101,2,"utils"],[102,9,101,7],[102,10,101,8,"addContextToFrame"],[102,27,101,25],[102,28,101,26,"htmlLines"],[102,37,101,35],[102,39,101,37,"frame"],[102,44,101,42],[102,46,101,44,"linesOfContext"],[102,60,101,58],[102,61,101,59],[103,4,103,2],[103,11,103,9,"frame"],[103,16,103,14],[104,2,104,0],[105,2,106,0,"exports"],[105,9,106,7],[105,10,106,8,"ContextLines"],[105,22,106,20],[105,25,106,23,"ContextLines"],[105,37,106,35],[106,2,107,0,"exports"],[106,9,107,7],[106,10,107,8,"applySourceContextToFrame"],[106,35,107,33],[106,38,107,36,"applySourceContextToFrame"],[106,63,107,61],[107,0,107,62],[107,3]],"functionMap":{"names":["<global>","ContextLines","ContextLines.__initStatic","ContextLines#constructor","ContextLines#setupOnce","ContextLines#processEvent","ContextLines#addSourceContext","exceptions.forEach$argument_0","stacktrace.frames.map$argument_0","applySourceContextToFrame"],"mappings":"AAA;ACmB;GCI,iDD;GEM;GFE;GGK;GHE;GIG;GJE;GKO;uBCmB;kDCG;WDM;KDG;GLG;CDC;ASK;CTa"},"hasCjsExports":true},"type":"js/module"}]}