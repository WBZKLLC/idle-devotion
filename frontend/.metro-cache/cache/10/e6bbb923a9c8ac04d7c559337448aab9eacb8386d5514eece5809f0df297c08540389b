{"dependencies":[{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":227},"end":{"line":6,"column":37,"index":264}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../../stores/entitlementStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":265},"end":{"line":7,"column":68,"index":333}}],"key":"T9mnBESpZyYD0JmqLo9WlYP7WXA=","exportNames":["*"],"imports":1}},{"name":"./types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":334},"end":{"line":8,"column":42,"index":376}}],"key":"iV91Bk2eI9buML90FP6cK2SM5h0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(); // /app/frontend/lib/entitlements/gating.ts\n  // Entitlement gating helpers - enforce premium access at UI/navigation level\n  // Server-side enforcement is separate (backend must also reject)\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.hasEntitlement = hasEntitlement;\n  exports.requireEntitlement = requireEntitlement;\n  exports.useHasEntitlement = useHasEntitlement;\n  exports.hasPremiumCinematicsPack = hasPremiumCinematicsPack;\n  exports.hasHeroCinematic = hasHeroCinematic;\n  exports.canAccessHeroCinematic = canAccessHeroCinematic;\n  exports.requireCinematicAccess = requireCinematicAccess;\n  exports.hasProSubscription = hasProSubscription;\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[0], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  var _expoRouter = require(_dependencyMap[1], \"expo-router\");\n  var _storesEntitlementStore = require(_dependencyMap[2], \"../../stores/entitlementStore\");\n  var _types = require(_dependencyMap[3], \"./types\");\n  /**\n   * Check if user has a specific entitlement\n   * Use this for simple boolean checks in UI\n   */\n  function hasEntitlement(key) {\n    return _storesEntitlementStore.useEntitlementStore.getState().hasEntitlement(key);\n  }\n\n  /**\n   * Require entitlement or show paywall\n   * Use this for guarding premium actions/navigation\n   * \n   * @returns true if entitled, false if blocked (and redirected to paywall)\n   */\n  function requireEntitlement(key, options) {\n    const isEntitled = hasEntitlement(key);\n    if (isEntitled) {\n      return true;\n    }\n    const {\n      alertTitle = 'Premium Feature',\n      alertMessage = 'This feature requires a premium purchase.',\n      showPaywall = true,\n      paywallRoute = '/store'\n    } = options ?? {};\n    Alert.default.alert(alertTitle, alertMessage, showPaywall ? [{\n      text: 'Cancel',\n      style: 'cancel'\n    }, {\n      text: 'View Store',\n      onPress: () => _expoRouter.router.push(paywallRoute)\n    }] : [{\n      text: 'OK'\n    }]);\n    return false;\n  }\n\n  /**\n   * Hook version of hasEntitlement for reactive components\n   */\n  function useHasEntitlement(key) {\n    _s();\n    return (0, _storesEntitlementStore.useEntitlementStore)(s => s.hasEntitlement(key));\n  }\n\n  /**\n   * Check premium cinematics pack ownership\n   */\n  _s(useHasEntitlement, \"ssrRcEEsA5zfi04NivOzyomimcc=\", false, function () {\n    return [_storesEntitlementStore.useEntitlementStore];\n  });\n  function hasPremiumCinematicsPack() {\n    return hasEntitlement(_types.EntitlementKeys.PREMIUM_CINEMATICS_PACK);\n  }\n\n  /**\n   * Check specific hero cinematic ownership\n   */\n  function hasHeroCinematic(heroId) {\n    return hasEntitlement(_types.EntitlementKeys.premiumCinematicOwned(heroId));\n  }\n\n  /**\n   * Check if user can access any premium cinematic\n   * (either owns pack or individual hero cinematic)\n   */\n  function canAccessHeroCinematic(heroId) {\n    return hasPremiumCinematicsPack() || hasHeroCinematic(heroId);\n  }\n\n  /**\n   * Require premium cinematic access or show paywall\n   */\n  function requireCinematicAccess(heroId) {\n    if (canAccessHeroCinematic(heroId)) {\n      return true;\n    }\n    return requireEntitlement(_types.EntitlementKeys.PREMIUM_CINEMATICS_PACK, {\n      alertTitle: 'Premium Cinematic',\n      alertMessage: 'Unlock this cinematic with the Premium Cinematics Pack or purchase it individually.'\n    });\n  }\n\n  /**\n   * Check Pro subscription status\n   */\n  function hasProSubscription() {\n    return hasEntitlement(_types.EntitlementKeys.PRO_SUBSCRIPTION);\n  }\n});","lineCount":117,"map":[[4,27,1,0],[5,2,2,0],[6,2,3,0],[7,2,3,0,"Object"],[7,8,3,0],[7,9,3,0,"defineProperty"],[7,23,3,0],[7,24,3,0,"exports"],[7,31,3,0],[8,4,3,0,"value"],[8,9,3,0],[9,2,3,0],[10,2,3,0],[10,11,3,0,"_interopDefault"],[10,27,3,0,"e"],[10,28,3,0],[11,4,3,0],[11,11,3,0,"e"],[11,12,3,0],[11,16,3,0,"e"],[11,17,3,0],[11,18,3,0,"__esModule"],[11,28,3,0],[11,31,3,0,"e"],[11,32,3,0],[12,6,3,0,"default"],[12,13,3,0],[12,15,3,0,"e"],[13,4,3,0],[14,2,3,0],[15,2,14,0,"exports"],[15,9,14,0],[15,10,14,0,"hasEntitlement"],[15,24,14,0],[15,27,14,0,"hasEntitlement"],[15,41,14,0],[16,2,24,0,"exports"],[16,9,24,0],[16,10,24,0,"requireEntitlement"],[16,28,24,0],[16,31,24,0,"requireEntitlement"],[16,49,24,0],[17,2,66,0,"exports"],[17,9,66,0],[17,10,66,0,"useHasEntitlement"],[17,27,66,0],[17,30,66,0,"useHasEntitlement"],[17,47,66,0],[18,2,73,0,"exports"],[18,9,73,0],[18,10,73,0,"hasPremiumCinematicsPack"],[18,34,73,0],[18,37,73,0,"hasPremiumCinematicsPack"],[18,61,73,0],[19,2,80,0,"exports"],[19,9,80,0],[19,10,80,0,"hasHeroCinematic"],[19,26,80,0],[19,29,80,0,"hasHeroCinematic"],[19,45,80,0],[20,2,88,0,"exports"],[20,9,88,0],[20,10,88,0,"canAccessHeroCinematic"],[20,32,88,0],[20,35,88,0,"canAccessHeroCinematic"],[20,57,88,0],[21,2,95,0,"exports"],[21,9,95,0],[21,10,95,0,"requireCinematicAccess"],[21,32,95,0],[21,35,95,0,"requireCinematicAccess"],[21,57,95,0],[22,2,112,0,"exports"],[22,9,112,0],[22,10,112,0,"hasProSubscription"],[22,28,112,0],[22,31,112,0,"hasProSubscription"],[22,49,112,0],[23,2,114,1],[23,6,114,1,"_reactNativeWebDistExportsAlert"],[23,37,114,1],[23,40,114,1,"require"],[23,47,114,1],[23,48,114,1,"_dependencyMap"],[23,62,114,1],[24,2,114,1],[24,6,114,1,"Alert"],[24,11,114,1],[24,14,114,1,"_interopDefault"],[24,29,114,1],[24,30,114,1,"_reactNativeWebDistExportsAlert"],[24,61,114,1],[25,2,6,0],[25,6,6,0,"_expoRouter"],[25,17,6,0],[25,20,6,0,"require"],[25,27,6,0],[25,28,6,0,"_dependencyMap"],[25,42,6,0],[26,2,7,0],[26,6,7,0,"_storesEntitlementStore"],[26,29,7,0],[26,32,7,0,"require"],[26,39,7,0],[26,40,7,0,"_dependencyMap"],[26,54,7,0],[27,2,8,0],[27,6,8,0,"_types"],[27,12,8,0],[27,15,8,0,"require"],[27,22,8,0],[27,23,8,0,"_dependencyMap"],[27,37,8,0],[28,2,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,2,14,7],[32,11,14,16,"hasEntitlement"],[32,25,14,30,"hasEntitlement"],[32,26,14,31,"key"],[32,29,14,42],[32,31,14,53],[33,4,15,2],[33,11,15,9,"useEntitlementStore"],[33,34,15,28],[33,35,15,28,"useEntitlementStore"],[33,54,15,28],[33,55,15,29,"getState"],[33,63,15,37],[33,64,15,38],[33,65,15,39],[33,66,15,40,"hasEntitlement"],[33,80,15,54],[33,81,15,55,"key"],[33,84,15,58],[33,85,15,59],[34,2,16,0],[36,2,18,0],[37,0,19,0],[38,0,20,0],[39,0,21,0],[40,0,22,0],[41,0,23,0],[42,2,24,7],[42,11,24,16,"requireEntitlement"],[42,29,24,34,"requireEntitlement"],[42,30,25,2,"key"],[42,33,25,13],[42,35,26,2,"options"],[42,42,31,3],[42,44,32,11],[43,4,33,2],[43,10,33,8,"isEntitled"],[43,20,33,18],[43,23,33,21,"hasEntitlement"],[43,37,33,35],[43,38,33,36,"key"],[43,41,33,39],[43,42,33,40],[44,4,35,2],[44,8,35,6,"isEntitled"],[44,18,35,16],[44,20,35,18],[45,6,36,4],[45,13,36,11],[45,17,36,15],[46,4,37,2],[47,4,39,2],[47,10,39,8],[48,6,40,4,"alertTitle"],[48,16,40,14],[48,19,40,17],[48,36,40,34],[49,6,41,4,"alertMessage"],[49,18,41,16],[49,21,41,19],[49,64,41,62],[50,6,42,4,"showPaywall"],[50,17,42,15],[50,20,42,18],[50,24,42,22],[51,6,43,4,"paywallRoute"],[51,18,43,16],[51,21,43,19],[52,4,44,2],[52,5,44,3],[52,8,44,6,"options"],[52,15,44,13],[52,19,44,17],[52,20,44,18],[52,21,44,19],[53,4,46,2,"Alert"],[53,9,46,7],[53,10,46,7,"default"],[53,17,46,7],[53,18,46,8,"alert"],[53,23,46,13],[53,24,47,4,"alertTitle"],[53,34,47,14],[53,36,48,4,"alertMessage"],[53,48,48,16],[53,50,49,4,"showPaywall"],[53,61,49,15],[53,64,50,8],[53,65,51,10],[54,6,51,12,"text"],[54,10,51,16],[54,12,51,18],[54,20,51,26],[55,6,51,28,"style"],[55,11,51,33],[55,13,51,35],[56,4,51,44],[56,5,51,45],[56,7,52,10],[57,6,53,12,"text"],[57,10,53,16],[57,12,53,18],[57,24,53,30],[58,6,54,12,"onPress"],[58,13,54,19],[58,15,54,21,"onPress"],[58,16,54,21],[58,21,54,27,"router"],[58,32,54,33],[58,33,54,33,"router"],[58,39,54,33],[58,40,54,34,"push"],[58,44,54,38],[58,45,54,39,"paywallRoute"],[58,57,54,58],[59,4,55,10],[59,5,55,11],[59,6,56,9],[59,9,57,8],[59,10,57,9],[60,6,57,11,"text"],[60,10,57,15],[60,12,57,17],[61,4,57,22],[61,5,57,23],[61,6,58,2],[61,7,58,3],[62,4,60,2],[62,11,60,9],[62,16,60,14],[63,2,61,0],[65,2,63,0],[66,0,64,0],[67,0,65,0],[68,2,66,7],[68,11,66,16,"useHasEntitlement"],[68,28,66,33,"useHasEntitlement"],[68,29,66,34,"key"],[68,32,66,45],[68,34,66,56],[69,4,66,56,"_s"],[69,6,66,56],[70,4,67,2],[70,11,67,9],[70,15,67,9,"useEntitlementStore"],[70,38,67,28],[70,39,67,28,"useEntitlementStore"],[70,58,67,28],[70,60,67,29,"s"],[70,61,67,30],[70,65,67,34,"s"],[70,66,67,35],[70,67,67,36,"hasEntitlement"],[70,81,67,50],[70,82,67,51,"key"],[70,85,67,54],[70,86,67,55],[70,87,67,56],[71,2,68,0],[73,2,70,0],[74,0,71,0],[75,0,72,0],[76,2,70,0,"_s"],[76,4,70,0],[76,5,66,16,"useHasEntitlement"],[76,22,66,33],[77,4,66,33],[77,12,67,9,"useEntitlementStore"],[77,35,67,28],[77,36,67,28,"useEntitlementStore"],[77,55,67,28],[78,2,67,28],[79,2,73,7],[79,11,73,16,"hasPremiumCinematicsPack"],[79,35,73,40,"hasPremiumCinematicsPack"],[79,36,73,40],[79,38,73,52],[80,4,74,2],[80,11,74,9,"hasEntitlement"],[80,25,74,23],[80,26,74,24,"EntitlementKeys"],[80,32,74,39],[80,33,74,39,"EntitlementKeys"],[80,48,74,39],[80,49,74,40,"PREMIUM_CINEMATICS_PACK"],[80,72,74,63],[80,73,74,64],[81,2,75,0],[83,2,77,0],[84,0,78,0],[85,0,79,0],[86,2,80,7],[86,11,80,16,"hasHeroCinematic"],[86,27,80,32,"hasHeroCinematic"],[86,28,80,33,"heroId"],[86,34,80,47],[86,36,80,58],[87,4,81,2],[87,11,81,9,"hasEntitlement"],[87,25,81,23],[87,26,81,24,"EntitlementKeys"],[87,32,81,39],[87,33,81,39,"EntitlementKeys"],[87,48,81,39],[87,49,81,40,"premiumCinematicOwned"],[87,70,81,61],[87,71,81,62,"heroId"],[87,77,81,68],[87,78,81,69],[87,79,81,70],[88,2,82,0],[90,2,84,0],[91,0,85,0],[92,0,86,0],[93,0,87,0],[94,2,88,7],[94,11,88,16,"canAccessHeroCinematic"],[94,33,88,38,"canAccessHeroCinematic"],[94,34,88,39,"heroId"],[94,40,88,53],[94,42,88,64],[95,4,89,2],[95,11,89,9,"hasPremiumCinematicsPack"],[95,35,89,33],[95,36,89,34],[95,37,89,35],[95,41,89,39,"hasHeroCinematic"],[95,57,89,55],[95,58,89,56,"heroId"],[95,64,89,62],[95,65,89,63],[96,2,90,0],[98,2,92,0],[99,0,93,0],[100,0,94,0],[101,2,95,7],[101,11,95,16,"requireCinematicAccess"],[101,33,95,38,"requireCinematicAccess"],[101,34,95,39,"heroId"],[101,40,95,53],[101,42,95,64],[102,4,96,2],[102,8,96,6,"canAccessHeroCinematic"],[102,30,96,28],[102,31,96,29,"heroId"],[102,37,96,35],[102,38,96,36],[102,40,96,38],[103,6,97,4],[103,13,97,11],[103,17,97,15],[104,4,98,2],[105,4,100,2],[105,11,100,9,"requireEntitlement"],[105,29,100,27],[105,30,101,4,"EntitlementKeys"],[105,36,101,19],[105,37,101,19,"EntitlementKeys"],[105,52,101,19],[105,53,101,20,"PREMIUM_CINEMATICS_PACK"],[105,76,101,43],[105,78,102,4],[106,6,103,6,"alertTitle"],[106,16,103,16],[106,18,103,18],[106,37,103,37],[107,6,104,6,"alertMessage"],[107,18,104,18],[107,20,104,20],[108,4,105,4],[108,5,106,2],[108,6,106,3],[109,2,107,0],[111,2,109,0],[112,0,110,0],[113,0,111,0],[114,2,112,7],[114,11,112,16,"hasProSubscription"],[114,29,112,34,"hasProSubscription"],[114,30,112,34],[114,32,112,46],[115,4,113,2],[115,11,113,9,"hasEntitlement"],[115,25,113,23],[115,26,113,24,"EntitlementKeys"],[115,32,113,39],[115,33,113,39,"EntitlementKeys"],[115,48,113,39],[115,49,113,40,"PRO_SUBSCRIPTION"],[115,65,113,56],[115,66,113,57],[116,2,114,0],[117,0,114,1],[117,3]],"functionMap":{"names":["<global>","hasEntitlement","requireEntitlement","onPress","useHasEntitlement","useEntitlementStore$argument_0","hasPremiumCinematicsPack","hasHeroCinematic","canAccessHeroCinematic","requireCinematicAccess","hasProSubscription"],"mappings":"AAA;OCa;CDE;OEQ;qBC8B,sCD;CFO;OIK;6BCC,0BD;CJC;OMK;CNE;OOK;CPE;OQM;CRE;OSK;CTY;OUK;CVE"},"hasCjsExports":false},"type":"js/module"}]}