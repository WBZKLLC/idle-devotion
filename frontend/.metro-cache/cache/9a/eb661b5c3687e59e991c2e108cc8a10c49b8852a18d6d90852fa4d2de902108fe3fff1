{"dependencies":[{"name":"./features","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":419},"end":{"line":14,"column":46,"index":465}}],"key":"bmouY5/rpPD3Ua8O/sPZIfrV9Jw=","exportNames":["*"],"imports":1}},{"name":"./entitlements/gating","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":532},"end":{"line":16,"column":98,"index":630}}],"key":"XAmmiiz1xDYBiUCtpO5ZlQoS9FQ=","exportNames":["*"],"imports":1}},{"name":"./entitlements/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":631},"end":{"line":17,"column":82,"index":713}}],"key":"WFFU4HFKj7ZPoJL6d99FCOSpwv4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  /**\n   * Cinematics Access Helper\n   * \n   * Determines if user can access cinematics based on:\n   * 1. Paid entitlement (PREMIUM_CINEMATICS_PACK)\n   * 2. Feature flag (HERO_CINEMATICS)\n   * \n   * Also provides per-hero ownership check for stat bonuses.\n   * \n   * NOTE: For navigation to paywall, use openPremiumCinematic() from openPremiumCinematic.ts\n   * or goToPaywall() from entitlements/navigation.ts - NOT direct router.push.\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.canAccessCinematics = canAccessCinematics;\n  exports.useCanAccessCinematics = useCanAccessCinematics;\n  exports.hasHeroPremiumCinematicOwned = hasHeroPremiumCinematicOwned;\n  exports.useHasHeroPremiumCinematicOwned = useHasHeroPremiumCinematicOwned;\n  var _features = require(_dependencyMap[0], \"./features\");\n  var _entitlementsGating = require(_dependencyMap[1], \"./entitlements/gating\");\n  var _entitlementsTypes = require(_dependencyMap[2], \"./entitlements/types\");\n  /**\n   * Check if user can access cinematics system (synchronous check)\n   * Requires BOTH: paid pack entitlement AND feature flag enabled\n   * @param stableId - User ID for feature flag rollout\n   * @returns true if user has paid AND feature flag is enabled\n   */\n  function canAccessCinematics(stableId) {\n    // Use canonical gating helper\n    const hasPack = (0, _entitlementsGating.hasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Hook version for reactive updates\n   */\n  function useCanAccessCinematics(stableId) {\n    _s();\n    // Use canonical gating hook\n    const hasPack = (0, _entitlementsGating.useHasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Check if user owns the premium cinematic for a specific hero.\n   * This is what grants the stat perk (+10% HP, +5% ATK).\n   * @param heroId - The hero's stable ID (e.g., 'michael_the_archangel')\n   * @returns true if user owns this hero's premium cinematic\n   */\n  _s(useCanAccessCinematics, \"EJfti9qJVmgoBZiXScPEkA5slqY=\", false, function () {\n    return [_entitlementsGating.useHasEntitlement];\n  });\n  function hasHeroPremiumCinematicOwned(heroId) {\n    if (!heroId) return false;\n    // Use canonical gating helper\n    return (0, _entitlementsGating.canAccessHeroCinematic)(heroId);\n  }\n\n  /**\n   * Hook version for reactive per-hero ownership check\n   */\n  function useHasHeroPremiumCinematicOwned(heroId) {\n    _s2();\n    // Use canonical gating hook with dynamic key\n    const key = (0, _entitlementsTypes.premiumCinematicOwnedKey)(heroId);\n    const hasHero = (0, _entitlementsGating.useHasEntitlement)(key);\n    const hasPack = (0, _entitlementsGating.useHasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    // User has access if they own the pack OR own the individual hero cinematic\n    return hasHero || hasPack;\n  }\n  _s2(useHasHeroPremiumCinematicOwned, \"UMt7F5sks9pJMQrA+esKWPIIfwA=\", false, function () {\n    return [_entitlementsGating.useHasEntitlement, _entitlementsGating.useHasEntitlement];\n  });\n});","lineCount":86,"map":[[6,2,1,0],[7,0,2,0],[8,0,3,0],[9,0,4,0],[10,0,5,0],[11,0,6,0],[12,0,7,0],[13,0,8,0],[14,0,9,0],[15,0,10,0],[16,0,11,0],[17,0,12,0],[18,2,1,0,"Object"],[18,8,1,0],[18,9,1,0,"defineProperty"],[18,23,1,0],[18,24,1,0,"exports"],[18,31,1,0],[19,4,1,0,"value"],[19,9,1,0],[20,2,1,0],[21,2,25,0,"exports"],[21,9,25,0],[21,10,25,0,"canAccessCinematics"],[21,29,25,0],[21,32,25,0,"canAccessCinematics"],[21,51,25,0],[22,2,36,0,"exports"],[22,9,36,0],[22,10,36,0,"useCanAccessCinematics"],[22,32,36,0],[22,35,36,0,"useCanAccessCinematics"],[22,57,36,0],[23,2,50,0,"exports"],[23,9,50,0],[23,10,50,0,"hasHeroPremiumCinematicOwned"],[23,38,50,0],[23,41,50,0,"hasHeroPremiumCinematicOwned"],[23,69,50,0],[24,2,59,0,"exports"],[24,9,59,0],[24,10,59,0,"useHasHeroPremiumCinematicOwned"],[24,41,59,0],[24,44,59,0,"useHasHeroPremiumCinematicOwned"],[24,75,59,0],[25,2,14,0],[25,6,14,0,"_features"],[25,15,14,0],[25,18,14,0,"require"],[25,25,14,0],[25,26,14,0,"_dependencyMap"],[25,40,14,0],[26,2,16,0],[26,6,16,0,"_entitlementsGating"],[26,25,16,0],[26,28,16,0,"require"],[26,35,16,0],[26,36,16,0,"_dependencyMap"],[26,50,16,0],[27,2,17,0],[27,6,17,0,"_entitlementsTypes"],[27,24,17,0],[27,27,17,0,"require"],[27,34,17,0],[27,35,17,0,"_dependencyMap"],[27,49,17,0],[28,2,19,0],[29,0,20,0],[30,0,21,0],[31,0,22,0],[32,0,23,0],[33,0,24,0],[34,2,25,7],[34,11,25,16,"canAccessCinematics"],[34,30,25,35,"canAccessCinematics"],[34,31,25,36,"stableId"],[34,39,25,53],[34,41,25,64],[35,4,26,2],[36,4,27,2],[36,10,27,8,"hasPack"],[36,17,27,15],[36,20,27,18],[36,24,27,18,"hasEntitlement"],[36,43,27,32],[36,44,27,32,"hasEntitlement"],[36,58,27,32],[36,60,27,33,"ENTITLEMENT_KEYS"],[36,78,27,49],[36,79,27,49,"ENTITLEMENT_KEYS"],[36,95,27,49],[36,96,27,50,"PREMIUM_CINEMATICS_PACK"],[36,119,27,73],[36,120,27,74],[37,4,28,2],[37,8,28,6],[37,9,28,7,"hasPack"],[37,16,28,14],[37,18,28,16],[37,25,28,23],[37,30,28,28],[38,4,30,2],[38,11,30,9],[38,15,30,9,"isFeatureEnabled"],[38,24,30,25],[38,25,30,25,"isFeatureEnabled"],[38,41,30,25],[38,43,30,26],[38,60,30,43],[38,62,30,45],[39,6,30,47,"stableId"],[40,4,30,56],[40,5,30,57],[40,6,30,58],[41,2,31,0],[43,2,33,0],[44,0,34,0],[45,0,35,0],[46,2,36,7],[46,11,36,16,"useCanAccessCinematics"],[46,33,36,38,"useCanAccessCinematics"],[46,34,36,39,"stableId"],[46,42,36,56],[46,44,36,67],[47,4,36,67,"_s"],[47,6,36,67],[48,4,37,2],[49,4,38,2],[49,10,38,8,"hasPack"],[49,17,38,15],[49,20,38,18],[49,24,38,18,"useHasEntitlement"],[49,43,38,35],[49,44,38,35,"useHasEntitlement"],[49,61,38,35],[49,63,38,36,"ENTITLEMENT_KEYS"],[49,81,38,52],[49,82,38,52,"ENTITLEMENT_KEYS"],[49,98,38,52],[49,99,38,53,"PREMIUM_CINEMATICS_PACK"],[49,122,38,76],[49,123,38,77],[50,4,39,2],[50,8,39,6],[50,9,39,7,"hasPack"],[50,16,39,14],[50,18,39,16],[50,25,39,23],[50,30,39,28],[51,4,41,2],[51,11,41,9],[51,15,41,9,"isFeatureEnabled"],[51,24,41,25],[51,25,41,25,"isFeatureEnabled"],[51,41,41,25],[51,43,41,26],[51,60,41,43],[51,62,41,45],[52,6,41,47,"stableId"],[53,4,41,56],[53,5,41,57],[53,6,41,58],[54,2,42,0],[56,2,44,0],[57,0,45,0],[58,0,46,0],[59,0,47,0],[60,0,48,0],[61,0,49,0],[62,2,44,0,"_s"],[62,4,44,0],[62,5,36,16,"useCanAccessCinematics"],[62,27,36,38],[63,4,36,38],[63,12,38,18,"useHasEntitlement"],[63,31,38,35],[63,32,38,35,"useHasEntitlement"],[63,49,38,35],[64,2,38,35],[65,2,50,7],[65,11,50,16,"hasHeroPremiumCinematicOwned"],[65,39,50,44,"hasHeroPremiumCinematicOwned"],[65,40,50,45,"heroId"],[65,46,50,59],[65,48,50,70],[66,4,51,2],[66,8,51,6],[66,9,51,7,"heroId"],[66,15,51,13],[66,17,51,15],[66,24,51,22],[66,29,51,27],[67,4,52,2],[68,4,53,2],[68,11,53,9],[68,15,53,9,"canAccessHeroCinematic"],[68,34,53,31],[68,35,53,31,"canAccessHeroCinematic"],[68,57,53,31],[68,59,53,32,"heroId"],[68,65,53,38],[68,66,53,39],[69,2,54,0],[71,2,56,0],[72,0,57,0],[73,0,58,0],[74,2,59,7],[74,11,59,16,"useHasHeroPremiumCinematicOwned"],[74,42,59,47,"useHasHeroPremiumCinematicOwned"],[74,43,59,48,"heroId"],[74,49,59,62],[74,51,59,73],[75,4,59,73,"_s2"],[75,7,59,73],[76,4,60,2],[77,4,61,2],[77,10,61,8,"key"],[77,13,61,11],[77,16,61,14],[77,20,61,14,"premiumCinematicOwnedKey"],[77,38,61,38],[77,39,61,38,"premiumCinematicOwnedKey"],[77,63,61,38],[77,65,61,39,"heroId"],[77,71,61,45],[77,72,61,46],[78,4,62,2],[78,10,62,8,"hasHero"],[78,17,62,15],[78,20,62,18],[78,24,62,18,"useHasEntitlement"],[78,43,62,35],[78,44,62,35,"useHasEntitlement"],[78,61,62,35],[78,63,62,36,"key"],[78,66,62,39],[78,67,62,40],[79,4,63,2],[79,10,63,8,"hasPack"],[79,17,63,15],[79,20,63,18],[79,24,63,18,"useHasEntitlement"],[79,43,63,35],[79,44,63,35,"useHasEntitlement"],[79,61,63,35],[79,63,63,36,"ENTITLEMENT_KEYS"],[79,81,63,52],[79,82,63,52,"ENTITLEMENT_KEYS"],[79,98,63,52],[79,99,63,53,"PREMIUM_CINEMATICS_PACK"],[79,122,63,76],[79,123,63,77],[80,4,64,2],[81,4,65,2],[81,11,65,9,"hasHero"],[81,18,65,16],[81,22,65,20,"hasPack"],[81,29,65,27],[82,2,66,0],[83,2,66,1,"_s2"],[83,5,66,1],[83,6,59,16,"useHasHeroPremiumCinematicOwned"],[83,37,59,47],[84,4,59,47],[84,12,62,18,"useHasEntitlement"],[84,31,62,35],[84,32,62,35,"useHasEntitlement"],[84,49,62,35],[84,51,63,18,"useHasEntitlement"],[84,70,63,35],[84,71,63,35,"useHasEntitlement"],[84,88,63,35],[85,2,63,35],[86,0,63,35],[86,3]],"functionMap":{"names":["<global>","canAccessCinematics","useCanAccessCinematics","hasHeroPremiumCinematicOwned","useHasHeroPremiumCinematicOwned"],"mappings":"AAA;OCwB;CDM;OEK;CFM;OGQ;CHI;OIK;CJO"},"hasCjsExports":false},"type":"js/module"}]}