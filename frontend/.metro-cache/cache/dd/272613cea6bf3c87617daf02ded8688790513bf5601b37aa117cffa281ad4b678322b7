{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":159},"end":{"line":8,"column":32,"index":191}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"../telemetry/events","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":192},"end":{"line":9,"column":52,"index":244}}],"key":"k7LZwhoWMWET/ud396YGvDlODrM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.playSfx = playSfx;\n  exports.preloadSfx = preloadSfx;\n  exports.unloadSfx = unloadSfx;\n  exports.setSfxMuted = setSfxMuted;\n  exports.isSfxMuted = isSfxMuted;\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoAv = require(_dependencyMap[2], \"expo-av\");\n  var _telemetryEvents = require(_dependencyMap[3], \"../telemetry/events\");\n  /**\n   * Phase 4.0: SFX Audio System\n   * \n   * Safe audio wrapper that never crashes if assets are missing.\n   * Provides battle feel without blocking gameplay.\n   */\n\n  // SFX names - only these are allowed\n\n  // Asset mapping (placeholder - will be replaced with real assets)\n  var SFX_ASSETS = {\n    battle_start: null,\n    // require('../../assets/audio/battle_start.mp3'),\n    victory: null,\n    // require('../../assets/audio/victory.mp3'),\n    defeat: null // require('../../assets/audio/defeat.mp3'),\n  };\n\n  // Track loaded sounds for cleanup\n  var loadedSounds = new Map();\n\n  // Global mute flag\n  var isMuted = false;\n\n  /**\n   * Play a sound effect by name.\n   * Safe no-op if asset is missing or audio fails.\n   * Never throws or blocks.\n   */\n  function playSfx(_x) {\n    return _playSfx.apply(this, arguments);\n  }\n  /**\n   * Preload all SFX assets.\n   * Call on app start for instant playback.\n   */\n  function _playSfx() {\n    _playSfx = (0, _asyncToGenerator.default)(function* (name) {\n      // Track the attempt regardless of outcome\n      var eventMap = {\n        battle_start: _telemetryEvents.Events.SFX_BATTLE_START_PLAYED,\n        victory: _telemetryEvents.Events.SFX_VICTORY_PLAYED,\n        defeat: _telemetryEvents.Events.SFX_DEFEAT_PLAYED\n      };\n      (0, _telemetryEvents.track)(eventMap[name], {\n        sfxName: name\n      });\n\n      // Silent no-op if muted or no asset\n      if (isMuted) return;\n      var asset = SFX_ASSETS[name];\n      if (!asset) {\n        // Asset not ready - silent no-op\n        if (__DEV__) {\n          console.log(`[SFX] Asset not loaded: ${name} (placeholder mode)`);\n        }\n        return;\n      }\n      try {\n        // Check if already loaded\n        var sound = loadedSounds.get(name);\n        if (!sound) {\n          // Load the sound\n          var _yield$Audio$Sound$cr = yield _expoAv.Audio.Sound.createAsync(asset, {\n              shouldPlay: false,\n              volume: 0.7\n            }),\n            newSound = _yield$Audio$Sound$cr.sound;\n          sound = newSound;\n          loadedSounds.set(name, sound);\n        }\n\n        // Reset and play\n        yield sound.setPositionAsync(0);\n        yield sound.playAsync();\n      } catch (error) {\n        // Silent failure - never crash for audio\n        if (__DEV__) {\n          console.warn(`[SFX] Failed to play ${name}:`, error);\n        }\n      }\n    });\n    return _playSfx.apply(this, arguments);\n  }\n  function preloadSfx() {\n    return _preloadSfx.apply(this, arguments);\n  }\n  /**\n   * Unload all SFX to free memory.\n   */\n  function _preloadSfx() {\n    _preloadSfx = (0, _asyncToGenerator.default)(function* () {\n      try {\n        yield _expoAv.Audio.setAudioModeAsync({\n          playsInSilentModeIOS: true,\n          staysActiveInBackground: false,\n          shouldDuckAndroid: true\n        });\n\n        // Preload all available assets\n        for (var _ref of Object.entries(SFX_ASSETS)) {\n          var _ref2 = (0, _slicedToArray.default)(_ref, 2);\n          var name = _ref2[0];\n          var asset = _ref2[1];\n          if (asset) {\n            try {\n              var _yield$Audio$Sound$cr2 = yield _expoAv.Audio.Sound.createAsync(asset, {\n                  shouldPlay: false,\n                  volume: 0.7\n                }),\n                sound = _yield$Audio$Sound$cr2.sound;\n              loadedSounds.set(name, sound);\n            } catch {\n              // Individual asset failure is OK\n            }\n          }\n        }\n      } catch {\n        // Audio setup failure is OK - will use no-op mode\n      }\n    });\n    return _preloadSfx.apply(this, arguments);\n  }\n  function unloadSfx() {\n    return _unloadSfx.apply(this, arguments);\n  }\n  /**\n   * Set global mute state.\n   */\n  function _unloadSfx() {\n    _unloadSfx = (0, _asyncToGenerator.default)(function* () {\n      for (var sound of loadedSounds.values()) {\n        try {\n          yield sound.unloadAsync();\n        } catch {\n          // Ignore unload errors\n        }\n      }\n      loadedSounds.clear();\n    });\n    return _unloadSfx.apply(this, arguments);\n  }\n  function setSfxMuted(muted) {\n    isMuted = muted;\n  }\n\n  /**\n   * Get current mute state.\n   */\n  function isSfxMuted() {\n    return isMuted;\n  }\n});","lineCount":175,"map":[[12,2,32,0,"exports"],[12,9,32,0],[12,10,32,0,"playSfx"],[12,17,32,0],[12,20,32,0,"playSfx"],[12,27,32,0],[13,2,83,0,"exports"],[13,9,83,0],[13,10,83,0,"preloadSfx"],[13,20,83,0],[13,23,83,0,"preloadSfx"],[13,33,83,0],[14,2,113,0,"exports"],[14,9,113,0],[14,10,113,0,"unloadSfx"],[14,19,113,0],[14,22,113,0,"unloadSfx"],[14,31,113,0],[15,2,127,0,"exports"],[15,9,127,0],[15,10,127,0,"setSfxMuted"],[15,21,127,0],[15,24,127,0,"setSfxMuted"],[15,35,127,0],[16,2,134,0,"exports"],[16,9,134,0],[16,10,134,0,"isSfxMuted"],[16,20,134,0],[16,23,134,0,"isSfxMuted"],[16,33,134,0],[17,2,136,1],[17,6,136,1,"_babelRuntimeHelpersSlicedToArray"],[17,39,136,1],[17,42,136,1,"require"],[17,49,136,1],[17,50,136,1,"_dependencyMap"],[17,64,136,1],[18,2,136,1],[18,6,136,1,"_slicedToArray"],[18,20,136,1],[18,23,136,1,"_interopDefault"],[18,38,136,1],[18,39,136,1,"_babelRuntimeHelpersSlicedToArray"],[18,72,136,1],[19,2,136,1],[19,6,136,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,136,1],[19,45,136,1,"require"],[19,52,136,1],[19,53,136,1,"_dependencyMap"],[19,67,136,1],[20,2,136,1],[20,6,136,1,"_asyncToGenerator"],[20,23,136,1],[20,26,136,1,"_interopDefault"],[20,41,136,1],[20,42,136,1,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,136,1],[21,2,8,0],[21,6,8,0,"_expoAv"],[21,13,8,0],[21,16,8,0,"require"],[21,23,8,0],[21,24,8,0,"_dependencyMap"],[21,38,8,0],[22,2,9,0],[22,6,9,0,"_telemetryEvents"],[22,22,9,0],[22,25,9,0,"require"],[22,32,9,0],[22,33,9,0,"_dependencyMap"],[22,47,9,0],[23,2,1,0],[24,0,2,0],[25,0,3,0],[26,0,4,0],[27,0,5,0],[28,0,6,0],[30,2,11,0],[32,2,14,0],[33,2,15,0],[33,6,15,6,"SFX_ASSETS"],[33,16,15,38],[33,19,15,41],[34,4,16,2,"battle_start"],[34,16,16,14],[34,18,16,16],[34,22,16,20],[35,4,16,22],[36,4,17,2,"victory"],[36,11,17,9],[36,13,17,11],[36,17,17,15],[37,4,17,22],[38,4,18,2,"defeat"],[38,10,18,8],[38,12,18,10],[38,16,18,14],[38,17,18,22],[39,2,19,0],[39,3,19,1],[41,2,21,0],[42,2,22,0],[42,6,22,4,"loadedSounds"],[42,18,22,43],[42,21,22,46],[42,25,22,50,"Map"],[42,28,22,53],[42,29,22,54],[42,30,22,55],[44,2,24,0],[45,2,25,0],[45,6,25,4,"isMuted"],[45,13,25,11],[45,16,25,14],[45,21,25,19],[47,2,27,0],[48,0,28,0],[49,0,29,0],[50,0,30,0],[51,0,31,0],[52,2,27,0],[52,11,32,22,"playSfx"],[52,18,32,29,"playSfx"],[52,19,32,29,"_x"],[52,21,32,29],[53,4,32,29],[53,11,32,29,"_playSfx"],[53,19,32,29],[53,20,32,29,"apply"],[53,25,32,29],[53,32,32,29,"arguments"],[53,41,32,29],[54,2,32,29],[55,2,79,0],[56,0,80,0],[57,0,81,0],[58,0,82,0],[59,2,79,0],[59,11,79,0,"_playSfx"],[59,20,79,0],[60,4,79,0,"_playSfx"],[60,12,79,0],[60,19,79,0,"_asyncToGenerator"],[60,36,79,0],[60,37,79,0,"default"],[60,44,79,0],[60,46,32,7],[60,57,32,30,"name"],[60,61,32,43],[60,63,32,60],[61,6,33,2],[62,6,34,2],[62,10,34,8,"eventMap"],[62,18,34,41],[62,21,34,44],[63,8,35,4,"battle_start"],[63,20,35,16],[63,22,35,18,"Events"],[63,38,35,24],[63,39,35,24,"Events"],[63,45,35,24],[63,46,35,25,"SFX_BATTLE_START_PLAYED"],[63,69,35,48],[64,8,36,4,"victory"],[64,15,36,11],[64,17,36,13,"Events"],[64,33,36,19],[64,34,36,19,"Events"],[64,40,36,19],[64,41,36,20,"SFX_VICTORY_PLAYED"],[64,59,36,38],[65,8,37,4,"defeat"],[65,14,37,10],[65,16,37,12,"Events"],[65,32,37,18],[65,33,37,18,"Events"],[65,39,37,18],[65,40,37,19,"SFX_DEFEAT_PLAYED"],[66,6,38,2],[66,7,38,3],[67,6,39,2],[67,10,39,2,"track"],[67,26,39,7],[67,27,39,7,"track"],[67,32,39,7],[67,34,39,8,"eventMap"],[67,42,39,16],[67,43,39,17,"name"],[67,47,39,21],[67,48,39,22],[67,50,39,24],[68,8,39,26,"sfxName"],[68,15,39,33],[68,17,39,35,"name"],[69,6,39,40],[69,7,39,41],[69,8,39,42],[71,6,41,2],[72,6,42,2],[72,10,42,6,"isMuted"],[72,17,42,13],[72,19,42,15],[73,6,44,2],[73,10,44,8,"asset"],[73,15,44,13],[73,18,44,16,"SFX_ASSETS"],[73,28,44,26],[73,29,44,27,"name"],[73,33,44,31],[73,34,44,32],[74,6,45,2],[74,10,45,6],[74,11,45,7,"asset"],[74,16,45,12],[74,18,45,14],[75,8,46,4],[76,8,47,4],[76,12,47,8,"__DEV__"],[76,19,47,15],[76,21,47,17],[77,10,48,6,"console"],[77,17,48,13],[77,18,48,14,"log"],[77,21,48,17],[77,22,48,18],[77,49,48,45,"name"],[77,53,48,49],[77,74,48,70],[77,75,48,71],[78,8,49,4],[79,8,50,4],[80,6,51,2],[81,6,53,2],[81,10,53,6],[82,8,54,4],[83,8,55,4],[83,12,55,8,"sound"],[83,17,55,13],[83,20,55,16,"loadedSounds"],[83,32,55,28],[83,33,55,29,"get"],[83,36,55,32],[83,37,55,33,"name"],[83,41,55,37],[83,42,55,38],[84,8,57,4],[84,12,57,8],[84,13,57,9,"sound"],[84,18,57,14],[84,20,57,16],[85,10,58,6],[86,10,59,6],[86,14,59,6,"_yield$Audio$Sound$cr"],[86,35,59,6],[86,44,59,40,"Audio"],[86,51,59,45],[86,52,59,45,"Audio"],[86,57,59,45],[86,58,59,46,"Sound"],[86,63,59,51],[86,64,59,52,"createAsync"],[86,75,59,63],[86,76,59,64,"asset"],[86,81,59,69],[86,83,59,71],[87,14,60,8,"shouldPlay"],[87,24,60,18],[87,26,60,20],[87,31,60,25],[88,14,61,8,"volume"],[88,20,61,14],[88,22,61,16],[89,12,62,6],[89,13,62,7],[89,14,62,8],[90,12,59,21,"newSound"],[90,20,59,29],[90,23,59,29,"_yield$Audio$Sound$cr"],[90,44,59,29],[90,45,59,14,"sound"],[90,50,59,19],[91,10,63,6,"sound"],[91,15,63,11],[91,18,63,14,"newSound"],[91,26,63,22],[92,10,64,6,"loadedSounds"],[92,22,64,18],[92,23,64,19,"set"],[92,26,64,22],[92,27,64,23,"name"],[92,31,64,27],[92,33,64,29,"sound"],[92,38,64,34],[92,39,64,35],[93,8,65,4],[95,8,67,4],[96,8,68,4],[96,14,68,10,"sound"],[96,19,68,15],[96,20,68,16,"setPositionAsync"],[96,36,68,32],[96,37,68,33],[96,38,68,34],[96,39,68,35],[97,8,69,4],[97,14,69,10,"sound"],[97,19,69,15],[97,20,69,16,"playAsync"],[97,29,69,25],[97,30,69,26],[97,31,69,27],[98,6,71,2],[98,7,71,3],[98,8,71,4],[98,15,71,11,"error"],[98,20,71,16],[98,22,71,18],[99,8,72,4],[100,8,73,4],[100,12,73,8,"__DEV__"],[100,19,73,15],[100,21,73,17],[101,10,74,6,"console"],[101,17,74,13],[101,18,74,14,"warn"],[101,22,74,18],[101,23,74,19],[101,47,74,43,"name"],[101,51,74,47],[101,54,74,50],[101,56,74,52,"error"],[101,61,74,57],[101,62,74,58],[102,8,75,4],[103,6,76,2],[104,4,77,0],[104,5,77,1],[105,4,77,1],[105,11,77,1,"_playSfx"],[105,19,77,1],[105,20,77,1,"apply"],[105,25,77,1],[105,32,77,1,"arguments"],[105,41,77,1],[106,2,77,1],[107,2,77,1],[107,11,83,22,"preloadSfx"],[107,21,83,32,"preloadSfx"],[107,22,83,32],[108,4,83,32],[108,11,83,32,"_preloadSfx"],[108,22,83,32],[108,23,83,32,"apply"],[108,28,83,32],[108,35,83,32,"arguments"],[108,44,83,32],[109,2,83,32],[110,2,110,0],[111,0,111,0],[112,0,112,0],[113,2,110,0],[113,11,110,0,"_preloadSfx"],[113,23,110,0],[114,4,110,0,"_preloadSfx"],[114,15,110,0],[114,22,110,0,"_asyncToGenerator"],[114,39,110,0],[114,40,110,0,"default"],[114,47,110,0],[114,49,83,7],[114,62,83,50],[115,6,84,2],[115,10,84,6],[116,8,85,4],[116,14,85,10,"Audio"],[116,21,85,15],[116,22,85,15,"Audio"],[116,27,85,15],[116,28,85,16,"setAudioModeAsync"],[116,45,85,33],[116,46,85,34],[117,10,86,6,"playsInSilentModeIOS"],[117,30,86,26],[117,32,86,28],[117,36,86,32],[118,10,87,6,"staysActiveInBackground"],[118,33,87,29],[118,35,87,31],[118,40,87,36],[119,10,88,6,"shouldDuckAndroid"],[119,27,88,23],[119,29,88,25],[120,8,89,4],[120,9,89,5],[120,10,89,6],[122,8,91,4],[123,8,92,4],[123,17,92,4,"_ref"],[123,21,92,4],[123,25,92,32,"Object"],[123,31,92,38],[123,32,92,39,"entries"],[123,39,92,46],[123,40,92,47,"SFX_ASSETS"],[123,50,92,57],[123,51,92,58],[123,53,92,60],[124,10,92,60],[124,14,92,60,"_ref2"],[124,19,92,60],[124,26,92,60,"_slicedToArray"],[124,40,92,60],[124,41,92,60,"default"],[124,48,92,60],[124,50,92,60,"_ref"],[124,54,92,60],[125,10,92,60],[125,14,92,16,"name"],[125,18,92,20],[125,21,92,20,"_ref2"],[125,26,92,20],[126,10,92,20],[126,14,92,22,"asset"],[126,19,92,27],[126,22,92,27,"_ref2"],[126,27,92,27],[127,10,93,6],[127,14,93,10,"asset"],[127,19,93,15],[127,21,93,17],[128,12,94,8],[128,16,94,12],[129,14,95,10],[129,18,95,10,"_yield$Audio$Sound$cr2"],[129,40,95,10],[129,49,95,34,"Audio"],[129,56,95,39],[129,57,95,39,"Audio"],[129,62,95,39],[129,63,95,40,"Sound"],[129,68,95,45],[129,69,95,46,"createAsync"],[129,80,95,57],[129,81,95,58,"asset"],[129,86,95,63],[129,88,95,65],[130,18,96,12,"shouldPlay"],[130,28,96,22],[130,30,96,24],[130,35,96,29],[131,18,97,12,"volume"],[131,24,97,18],[131,26,97,20],[132,16,98,10],[132,17,98,11],[132,18,98,12],[133,16,95,18,"sound"],[133,21,95,23],[133,24,95,23,"_yield$Audio$Sound$cr2"],[133,46,95,23],[133,47,95,18,"sound"],[133,52,95,23],[134,14,99,10,"loadedSounds"],[134,26,99,22],[134,27,99,23,"set"],[134,30,99,26],[134,31,99,27,"name"],[134,35,99,31],[134,37,99,44,"sound"],[134,42,99,49],[134,43,99,50],[135,12,100,8],[135,13,100,9],[135,14,100,10],[135,20,100,16],[136,14,101,10],[137,12,101,10],[138,10,103,6],[139,8,104,4],[140,6,105,2],[140,7,105,3],[140,8,105,4],[140,14,105,10],[141,8,106,4],[142,6,106,4],[143,4,108,0],[143,5,108,1],[144,4,108,1],[144,11,108,1,"_preloadSfx"],[144,22,108,1],[144,23,108,1,"apply"],[144,28,108,1],[144,35,108,1,"arguments"],[144,44,108,1],[145,2,108,1],[146,2,108,1],[146,11,113,22,"unloadSfx"],[146,20,113,31,"unloadSfx"],[146,21,113,31],[147,4,113,31],[147,11,113,31,"_unloadSfx"],[147,21,113,31],[147,22,113,31,"apply"],[147,27,113,31],[147,34,113,31,"arguments"],[147,43,113,31],[148,2,113,31],[149,2,124,0],[150,0,125,0],[151,0,126,0],[152,2,124,0],[152,11,124,0,"_unloadSfx"],[152,22,124,0],[153,4,124,0,"_unloadSfx"],[153,14,124,0],[153,21,124,0,"_asyncToGenerator"],[153,38,124,0],[153,39,124,0,"default"],[153,46,124,0],[153,48,113,7],[153,61,113,49],[154,6,114,2],[154,11,114,7],[154,15,114,13,"sound"],[154,20,114,18],[154,24,114,22,"loadedSounds"],[154,36,114,34],[154,37,114,35,"values"],[154,43,114,41],[154,44,114,42],[154,45,114,43],[154,47,114,45],[155,8,115,4],[155,12,115,8],[156,10,116,6],[156,16,116,12,"sound"],[156,21,116,17],[156,22,116,18,"unloadAsync"],[156,33,116,29],[156,34,116,30],[156,35,116,31],[157,8,117,4],[157,9,117,5],[157,10,117,6],[157,16,117,12],[158,10,118,6],[159,8,118,6],[160,6,120,2],[161,6,121,2,"loadedSounds"],[161,18,121,14],[161,19,121,15,"clear"],[161,24,121,20],[161,25,121,21],[161,26,121,22],[162,4,122,0],[162,5,122,1],[163,4,122,1],[163,11,122,1,"_unloadSfx"],[163,21,122,1],[163,22,122,1,"apply"],[163,27,122,1],[163,34,122,1,"arguments"],[163,43,122,1],[164,2,122,1],[165,2,127,7],[165,11,127,16,"setSfxMuted"],[165,22,127,27,"setSfxMuted"],[165,23,127,28,"muted"],[165,28,127,42],[165,30,127,50],[166,4,128,2,"isMuted"],[166,11,128,9],[166,14,128,12,"muted"],[166,19,128,17],[167,2,129,0],[169,2,131,0],[170,0,132,0],[171,0,133,0],[172,2,134,7],[172,11,134,16,"isSfxMuted"],[172,21,134,26,"isSfxMuted"],[172,22,134,26],[172,24,134,38],[173,4,135,2],[173,11,135,9,"isMuted"],[173,18,135,16],[174,2,136,0],[175,0,136,1],[175,3]],"functionMap":{"names":["<global>","playSfx","preloadSfx","unloadSfx","setSfxMuted","isSfxMuted"],"mappings":"AAA;OC+B;CD6C;OEM;CFyB;OGK;CHS;OIK;CJE;OKK;CLE"},"hasCjsExports":false},"type":"js/module"}]}