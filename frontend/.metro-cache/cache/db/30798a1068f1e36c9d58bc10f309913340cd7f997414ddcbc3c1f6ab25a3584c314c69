{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"API_BASE\", {\n    enumerable: true,\n    get: function () {\n      return API_BASE;\n    }\n  });\n  exports.apiUrl = apiUrl;\n  exports.getAuthHeaders = getAuthHeaders;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  /**\n   * Centralized API Configuration\n   * \n   * Single source of truth for API base URL across all platforms.\n   * Web preview, device, and tunnel all use this.\n   */\n\n  /**\n   * Get the API base URL based on platform and environment.\n   * \n   * Priority:\n   * 1. EXPO_PUBLIC_BACKEND_URL (if set)\n   * 2. EXPO_PUBLIC_API_URL (legacy fallback)\n   * 3. Platform-specific defaults\n   */\n  function getApiBaseUrl() {\n    // Check environment variables - normalize trailing slashes\n    const RAW = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL ?? _expoVirtualEnv.env.EXPO_PUBLIC_API_URL ?? '';\n\n    // Use explicitly set URLs first (trimmed of trailing slashes)\n    if (RAW) {\n      return RAW.replace(/\\/+$/, '');\n    }\n\n    // Platform-specific defaults when no env var is set\n    if (Platform.default.OS === 'web') {\n      // Web preview: use relative paths (assumes proxy is configured)\n      // If no proxy, this will fail - but that's expected\n      return '';\n    }\n\n    // Native device: default to localhost:8001 (won't work on real device without tunnel)\n    // In production, EXPO_PUBLIC_BACKEND_URL should always be set\n    return 'http://localhost:8001';\n  }\n\n  /**\n   * The API base URL - use this everywhere instead of hardcoding.\n   * \n   * Usage:\n   *   import { API_BASE } from '@/lib/api/config';\n   *   fetch(`${API_BASE}/api/endpoint`, { ... });\n   */\n  const API_BASE = getApiBaseUrl();\n\n  /**\n   * Construct a full API URL.\n   * \n   * @param path - The API path (e.g., '/api/daily/status')\n   * @returns Full URL with base\n   */\n  function apiUrl(path) {\n    // Ensure path starts with /\n    const normalizedPath = path.startsWith('/') ? path : `/${path}`;\n    return `${API_BASE}${normalizedPath}`;\n  }\n\n  /**\n   * Get auth headers for API requests.\n   * \n   * @param token - JWT token\n   * @returns Headers object with Authorization\n   */\n  function getAuthHeaders(token) {\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n\n  // Log the API base URL in development for debugging\n  if (__DEV__) {\n    console.log('[API Config] Base URL:', API_BASE || '(relative paths)');\n    console.log('[API Config] Platform:', Platform.default.OS);\n\n    // WARN if API_BASE is empty - likely means env var not picked up\n    if (!API_BASE) {\n      console.warn('[API Config] ⚠️ API_BASE is empty! ' + 'Set EXPO_PUBLIC_BACKEND_URL in .env for web preview to work. ' + 'Falling back to relative paths (will 404 if no proxy configured).');\n    }\n  }\n});","lineCount":103,"map":[[12,2,48,0,"Object"],[12,8,48,0],[12,9,48,0,"defineProperty"],[12,23,48,0],[12,24,48,0,"exports"],[12,31,48,0],[13,4,48,0,"enumerable"],[13,14,48,0],[14,4,48,0,"get"],[14,7,48,0],[14,18,48,0,"get"],[14,19,48,0],[15,6,48,0],[15,13,48,0,"API_BASE"],[15,21,48,0],[16,4,48,0],[17,2,48,0],[18,2,56,0,"exports"],[18,9,56,0],[18,10,56,0,"apiUrl"],[18,16,56,0],[18,19,56,0,"apiUrl"],[18,25,56,0],[19,2,68,0,"exports"],[19,9,68,0],[19,10,68,0,"getAuthHeaders"],[19,24,68,0],[19,27,68,0,"getAuthHeaders"],[19,41,68,0],[20,2,73,1],[20,6,73,1,"_expoVirtualEnv"],[20,21,73,1],[20,24,73,1,"require"],[20,31,73,1],[20,32,73,1,"_dependencyMap"],[20,46,73,1],[21,2,73,1],[21,6,73,1,"_reactNativeWebDistExportsPlatform"],[21,40,73,1],[21,43,73,1,"require"],[21,50,73,1],[21,51,73,1,"_dependencyMap"],[21,65,73,1],[22,2,73,1],[22,6,73,1,"Platform"],[22,14,73,1],[22,17,73,1,"_interopDefault"],[22,32,73,1],[22,33,73,1,"_reactNativeWebDistExportsPlatform"],[22,67,73,1],[23,2,1,0],[24,0,2,0],[25,0,3,0],[26,0,4,0],[27,0,5,0],[28,0,6,0],[30,2,10,0],[31,0,11,0],[32,0,12,0],[33,0,13,0],[34,0,14,0],[35,0,15,0],[36,0,16,0],[37,0,17,0],[38,2,18,0],[38,11,18,9,"getApiBaseUrl"],[38,24,18,22,"getApiBaseUrl"],[38,25,18,22],[38,27,18,33],[39,4,19,2],[40,4,20,2],[40,10,20,8,"RAW"],[40,13,20,11],[40,16,20,14,"_expoVirtualEnv"],[40,31,20,14],[40,32,20,14,"env"],[40,35,20,14],[40,36,20,14,"EXPO_PUBLIC_BACKEND_URL"],[40,59,20,14],[40,63,20,14,"_expoVirtualEnv"],[40,78,20,14],[40,79,20,14,"env"],[40,82,20,14],[40,83,20,14,"EXPO_PUBLIC_API_URL"],[40,102,21,38],[40,106,22,7],[40,108,22,9],[42,4,24,2],[43,4,25,2],[43,8,25,6,"RAW"],[43,11,25,9],[43,13,25,11],[44,6,26,4],[44,13,26,11,"RAW"],[44,16,26,14],[44,17,26,15,"replace"],[44,24,26,22],[44,25,26,23],[44,31,26,29],[44,33,26,31],[44,35,26,33],[44,36,26,34],[45,4,27,2],[47,4,29,2],[48,4,30,2],[48,8,30,6,"Platform"],[48,16,30,14],[48,17,30,14,"default"],[48,24,30,14],[48,25,30,15,"OS"],[48,27,30,17],[48,32,30,22],[48,37,30,27],[48,39,30,29],[49,6,31,4],[50,6,32,4],[51,6,33,4],[51,13,33,11],[51,15,33,13],[52,4,34,2],[54,4,36,2],[55,4,37,2],[56,4,38,2],[56,11,38,9],[56,34,38,32],[57,2,39,0],[59,2,41,0],[60,0,42,0],[61,0,43,0],[62,0,44,0],[63,0,45,0],[64,0,46,0],[65,0,47,0],[66,2,48,7],[66,8,48,13,"API_BASE"],[66,16,48,21],[66,19,48,24,"getApiBaseUrl"],[66,32,48,37],[66,33,48,38],[66,34,48,39],[68,2,50,0],[69,0,51,0],[70,0,52,0],[71,0,53,0],[72,0,54,0],[73,0,55,0],[74,2,56,7],[74,11,56,16,"apiUrl"],[74,17,56,22,"apiUrl"],[74,18,56,23,"path"],[74,22,56,35],[74,24,56,45],[75,4,57,2],[76,4,58,2],[76,10,58,8,"normalizedPath"],[76,24,58,22],[76,27,58,25,"path"],[76,31,58,29],[76,32,58,30,"startsWith"],[76,42,58,40],[76,43,58,41],[76,46,58,44],[76,47,58,45],[76,50,58,48,"path"],[76,54,58,52],[76,57,58,55],[76,61,58,59,"path"],[76,65,58,63],[76,67,58,65],[77,4,59,2],[77,11,59,9],[77,14,59,12,"API_BASE"],[77,22,59,20],[77,25,59,23,"normalizedPath"],[77,39,59,37],[77,41,59,39],[78,2,60,0],[80,2,62,0],[81,0,63,0],[82,0,64,0],[83,0,65,0],[84,0,66,0],[85,0,67,0],[86,2,68,7],[86,11,68,16,"getAuthHeaders"],[86,25,68,30,"getAuthHeaders"],[86,26,68,31,"token"],[86,31,68,44],[86,33,68,70],[87,4,69,2],[87,11,69,9],[88,6,70,4],[88,20,70,18],[88,22,70,20],[88,40,70,38],[89,6,71,4],[89,21,71,19],[89,23,71,21],[89,33,71,31,"token"],[89,38,71,36],[90,4,72,2],[90,5,72,3],[91,2,73,0],[93,2,75,0],[94,2,76,0],[94,6,76,4,"__DEV__"],[94,13,76,11],[94,15,76,13],[95,4,77,2,"console"],[95,11,77,9],[95,12,77,10,"log"],[95,15,77,13],[95,16,77,14],[95,40,77,38],[95,42,77,40,"API_BASE"],[95,50,77,48],[95,54,77,52],[95,72,77,70],[95,73,77,71],[96,4,78,2,"console"],[96,11,78,9],[96,12,78,10,"log"],[96,15,78,13],[96,16,78,14],[96,40,78,38],[96,42,78,40,"Platform"],[96,50,78,48],[96,51,78,48,"default"],[96,58,78,48],[96,59,78,49,"OS"],[96,61,78,51],[96,62,78,52],[98,4,80,2],[99,4,81,2],[99,8,81,6],[99,9,81,7,"API_BASE"],[99,17,81,15],[99,19,81,17],[100,6,82,4,"console"],[100,13,82,11],[100,14,82,12,"warn"],[100,18,82,16],[100,19,83,6],[100,56,83,43],[100,59,84,6],[100,122,84,69],[100,125,85,6],[100,192,86,4],[100,193,86,5],[101,4,87,2],[102,2,88,0],[103,0,88,1],[103,3]],"functionMap":{"names":["<global>","getApiBaseUrl","apiUrl","getAuthHeaders"],"mappings":"AAA;ACiB;CDqB;OEiB;CFI;OGQ;CHK"},"hasCjsExports":false},"type":"js/module"}]}