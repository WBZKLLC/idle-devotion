{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getMailSummary = getMailSummary;\n  exports.getMailRewards = getMailRewards;\n  exports.getMailMessages = getMailMessages;\n  exports.getMailGifts = getMailGifts;\n  exports.claimMailReward = claimMailReward;\n  exports.claimMailGift = claimMailGift;\n  // /app/frontend/lib/api/mail.ts\n  // Phase 3.23.2: Mail API Layer\n  //\n  // Canonical API calls for mail system.\n  // Graceful error handling â€” returns defaults on failure.\n\n  const API_BASE = process.env.EXPO_PUBLIC_API_URL || '';\n\n  /**\n   * Get mail summary (badge counts)\n   */\n  async function getMailSummary(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/summary/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch mail summary');\n      return await res.json();\n    } catch {\n      // Default fallback - show daily rewards available\n      return {\n        rewardsAvailable: 1,\n        unreadMessages: 0,\n        giftsAvailable: 0\n      };\n    }\n  }\n\n  /**\n   * Get mail rewards list\n   */\n  async function getMailRewards(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/rewards/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch rewards');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail messages list\n   */\n  async function getMailMessages(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/messages/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch messages');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail gifts list\n   */\n  async function getMailGifts(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/gifts/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch gifts');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Claim a mail reward\n   */\n  async function claimMailReward(username, rewardId) {\n    const res = await fetch(`${API_BASE}/api/mail/rewards/${username}/${rewardId}/claim`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to claim reward');\n  }\n\n  /**\n   * Claim a mail gift\n   */\n  async function claimMailGift(username, giftId) {\n    const res = await fetch(`${API_BASE}/api/mail/gifts/${username}/${giftId}/claim`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to claim gift');\n  }\n});","lineCount":97,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"getMailSummary"],[7,24,14,0],[7,27,14,0,"getMailSummary"],[7,41,14,0],[8,2,32,0,"exports"],[8,9,32,0],[8,10,32,0,"getMailRewards"],[8,24,32,0],[8,27,32,0,"getMailRewards"],[8,41,32,0],[9,2,52,0,"exports"],[9,9,52,0],[9,10,52,0,"getMailMessages"],[9,25,52,0],[9,28,52,0,"getMailMessages"],[9,43,52,0],[10,2,71,0,"exports"],[10,9,71,0],[10,10,71,0,"getMailGifts"],[10,22,71,0],[10,25,71,0,"getMailGifts"],[10,37,71,0],[11,2,90,0,"exports"],[11,9,90,0],[11,10,90,0,"claimMailReward"],[11,25,90,0],[11,28,90,0,"claimMailReward"],[11,43,90,0],[12,2,100,0,"exports"],[12,9,100,0],[12,10,100,0,"claimMailGift"],[12,23,100,0],[12,26,100,0,"claimMailGift"],[12,39,100,0],[13,2,1,0],[14,2,2,0],[15,2,3,0],[16,2,4,0],[17,2,5,0],[19,2,9,0],[19,8,9,6,"API_BASE"],[19,16,9,14],[19,19,9,17,"process"],[19,26,9,24],[19,27,9,25,"env"],[19,30,9,28],[19,31,9,29,"EXPO_PUBLIC_API_URL"],[19,50,9,48],[19,54,9,52],[19,56,9,54],[21,2,11,0],[22,0,12,0],[23,0,13,0],[24,2,14,7],[24,17,14,22,"getMailSummary"],[24,31,14,36,"getMailSummary"],[24,32,14,37,"username"],[24,40,14,53],[24,42,18,3],[25,4,19,2],[25,8,19,6],[26,6,20,4],[26,12,20,10,"res"],[26,15,20,13],[26,18,20,16],[26,24,20,22,"fetch"],[26,29,20,27],[26,30,20,28],[26,33,20,31,"API_BASE"],[26,41,20,39],[26,62,20,60,"username"],[26,70,20,68],[26,72,20,70],[26,73,20,71],[27,6,21,4],[27,10,21,8],[27,11,21,9,"res"],[27,14,21,12],[27,15,21,13,"ok"],[27,17,21,15],[27,19,21,17],[27,25,21,23],[27,29,21,27,"Error"],[27,34,21,32],[27,35,21,33],[27,65,21,63],[27,66,21,64],[28,6,22,4],[28,13,22,11],[28,19,22,17,"res"],[28,22,22,20],[28,23,22,21,"json"],[28,27,22,25],[28,28,22,26],[28,29,22,27],[29,4,23,2],[29,5,23,3],[29,6,23,4],[29,12,23,10],[30,6,24,4],[31,6,25,4],[31,13,25,11],[32,8,25,13,"rewardsAvailable"],[32,24,25,29],[32,26,25,31],[32,27,25,32],[33,8,25,34,"unreadMessages"],[33,22,25,48],[33,24,25,50],[33,25,25,51],[34,8,25,53,"giftsAvailable"],[34,22,25,67],[34,24,25,69],[35,6,25,71],[35,7,25,72],[36,4,26,2],[37,2,27,0],[39,2,29,0],[40,0,30,0],[41,0,31,0],[42,2,32,7],[42,17,32,22,"getMailRewards"],[42,31,32,36,"getMailRewards"],[42,32,32,37,"username"],[42,40,32,53],[42,42,39,4],[43,4,40,2],[43,8,40,6],[44,6,41,4],[44,12,41,10,"res"],[44,15,41,13],[44,18,41,16],[44,24,41,22,"fetch"],[44,29,41,27],[44,30,41,28],[44,33,41,31,"API_BASE"],[44,41,41,39],[44,62,41,60,"username"],[44,70,41,68],[44,72,41,70],[44,73,41,71],[45,6,42,4],[45,10,42,8],[45,11,42,9,"res"],[45,14,42,12],[45,15,42,13,"ok"],[45,17,42,15],[45,19,42,17],[45,25,42,23],[45,29,42,27,"Error"],[45,34,42,32],[45,35,42,33],[45,60,42,58],[45,61,42,59],[46,6,43,4],[46,13,43,11],[46,19,43,17,"res"],[46,22,43,20],[46,23,43,21,"json"],[46,27,43,25],[46,28,43,26],[46,29,43,27],[47,4,44,2],[47,5,44,3],[47,6,44,4],[47,12,44,10],[48,6,45,4],[48,13,45,11],[48,15,45,13],[49,4,46,2],[50,2,47,0],[52,2,49,0],[53,0,50,0],[54,0,51,0],[55,2,52,7],[55,17,52,22,"getMailMessages"],[55,32,52,37,"getMailMessages"],[55,33,52,38,"username"],[55,41,52,54],[55,43,58,4],[56,4,59,2],[56,8,59,6],[57,6,60,4],[57,12,60,10,"res"],[57,15,60,13],[57,18,60,16],[57,24,60,22,"fetch"],[57,29,60,27],[57,30,60,28],[57,33,60,31,"API_BASE"],[57,41,60,39],[57,63,60,61,"username"],[57,71,60,69],[57,73,60,71],[57,74,60,72],[58,6,61,4],[58,10,61,8],[58,11,61,9,"res"],[58,14,61,12],[58,15,61,13,"ok"],[58,17,61,15],[58,19,61,17],[58,25,61,23],[58,29,61,27,"Error"],[58,34,61,32],[58,35,61,33],[58,61,61,59],[58,62,61,60],[59,6,62,4],[59,13,62,11],[59,19,62,17,"res"],[59,22,62,20],[59,23,62,21,"json"],[59,27,62,25],[59,28,62,26],[59,29,62,27],[60,4,63,2],[60,5,63,3],[60,6,63,4],[60,12,63,10],[61,6,64,4],[61,13,64,11],[61,15,64,13],[62,4,65,2],[63,2,66,0],[65,2,68,0],[66,0,69,0],[67,0,70,0],[68,2,71,7],[68,17,71,22,"getMailGifts"],[68,29,71,34,"getMailGifts"],[68,30,71,35,"username"],[68,38,71,51],[68,40,77,4],[69,4,78,2],[69,8,78,6],[70,6,79,4],[70,12,79,10,"res"],[70,15,79,13],[70,18,79,16],[70,24,79,22,"fetch"],[70,29,79,27],[70,30,79,28],[70,33,79,31,"API_BASE"],[70,41,79,39],[70,60,79,58,"username"],[70,68,79,66],[70,70,79,68],[70,71,79,69],[71,6,80,4],[71,10,80,8],[71,11,80,9,"res"],[71,14,80,12],[71,15,80,13,"ok"],[71,17,80,15],[71,19,80,17],[71,25,80,23],[71,29,80,27,"Error"],[71,34,80,32],[71,35,80,33],[71,58,80,56],[71,59,80,57],[72,6,81,4],[72,13,81,11],[72,19,81,17,"res"],[72,22,81,20],[72,23,81,21,"json"],[72,27,81,25],[72,28,81,26],[72,29,81,27],[73,4,82,2],[73,5,82,3],[73,6,82,4],[73,12,82,10],[74,6,83,4],[74,13,83,11],[74,15,83,13],[75,4,84,2],[76,2,85,0],[78,2,87,0],[79,0,88,0],[80,0,89,0],[81,2,90,7],[81,17,90,22,"claimMailReward"],[81,32,90,37,"claimMailReward"],[81,33,90,38,"username"],[81,41,90,54],[81,43,90,56,"rewardId"],[81,51,90,72],[81,53,90,89],[82,4,91,2],[82,10,91,8,"res"],[82,13,91,11],[82,16,91,14],[82,22,91,20,"fetch"],[82,27,91,25],[82,28,91,26],[82,31,91,29,"API_BASE"],[82,39,91,37],[82,60,91,58,"username"],[82,68,91,66],[82,72,91,70,"rewardId"],[82,80,91,78],[82,88,91,86],[82,90,91,88],[83,6,92,4,"method"],[83,12,92,10],[83,14,92,12],[84,4,93,2],[84,5,93,3],[84,6,93,4],[85,4,94,2],[85,8,94,6],[85,9,94,7,"res"],[85,12,94,10],[85,13,94,11,"ok"],[85,15,94,13],[85,17,94,15],[85,23,94,21],[85,27,94,25,"Error"],[85,32,94,30],[85,33,94,31],[85,57,94,55],[85,58,94,56],[86,2,95,0],[88,2,97,0],[89,0,98,0],[90,0,99,0],[91,2,100,7],[91,17,100,22,"claimMailGift"],[91,30,100,35,"claimMailGift"],[91,31,100,36,"username"],[91,39,100,52],[91,41,100,54,"giftId"],[91,47,100,68],[91,49,100,85],[92,4,101,2],[92,10,101,8,"res"],[92,13,101,11],[92,16,101,14],[92,22,101,20,"fetch"],[92,27,101,25],[92,28,101,26],[92,31,101,29,"API_BASE"],[92,39,101,37],[92,58,101,56,"username"],[92,66,101,64],[92,70,101,68,"giftId"],[92,76,101,74],[92,84,101,82],[92,86,101,84],[93,6,102,4,"method"],[93,12,102,10],[93,14,102,12],[94,4,103,2],[94,5,103,3],[94,6,103,4],[95,4,104,2],[95,8,104,6],[95,9,104,7,"res"],[95,12,104,10],[95,13,104,11,"ok"],[95,15,104,13],[95,17,104,15],[95,23,104,21],[95,27,104,25,"Error"],[95,32,104,30],[95,33,104,31],[95,55,104,53],[95,56,104,54],[96,2,105,0],[97,0,105,1],[97,3]],"functionMap":{"names":["<global>","getMailSummary","getMailRewards","getMailMessages","getMailGifts","claimMailReward","claimMailGift"],"mappings":"AAA;OCa;CDa;OEK;CFe;OGK;CHc;OIK;CJc;OKK;CLK;OMK;CNK"},"hasCjsExports":false},"type":"js/module"}]}