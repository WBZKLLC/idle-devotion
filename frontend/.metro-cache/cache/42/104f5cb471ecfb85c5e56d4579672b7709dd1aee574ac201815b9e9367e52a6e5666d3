{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"m+kcirlwHAgMIuUoyR2vCxbhWD4=","exportNames":["*"],"imports":1}},{"name":"../hub.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":40},"end":{"line":2,"column":43,"index":83}}],"key":"zULRLUIjTEh01Aba4FYqVmrjf0A=","exportNames":["*"],"imports":1}},{"name":"./errors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":84},"end":{"line":3,"column":59,"index":143}}],"key":"sBFAilsnlkNTfGhyvhhjLjsyBXM=","exportNames":["*"],"imports":1}},{"name":"./idletransaction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":144},"end":{"line":4,"column":55,"index":199}}],"key":"GWbLjkxFm4TdABLKOJNYeLsFBOk=","exportNames":["*"],"imports":1}},{"name":"./sampling.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":50,"index":250}}],"key":"4efP59LIIQeRPpu2Pzd7YKAG0T4=","exportNames":["*"],"imports":1}},{"name":"./transaction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":251},"end":{"line":6,"column":47,"index":298}}],"key":"2/VCqMf6AP+oca+/ayXQIhLr0Nk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"addTracingExtensions\", {\n    enumerable: true,\n    get: function () {\n      return addTracingExtensions;\n    }\n  });\n  Object.defineProperty(exports, \"startIdleTransaction\", {\n    enumerable: true,\n    get: function () {\n      return startIdleTransaction;\n    }\n  });\n  var _sentryUtils = require(_dependencyMap[0], \"@sentry/utils\");\n  var _hubJs = require(_dependencyMap[1], \"../hub.js\");\n  var _errorsJs = require(_dependencyMap[2], \"./errors.js\");\n  var _idletransactionJs = require(_dependencyMap[3], \"./idletransaction.js\");\n  var _samplingJs = require(_dependencyMap[4], \"./sampling.js\");\n  var _transactionJs = require(_dependencyMap[5], \"./transaction.js\");\n  /** Returns all trace headers that are currently on the top scope. */\n  function traceHeaders() {\n    const scope = this.getScope();\n    const span = scope.getSpan();\n    return span ? {\n      'sentry-trace': span.toTraceparent()\n    } : {};\n  }\n\n  /**\n   * Creates a new transaction and adds a sampling decision if it doesn't yet have one.\n   *\n   * The Hub.startTransaction method delegates to this method to do its work, passing the Hub instance in as `this`, as if\n   * it had been called on the hub directly. Exists as a separate function so that it can be injected into the class as an\n   * \"extension method.\"\n   *\n   * @param this: The Hub starting the transaction\n   * @param transactionContext: Data used to configure the transaction\n   * @param CustomSamplingContext: Optional data to be provided to the `tracesSampler` function (if any)\n   *\n   * @returns The new transaction\n   *\n   * @see {@link Hub.startTransaction}\n   */\n  function _startTransaction(transactionContext, customSamplingContext) {\n    const client = this.getClient();\n    const options = client && client.getOptions() || {};\n    const configInstrumenter = options.instrumenter || 'sentry';\n    const transactionInstrumenter = transactionContext.instrumenter || 'sentry';\n    if (configInstrumenter !== transactionInstrumenter) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.error(`A transaction was started with instrumenter=\\`${transactionInstrumenter}\\`, but the SDK is configured with the \\`${configInstrumenter}\\` instrumenter.\nThe transaction will not be sampled. Please use the ${configInstrumenter} instrumentation to start transactions.`);\n      transactionContext.sampled = false;\n    }\n    let transaction = new _transactionJs.Transaction(transactionContext, this);\n    transaction = (0, _samplingJs.sampleTransaction)(transaction, options, Object.assign({\n      parentSampled: transactionContext.parentSampled,\n      transactionContext\n    }, customSamplingContext));\n    if (transaction.sampled) {\n      transaction.initSpanRecorder(options._experiments && options._experiments.maxSpans);\n    }\n    if (client && client.emit) {\n      client.emit('startTransaction', transaction);\n    }\n    return transaction;\n  }\n\n  /**\n   * Create new idle transaction.\n   */\n  function startIdleTransaction(hub, transactionContext, idleTimeout, finalTimeout, onScope, customSamplingContext, heartbeatInterval) {\n    const client = hub.getClient();\n    const options = client && client.getOptions() || {};\n    let transaction = new _idletransactionJs.IdleTransaction(transactionContext, hub, idleTimeout, finalTimeout, heartbeatInterval, onScope);\n    transaction = (0, _samplingJs.sampleTransaction)(transaction, options, Object.assign({\n      parentSampled: transactionContext.parentSampled,\n      transactionContext\n    }, customSamplingContext));\n    if (transaction.sampled) {\n      transaction.initSpanRecorder(options._experiments && options._experiments.maxSpans);\n    }\n    if (client && client.emit) {\n      client.emit('startTransaction', transaction);\n    }\n    return transaction;\n  }\n\n  /**\n   * Adds tracing extensions to the global hub.\n   */\n  function addTracingExtensions() {\n    const carrier = (0, _hubJs.getMainCarrier)();\n    if (!carrier.__SENTRY__) {\n      return;\n    }\n    carrier.__SENTRY__.extensions = carrier.__SENTRY__.extensions || {};\n    if (!carrier.__SENTRY__.extensions.startTransaction) {\n      carrier.__SENTRY__.extensions.startTransaction = _startTransaction;\n    }\n    if (!carrier.__SENTRY__.extensions.traceHeaders) {\n      carrier.__SENTRY__.extensions.traceHeaders = traceHeaders;\n    }\n    (0, _errorsJs.registerErrorInstrumentation)();\n  }\n});","lineCount":110,"map":[[7,2,120,0,"Object"],[7,8,120,0],[7,9,120,0,"defineProperty"],[7,23,120,0],[7,24,120,0,"exports"],[7,31,120,0],[8,4,120,0,"enumerable"],[8,14,120,0],[9,4,120,0,"get"],[9,7,120,0],[9,18,120,0,"get"],[9,19,120,0],[10,6,120,0],[10,13,120,9,"addTracingExtensions"],[10,33,120,29],[11,4,120,29],[12,2,120,29],[13,2,120,0,"Object"],[13,8,120,0],[13,9,120,0,"defineProperty"],[13,23,120,0],[13,24,120,0,"exports"],[13,31,120,0],[14,4,120,0,"enumerable"],[14,14,120,0],[15,4,120,0,"get"],[15,7,120,0],[15,18,120,0,"get"],[15,19,120,0],[16,6,120,0],[16,13,120,31,"startIdleTransaction"],[16,33,120,51],[17,4,120,51],[18,2,120,51],[19,2,1,0],[19,6,1,0,"_sentryUtils"],[19,18,1,0],[19,21,1,0,"require"],[19,28,1,0],[19,29,1,0,"_dependencyMap"],[19,43,1,0],[20,2,2,0],[20,6,2,0,"_hubJs"],[20,12,2,0],[20,15,2,0,"require"],[20,22,2,0],[20,23,2,0,"_dependencyMap"],[20,37,2,0],[21,2,3,0],[21,6,3,0,"_errorsJs"],[21,15,3,0],[21,18,3,0,"require"],[21,25,3,0],[21,26,3,0,"_dependencyMap"],[21,40,3,0],[22,2,4,0],[22,6,4,0,"_idletransactionJs"],[22,24,4,0],[22,27,4,0,"require"],[22,34,4,0],[22,35,4,0,"_dependencyMap"],[22,49,4,0],[23,2,5,0],[23,6,5,0,"_samplingJs"],[23,17,5,0],[23,20,5,0,"require"],[23,27,5,0],[23,28,5,0,"_dependencyMap"],[23,42,5,0],[24,2,6,0],[24,6,6,0,"_transactionJs"],[24,20,6,0],[24,23,6,0,"require"],[24,30,6,0],[24,31,6,0,"_dependencyMap"],[24,45,6,0],[25,2,8,0],[26,2,9,0],[26,11,9,9,"traceHeaders"],[26,23,9,21,"traceHeaders"],[26,24,9,21],[26,26,9,24],[27,4,10,2],[27,10,10,8,"scope"],[27,15,10,13],[27,18,10,16],[27,22,10,20],[27,23,10,21,"getScope"],[27,31,10,29],[27,32,10,30],[27,33,10,31],[28,4,11,2],[28,10,11,8,"span"],[28,14,11,12],[28,17,11,15,"scope"],[28,22,11,20],[28,23,11,21,"getSpan"],[28,30,11,28],[28,31,11,29],[28,32,11,30],[29,4,13,2],[29,11,13,9,"span"],[29,15,13,13],[29,18,14,6],[30,6,15,8],[30,20,15,22],[30,22,15,24,"span"],[30,26,15,28],[30,27,15,29,"toTraceparent"],[30,40,15,42],[30,41,15,43],[31,4,16,6],[31,5,16,7],[31,8,17,6],[31,9,17,7],[31,10,17,8],[32,2,18,0],[34,2,20,0],[35,0,21,0],[36,0,22,0],[37,0,23,0],[38,0,24,0],[39,0,25,0],[40,0,26,0],[41,0,27,0],[42,0,28,0],[43,0,29,0],[44,0,30,0],[45,0,31,0],[46,0,32,0],[47,0,33,0],[48,0,34,0],[49,2,35,0],[49,11,35,9,"_startTransaction"],[49,28,35,26,"_startTransaction"],[49,29,37,2,"transactionContext"],[49,47,37,20],[49,49,38,2,"customSamplingContext"],[49,70,38,23],[49,72,39,2],[50,4,40,2],[50,10,40,8,"client"],[50,16,40,14],[50,19,40,17],[50,23,40,21],[50,24,40,22,"getClient"],[50,33,40,31],[50,34,40,32],[50,35,40,33],[51,4,41,2],[51,10,41,8,"options"],[51,17,41,15],[51,20,41,19,"client"],[51,26,41,25],[51,30,41,29,"client"],[51,36,41,35],[51,37,41,36,"getOptions"],[51,47,41,46],[51,48,41,47],[51,49,41,48],[51,53,41,53],[51,54,41,54],[51,55,41,55],[52,4,43,2],[52,10,43,8,"configInstrumenter"],[52,28,43,26],[52,31,43,29,"options"],[52,38,43,36],[52,39,43,37,"instrumenter"],[52,51,43,49],[52,55,43,53],[52,63,43,61],[53,4,44,2],[53,10,44,8,"transactionInstrumenter"],[53,33,44,31],[53,36,44,34,"transactionContext"],[53,54,44,52],[53,55,44,53,"instrumenter"],[53,67,44,65],[53,71,44,69],[53,79,44,77],[54,4,46,2],[54,8,46,6,"configInstrumenter"],[54,26,46,24],[54,31,46,29,"transactionInstrumenter"],[54,54,46,52],[54,56,46,54],[55,6,47,4],[55,7,47,5],[55,14,47,12,"__SENTRY_DEBUG__"],[55,30,47,28],[55,35,47,33],[55,46,47,44],[55,50,47,48,"__SENTRY_DEBUG__"],[55,66,47,64],[55,71,48,6,"logger"],[55,83,48,12],[55,84,48,12,"logger"],[55,90,48,12],[55,91,48,13,"error"],[55,96,48,18],[55,97,49,8],[55,146,49,57,"transactionInstrumenter"],[55,169,49,80],[55,213,49,124,"configInstrumenter"],[55,231,49,142],[56,0,50,0],[56,54,50,54,"configInstrumenter"],[56,72,50,72],[56,113,51,6],[56,114,51,7],[57,6,53,4,"transactionContext"],[57,24,53,22],[57,25,53,23,"sampled"],[57,32,53,30],[57,35,53,33],[57,40,53,38],[58,4,54,2],[59,4,56,2],[59,8,56,6,"transaction"],[59,19,56,17],[59,22,56,20],[59,26,56,24,"Transaction"],[59,40,56,35],[59,41,56,35,"Transaction"],[59,52,56,35],[59,53,56,36,"transactionContext"],[59,71,56,54],[59,73,56,56],[59,77,56,60],[59,78,56,61],[60,4,57,2,"transaction"],[60,15,57,13],[60,18,57,16],[60,22,57,16,"sampleTransaction"],[60,33,57,33],[60,34,57,33,"sampleTransaction"],[60,51,57,33],[60,53,57,34,"transaction"],[60,64,57,45],[60,66,57,47,"options"],[60,73,57,54],[60,75,57,54,"Object"],[60,81,57,54],[60,82,57,54,"assign"],[60,88,57,54],[61,6,58,4,"parentSampled"],[61,19,58,17],[61,21,58,19,"transactionContext"],[61,39,58,37],[61,40,58,38,"parentSampled"],[61,53,58,51],[62,6,59,4,"transactionContext"],[63,4,59,22],[63,7,60,7,"customSamplingContext"],[63,28,60,28],[63,29,61,3],[63,30,61,4],[64,4,62,2],[64,8,62,6,"transaction"],[64,19,62,17],[64,20,62,18,"sampled"],[64,27,62,25],[64,29,62,27],[65,6,63,4,"transaction"],[65,17,63,15],[65,18,63,16,"initSpanRecorder"],[65,34,63,32],[65,35,63,33,"options"],[65,42,63,40],[65,43,63,41,"_experiments"],[65,55,63,53],[65,59,63,58,"options"],[65,66,63,65],[65,67,63,66,"_experiments"],[65,79,63,78],[65,80,63,79,"maxSpans"],[65,88,63,89],[65,89,63,90],[66,4,64,2],[67,4,65,2],[67,8,65,6,"client"],[67,14,65,12],[67,18,65,16,"client"],[67,24,65,22],[67,25,65,23,"emit"],[67,29,65,27],[67,31,65,29],[68,6,66,4,"client"],[68,12,66,10],[68,13,66,11,"emit"],[68,17,66,15],[68,18,66,16],[68,36,66,34],[68,38,66,36,"transaction"],[68,49,66,47],[68,50,66,48],[69,4,67,2],[70,4,68,2],[70,11,68,9,"transaction"],[70,22,68,20],[71,2,69,0],[73,2,71,0],[74,0,72,0],[75,0,73,0],[76,2,74,0],[76,11,74,9,"startIdleTransaction"],[76,31,74,29,"startIdleTransaction"],[76,32,75,2,"hub"],[76,35,75,5],[76,37,76,2,"transactionContext"],[76,55,76,20],[76,57,77,2,"idleTimeout"],[76,68,77,13],[76,70,78,2,"finalTimeout"],[76,82,78,14],[76,84,79,2,"onScope"],[76,91,79,9],[76,93,80,2,"customSamplingContext"],[76,114,80,23],[76,116,81,2,"heartbeatInterval"],[76,133,81,19],[76,135,82,2],[77,4,83,2],[77,10,83,8,"client"],[77,16,83,14],[77,19,83,17,"hub"],[77,22,83,20],[77,23,83,21,"getClient"],[77,32,83,30],[77,33,83,31],[77,34,83,32],[78,4,84,2],[78,10,84,8,"options"],[78,17,84,15],[78,20,84,19,"client"],[78,26,84,25],[78,30,84,29,"client"],[78,36,84,35],[78,37,84,36,"getOptions"],[78,47,84,46],[78,48,84,47],[78,49,84,48],[78,53,84,53],[78,54,84,54],[78,55,84,55],[79,4,86,2],[79,8,86,6,"transaction"],[79,19,86,17],[79,22,86,20],[79,26,86,24,"IdleTransaction"],[79,44,86,39],[79,45,86,39,"IdleTransaction"],[79,60,86,39],[79,61,86,40,"transactionContext"],[79,79,86,58],[79,81,86,60,"hub"],[79,84,86,63],[79,86,86,65,"idleTimeout"],[79,97,86,76],[79,99,86,78,"finalTimeout"],[79,111,86,90],[79,113,86,92,"heartbeatInterval"],[79,130,86,109],[79,132,86,111,"onScope"],[79,139,86,118],[79,140,86,119],[80,4,87,2,"transaction"],[80,15,87,13],[80,18,87,16],[80,22,87,16,"sampleTransaction"],[80,33,87,33],[80,34,87,33,"sampleTransaction"],[80,51,87,33],[80,53,87,34,"transaction"],[80,64,87,45],[80,66,87,47,"options"],[80,73,87,54],[80,75,87,54,"Object"],[80,81,87,54],[80,82,87,54,"assign"],[80,88,87,54],[81,6,88,4,"parentSampled"],[81,19,88,17],[81,21,88,19,"transactionContext"],[81,39,88,37],[81,40,88,38,"parentSampled"],[81,53,88,51],[82,6,89,4,"transactionContext"],[83,4,89,22],[83,7,90,7,"customSamplingContext"],[83,28,90,28],[83,29,91,3],[83,30,91,4],[84,4,92,2],[84,8,92,6,"transaction"],[84,19,92,17],[84,20,92,18,"sampled"],[84,27,92,25],[84,29,92,27],[85,6,93,4,"transaction"],[85,17,93,15],[85,18,93,16,"initSpanRecorder"],[85,34,93,32],[85,35,93,33,"options"],[85,42,93,40],[85,43,93,41,"_experiments"],[85,55,93,53],[85,59,93,58,"options"],[85,66,93,65],[85,67,93,66,"_experiments"],[85,79,93,78],[85,80,93,79,"maxSpans"],[85,88,93,89],[85,89,93,90],[86,4,94,2],[87,4,95,2],[87,8,95,6,"client"],[87,14,95,12],[87,18,95,16,"client"],[87,24,95,22],[87,25,95,23,"emit"],[87,29,95,27],[87,31,95,29],[88,6,96,4,"client"],[88,12,96,10],[88,13,96,11,"emit"],[88,17,96,15],[88,18,96,16],[88,36,96,34],[88,38,96,36,"transaction"],[88,49,96,47],[88,50,96,48],[89,4,97,2],[90,4,98,2],[90,11,98,9,"transaction"],[90,22,98,20],[91,2,99,0],[93,2,101,0],[94,0,102,0],[95,0,103,0],[96,2,104,0],[96,11,104,9,"addTracingExtensions"],[96,31,104,29,"addTracingExtensions"],[96,32,104,29],[96,34,104,32],[97,4,105,2],[97,10,105,8,"carrier"],[97,17,105,15],[97,20,105,18],[97,24,105,18,"getMainCarrier"],[97,30,105,32],[97,31,105,32,"getMainCarrier"],[97,45,105,32],[97,47,105,33],[97,48,105,34],[98,4,106,2],[98,8,106,6],[98,9,106,7,"carrier"],[98,16,106,14],[98,17,106,15,"__SENTRY__"],[98,27,106,25],[98,29,106,27],[99,6,107,4],[100,4,108,2],[101,4,109,2,"carrier"],[101,11,109,9],[101,12,109,10,"__SENTRY__"],[101,22,109,20],[101,23,109,21,"extensions"],[101,33,109,31],[101,36,109,34,"carrier"],[101,43,109,41],[101,44,109,42,"__SENTRY__"],[101,54,109,52],[101,55,109,53,"extensions"],[101,65,109,63],[101,69,109,67],[101,70,109,68],[101,71,109,69],[102,4,110,2],[102,8,110,6],[102,9,110,7,"carrier"],[102,16,110,14],[102,17,110,15,"__SENTRY__"],[102,27,110,25],[102,28,110,26,"extensions"],[102,38,110,36],[102,39,110,37,"startTransaction"],[102,55,110,53],[102,57,110,55],[103,6,111,4,"carrier"],[103,13,111,11],[103,14,111,12,"__SENTRY__"],[103,24,111,22],[103,25,111,23,"extensions"],[103,35,111,33],[103,36,111,34,"startTransaction"],[103,52,111,50],[103,55,111,53,"_startTransaction"],[103,72,111,70],[104,4,112,2],[105,4,113,2],[105,8,113,6],[105,9,113,7,"carrier"],[105,16,113,14],[105,17,113,15,"__SENTRY__"],[105,27,113,25],[105,28,113,26,"extensions"],[105,38,113,36],[105,39,113,37,"traceHeaders"],[105,51,113,49],[105,53,113,51],[106,6,114,4,"carrier"],[106,13,114,11],[106,14,114,12,"__SENTRY__"],[106,24,114,22],[106,25,114,23,"extensions"],[106,35,114,33],[106,36,114,34,"traceHeaders"],[106,48,114,46],[106,51,114,49,"traceHeaders"],[106,63,114,61],[107,4,115,2],[108,4,117,2],[108,8,117,2,"registerErrorInstrumentation"],[108,17,117,30],[108,18,117,30,"registerErrorInstrumentation"],[108,46,117,30],[108,48,117,31],[108,49,117,32],[109,2,118,0],[110,0,118,1],[110,3]],"functionMap":{"names":["<global>","traceHeaders","_startTransaction","startIdleTransaction","addTracingExtensions"],"mappings":"AAA;ACQ;CDS;AEiB;CFkC;AGK;CHyB;AIK;CJc"},"hasCjsExports":false},"type":"js/module"}]}