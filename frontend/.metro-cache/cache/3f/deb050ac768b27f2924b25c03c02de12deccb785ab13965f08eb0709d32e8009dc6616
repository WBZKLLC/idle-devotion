{"dependencies":[{"name":"./logger.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":15,"index":79},"end":{"line":3,"column":37,"index":101}}],"key":"OSXCW3dnRVSai6/mGt/zNQRtyzs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const logger = require(_dependencyMap[0], \"./logger.js\");\n\n  /** Regular expression used to parse a Dsn. */\n  const DSN_REGEX = /^(?:(\\w+):)\\/\\/(?:(\\w+)(?::(\\w+)?)?@)([\\w.-]+)(?::(\\d+))?\\/(.+)/;\n  function isValidProtocol(protocol) {\n    return protocol === 'http' || protocol === 'https';\n  }\n\n  /**\n   * Renders the string representation of this Dsn.\n   *\n   * By default, this will render the public representation without the password\n   * component. To get the deprecated private representation, set `withPassword`\n   * to true.\n   *\n   * @param withPassword When set to true, the password will be included.\n   */\n  function dsnToString(dsn, withPassword = false) {\n    const {\n      host,\n      path,\n      pass,\n      port,\n      projectId,\n      protocol,\n      publicKey\n    } = dsn;\n    return `${protocol}://${publicKey}${withPassword && pass ? `:${pass}` : ''}` + `@${host}${port ? `:${port}` : ''}/${path ? `${path}/` : path}${projectId}`;\n  }\n\n  /**\n   * Parses a Dsn from a given string.\n   *\n   * @param str A Dsn as string\n   * @returns Dsn as DsnComponents or undefined if @param str is not a valid DSN string\n   */\n  function dsnFromString(str) {\n    const match = DSN_REGEX.exec(str);\n    if (!match) {\n      // This should be logged to the console\n      // eslint-disable-next-line no-console\n      console.error(`Invalid Sentry Dsn: ${str}`);\n      return undefined;\n    }\n    const [protocol, publicKey, pass = '', host, port = '', lastPath] = match.slice(1);\n    let path = '';\n    let projectId = lastPath;\n    const split = projectId.split('/');\n    if (split.length > 1) {\n      path = split.slice(0, -1).join('/');\n      projectId = split.pop();\n    }\n    if (projectId) {\n      const projectMatch = projectId.match(/^\\d+/);\n      if (projectMatch) {\n        projectId = projectMatch[0];\n      }\n    }\n    return dsnFromComponents({\n      host,\n      pass,\n      path,\n      projectId,\n      port,\n      protocol: protocol,\n      publicKey\n    });\n  }\n  function dsnFromComponents(components) {\n    return {\n      protocol: components.protocol,\n      publicKey: components.publicKey || '',\n      pass: components.pass || '',\n      host: components.host,\n      port: components.port || '',\n      path: components.path || '',\n      projectId: components.projectId\n    };\n  }\n  function validateDsn(dsn) {\n    if (!(typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n      return true;\n    }\n    const {\n      port,\n      projectId,\n      protocol\n    } = dsn;\n    const requiredComponents = ['protocol', 'publicKey', 'host', 'projectId'];\n    const hasMissingRequiredComponent = requiredComponents.find(component => {\n      if (!dsn[component]) {\n        logger.logger.error(`Invalid Sentry Dsn: ${component} missing`);\n        return true;\n      }\n      return false;\n    });\n    if (hasMissingRequiredComponent) {\n      return false;\n    }\n    if (!projectId.match(/^\\d+$/)) {\n      logger.logger.error(`Invalid Sentry Dsn: Invalid projectId ${projectId}`);\n      return false;\n    }\n    if (!isValidProtocol(protocol)) {\n      logger.logger.error(`Invalid Sentry Dsn: Invalid protocol ${protocol}`);\n      return false;\n    }\n    if (port && isNaN(parseInt(port, 10))) {\n      logger.logger.error(`Invalid Sentry Dsn: Invalid port ${port}`);\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Creates a valid Sentry Dsn object, identifying a Sentry instance and project.\n   * @returns a valid DsnComponents object or `undefined` if @param from is an invalid DSN source\n   */\n  function makeDsn(from) {\n    const components = typeof from === 'string' ? dsnFromString(from) : dsnFromComponents(from);\n    if (!components || !validateDsn(components)) {\n      return undefined;\n    }\n    return components;\n  }\n  exports.dsnFromString = dsnFromString;\n  exports.dsnToString = dsnToString;\n  exports.makeDsn = makeDsn;\n});","lineCount":133,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"logger"],[5,14,3,12],[5,17,3,15,"require"],[5,24,3,22],[5,25,3,22,"_dependencyMap"],[5,39,3,22],[5,57,3,36],[5,58,3,37],[7,2,5,0],[8,2,6,0],[8,8,6,6,"DSN_REGEX"],[8,17,6,15],[8,20,6,18],[8,85,6,83],[9,2,8,0],[9,11,8,9,"isValidProtocol"],[9,26,8,24,"isValidProtocol"],[9,27,8,25,"protocol"],[9,35,8,33],[9,37,8,35],[10,4,9,2],[10,11,9,9,"protocol"],[10,19,9,17],[10,24,9,22],[10,30,9,28],[10,34,9,32,"protocol"],[10,42,9,40],[10,47,9,45],[10,54,9,52],[11,2,10,0],[13,2,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[18,0,17,0],[19,0,18,0],[20,0,19,0],[21,0,20,0],[22,2,21,0],[22,11,21,9,"dsnToString"],[22,22,21,20,"dsnToString"],[22,23,21,21,"dsn"],[22,26,21,24],[22,28,21,26,"withPassword"],[22,40,21,38],[22,43,21,41],[22,48,21,46],[22,50,21,48],[23,4,22,2],[23,10,22,8],[24,6,22,10,"host"],[24,10,22,14],[25,6,22,16,"path"],[25,10,22,20],[26,6,22,22,"pass"],[26,10,22,26],[27,6,22,28,"port"],[27,10,22,32],[28,6,22,34,"projectId"],[28,15,22,43],[29,6,22,45,"protocol"],[29,14,22,53],[30,6,22,55,"publicKey"],[31,4,22,65],[31,5,22,66],[31,8,22,69,"dsn"],[31,11,22,72],[32,4,23,2],[32,11,24,4],[32,14,24,7,"protocol"],[32,22,24,15],[32,28,24,21,"publicKey"],[32,37,24,30],[32,40,24,33,"withPassword"],[32,52,24,45],[32,56,24,49,"pass"],[32,60,24,53],[32,63,24,56],[32,67,24,60,"pass"],[32,71,24,64],[32,73,24,66],[32,76,24,69],[32,78,24,71],[32,80,24,73],[32,83,25,4],[32,87,25,8,"host"],[32,91,25,12],[32,94,25,15,"port"],[32,98,25,19],[32,101,25,22],[32,105,25,26,"port"],[32,109,25,30],[32,111,25,32],[32,114,25,35],[32,116,25,37],[32,120,25,41,"path"],[32,124,25,45],[32,127,25,48],[32,130,25,51,"path"],[32,134,25,55],[32,137,25,58],[32,140,25,61,"path"],[32,144,25,65],[32,147,25,68,"projectId"],[32,156,25,77],[32,158,25,79],[33,2,27,0],[35,2,29,0],[36,0,30,0],[37,0,31,0],[38,0,32,0],[39,0,33,0],[40,0,34,0],[41,2,35,0],[41,11,35,9,"dsnFromString"],[41,24,35,22,"dsnFromString"],[41,25,35,23,"str"],[41,28,35,26],[41,30,35,28],[42,4,36,2],[42,10,36,8,"match"],[42,15,36,13],[42,18,36,16,"DSN_REGEX"],[42,27,36,25],[42,28,36,26,"exec"],[42,32,36,30],[42,33,36,31,"str"],[42,36,36,34],[42,37,36,35],[43,4,38,2],[43,8,38,6],[43,9,38,7,"match"],[43,14,38,12],[43,16,38,14],[44,6,39,4],[45,6,40,4],[46,6,41,4,"console"],[46,13,41,11],[46,14,41,12,"error"],[46,19,41,17],[46,20,41,18],[46,43,41,41,"str"],[46,46,41,44],[46,48,41,46],[46,49,41,47],[47,6,42,4],[47,13,42,11,"undefined"],[47,22,42,20],[48,4,43,2],[49,4,45,2],[49,10,45,8],[49,11,45,9,"protocol"],[49,19,45,17],[49,21,45,19,"publicKey"],[49,30,45,28],[49,32,45,30,"pass"],[49,36,45,34],[49,39,45,37],[49,41,45,39],[49,43,45,41,"host"],[49,47,45,45],[49,49,45,47,"port"],[49,53,45,51],[49,56,45,54],[49,58,45,56],[49,60,45,58,"lastPath"],[49,68,45,66],[49,69,45,67],[49,72,45,70,"match"],[49,77,45,75],[49,78,45,76,"slice"],[49,83,45,81],[49,84,45,82],[49,85,45,83],[49,86,45,84],[50,4,46,2],[50,8,46,6,"path"],[50,12,46,10],[50,15,46,13],[50,17,46,15],[51,4,47,2],[51,8,47,6,"projectId"],[51,17,47,15],[51,20,47,18,"lastPath"],[51,28,47,26],[52,4,49,2],[52,10,49,8,"split"],[52,15,49,13],[52,18,49,16,"projectId"],[52,27,49,25],[52,28,49,26,"split"],[52,33,49,31],[52,34,49,32],[52,37,49,35],[52,38,49,36],[53,4,50,2],[53,8,50,6,"split"],[53,13,50,11],[53,14,50,12,"length"],[53,20,50,18],[53,23,50,21],[53,24,50,22],[53,26,50,24],[54,6,51,4,"path"],[54,10,51,8],[54,13,51,11,"split"],[54,18,51,16],[54,19,51,17,"slice"],[54,24,51,22],[54,25,51,23],[54,26,51,24],[54,28,51,26],[54,29,51,27],[54,30,51,28],[54,31,51,29],[54,32,51,30,"join"],[54,36,51,34],[54,37,51,35],[54,40,51,38],[54,41,51,39],[55,6,52,4,"projectId"],[55,15,52,13],[55,18,52,16,"split"],[55,23,52,21],[55,24,52,22,"pop"],[55,27,52,25],[55,28,52,26],[55,29,52,27],[56,4,53,2],[57,4,55,2],[57,8,55,6,"projectId"],[57,17,55,15],[57,19,55,17],[58,6,56,4],[58,12,56,10,"projectMatch"],[58,24,56,22],[58,27,56,25,"projectId"],[58,36,56,34],[58,37,56,35,"match"],[58,42,56,40],[58,43,56,41],[58,49,56,47],[58,50,56,48],[59,6,57,4],[59,10,57,8,"projectMatch"],[59,22,57,20],[59,24,57,22],[60,8,58,6,"projectId"],[60,17,58,15],[60,20,58,18,"projectMatch"],[60,32,58,30],[60,33,58,31],[60,34,58,32],[60,35,58,33],[61,6,59,4],[62,4,60,2],[63,4,62,2],[63,11,62,9,"dsnFromComponents"],[63,28,62,26],[63,29,62,27],[64,6,62,29,"host"],[64,10,62,33],[65,6,62,35,"pass"],[65,10,62,39],[66,6,62,41,"path"],[66,10,62,45],[67,6,62,47,"projectId"],[67,15,62,56],[68,6,62,58,"port"],[68,10,62,62],[69,6,62,64,"protocol"],[69,14,62,72],[69,16,62,74,"protocol"],[69,24,62,82],[70,6,62,85,"publicKey"],[71,4,62,95],[71,5,62,96],[71,6,62,97],[72,2,63,0],[73,2,65,0],[73,11,65,9,"dsnFromComponents"],[73,28,65,26,"dsnFromComponents"],[73,29,65,27,"components"],[73,39,65,37],[73,41,65,39],[74,4,66,2],[74,11,66,9],[75,6,67,4,"protocol"],[75,14,67,12],[75,16,67,14,"components"],[75,26,67,24],[75,27,67,25,"protocol"],[75,35,67,33],[76,6,68,4,"publicKey"],[76,15,68,13],[76,17,68,15,"components"],[76,27,68,25],[76,28,68,26,"publicKey"],[76,37,68,35],[76,41,68,39],[76,43,68,41],[77,6,69,4,"pass"],[77,10,69,8],[77,12,69,10,"components"],[77,22,69,20],[77,23,69,21,"pass"],[77,27,69,25],[77,31,69,29],[77,33,69,31],[78,6,70,4,"host"],[78,10,70,8],[78,12,70,10,"components"],[78,22,70,20],[78,23,70,21,"host"],[78,27,70,25],[79,6,71,4,"port"],[79,10,71,8],[79,12,71,10,"components"],[79,22,71,20],[79,23,71,21,"port"],[79,27,71,25],[79,31,71,29],[79,33,71,31],[80,6,72,4,"path"],[80,10,72,8],[80,12,72,10,"components"],[80,22,72,20],[80,23,72,21,"path"],[80,27,72,25],[80,31,72,29],[80,33,72,31],[81,6,73,4,"projectId"],[81,15,73,13],[81,17,73,15,"components"],[81,27,73,25],[81,28,73,26,"projectId"],[82,4,74,2],[82,5,74,3],[83,2,75,0],[84,2,77,0],[84,11,77,9,"validateDsn"],[84,22,77,20,"validateDsn"],[84,23,77,21,"dsn"],[84,26,77,24],[84,28,77,26],[85,4,78,2],[85,8,78,6],[85,10,78,8],[85,17,78,15,"__SENTRY_DEBUG__"],[85,33,78,31],[85,38,78,36],[85,49,78,47],[85,53,78,51,"__SENTRY_DEBUG__"],[85,69,78,67],[85,70,78,68],[85,72,78,70],[86,6,79,4],[86,13,79,11],[86,17,79,15],[87,4,80,2],[88,4,82,2],[88,10,82,8],[89,6,82,10,"port"],[89,10,82,14],[90,6,82,16,"projectId"],[90,15,82,25],[91,6,82,27,"protocol"],[92,4,82,36],[92,5,82,37],[92,8,82,40,"dsn"],[92,11,82,43],[93,4,84,2],[93,10,84,8,"requiredComponents"],[93,28,84,26],[93,31,84,29],[93,32,84,30],[93,42,84,40],[93,44,84,42],[93,55,84,53],[93,57,84,55],[93,63,84,61],[93,65,84,63],[93,76,84,74],[93,77,84,75],[94,4,85,2],[94,10,85,8,"hasMissingRequiredComponent"],[94,37,85,35],[94,40,85,38,"requiredComponents"],[94,58,85,56],[94,59,85,57,"find"],[94,63,85,61],[94,64,85,62,"component"],[94,73,85,71],[94,77,85,75],[95,6,86,4],[95,10,86,8],[95,11,86,9,"dsn"],[95,14,86,12],[95,15,86,13,"component"],[95,24,86,22],[95,25,86,23],[95,27,86,25],[96,8,87,6,"logger"],[96,14,87,12],[96,15,87,13,"logger"],[96,21,87,19],[96,22,87,20,"error"],[96,27,87,25],[96,28,87,26],[96,51,87,49,"component"],[96,60,87,58],[96,70,87,68],[96,71,87,69],[97,8,88,6],[97,15,88,13],[97,19,88,17],[98,6,89,4],[99,6,90,4],[99,13,90,11],[99,18,90,16],[100,4,91,2],[100,5,91,3],[100,6,91,4],[101,4,93,2],[101,8,93,6,"hasMissingRequiredComponent"],[101,35,93,33],[101,37,93,35],[102,6,94,4],[102,13,94,11],[102,18,94,16],[103,4,95,2],[104,4,97,2],[104,8,97,6],[104,9,97,7,"projectId"],[104,18,97,16],[104,19,97,17,"match"],[104,24,97,22],[104,25,97,23],[104,32,97,30],[104,33,97,31],[104,35,97,33],[105,6,98,4,"logger"],[105,12,98,10],[105,13,98,11,"logger"],[105,19,98,17],[105,20,98,18,"error"],[105,25,98,23],[105,26,98,24],[105,67,98,65,"projectId"],[105,76,98,74],[105,78,98,76],[105,79,98,77],[106,6,99,4],[106,13,99,11],[106,18,99,16],[107,4,100,2],[108,4,102,2],[108,8,102,6],[108,9,102,7,"isValidProtocol"],[108,24,102,22],[108,25,102,23,"protocol"],[108,33,102,31],[108,34,102,32],[108,36,102,34],[109,6,103,4,"logger"],[109,12,103,10],[109,13,103,11,"logger"],[109,19,103,17],[109,20,103,18,"error"],[109,25,103,23],[109,26,103,24],[109,66,103,64,"protocol"],[109,74,103,72],[109,76,103,74],[109,77,103,75],[110,6,104,4],[110,13,104,11],[110,18,104,16],[111,4,105,2],[112,4,107,2],[112,8,107,6,"port"],[112,12,107,10],[112,16,107,14,"isNaN"],[112,21,107,19],[112,22,107,20,"parseInt"],[112,30,107,28],[112,31,107,29,"port"],[112,35,107,33],[112,37,107,35],[112,39,107,37],[112,40,107,38],[112,41,107,39],[112,43,107,41],[113,6,108,4,"logger"],[113,12,108,10],[113,13,108,11,"logger"],[113,19,108,17],[113,20,108,18,"error"],[113,25,108,23],[113,26,108,24],[113,62,108,60,"port"],[113,66,108,64],[113,68,108,66],[113,69,108,67],[114,6,109,4],[114,13,109,11],[114,18,109,16],[115,4,110,2],[116,4,112,2],[116,11,112,9],[116,15,112,13],[117,2,113,0],[119,2,115,0],[120,0,116,0],[121,0,117,0],[122,0,118,0],[123,2,119,0],[123,11,119,9,"makeDsn"],[123,18,119,16,"makeDsn"],[123,19,119,17,"from"],[123,23,119,21],[123,25,119,23],[124,4,120,2],[124,10,120,8,"components"],[124,20,120,18],[124,23,120,21],[124,30,120,28,"from"],[124,34,120,32],[124,39,120,37],[124,47,120,45],[124,50,120,48,"dsnFromString"],[124,63,120,61],[124,64,120,62,"from"],[124,68,120,66],[124,69,120,67],[124,72,120,70,"dsnFromComponents"],[124,89,120,87],[124,90,120,88,"from"],[124,94,120,92],[124,95,120,93],[125,4,121,2],[125,8,121,6],[125,9,121,7,"components"],[125,19,121,17],[125,23,121,21],[125,24,121,22,"validateDsn"],[125,35,121,33],[125,36,121,34,"components"],[125,46,121,44],[125,47,121,45],[125,49,121,47],[126,6,122,4],[126,13,122,11,"undefined"],[126,22,122,20],[127,4,123,2],[128,4,124,2],[128,11,124,9,"components"],[128,21,124,19],[129,2,125,0],[130,2,127,0,"exports"],[130,9,127,7],[130,10,127,8,"dsnFromString"],[130,23,127,21],[130,26,127,24,"dsnFromString"],[130,39,127,37],[131,2,128,0,"exports"],[131,9,128,7],[131,10,128,8,"dsnToString"],[131,21,128,19],[131,24,128,22,"dsnToString"],[131,35,128,33],[132,2,129,0,"exports"],[132,9,129,7],[132,10,129,8,"makeDsn"],[132,17,129,15],[132,20,129,18,"makeDsn"],[132,27,129,25],[133,0,129,26],[133,3]],"functionMap":{"names":["<global>","isValidProtocol","dsnToString","dsnFromString","dsnFromComponents","validateDsn","requiredComponents.find$argument_0","makeDsn"],"mappings":"AAA;ACO;CDE;AEW;CFM;AGQ;CH4B;AIE;CJU;AKE;8DCQ;GDM;CLsB;AOM;CPM"},"hasCjsExports":true},"type":"js/module"}]}