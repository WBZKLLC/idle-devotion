{"dependencies":[{"name":"./baggage.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"YLOHW1rZiihehep84TQ0K/MkF3E=","exportNames":["*"],"imports":1}},{"name":"./misc.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":70},"end":{"line":2,"column":34,"index":104}}],"key":"ocS4dJ7z/lK/03gbfX2PRZ4zS40=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"TRACEPARENT_REGEXP\", {\n    enumerable: true,\n    get: function () {\n      return TRACEPARENT_REGEXP;\n    }\n  });\n  Object.defineProperty(exports, \"extractTraceparentData\", {\n    enumerable: true,\n    get: function () {\n      return extractTraceparentData;\n    }\n  });\n  Object.defineProperty(exports, \"generateSentryTraceHeader\", {\n    enumerable: true,\n    get: function () {\n      return generateSentryTraceHeader;\n    }\n  });\n  Object.defineProperty(exports, \"tracingContextFromHeaders\", {\n    enumerable: true,\n    get: function () {\n      return tracingContextFromHeaders;\n    }\n  });\n  var _baggageJs = require(_dependencyMap[0], \"./baggage.js\");\n  var _miscJs = require(_dependencyMap[1], \"./misc.js\");\n  const TRACEPARENT_REGEXP = new RegExp('^[ \\\\t]*' +\n  // whitespace\n  '([0-9a-f]{32})?' +\n  // trace_id\n  '-?([0-9a-f]{16})?' +\n  // span_id\n  '-?([01])?' +\n  // sampled\n  '[ \\\\t]*$') // whitespace\n  ;\n\n  /**\n   * Extract transaction context data from a `sentry-trace` header.\n   *\n   * @param traceparent Traceparent string\n   *\n   * @returns Object containing data from the header, or undefined if traceparent string is malformed\n   */\n  function extractTraceparentData(traceparent) {\n    if (!traceparent) {\n      return undefined;\n    }\n    const matches = traceparent.match(TRACEPARENT_REGEXP);\n    if (!matches) {\n      return undefined;\n    }\n    let parentSampled;\n    if (matches[3] === '1') {\n      parentSampled = true;\n    } else if (matches[3] === '0') {\n      parentSampled = false;\n    }\n    return {\n      traceId: matches[1],\n      parentSampled,\n      parentSpanId: matches[2]\n    };\n  }\n\n  /**\n   * Create tracing context from incoming headers.\n   */\n  function tracingContextFromHeaders(sentryTrace, baggage) {\n    const traceparentData = extractTraceparentData(sentryTrace);\n    const dynamicSamplingContext = (0, _baggageJs.baggageHeaderToDynamicSamplingContext)(baggage);\n    const {\n      traceId,\n      parentSpanId,\n      parentSampled\n    } = traceparentData || {};\n    const propagationContext = {\n      traceId: traceId || (0, _miscJs.uuid4)(),\n      spanId: (0, _miscJs.uuid4)().substring(16),\n      sampled: parentSampled\n    };\n    if (parentSpanId) {\n      propagationContext.parentSpanId = parentSpanId;\n    }\n    if (dynamicSamplingContext) {\n      propagationContext.dsc = dynamicSamplingContext;\n    }\n    return {\n      traceparentData,\n      dynamicSamplingContext,\n      propagationContext\n    };\n  }\n\n  /**\n   * Create sentry-trace header from span context values.\n   */\n  function generateSentryTraceHeader(traceId = (0, _miscJs.uuid4)(), spanId = (0, _miscJs.uuid4)().substring(16), sampled) {\n    let sampledString = '';\n    if (sampled !== undefined) {\n      sampledString = sampled ? '-1' : '-0';\n    }\n    return `${traceId}-${spanId}${sampledString}`;\n  }\n});","lineCount":111,"map":[[7,2,93,0,"Object"],[7,8,93,0],[7,9,93,0,"defineProperty"],[7,23,93,0],[7,24,93,0,"exports"],[7,31,93,0],[8,4,93,0,"enumerable"],[8,14,93,0],[9,4,93,0,"get"],[9,7,93,0],[9,18,93,0,"get"],[9,19,93,0],[10,6,93,0],[10,13,93,9,"TRACEPARENT_REGEXP"],[10,31,93,27],[11,4,93,27],[12,2,93,27],[13,2,93,0,"Object"],[13,8,93,0],[13,9,93,0,"defineProperty"],[13,23,93,0],[13,24,93,0,"exports"],[13,31,93,0],[14,4,93,0,"enumerable"],[14,14,93,0],[15,4,93,0,"get"],[15,7,93,0],[15,18,93,0,"get"],[15,19,93,0],[16,6,93,0],[16,13,93,29,"extractTraceparentData"],[16,35,93,51],[17,4,93,51],[18,2,93,51],[19,2,93,0,"Object"],[19,8,93,0],[19,9,93,0,"defineProperty"],[19,23,93,0],[19,24,93,0,"exports"],[19,31,93,0],[20,4,93,0,"enumerable"],[20,14,93,0],[21,4,93,0,"get"],[21,7,93,0],[21,18,93,0,"get"],[21,19,93,0],[22,6,93,0],[22,13,93,53,"generateSentryTraceHeader"],[22,38,93,78],[23,4,93,78],[24,2,93,78],[25,2,93,0,"Object"],[25,8,93,0],[25,9,93,0,"defineProperty"],[25,23,93,0],[25,24,93,0,"exports"],[25,31,93,0],[26,4,93,0,"enumerable"],[26,14,93,0],[27,4,93,0,"get"],[27,7,93,0],[27,18,93,0,"get"],[27,19,93,0],[28,6,93,0],[28,13,93,80,"tracingContextFromHeaders"],[28,38,93,105],[29,4,93,105],[30,2,93,105],[31,2,1,0],[31,6,1,0,"_baggageJs"],[31,16,1,0],[31,19,1,0,"require"],[31,26,1,0],[31,27,1,0,"_dependencyMap"],[31,41,1,0],[32,2,2,0],[32,6,2,0,"_miscJs"],[32,13,2,0],[32,16,2,0,"require"],[32,23,2,0],[32,24,2,0,"_dependencyMap"],[32,38,2,0],[33,2,4,0],[33,8,4,6,"TRACEPARENT_REGEXP"],[33,26,4,24],[33,29,4,27],[33,33,4,31,"RegExp"],[33,39,4,37],[33,40,5,2],[33,50,5,12],[34,2,5,15],[35,2,6,4],[35,19,6,21],[36,2,6,24],[37,2,7,4],[37,21,7,23],[38,2,7,26],[39,2,8,4],[39,13,8,15],[40,2,8,18],[41,2,9,4],[41,12,10,0],[41,13,10,1],[41,14,9,16],[42,2,10,1],[44,2,12,0],[45,0,13,0],[46,0,14,0],[47,0,15,0],[48,0,16,0],[49,0,17,0],[50,0,18,0],[51,2,19,0],[51,11,19,9,"extractTraceparentData"],[51,33,19,31,"extractTraceparentData"],[51,34,19,32,"traceparent"],[51,45,19,43],[51,47,19,45],[52,4,20,2],[52,8,20,6],[52,9,20,7,"traceparent"],[52,20,20,18],[52,22,20,20],[53,6,21,4],[53,13,21,11,"undefined"],[53,22,21,20],[54,4,22,2],[55,4,24,2],[55,10,24,8,"matches"],[55,17,24,15],[55,20,24,18,"traceparent"],[55,31,24,29],[55,32,24,30,"match"],[55,37,24,35],[55,38,24,36,"TRACEPARENT_REGEXP"],[55,56,24,54],[55,57,24,55],[56,4,25,2],[56,8,25,6],[56,9,25,7,"matches"],[56,16,25,14],[56,18,25,16],[57,6,26,4],[57,13,26,11,"undefined"],[57,22,26,20],[58,4,27,2],[59,4,29,2],[59,8,29,6,"parentSampled"],[59,21,29,19],[60,4,30,2],[60,8,30,6,"matches"],[60,15,30,13],[60,16,30,14],[60,17,30,15],[60,18,30,16],[60,23,30,21],[60,26,30,24],[60,28,30,26],[61,6,31,4,"parentSampled"],[61,19,31,17],[61,22,31,20],[61,26,31,24],[62,4,32,2],[62,5,32,3],[62,11,32,9],[62,15,32,13,"matches"],[62,22,32,20],[62,23,32,21],[62,24,32,22],[62,25,32,23],[62,30,32,28],[62,33,32,31],[62,35,32,33],[63,6,33,4,"parentSampled"],[63,19,33,17],[63,22,33,20],[63,27,33,25],[64,4,34,2],[65,4,36,2],[65,11,36,9],[66,6,37,4,"traceId"],[66,13,37,11],[66,15,37,13,"matches"],[66,22,37,20],[66,23,37,21],[66,24,37,22],[66,25,37,23],[67,6,38,4,"parentSampled"],[67,19,38,17],[68,6,39,4,"parentSpanId"],[68,18,39,16],[68,20,39,18,"matches"],[68,27,39,25],[68,28,39,26],[68,29,39,27],[69,4,40,2],[69,5,40,3],[70,2,41,0],[72,2,43,0],[73,0,44,0],[74,0,45,0],[75,2,46,0],[75,11,46,9,"tracingContextFromHeaders"],[75,36,46,34,"tracingContextFromHeaders"],[75,37,47,2,"sentryTrace"],[75,48,47,13],[75,50,48,2,"baggage"],[75,57,48,9],[75,59,51,1],[76,4,52,2],[76,10,52,8,"traceparentData"],[76,25,52,23],[76,28,52,26,"extractTraceparentData"],[76,50,52,48],[76,51,52,49,"sentryTrace"],[76,62,52,60],[76,63,52,61],[77,4,53,2],[77,10,53,8,"dynamicSamplingContext"],[77,32,53,30],[77,35,53,33],[77,39,53,33,"baggageHeaderToDynamicSamplingContext"],[77,49,53,70],[77,50,53,70,"baggageHeaderToDynamicSamplingContext"],[77,87,53,70],[77,89,53,71,"baggage"],[77,96,53,78],[77,97,53,79],[78,4,55,2],[78,10,55,8],[79,6,55,10,"traceId"],[79,13,55,17],[80,6,55,19,"parentSpanId"],[80,18,55,31],[81,6,55,33,"parentSampled"],[82,4,55,47],[82,5,55,48],[82,8,55,51,"traceparentData"],[82,23,55,66],[82,27,55,70],[82,28,55,71],[82,29,55,72],[83,4,57,2],[83,10,57,8,"propagationContext"],[83,28,57,26],[83,31,57,29],[84,6,58,4,"traceId"],[84,13,58,11],[84,15,58,13,"traceId"],[84,22,58,20],[84,26,58,24],[84,30,58,24,"uuid4"],[84,37,58,29],[84,38,58,29,"uuid4"],[84,43,58,29],[84,45,58,30],[84,46,58,31],[85,6,59,4,"spanId"],[85,12,59,10],[85,14,59,12],[85,18,59,12,"uuid4"],[85,25,59,17],[85,26,59,17,"uuid4"],[85,31,59,17],[85,33,59,18],[85,34,59,19],[85,35,59,20,"substring"],[85,44,59,29],[85,45,59,30],[85,47,59,32],[85,48,59,33],[86,6,60,4,"sampled"],[86,13,60,11],[86,15,60,13,"parentSampled"],[87,4,61,2],[87,5,61,3],[88,4,63,2],[88,8,63,6,"parentSpanId"],[88,20,63,18],[88,22,63,20],[89,6,64,4,"propagationContext"],[89,24,64,22],[89,25,64,23,"parentSpanId"],[89,37,64,35],[89,40,64,38,"parentSpanId"],[89,52,64,50],[90,4,65,2],[91,4,67,2],[91,8,67,6,"dynamicSamplingContext"],[91,30,67,28],[91,32,67,30],[92,6,68,4,"propagationContext"],[92,24,68,22],[92,25,68,23,"dsc"],[92,28,68,26],[92,31,68,29,"dynamicSamplingContext"],[92,53,68,51],[93,4,69,2],[94,4,71,2],[94,11,71,9],[95,6,72,4,"traceparentData"],[95,21,72,19],[96,6,73,4,"dynamicSamplingContext"],[96,28,73,26],[97,6,74,4,"propagationContext"],[98,4,75,2],[98,5,75,3],[99,2,76,0],[101,2,78,0],[102,0,79,0],[103,0,80,0],[104,2,81,0],[104,11,81,9,"generateSentryTraceHeader"],[104,36,81,34,"generateSentryTraceHeader"],[104,37,82,2,"traceId"],[104,44,82,9],[104,47,82,12],[104,51,82,12,"uuid4"],[104,58,82,17],[104,59,82,17,"uuid4"],[104,64,82,17],[104,66,82,18],[104,67,82,19],[104,69,83,2,"spanId"],[104,75,83,8],[104,78,83,11],[104,82,83,11,"uuid4"],[104,89,83,16],[104,90,83,16,"uuid4"],[104,95,83,16],[104,97,83,17],[104,98,83,18],[104,99,83,19,"substring"],[104,108,83,28],[104,109,83,29],[104,111,83,31],[104,112,83,32],[104,114,84,2,"sampled"],[104,121,84,9],[104,123,85,2],[105,4,86,2],[105,8,86,6,"sampledString"],[105,21,86,19],[105,24,86,22],[105,26,86,24],[106,4,87,2],[106,8,87,6,"sampled"],[106,15,87,13],[106,20,87,18,"undefined"],[106,29,87,27],[106,31,87,29],[107,6,88,4,"sampledString"],[107,19,88,17],[107,22,88,20,"sampled"],[107,29,88,27],[107,32,88,30],[107,36,88,34],[107,39,88,37],[107,43,88,41],[108,4,89,2],[109,4,90,2],[109,11,90,9],[109,14,90,12,"traceId"],[109,21,90,19],[109,25,90,23,"spanId"],[109,31,90,29],[109,34,90,32,"sampledString"],[109,47,90,45],[109,49,90,47],[110,2,91,0],[111,0,91,1],[111,3]],"functionMap":{"names":["<global>","extractTraceparentData","tracingContextFromHeaders","generateSentryTraceHeader"],"mappings":"AAA;ACkB;CDsB;AEK;CF8B;AGK;CHU"},"hasCjsExports":false},"type":"js/module"}]}