{"dependencies":[{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"API_BASE\", {\n    enumerable: true,\n    get: function () {\n      return API_BASE;\n    }\n  });\n  exports.apiUrl = apiUrl;\n  exports.getAuthHeaders = getAuthHeaders;\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[0], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  /**\n   * Centralized API Configuration\n   * \n   * Single source of truth for API base URL across all platforms.\n   * Web preview, device, and tunnel all use this.\n   */\n\n  /**\n   * Get the API base URL based on platform and environment.\n   * \n   * Priority:\n   * 1. EXPO_PUBLIC_BACKEND_URL (if set)\n   * 2. EXPO_PUBLIC_API_URL (legacy fallback)\n   * 3. Platform-specific defaults\n   */\n  function getApiBaseUrl() {\n    // Check environment variables - normalize trailing slashes\n    const RAW = process.env.EXPO_PUBLIC_BACKEND_URL ?? process.env.EXPO_PUBLIC_API_URL ?? '';\n\n    // Use explicitly set URLs first (trimmed of trailing slashes)\n    if (RAW) {\n      return RAW.replace(/\\/+$/, '');\n    }\n\n    // Platform-specific defaults when no env var is set\n    if (Platform.default.OS === 'web') {\n      // Web preview: use relative paths (assumes proxy is configured)\n      // If no proxy, this will fail - but that's expected\n      return '';\n    }\n\n    // Native device: default to localhost:8001 (won't work on real device without tunnel)\n    // In production, EXPO_PUBLIC_BACKEND_URL should always be set\n    return 'http://localhost:8001';\n  }\n\n  /**\n   * The API base URL - use this everywhere instead of hardcoding.\n   * \n   * Usage:\n   *   import { API_BASE } from '@/lib/api/config';\n   *   fetch(`${API_BASE}/api/endpoint`, { ... });\n   */\n  const API_BASE = getApiBaseUrl();\n\n  /**\n   * Construct a full API URL.\n   * \n   * @param path - The API path (e.g., '/api/daily/status')\n   * @returns Full URL with base\n   */\n  function apiUrl(path) {\n    // Ensure path starts with /\n    const normalizedPath = path.startsWith('/') ? path : `/${path}`;\n    return `${API_BASE}${normalizedPath}`;\n  }\n\n  /**\n   * Get auth headers for API requests.\n   * \n   * @param token - JWT token\n   * @returns Headers object with Authorization\n   */\n  function getAuthHeaders(token) {\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n\n  // Log the API base URL in development for debugging\n  if (__DEV__) {\n    console.log('[API Config] Base URL:', API_BASE || '(relative paths)');\n    console.log('[API Config] Platform:', Platform.default.OS);\n\n    // WARN if API_BASE is empty - likely means env var not picked up\n    if (!API_BASE) {\n      console.warn('[API Config] ⚠️ API_BASE is empty! ' + 'Set EXPO_PUBLIC_BACKEND_URL in .env for web preview to work. ' + 'Falling back to relative paths (will 404 if no proxy configured).');\n    }\n  }\n});","lineCount":102,"map":[[12,2,48,0,"Object"],[12,8,48,0],[12,9,48,0,"defineProperty"],[12,23,48,0],[12,24,48,0,"exports"],[12,31,48,0],[13,4,48,0,"enumerable"],[13,14,48,0],[14,4,48,0,"get"],[14,7,48,0],[14,18,48,0,"get"],[14,19,48,0],[15,6,48,0],[15,13,48,0,"API_BASE"],[15,21,48,0],[16,4,48,0],[17,2,48,0],[18,2,56,0,"exports"],[18,9,56,0],[18,10,56,0,"apiUrl"],[18,16,56,0],[18,19,56,0,"apiUrl"],[18,25,56,0],[19,2,68,0,"exports"],[19,9,68,0],[19,10,68,0,"getAuthHeaders"],[19,24,68,0],[19,27,68,0,"getAuthHeaders"],[19,41,68,0],[20,2,73,1],[20,6,73,1,"_reactNativeWebDistExportsPlatform"],[20,40,73,1],[20,43,73,1,"require"],[20,50,73,1],[20,51,73,1,"_dependencyMap"],[20,65,73,1],[21,2,73,1],[21,6,73,1,"Platform"],[21,14,73,1],[21,17,73,1,"_interopDefault"],[21,32,73,1],[21,33,73,1,"_reactNativeWebDistExportsPlatform"],[21,67,73,1],[22,2,1,0],[23,0,2,0],[24,0,3,0],[25,0,4,0],[26,0,5,0],[27,0,6,0],[29,2,10,0],[30,0,11,0],[31,0,12,0],[32,0,13,0],[33,0,14,0],[34,0,15,0],[35,0,16,0],[36,0,17,0],[37,2,18,0],[37,11,18,9,"getApiBaseUrl"],[37,24,18,22,"getApiBaseUrl"],[37,25,18,22],[37,27,18,33],[38,4,19,2],[39,4,20,2],[39,10,20,8,"RAW"],[39,13,20,11],[39,16,20,14,"process"],[39,23,20,21],[39,24,20,22,"env"],[39,27,20,25],[39,28,20,26,"EXPO_PUBLIC_BACKEND_URL"],[39,51,20,49],[39,55,21,7,"process"],[39,62,21,14],[39,63,21,15,"env"],[39,66,21,18],[39,67,21,19,"EXPO_PUBLIC_API_URL"],[39,86,21,38],[39,90,22,7],[39,92,22,9],[41,4,24,2],[42,4,25,2],[42,8,25,6,"RAW"],[42,11,25,9],[42,13,25,11],[43,6,26,4],[43,13,26,11,"RAW"],[43,16,26,14],[43,17,26,15,"replace"],[43,24,26,22],[43,25,26,23],[43,31,26,29],[43,33,26,31],[43,35,26,33],[43,36,26,34],[44,4,27,2],[46,4,29,2],[47,4,30,2],[47,8,30,6,"Platform"],[47,16,30,14],[47,17,30,14,"default"],[47,24,30,14],[47,25,30,15,"OS"],[47,27,30,17],[47,32,30,22],[47,37,30,27],[47,39,30,29],[48,6,31,4],[49,6,32,4],[50,6,33,4],[50,13,33,11],[50,15,33,13],[51,4,34,2],[53,4,36,2],[54,4,37,2],[55,4,38,2],[55,11,38,9],[55,34,38,32],[56,2,39,0],[58,2,41,0],[59,0,42,0],[60,0,43,0],[61,0,44,0],[62,0,45,0],[63,0,46,0],[64,0,47,0],[65,2,48,7],[65,8,48,13,"API_BASE"],[65,16,48,21],[65,19,48,24,"getApiBaseUrl"],[65,32,48,37],[65,33,48,38],[65,34,48,39],[67,2,50,0],[68,0,51,0],[69,0,52,0],[70,0,53,0],[71,0,54,0],[72,0,55,0],[73,2,56,7],[73,11,56,16,"apiUrl"],[73,17,56,22,"apiUrl"],[73,18,56,23,"path"],[73,22,56,35],[73,24,56,45],[74,4,57,2],[75,4,58,2],[75,10,58,8,"normalizedPath"],[75,24,58,22],[75,27,58,25,"path"],[75,31,58,29],[75,32,58,30,"startsWith"],[75,42,58,40],[75,43,58,41],[75,46,58,44],[75,47,58,45],[75,50,58,48,"path"],[75,54,58,52],[75,57,58,55],[75,61,58,59,"path"],[75,65,58,63],[75,67,58,65],[76,4,59,2],[76,11,59,9],[76,14,59,12,"API_BASE"],[76,22,59,20],[76,25,59,23,"normalizedPath"],[76,39,59,37],[76,41,59,39],[77,2,60,0],[79,2,62,0],[80,0,63,0],[81,0,64,0],[82,0,65,0],[83,0,66,0],[84,0,67,0],[85,2,68,7],[85,11,68,16,"getAuthHeaders"],[85,25,68,30,"getAuthHeaders"],[85,26,68,31,"token"],[85,31,68,44],[85,33,68,70],[86,4,69,2],[86,11,69,9],[87,6,70,4],[87,20,70,18],[87,22,70,20],[87,40,70,38],[88,6,71,4],[88,21,71,19],[88,23,71,21],[88,33,71,31,"token"],[88,38,71,36],[89,4,72,2],[89,5,72,3],[90,2,73,0],[92,2,75,0],[93,2,76,0],[93,6,76,4,"__DEV__"],[93,13,76,11],[93,15,76,13],[94,4,77,2,"console"],[94,11,77,9],[94,12,77,10,"log"],[94,15,77,13],[94,16,77,14],[94,40,77,38],[94,42,77,40,"API_BASE"],[94,50,77,48],[94,54,77,52],[94,72,77,70],[94,73,77,71],[95,4,78,2,"console"],[95,11,78,9],[95,12,78,10,"log"],[95,15,78,13],[95,16,78,14],[95,40,78,38],[95,42,78,40,"Platform"],[95,50,78,48],[95,51,78,48,"default"],[95,58,78,48],[95,59,78,49,"OS"],[95,61,78,51],[95,62,78,52],[97,4,80,2],[98,4,81,2],[98,8,81,6],[98,9,81,7,"API_BASE"],[98,17,81,15],[98,19,81,17],[99,6,82,4,"console"],[99,13,82,11],[99,14,82,12,"warn"],[99,18,82,16],[99,19,83,6],[99,56,83,43],[99,59,84,6],[99,122,84,69],[99,125,85,6],[99,192,86,4],[99,193,86,5],[100,4,87,2],[101,2,88,0],[102,0,88,1],[102,3]],"functionMap":{"names":["<global>","getApiBaseUrl","apiUrl","getAuthHeaders"],"mappings":"AAA;ACiB;CDqB;OEiB;CFI;OGQ;CHK"},"hasCjsExports":false},"type":"js/module"}]}