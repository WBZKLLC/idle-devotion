{"dependencies":[{"name":"./is.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":50,"index":50}}],"key":"C6fLnEQPNIdj7xXbougAJ0zoinA=","exportNames":["*"],"imports":1}},{"name":"./normalize.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":51},"end":{"line":2,"column":43,"index":94}}],"key":"QsDZX1nhDolhUZoDvec3s9Hp/ME=","exportNames":["*"],"imports":1}},{"name":"./url.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":95},"end":{"line":3,"column":52,"index":147}}],"key":"7NcMQWW/4KtgISzEb8GlvOMI30I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"addRequestDataToEvent\", {\n    enumerable: true,\n    get: function () {\n      return addRequestDataToEvent;\n    }\n  });\n  Object.defineProperty(exports, \"addRequestDataToTransaction\", {\n    enumerable: true,\n    get: function () {\n      return addRequestDataToTransaction;\n    }\n  });\n  Object.defineProperty(exports, \"extractPathForTransaction\", {\n    enumerable: true,\n    get: function () {\n      return extractPathForTransaction;\n    }\n  });\n  Object.defineProperty(exports, \"extractRequestData\", {\n    enumerable: true,\n    get: function () {\n      return extractRequestData;\n    }\n  });\n  var _isJs = require(_dependencyMap[0], \"./is.js\");\n  var _normalizeJs = require(_dependencyMap[1], \"./normalize.js\");\n  var _urlJs = require(_dependencyMap[2], \"./url.js\");\n  const DEFAULT_INCLUDES = {\n    ip: false,\n    request: true,\n    transaction: true,\n    user: true\n  };\n  const DEFAULT_REQUEST_INCLUDES = ['cookies', 'data', 'headers', 'method', 'query_string', 'url'];\n  const DEFAULT_USER_INCLUDES = ['id', 'username', 'email'];\n\n  /**\n   * Sets parameterized route as transaction name e.g.: `GET /users/:id`\n   * Also adds more context data on the transaction from the request\n   */\n  function addRequestDataToTransaction(transaction, req, deps) {\n    if (!transaction) return;\n    if (!transaction.metadata.source || transaction.metadata.source === 'url') {\n      // Attempt to grab a parameterized route off of the request\n      transaction.setName(...extractPathForTransaction(req, {\n        path: true,\n        method: true\n      }));\n    }\n    transaction.setData('url', req.originalUrl || req.url);\n    if (req.baseUrl) {\n      transaction.setData('baseUrl', req.baseUrl);\n    }\n    transaction.setData('query', extractQueryParams(req, deps));\n  }\n\n  /**\n   * Extracts a complete and parameterized path from the request object and uses it to construct transaction name.\n   * If the parameterized transaction name cannot be extracted, we fall back to the raw URL.\n   *\n   * Additionally, this function determines and returns the transaction name source\n   *\n   * eg. GET /mountpoint/user/:id\n   *\n   * @param req A request object\n   * @param options What to include in the transaction name (method, path, or a custom route name to be\n   *                used instead of the request's route)\n   *\n   * @returns A tuple of the fully constructed transaction name [0] and its source [1] (can be either 'route' or 'url')\n   */\n  function extractPathForTransaction(req, options = {}) {\n    const method = req.method && req.method.toUpperCase();\n    let path = '';\n    let source = 'url';\n\n    // Check to see if there's a parameterized route we can use (as there is in Express)\n    if (options.customRoute || req.route) {\n      path = options.customRoute || `${req.baseUrl || ''}${req.route && req.route.path}`;\n      source = 'route';\n    }\n\n    // Otherwise, just take the original URL\n    else if (req.originalUrl || req.url) {\n      path = (0, _urlJs.stripUrlQueryAndFragment)(req.originalUrl || req.url || '');\n    }\n    let name = '';\n    if (options.method && method) {\n      name += method;\n    }\n    if (options.method && options.path) {\n      name += ' ';\n    }\n    if (options.path && path) {\n      name += path;\n    }\n    return [name, source];\n  }\n\n  /** JSDoc */\n  function extractTransaction(req, type) {\n    switch (type) {\n      case 'path':\n        {\n          return extractPathForTransaction(req, {\n            path: true\n          })[0];\n        }\n      case 'handler':\n        {\n          return req.route && req.route.stack && req.route.stack[0] && req.route.stack[0].name || '<anonymous>';\n        }\n      case 'methodPath':\n      default:\n        {\n          return extractPathForTransaction(req, {\n            path: true,\n            method: true\n          })[0];\n        }\n    }\n  }\n\n  /** JSDoc */\n  function extractUserData(user, keys) {\n    const extractedUser = {};\n    const attributes = Array.isArray(keys) ? keys : DEFAULT_USER_INCLUDES;\n    attributes.forEach(key => {\n      if (user && key in user) {\n        extractedUser[key] = user[key];\n      }\n    });\n    return extractedUser;\n  }\n\n  /**\n   * Normalize data from the request object, accounting for framework differences.\n   *\n   * @param req The request object from which to extract data\n   * @param options.include An optional array of keys to include in the normalized data. Defaults to\n   * DEFAULT_REQUEST_INCLUDES if not provided.\n   * @param options.deps Injected, platform-specific dependencies\n   * @returns An object containing normalized request data\n   */\n  function extractRequestData(req, options) {\n    const {\n      include = DEFAULT_REQUEST_INCLUDES,\n      deps\n    } = options || {};\n    const requestData = {};\n\n    // headers:\n    //   node, express, koa, nextjs: req.headers\n    const headers = req.headers || {};\n    // method:\n    //   node, express, koa, nextjs: req.method\n    const method = req.method;\n    // host:\n    //   express: req.hostname in > 4 and req.host in < 4\n    //   koa: req.host\n    //   node, nextjs: req.headers.host\n    const host = req.hostname || req.host || headers.host || '<no host>';\n    // protocol:\n    //   node, nextjs: <n/a>\n    //   express, koa: req.protocol\n    const protocol = req.protocol === 'https' || req.socket && req.socket.encrypted ? 'https' : 'http';\n    // url (including path and query string):\n    //   node, express: req.originalUrl\n    //   koa, nextjs: req.url\n    const originalUrl = req.originalUrl || req.url || '';\n    // absolute url\n    const absoluteUrl = `${protocol}://${host}${originalUrl}`;\n    include.forEach(key => {\n      switch (key) {\n        case 'headers':\n          {\n            requestData.headers = headers;\n            break;\n          }\n        case 'method':\n          {\n            requestData.method = method;\n            break;\n          }\n        case 'url':\n          {\n            requestData.url = absoluteUrl;\n            break;\n          }\n        case 'cookies':\n          {\n            // cookies:\n            //   node, express, koa: req.headers.cookie\n            //   vercel, sails.js, express (w/ cookie middleware), nextjs: req.cookies\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            requestData.cookies =\n            // TODO (v8 / #5257): We're only sending the empty object for backwards compatibility, so the last bit can\n            // come off in v8\n            req.cookies || headers.cookie && deps && deps.cookie && deps.cookie.parse(headers.cookie) || {};\n            break;\n          }\n        case 'query_string':\n          {\n            // query string:\n            //   node: req.url (raw)\n            //   express, koa, nextjs: req.query\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            requestData.query_string = extractQueryParams(req, deps);\n            break;\n          }\n        case 'data':\n          {\n            if (method === 'GET' || method === 'HEAD') {\n              break;\n            }\n            // body data:\n            //   express, koa, nextjs: req.body\n            //\n            //   when using node by itself, you have to read the incoming stream(see\n            //   https://nodejs.dev/learn/get-http-request-body-data-using-nodejs); if a user is doing that, we can't know\n            //   where they're going to store the final result, so they'll have to capture this data themselves\n            if (req.body !== undefined) {\n              requestData.data = (0, _isJs.isString)(req.body) ? req.body : JSON.stringify((0, _normalizeJs.normalize)(req.body));\n            }\n            break;\n          }\n        default:\n          {\n            if ({}.hasOwnProperty.call(req, key)) {\n              requestData[key] = req[key];\n            }\n          }\n      }\n    });\n    return requestData;\n  }\n\n  /**\n   * Options deciding what parts of the request to use when enhancing an event\n   */\n\n  /**\n   * Add data from the given request to the given event\n   *\n   * @param event The event to which the request data will be added\n   * @param req Request object\n   * @param options.include Flags to control what data is included\n   * @param options.deps Injected platform-specific dependencies\n   * @hidden\n   */\n  function addRequestDataToEvent(event, req, options) {\n    const include = Object.assign({}, DEFAULT_INCLUDES, options && options.include);\n    if (include.request) {\n      const extractedRequestData = Array.isArray(include.request) ? extractRequestData(req, {\n        include: include.request,\n        deps: options && options.deps\n      }) : extractRequestData(req, {\n        deps: options && options.deps\n      });\n      event.request = Object.assign({}, event.request, extractedRequestData);\n    }\n    if (include.user) {\n      const extractedUser = req.user && (0, _isJs.isPlainObject)(req.user) ? extractUserData(req.user, include.user) : {};\n      if (Object.keys(extractedUser).length) {\n        event.user = Object.assign({}, event.user, extractedUser);\n      }\n    }\n\n    // client ip:\n    //   node, nextjs: req.socket.remoteAddress\n    //   express, koa: req.ip\n    if (include.ip) {\n      const ip = req.ip || req.socket && req.socket.remoteAddress;\n      if (ip) {\n        event.user = Object.assign({}, event.user, {\n          ip_address: ip\n        });\n      }\n    }\n    if (include.transaction && !event.transaction) {\n      // TODO do we even need this anymore?\n      // TODO make this work for nextjs\n      event.transaction = extractTransaction(req, include.transaction);\n    }\n    return event;\n  }\n  function extractQueryParams(req, deps) {\n    // url (including path and query string):\n    //   node, express: req.originalUrl\n    //   koa, nextjs: req.url\n    let originalUrl = req.originalUrl || req.url || '';\n    if (!originalUrl) {\n      return;\n    }\n\n    // The `URL` constructor can't handle internal URLs of the form `/some/path/here`, so stick a dummy protocol and\n    // hostname on the beginning. Since the point here is just to grab the query string, it doesn't matter what we use.\n    if (originalUrl.startsWith('/')) {\n      originalUrl = `http://dogs.are.great${originalUrl}`;\n    }\n    return req.query || typeof URL !== undefined && new URL(originalUrl).search.replace('?', '') ||\n    // In Node 8, `URL` isn't in the global scope, so we have to use the built-in module from Node\n    deps && deps.url && deps.url.parse(originalUrl).query || undefined;\n  }\n});","lineCount":310,"map":[[7,2,313,0,"Object"],[7,8,313,0],[7,9,313,0,"defineProperty"],[7,23,313,0],[7,24,313,0,"exports"],[7,31,313,0],[8,4,313,0,"enumerable"],[8,14,313,0],[9,4,313,0,"get"],[9,7,313,0],[9,18,313,0,"get"],[9,19,313,0],[10,6,313,0],[10,13,313,9,"addRequestDataToEvent"],[10,34,313,30],[11,4,313,30],[12,2,313,30],[13,2,313,0,"Object"],[13,8,313,0],[13,9,313,0,"defineProperty"],[13,23,313,0],[13,24,313,0,"exports"],[13,31,313,0],[14,4,313,0,"enumerable"],[14,14,313,0],[15,4,313,0,"get"],[15,7,313,0],[15,18,313,0,"get"],[15,19,313,0],[16,6,313,0],[16,13,313,32,"addRequestDataToTransaction"],[16,40,313,59],[17,4,313,59],[18,2,313,59],[19,2,313,0,"Object"],[19,8,313,0],[19,9,313,0,"defineProperty"],[19,23,313,0],[19,24,313,0,"exports"],[19,31,313,0],[20,4,313,0,"enumerable"],[20,14,313,0],[21,4,313,0,"get"],[21,7,313,0],[21,18,313,0,"get"],[21,19,313,0],[22,6,313,0],[22,13,313,61,"extractPathForTransaction"],[22,38,313,86],[23,4,313,86],[24,2,313,86],[25,2,313,0,"Object"],[25,8,313,0],[25,9,313,0,"defineProperty"],[25,23,313,0],[25,24,313,0,"exports"],[25,31,313,0],[26,4,313,0,"enumerable"],[26,14,313,0],[27,4,313,0,"get"],[27,7,313,0],[27,18,313,0,"get"],[27,19,313,0],[28,6,313,0],[28,13,313,88,"extractRequestData"],[28,31,313,106],[29,4,313,106],[30,2,313,106],[31,2,1,0],[31,6,1,0,"_isJs"],[31,11,1,0],[31,14,1,0,"require"],[31,21,1,0],[31,22,1,0,"_dependencyMap"],[31,36,1,0],[32,2,2,0],[32,6,2,0,"_normalizeJs"],[32,18,2,0],[32,21,2,0,"require"],[32,28,2,0],[32,29,2,0,"_dependencyMap"],[32,43,2,0],[33,2,3,0],[33,6,3,0,"_urlJs"],[33,12,3,0],[33,15,3,0,"require"],[33,22,3,0],[33,23,3,0,"_dependencyMap"],[33,37,3,0],[34,2,5,0],[34,8,5,6,"DEFAULT_INCLUDES"],[34,24,5,22],[34,27,5,25],[35,4,6,2,"ip"],[35,6,6,4],[35,8,6,6],[35,13,6,11],[36,4,7,2,"request"],[36,11,7,9],[36,13,7,11],[36,17,7,15],[37,4,8,2,"transaction"],[37,15,8,13],[37,17,8,15],[37,21,8,19],[38,4,9,2,"user"],[38,8,9,6],[38,10,9,8],[39,2,10,0],[39,3,10,1],[40,2,11,0],[40,8,11,6,"DEFAULT_REQUEST_INCLUDES"],[40,32,11,30],[40,35,11,33],[40,36,11,34],[40,45,11,43],[40,47,11,45],[40,53,11,51],[40,55,11,53],[40,64,11,62],[40,66,11,64],[40,74,11,72],[40,76,11,74],[40,90,11,88],[40,92,11,90],[40,97,11,95],[40,98,11,96],[41,2,12,0],[41,8,12,6,"DEFAULT_USER_INCLUDES"],[41,29,12,27],[41,32,12,30],[41,33,12,31],[41,37,12,35],[41,39,12,37],[41,49,12,47],[41,51,12,49],[41,58,12,56],[41,59,12,57],[43,2,14,0],[44,0,15,0],[45,0,16,0],[46,0,17,0],[47,2,18,0],[47,11,18,9,"addRequestDataToTransaction"],[47,38,18,36,"addRequestDataToTransaction"],[47,39,19,2,"transaction"],[47,50,19,13],[47,52,20,2,"req"],[47,55,20,5],[47,57,21,2,"deps"],[47,61,21,6],[47,63,22,2],[48,4,23,2],[48,8,23,6],[48,9,23,7,"transaction"],[48,20,23,18],[48,22,23,20],[49,4,24,2],[49,8,24,6],[49,9,24,7,"transaction"],[49,20,24,18],[49,21,24,19,"metadata"],[49,29,24,27],[49,30,24,28,"source"],[49,36,24,34],[49,40,24,38,"transaction"],[49,51,24,49],[49,52,24,50,"metadata"],[49,60,24,58],[49,61,24,59,"source"],[49,67,24,65],[49,72,24,70],[49,77,24,75],[49,79,24,77],[50,6,25,4],[51,6,26,4,"transaction"],[51,17,26,15],[51,18,26,16,"setName"],[51,25,26,23],[51,26,26,24],[51,29,26,27,"extractPathForTransaction"],[51,54,26,52],[51,55,26,53,"req"],[51,58,26,56],[51,60,26,58],[52,8,26,60,"path"],[52,12,26,64],[52,14,26,66],[52,18,26,70],[53,8,26,72,"method"],[53,14,26,78],[53,16,26,80],[54,6,26,85],[54,7,26,86],[54,8,26,87],[54,9,26,88],[55,4,27,2],[56,4,28,2,"transaction"],[56,15,28,13],[56,16,28,14,"setData"],[56,23,28,21],[56,24,28,22],[56,29,28,27],[56,31,28,29,"req"],[56,34,28,32],[56,35,28,33,"originalUrl"],[56,46,28,44],[56,50,28,48,"req"],[56,53,28,51],[56,54,28,52,"url"],[56,57,28,55],[56,58,28,56],[57,4,29,2],[57,8,29,6,"req"],[57,11,29,9],[57,12,29,10,"baseUrl"],[57,19,29,17],[57,21,29,19],[58,6,30,4,"transaction"],[58,17,30,15],[58,18,30,16,"setData"],[58,25,30,23],[58,26,30,24],[58,35,30,33],[58,37,30,35,"req"],[58,40,30,38],[58,41,30,39,"baseUrl"],[58,48,30,46],[58,49,30,47],[59,4,31,2],[60,4,32,2,"transaction"],[60,15,32,13],[60,16,32,14,"setData"],[60,23,32,21],[60,24,32,22],[60,31,32,29],[60,33,32,31,"extractQueryParams"],[60,51,32,49],[60,52,32,50,"req"],[60,55,32,53],[60,57,32,55,"deps"],[60,61,32,59],[60,62,32,60],[60,63,32,61],[61,2,33,0],[63,2,35,0],[64,0,36,0],[65,0,37,0],[66,0,38,0],[67,0,39,0],[68,0,40,0],[69,0,41,0],[70,0,42,0],[71,0,43,0],[72,0,44,0],[73,0,45,0],[74,0,46,0],[75,0,47,0],[76,0,48,0],[77,2,49,0],[77,11,49,9,"extractPathForTransaction"],[77,36,49,34,"extractPathForTransaction"],[77,37,50,2,"req"],[77,40,50,5],[77,42,51,2,"options"],[77,49,51,9],[77,52,51,12],[77,53,51,13],[77,54,51,14],[77,56,52,2],[78,4,53,2],[78,10,53,8,"method"],[78,16,53,14],[78,19,53,17,"req"],[78,22,53,20],[78,23,53,21,"method"],[78,29,53,27],[78,33,53,31,"req"],[78,36,53,34],[78,37,53,35,"method"],[78,43,53,41],[78,44,53,42,"toUpperCase"],[78,55,53,53],[78,56,53,54],[78,57,53,55],[79,4,55,2],[79,8,55,6,"path"],[79,12,55,10],[79,15,55,13],[79,17,55,15],[80,4,56,2],[80,8,56,6,"source"],[80,14,56,12],[80,17,56,15],[80,22,56,20],[82,4,58,2],[83,4,59,2],[83,8,59,6,"options"],[83,15,59,13],[83,16,59,14,"customRoute"],[83,27,59,25],[83,31,59,29,"req"],[83,34,59,32],[83,35,59,33,"route"],[83,40,59,38],[83,42,59,40],[84,6,60,4,"path"],[84,10,60,8],[84,13,60,11,"options"],[84,20,60,18],[84,21,60,19,"customRoute"],[84,32,60,30],[84,36,60,34],[84,39,60,37,"req"],[84,42,60,40],[84,43,60,41,"baseUrl"],[84,50,60,48],[84,54,60,52],[84,56,60,54],[84,59,60,57,"req"],[84,62,60,60],[84,63,60,61,"route"],[84,68,60,66],[84,72,60,70,"req"],[84,75,60,73],[84,76,60,74,"route"],[84,81,60,79],[84,82,60,80,"path"],[84,86,60,84],[84,88,60,86],[85,6,61,4,"source"],[85,12,61,10],[85,15,61,13],[85,22,61,20],[86,4,62,2],[88,4,64,2],[89,4,64,2],[89,9,65,7],[89,13,65,11,"req"],[89,16,65,14],[89,17,65,15,"originalUrl"],[89,28,65,26],[89,32,65,30,"req"],[89,35,65,33],[89,36,65,34,"url"],[89,39,65,37],[89,41,65,39],[90,6,66,4,"path"],[90,10,66,8],[90,13,66,11],[90,17,66,11,"stripUrlQueryAndFragment"],[90,23,66,35],[90,24,66,35,"stripUrlQueryAndFragment"],[90,48,66,35],[90,50,66,36,"req"],[90,53,66,39],[90,54,66,40,"originalUrl"],[90,65,66,51],[90,69,66,55,"req"],[90,72,66,58],[90,73,66,59,"url"],[90,76,66,62],[90,80,66,66],[90,82,66,68],[90,83,66,69],[91,4,67,2],[92,4,69,2],[92,8,69,6,"name"],[92,12,69,10],[92,15,69,13],[92,17,69,15],[93,4,70,2],[93,8,70,6,"options"],[93,15,70,13],[93,16,70,14,"method"],[93,22,70,20],[93,26,70,24,"method"],[93,32,70,30],[93,34,70,32],[94,6,71,4,"name"],[94,10,71,8],[94,14,71,12,"method"],[94,20,71,18],[95,4,72,2],[96,4,73,2],[96,8,73,6,"options"],[96,15,73,13],[96,16,73,14,"method"],[96,22,73,20],[96,26,73,24,"options"],[96,33,73,31],[96,34,73,32,"path"],[96,38,73,36],[96,40,73,38],[97,6,74,4,"name"],[97,10,74,8],[97,14,74,12],[97,17,74,15],[98,4,75,2],[99,4,76,2],[99,8,76,6,"options"],[99,15,76,13],[99,16,76,14,"path"],[99,20,76,18],[99,24,76,22,"path"],[99,28,76,26],[99,30,76,28],[100,6,77,4,"name"],[100,10,77,8],[100,14,77,12,"path"],[100,18,77,16],[101,4,78,2],[102,4,80,2],[102,11,80,9],[102,12,80,10,"name"],[102,16,80,14],[102,18,80,16,"source"],[102,24,80,22],[102,25,80,23],[103,2,81,0],[105,2,83,0],[106,2,84,0],[106,11,84,9,"extractTransaction"],[106,29,84,27,"extractTransaction"],[106,30,84,28,"req"],[106,33,84,31],[106,35,84,33,"type"],[106,39,84,37],[106,41,84,39],[107,4,85,2],[107,12,85,10,"type"],[107,16,85,14],[108,6,86,4],[108,11,86,9],[108,17,86,15],[109,8,86,17],[110,10,87,6],[110,17,87,13,"extractPathForTransaction"],[110,42,87,38],[110,43,87,39,"req"],[110,46,87,42],[110,48,87,44],[111,12,87,46,"path"],[111,16,87,50],[111,18,87,52],[112,10,87,57],[112,11,87,58],[112,12,87,59],[112,13,87,60],[112,14,87,61],[112,15,87,62],[113,8,88,4],[114,6,89,4],[114,11,89,9],[114,20,89,18],[115,8,89,20],[116,10,90,6],[116,17,90,14,"req"],[116,20,90,17],[116,21,90,18,"route"],[116,26,90,23],[116,30,90,27,"req"],[116,33,90,30],[116,34,90,31,"route"],[116,39,90,36],[116,40,90,37,"stack"],[116,45,90,42],[116,49,90,46,"req"],[116,52,90,49],[116,53,90,50,"route"],[116,58,90,55],[116,59,90,56,"stack"],[116,64,90,61],[116,65,90,62],[116,66,90,63],[116,67,90,64],[116,71,90,68,"req"],[116,74,90,71],[116,75,90,72,"route"],[116,80,90,77],[116,81,90,78,"stack"],[116,86,90,83],[116,87,90,84],[116,88,90,85],[116,89,90,86],[116,90,90,87,"name"],[116,94,90,91],[116,98,90,96],[116,111,90,109],[117,8,91,4],[118,6,92,4],[118,11,92,9],[118,23,92,21],[119,6,93,4],[120,8,93,13],[121,10,94,6],[121,17,94,13,"extractPathForTransaction"],[121,42,94,38],[121,43,94,39,"req"],[121,46,94,42],[121,48,94,44],[122,12,94,46,"path"],[122,16,94,50],[122,18,94,52],[122,22,94,56],[123,12,94,58,"method"],[123,18,94,64],[123,20,94,66],[124,10,94,71],[124,11,94,72],[124,12,94,73],[124,13,94,74],[124,14,94,75],[124,15,94,76],[125,8,95,4],[126,4,96,2],[127,2,97,0],[129,2,99,0],[130,2,100,0],[130,11,100,9,"extractUserData"],[130,26,100,24,"extractUserData"],[130,27,101,2,"user"],[130,31,101,6],[130,33,104,2,"keys"],[130,37,104,6],[130,39,105,2],[131,4,106,2],[131,10,106,8,"extractedUser"],[131,23,106,21],[131,26,106,24],[131,27,106,25],[131,28,106,26],[132,4,107,2],[132,10,107,8,"attributes"],[132,20,107,18],[132,23,107,21,"Array"],[132,28,107,26],[132,29,107,27,"isArray"],[132,36,107,34],[132,37,107,35,"keys"],[132,41,107,39],[132,42,107,40],[132,45,107,43,"keys"],[132,49,107,47],[132,52,107,50,"DEFAULT_USER_INCLUDES"],[132,73,107,71],[133,4,109,2,"attributes"],[133,14,109,12],[133,15,109,13,"forEach"],[133,22,109,20],[133,23,109,21,"key"],[133,26,109,24],[133,30,109,28],[134,6,110,4],[134,10,110,8,"user"],[134,14,110,12],[134,18,110,16,"key"],[134,21,110,19],[134,25,110,23,"user"],[134,29,110,27],[134,31,110,29],[135,8,111,6,"extractedUser"],[135,21,111,19],[135,22,111,20,"key"],[135,25,111,23],[135,26,111,24],[135,29,111,27,"user"],[135,33,111,31],[135,34,111,32,"key"],[135,37,111,35],[135,38,111,36],[136,6,112,4],[137,4,113,2],[137,5,113,3],[137,6,113,4],[138,4,115,2],[138,11,115,9,"extractedUser"],[138,24,115,22],[139,2,116,0],[141,2,118,0],[142,0,119,0],[143,0,120,0],[144,0,121,0],[145,0,122,0],[146,0,123,0],[147,0,124,0],[148,0,125,0],[149,0,126,0],[150,2,127,0],[150,11,127,9,"extractRequestData"],[150,29,127,27,"extractRequestData"],[150,30,128,2,"req"],[150,33,128,5],[150,35,129,2,"options"],[150,42,129,9],[150,44,132,2],[151,4,133,2],[151,10,133,8],[152,6,133,10,"include"],[152,13,133,17],[152,16,133,20,"DEFAULT_REQUEST_INCLUDES"],[152,40,133,44],[153,6,133,46,"deps"],[154,4,133,51],[154,5,133,52],[154,8,133,55,"options"],[154,15,133,62],[154,19,133,66],[154,20,133,67],[154,21,133,68],[155,4,134,2],[155,10,134,8,"requestData"],[155,21,134,19],[155,24,134,22],[155,25,134,23],[155,26,134,24],[157,4,136,2],[158,4,137,2],[159,4,138,2],[159,10,138,8,"headers"],[159,17,138,15],[159,20,138,19,"req"],[159,23,138,22],[159,24,138,23,"headers"],[159,31,138,30],[159,35,138,34],[159,36,138,35],[159,37,138,37],[160,4,141,2],[161,4,142,2],[162,4,143,2],[162,10,143,8,"method"],[162,16,143,14],[162,19,143,17,"req"],[162,22,143,20],[162,23,143,21,"method"],[162,29,143,27],[163,4,144,2],[164,4,145,2],[165,4,146,2],[166,4,147,2],[167,4,148,2],[167,10,148,8,"host"],[167,14,148,12],[167,17,148,15,"req"],[167,20,148,18],[167,21,148,19,"hostname"],[167,29,148,27],[167,33,148,31,"req"],[167,36,148,34],[167,37,148,35,"host"],[167,41,148,39],[167,45,148,43,"headers"],[167,52,148,50],[167,53,148,51,"host"],[167,57,148,55],[167,61,148,59],[167,72,148,70],[168,4,149,2],[169,4,150,2],[170,4,151,2],[171,4,152,2],[171,10,152,8,"protocol"],[171,18,152,16],[171,21,152,19,"req"],[171,24,152,22],[171,25,152,23,"protocol"],[171,33,152,31],[171,38,152,36],[171,45,152,43],[171,49,152,48,"req"],[171,52,152,51],[171,53,152,52,"socket"],[171,59,152,58],[171,63,152,62,"req"],[171,66,152,65],[171,67,152,66,"socket"],[171,73,152,72],[171,74,152,73,"encrypted"],[171,83,152,83],[171,86,152,86],[171,93,152,93],[171,96,152,96],[171,102,152,102],[172,4,153,2],[173,4,154,2],[174,4,155,2],[175,4,156,2],[175,10,156,8,"originalUrl"],[175,21,156,19],[175,24,156,22,"req"],[175,27,156,25],[175,28,156,26,"originalUrl"],[175,39,156,37],[175,43,156,41,"req"],[175,46,156,44],[175,47,156,45,"url"],[175,50,156,48],[175,54,156,52],[175,56,156,54],[176,4,157,2],[177,4,158,2],[177,10,158,8,"absoluteUrl"],[177,21,158,19],[177,24,158,22],[177,27,158,25,"protocol"],[177,35,158,33],[177,41,158,39,"host"],[177,45,158,43],[177,48,158,46,"originalUrl"],[177,59,158,57],[177,61,158,59],[178,4,159,2,"include"],[178,11,159,9],[178,12,159,10,"forEach"],[178,19,159,17],[178,20,159,18,"key"],[178,23,159,21],[178,27,159,25],[179,6,160,4],[179,14,160,12,"key"],[179,17,160,15],[180,8,161,6],[180,13,161,11],[180,22,161,20],[181,10,161,22],[182,12,162,8,"requestData"],[182,23,162,19],[182,24,162,20,"headers"],[182,31,162,27],[182,34,162,30,"headers"],[182,41,162,37],[183,12,163,8],[184,10,164,6],[185,8,165,6],[185,13,165,11],[185,21,165,19],[186,10,165,21],[187,12,166,8,"requestData"],[187,23,166,19],[187,24,166,20,"method"],[187,30,166,26],[187,33,166,29,"method"],[187,39,166,35],[188,12,167,8],[189,10,168,6],[190,8,169,6],[190,13,169,11],[190,18,169,16],[191,10,169,18],[192,12,170,8,"requestData"],[192,23,170,19],[192,24,170,20,"url"],[192,27,170,23],[192,30,170,26,"absoluteUrl"],[192,41,170,37],[193,12,171,8],[194,10,172,6],[195,8,173,6],[195,13,173,11],[195,22,173,20],[196,10,173,22],[197,12,174,8],[198,12,175,8],[199,12,176,8],[200,12,177,8],[201,12,178,8,"requestData"],[201,23,178,19],[201,24,178,20,"cookies"],[201,31,178,27],[202,12,179,10],[203,12,180,10],[204,12,181,10,"req"],[204,15,181,13],[204,16,181,14,"cookies"],[204,23,181,21],[204,27,181,26,"headers"],[204,34,181,33],[204,35,181,34,"cookie"],[204,41,181,40],[204,45,181,44,"deps"],[204,49,181,48],[204,53,181,52,"deps"],[204,57,181,56],[204,58,181,57,"cookie"],[204,64,181,63],[204,68,181,67,"deps"],[204,72,181,71],[204,73,181,72,"cookie"],[204,79,181,78],[204,80,181,79,"parse"],[204,85,181,84],[204,86,181,85,"headers"],[204,93,181,92],[204,94,181,93,"cookie"],[204,100,181,99],[204,101,181,101],[204,105,181,105],[204,106,181,106],[204,107,181,107],[205,12,182,8],[206,10,183,6],[207,8,184,6],[207,13,184,11],[207,27,184,25],[208,10,184,27],[209,12,185,8],[210,12,186,8],[211,12,187,8],[212,12,188,8],[213,12,189,8,"requestData"],[213,23,189,19],[213,24,189,20,"query_string"],[213,36,189,32],[213,39,189,35,"extractQueryParams"],[213,57,189,53],[213,58,189,54,"req"],[213,61,189,57],[213,63,189,59,"deps"],[213,67,189,63],[213,68,189,64],[214,12,190,8],[215,10,191,6],[216,8,192,6],[216,13,192,11],[216,19,192,17],[217,10,192,19],[218,12,193,8],[218,16,193,12,"method"],[218,22,193,18],[218,27,193,23],[218,32,193,28],[218,36,193,32,"method"],[218,42,193,38],[218,47,193,43],[218,53,193,49],[218,55,193,51],[219,14,194,10],[220,12,195,8],[221,12,196,8],[222,12,197,8],[223,12,198,8],[224,12,199,8],[225,12,200,8],[226,12,201,8],[227,12,202,8],[227,16,202,12,"req"],[227,19,202,15],[227,20,202,16,"body"],[227,24,202,20],[227,29,202,25,"undefined"],[227,38,202,34],[227,40,202,36],[228,14,203,10,"requestData"],[228,25,203,21],[228,26,203,22,"data"],[228,30,203,26],[228,33,203,29],[228,37,203,29,"isString"],[228,42,203,37],[228,43,203,37,"isString"],[228,51,203,37],[228,53,203,38,"req"],[228,56,203,41],[228,57,203,42,"body"],[228,61,203,46],[228,62,203,47],[228,65,203,50,"req"],[228,68,203,53],[228,69,203,54,"body"],[228,73,203,58],[228,76,203,61,"JSON"],[228,80,203,65],[228,81,203,66,"stringify"],[228,90,203,75],[228,91,203,76],[228,95,203,76,"normalize"],[228,107,203,85],[228,108,203,85,"normalize"],[228,117,203,85],[228,119,203,86,"req"],[228,122,203,89],[228,123,203,90,"body"],[228,127,203,94],[228,128,203,95],[228,129,203,96],[229,12,204,8],[230,12,205,8],[231,10,206,6],[232,8,207,6],[233,10,207,15],[234,12,208,8],[234,16,208,12],[234,17,208,13],[234,18,208,14],[234,19,208,15,"hasOwnProperty"],[234,33,208,29],[234,34,208,30,"call"],[234,38,208,34],[234,39,208,35,"req"],[234,42,208,38],[234,44,208,40,"key"],[234,47,208,43],[234,48,208,44],[234,50,208,46],[235,14,209,10,"requestData"],[235,25,209,21],[235,26,209,22,"key"],[235,29,209,25],[235,30,209,26],[235,33,209,30,"req"],[235,36,209,33],[235,37,209,36,"key"],[235,40,209,39],[235,41,209,40],[236,12,210,8],[237,10,211,6],[238,6,212,4],[239,4,213,2],[239,5,213,3],[239,6,213,4],[240,4,215,2],[240,11,215,9,"requestData"],[240,22,215,20],[241,2,216,0],[243,2,218,0],[244,0,219,0],[245,0,220,0],[247,2,222,0],[248,0,223,0],[249,0,224,0],[250,0,225,0],[251,0,226,0],[252,0,227,0],[253,0,228,0],[254,0,229,0],[255,0,230,0],[256,2,231,0],[256,11,231,9,"addRequestDataToEvent"],[256,32,231,30,"addRequestDataToEvent"],[256,33,232,2,"event"],[256,38,232,7],[256,40,233,2,"req"],[256,43,233,5],[256,45,234,2,"options"],[256,52,234,9],[256,54,235,2],[257,4,236,2],[257,10,236,8,"include"],[257,17,236,15],[257,20,236,15,"Object"],[257,26,236,15],[257,27,236,15,"assign"],[257,33,236,15],[257,38,237,7,"DEFAULT_INCLUDES"],[257,54,237,23],[257,56,238,8,"options"],[257,63,238,15],[257,67,238,19,"options"],[257,74,238,26],[257,75,238,27,"include"],[257,82,238,34],[257,83,239,3],[258,4,241,2],[258,8,241,6,"include"],[258,15,241,13],[258,16,241,14,"request"],[258,23,241,21],[258,25,241,23],[259,6,242,4],[259,12,242,10,"extractedRequestData"],[259,32,242,30],[259,35,242,33,"Array"],[259,40,242,38],[259,41,242,39,"isArray"],[259,48,242,46],[259,49,242,47,"include"],[259,56,242,54],[259,57,242,55,"request"],[259,64,242,62],[259,65,242,63],[259,68,243,8,"extractRequestData"],[259,86,243,26],[259,87,243,27,"req"],[259,90,243,30],[259,92,243,32],[260,8,243,34,"include"],[260,15,243,41],[260,17,243,43,"include"],[260,24,243,50],[260,25,243,51,"request"],[260,32,243,58],[261,8,243,60,"deps"],[261,12,243,64],[261,14,243,66,"options"],[261,21,243,73],[261,25,243,77,"options"],[261,32,243,84],[261,33,243,85,"deps"],[262,6,243,90],[262,7,243,91],[262,8,243,92],[262,11,244,8,"extractRequestData"],[262,29,244,26],[262,30,244,27,"req"],[262,33,244,30],[262,35,244,32],[263,8,244,34,"deps"],[263,12,244,38],[263,14,244,40,"options"],[263,21,244,47],[263,25,244,51,"options"],[263,32,244,58],[263,33,244,59,"deps"],[264,6,244,64],[264,7,244,65],[264,8,244,66],[265,6,246,4,"event"],[265,11,246,9],[265,12,246,10,"request"],[265,19,246,17],[265,22,246,17,"Object"],[265,28,246,17],[265,29,246,17,"assign"],[265,35,246,17],[265,40,247,9,"event"],[265,45,247,14],[265,46,247,15,"request"],[265,53,247,22],[265,55,248,9,"extractedRequestData"],[265,75,248,29],[265,76,249,5],[266,4,250,2],[267,4,252,2],[267,8,252,6,"include"],[267,15,252,13],[267,16,252,14,"user"],[267,20,252,18],[267,22,252,20],[268,6,253,4],[268,12,253,10,"extractedUser"],[268,25,253,23],[268,28,253,26,"req"],[268,31,253,29],[268,32,253,30,"user"],[268,36,253,34],[268,40,253,38],[268,44,253,38,"isPlainObject"],[268,49,253,51],[268,50,253,51,"isPlainObject"],[268,63,253,51],[268,65,253,52,"req"],[268,68,253,55],[268,69,253,56,"user"],[268,73,253,60],[268,74,253,61],[268,77,253,64,"extractUserData"],[268,92,253,79],[268,93,253,80,"req"],[268,96,253,83],[268,97,253,84,"user"],[268,101,253,88],[268,103,253,90,"include"],[268,110,253,97],[268,111,253,98,"user"],[268,115,253,102],[268,116,253,103],[268,119,253,106],[268,120,253,107],[268,121,253,108],[269,6,255,4],[269,10,255,8,"Object"],[269,16,255,14],[269,17,255,15,"keys"],[269,21,255,19],[269,22,255,20,"extractedUser"],[269,35,255,33],[269,36,255,34],[269,37,255,35,"length"],[269,43,255,41],[269,45,255,43],[270,8,256,6,"event"],[270,13,256,11],[270,14,256,12,"user"],[270,18,256,16],[270,21,256,16,"Object"],[270,27,256,16],[270,28,256,16,"assign"],[270,34,256,16],[270,39,257,11,"event"],[270,44,257,16],[270,45,257,17,"user"],[270,49,257,21],[270,51,258,11,"extractedUser"],[270,64,258,24],[270,65,259,7],[271,6,260,4],[272,4,261,2],[274,4,263,2],[275,4,264,2],[276,4,265,2],[277,4,266,2],[277,8,266,6,"include"],[277,15,266,13],[277,16,266,14,"ip"],[277,18,266,16],[277,20,266,18],[278,6,267,4],[278,12,267,10,"ip"],[278,14,267,12],[278,17,267,15,"req"],[278,20,267,18],[278,21,267,19,"ip"],[278,23,267,21],[278,27,267,26,"req"],[278,30,267,29],[278,31,267,30,"socket"],[278,37,267,36],[278,41,267,40,"req"],[278,44,267,43],[278,45,267,44,"socket"],[278,51,267,50],[278,52,267,51,"remoteAddress"],[278,65,267,65],[279,6,268,4],[279,10,268,8,"ip"],[279,12,268,10],[279,14,268,12],[280,8,269,6,"event"],[280,13,269,11],[280,14,269,12,"user"],[280,18,269,16],[280,21,269,16,"Object"],[280,27,269,16],[280,28,269,16,"assign"],[280,34,269,16],[280,39,270,11,"event"],[280,44,270,16],[280,45,270,17,"user"],[280,49,270,21],[281,10,271,8,"ip_address"],[281,20,271,18],[281,22,271,20,"ip"],[282,8,271,22],[282,10,272,7],[283,6,273,4],[284,4,274,2],[285,4,276,2],[285,8,276,6,"include"],[285,15,276,13],[285,16,276,14,"transaction"],[285,27,276,25],[285,31,276,29],[285,32,276,30,"event"],[285,37,276,35],[285,38,276,36,"transaction"],[285,49,276,47],[285,51,276,49],[286,6,277,4],[287,6,278,4],[288,6,279,4,"event"],[288,11,279,9],[288,12,279,10,"transaction"],[288,23,279,21],[288,26,279,24,"extractTransaction"],[288,44,279,42],[288,45,279,43,"req"],[288,48,279,46],[288,50,279,48,"include"],[288,57,279,55],[288,58,279,56,"transaction"],[288,69,279,67],[288,70,279,68],[289,4,280,2],[290,4,282,2],[290,11,282,9,"event"],[290,16,282,14],[291,2,283,0],[292,2,285,0],[292,11,285,9,"extractQueryParams"],[292,29,285,27,"extractQueryParams"],[292,30,286,2,"req"],[292,33,286,5],[292,35,287,2,"deps"],[292,39,287,6],[292,41,288,2],[293,4,289,2],[294,4,290,2],[295,4,291,2],[296,4,292,2],[296,8,292,6,"originalUrl"],[296,19,292,17],[296,22,292,20,"req"],[296,25,292,23],[296,26,292,24,"originalUrl"],[296,37,292,35],[296,41,292,39,"req"],[296,44,292,42],[296,45,292,43,"url"],[296,48,292,46],[296,52,292,50],[296,54,292,52],[297,4,294,2],[297,8,294,6],[297,9,294,7,"originalUrl"],[297,20,294,18],[297,22,294,20],[298,6,295,4],[299,4,296,2],[301,4,298,2],[302,4,299,2],[303,4,300,2],[303,8,300,6,"originalUrl"],[303,19,300,17],[303,20,300,18,"startsWith"],[303,30,300,28],[303,31,300,29],[303,34,300,32],[303,35,300,33],[303,37,300,35],[304,6,301,4,"originalUrl"],[304,17,301,15],[304,20,301,18],[304,44,301,42,"originalUrl"],[304,55,301,53],[304,57,301,55],[305,4,302,2],[306,4,304,2],[306,11,305,4,"req"],[306,14,305,7],[306,15,305,8,"query"],[306,20,305,13],[306,24,306,5],[306,31,306,12,"URL"],[306,34,306,15],[306,39,306,20,"undefined"],[306,48,306,29],[306,52,306,33],[306,56,306,37,"URL"],[306,59,306,40],[306,60,306,41,"originalUrl"],[306,71,306,52],[306,72,306,53],[306,73,306,54,"search"],[306,79,306,60],[306,80,306,61,"replace"],[306,87,306,68],[306,88,306,69],[306,91,306,72],[306,93,306,74],[306,95,306,76],[306,96,306,78],[307,4,307,4],[308,4,308,5,"deps"],[308,8,308,9],[308,12,308,13,"deps"],[308,16,308,17],[308,17,308,18,"url"],[308,20,308,21],[308,24,308,25,"deps"],[308,28,308,29],[308,29,308,30,"url"],[308,32,308,33],[308,33,308,34,"parse"],[308,38,308,39],[308,39,308,40,"originalUrl"],[308,50,308,51],[308,51,308,52],[308,52,308,53,"query"],[308,57,308,59],[308,61,309,4,"undefined"],[308,70,309,13],[309,2,311,0],[310,0,311,1],[310,3]],"functionMap":{"names":["<global>","addRequestDataToTransaction","extractPathForTransaction","extractTransaction","extractUserData","attributes.forEach$argument_0","extractRequestData","include.forEach$argument_0","addRequestDataToEvent","extractQueryParams"],"mappings":"AAA;ACiB;CDe;AEgB;CFgC;AGG;CHa;AIG;qBCS;GDI;CJG;AMW;kBCgC;GDsD;CNG;AQe;CRoD;ASE;CT0B"},"hasCjsExports":false},"type":"js/module"}]}