{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":14,"index":78},"end":{"line":3,"column":38,"index":102}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}},{"name":"../utils/hasTracingEnabled.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":26,"index":130},"end":{"line":4,"column":66,"index":170}}],"key":"gWW15UweeA9ZhZFXlE8qSY03AzA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const utils = require(_dependencyMap[0], \"@sentry/utils\");\n  const hasTracingEnabled = require(_dependencyMap[1], \"../utils/hasTracingEnabled.js\");\n\n  /**\n   * Makes a sampling decision for the given transaction and stores it on the transaction.\n   *\n   * Called every time a transaction is created. Only transactions which emerge with a `sampled` value of `true` will be\n   * sent to Sentry.\n   *\n   * This method muttes the given `transaction` and will set the `sampled` value on it.\n   * It returns the same transaction, for convenience.\n   */\n  function sampleTransaction(transaction, options, samplingContext) {\n    // nothing to do if tracing is not enabled\n    if (!hasTracingEnabled.hasTracingEnabled(options)) {\n      transaction.sampled = false;\n      return transaction;\n    }\n\n    // if the user has forced a sampling decision by passing a `sampled` value in their transaction context, go with that\n    if (transaction.sampled !== undefined) {\n      transaction.setMetadata({\n        sampleRate: Number(transaction.sampled)\n      });\n      return transaction;\n    }\n\n    // we would have bailed already if neither `tracesSampler` nor `tracesSampleRate` nor `enableTracing` were defined, so one of these should\n    // work; prefer the hook if so\n    let sampleRate;\n    if (typeof options.tracesSampler === 'function') {\n      sampleRate = options.tracesSampler(samplingContext);\n      transaction.setMetadata({\n        sampleRate: Number(sampleRate)\n      });\n    } else if (samplingContext.parentSampled !== undefined) {\n      sampleRate = samplingContext.parentSampled;\n    } else if (typeof options.tracesSampleRate !== 'undefined') {\n      sampleRate = options.tracesSampleRate;\n      transaction.setMetadata({\n        sampleRate: Number(sampleRate)\n      });\n    } else {\n      // When `enableTracing === true`, we use a sample rate of 100%\n      sampleRate = 1;\n      transaction.setMetadata({\n        sampleRate\n      });\n    }\n\n    // Since this is coming from the user (or from a function provided by the user), who knows what we might get. (The\n    // only valid values are booleans or numbers between 0 and 1.)\n    if (!isValidSampleRate(sampleRate)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.warn('[Tracing] Discarding transaction because of invalid sample rate.');\n      transaction.sampled = false;\n      return transaction;\n    }\n\n    // if the function returned 0 (or false), or if `tracesSampleRate` is 0, it's a sign the transaction should be dropped\n    if (!sampleRate) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.log(`[Tracing] Discarding transaction because ${typeof options.tracesSampler === 'function' ? 'tracesSampler returned 0 or false' : 'a negative sampling decision was inherited or tracesSampleRate is set to 0'}`);\n      transaction.sampled = false;\n      return transaction;\n    }\n\n    // Now we roll the dice. Math.random is inclusive of 0, but not of 1, so strict < is safe here. In case sampleRate is\n    // a boolean, the < comparison will cause it to be automatically cast to 1 if it's true and 0 if it's false.\n    transaction.sampled = Math.random() < sampleRate;\n\n    // if we're not going to keep it, we're done\n    if (!transaction.sampled) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(sampleRate)})`);\n      return transaction;\n    }\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.log(`[Tracing] starting ${transaction.op} transaction - ${transaction.name}`);\n    return transaction;\n  }\n\n  /**\n   * Checks the given sample rate to make sure it is valid type and value (a boolean, or a number between 0 and 1).\n   */\n  function isValidSampleRate(rate) {\n    // we need to check NaN explicitly because it's of type 'number' and therefore wouldn't get caught by this typecheck\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (utils.isNaN(rate) || !(typeof rate === 'number' || typeof rate === 'boolean')) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(rate)} of type ${JSON.stringify(typeof rate)}.`);\n      return false;\n    }\n\n    // in case sampleRate is a boolean, it will get automatically cast to 1 if it's true and 0 if it's false\n    if (rate < 0 || rate > 1) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${rate}.`);\n      return false;\n    }\n    return true;\n  }\n  exports.sampleTransaction = sampleTransaction;\n});","lineCount":102,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"utils"],[5,13,3,11],[5,16,3,14,"require"],[5,23,3,21],[5,24,3,21,"_dependencyMap"],[5,38,3,21],[5,58,3,37],[5,59,3,38],[6,2,4,0],[6,8,4,6,"hasTracingEnabled"],[6,25,4,23],[6,28,4,26,"require"],[6,35,4,33],[6,36,4,33,"_dependencyMap"],[6,50,4,33],[6,86,4,65],[6,87,4,66],[8,2,6,0],[9,0,7,0],[10,0,8,0],[11,0,9,0],[12,0,10,0],[13,0,11,0],[14,0,12,0],[15,0,13,0],[16,0,14,0],[17,2,15,0],[17,11,15,9,"sampleTransaction"],[17,28,15,26,"sampleTransaction"],[17,29,16,2,"transaction"],[17,40,16,13],[17,42,17,2,"options"],[17,49,17,9],[17,51,18,2,"samplingContext"],[17,66,18,17],[17,68,19,2],[18,4,20,2],[19,4,21,2],[19,8,21,6],[19,9,21,7,"hasTracingEnabled"],[19,26,21,24],[19,27,21,25,"hasTracingEnabled"],[19,44,21,42],[19,45,21,43,"options"],[19,52,21,50],[19,53,21,51],[19,55,21,53],[20,6,22,4,"transaction"],[20,17,22,15],[20,18,22,16,"sampled"],[20,25,22,23],[20,28,22,26],[20,33,22,31],[21,6,23,4],[21,13,23,11,"transaction"],[21,24,23,22],[22,4,24,2],[24,4,26,2],[25,4,27,2],[25,8,27,6,"transaction"],[25,19,27,17],[25,20,27,18,"sampled"],[25,27,27,25],[25,32,27,30,"undefined"],[25,41,27,39],[25,43,27,41],[26,6,28,4,"transaction"],[26,17,28,15],[26,18,28,16,"setMetadata"],[26,29,28,27],[26,30,28,28],[27,8,29,6,"sampleRate"],[27,18,29,16],[27,20,29,18,"Number"],[27,26,29,24],[27,27,29,25,"transaction"],[27,38,29,36],[27,39,29,37,"sampled"],[27,46,29,44],[28,6,30,4],[28,7,30,5],[28,8,30,6],[29,6,31,4],[29,13,31,11,"transaction"],[29,24,31,22],[30,4,32,2],[32,4,34,2],[33,4,35,2],[34,4,36,2],[34,8,36,6,"sampleRate"],[34,18,36,16],[35,4,37,2],[35,8,37,6],[35,15,37,13,"options"],[35,22,37,20],[35,23,37,21,"tracesSampler"],[35,36,37,34],[35,41,37,39],[35,51,37,49],[35,53,37,51],[36,6,38,4,"sampleRate"],[36,16,38,14],[36,19,38,17,"options"],[36,26,38,24],[36,27,38,25,"tracesSampler"],[36,40,38,38],[36,41,38,39,"samplingContext"],[36,56,38,54],[36,57,38,55],[37,6,39,4,"transaction"],[37,17,39,15],[37,18,39,16,"setMetadata"],[37,29,39,27],[37,30,39,28],[38,8,40,6,"sampleRate"],[38,18,40,16],[38,20,40,18,"Number"],[38,26,40,24],[38,27,40,25,"sampleRate"],[38,37,40,35],[39,6,41,4],[39,7,41,5],[39,8,41,6],[40,4,42,2],[40,5,42,3],[40,11,42,9],[40,15,42,13,"samplingContext"],[40,30,42,28],[40,31,42,29,"parentSampled"],[40,44,42,42],[40,49,42,47,"undefined"],[40,58,42,56],[40,60,42,58],[41,6,43,4,"sampleRate"],[41,16,43,14],[41,19,43,17,"samplingContext"],[41,34,43,32],[41,35,43,33,"parentSampled"],[41,48,43,46],[42,4,44,2],[42,5,44,3],[42,11,44,9],[42,15,44,13],[42,22,44,20,"options"],[42,29,44,27],[42,30,44,28,"tracesSampleRate"],[42,46,44,44],[42,51,44,49],[42,62,44,60],[42,64,44,62],[43,6,45,4,"sampleRate"],[43,16,45,14],[43,19,45,17,"options"],[43,26,45,24],[43,27,45,25,"tracesSampleRate"],[43,43,45,41],[44,6,46,4,"transaction"],[44,17,46,15],[44,18,46,16,"setMetadata"],[44,29,46,27],[44,30,46,28],[45,8,47,6,"sampleRate"],[45,18,47,16],[45,20,47,18,"Number"],[45,26,47,24],[45,27,47,25,"sampleRate"],[45,37,47,35],[46,6,48,4],[46,7,48,5],[46,8,48,6],[47,4,49,2],[47,5,49,3],[47,11,49,9],[48,6,50,4],[49,6,51,4,"sampleRate"],[49,16,51,14],[49,19,51,17],[49,20,51,18],[50,6,52,4,"transaction"],[50,17,52,15],[50,18,52,16,"setMetadata"],[50,29,52,27],[50,30,52,28],[51,8,53,6,"sampleRate"],[52,6,54,4],[52,7,54,5],[52,8,54,6],[53,4,55,2],[55,4,57,2],[56,4,58,2],[57,4,59,2],[57,8,59,6],[57,9,59,7,"isValidSampleRate"],[57,26,59,24],[57,27,59,25,"sampleRate"],[57,37,59,35],[57,38,59,36],[57,40,59,38],[58,6,60,4],[58,7,60,5],[58,14,60,12,"__SENTRY_DEBUG__"],[58,30,60,28],[58,35,60,33],[58,46,60,44],[58,50,60,48,"__SENTRY_DEBUG__"],[58,66,60,64],[58,71,60,69,"utils"],[58,76,60,74],[58,77,60,75,"logger"],[58,83,60,81],[58,84,60,82,"warn"],[58,88,60,86],[58,89,60,87],[58,155,60,153],[58,156,60,154],[59,6,61,4,"transaction"],[59,17,61,15],[59,18,61,16,"sampled"],[59,25,61,23],[59,28,61,26],[59,33,61,31],[60,6,62,4],[60,13,62,11,"transaction"],[60,24,62,22],[61,4,63,2],[63,4,65,2],[64,4,66,2],[64,8,66,6],[64,9,66,7,"sampleRate"],[64,19,66,17],[64,21,66,19],[65,6,67,4],[65,7,67,5],[65,14,67,12,"__SENTRY_DEBUG__"],[65,30,67,28],[65,35,67,33],[65,46,67,44],[65,50,67,48,"__SENTRY_DEBUG__"],[65,66,67,64],[65,71,68,6,"utils"],[65,76,68,11],[65,77,68,12,"logger"],[65,83,68,18],[65,84,68,19,"log"],[65,87,68,22],[65,88,69,8],[65,132,70,10],[65,139,70,17,"options"],[65,146,70,24],[65,147,70,25,"tracesSampler"],[65,160,70,38],[65,165,70,43],[65,175,70,53],[65,178,71,14],[65,213,71,49],[65,216,72,14],[65,292,72,90],[65,294,74,6],[65,295,74,7],[66,6,75,4,"transaction"],[66,17,75,15],[66,18,75,16,"sampled"],[66,25,75,23],[66,28,75,26],[66,33,75,31],[67,6,76,4],[67,13,76,11,"transaction"],[67,24,76,22],[68,4,77,2],[70,4,79,2],[71,4,80,2],[72,4,81,2,"transaction"],[72,15,81,13],[72,16,81,14,"sampled"],[72,23,81,21],[72,26,81,24,"Math"],[72,30,81,28],[72,31,81,29,"random"],[72,37,81,35],[72,38,81,36],[72,39,81,37],[72,42,81,41,"sampleRate"],[72,52,81,53],[74,4,83,2],[75,4,84,2],[75,8,84,6],[75,9,84,7,"transaction"],[75,20,84,18],[75,21,84,19,"sampled"],[75,28,84,26],[75,30,84,28],[76,6,85,4],[76,7,85,5],[76,14,85,12,"__SENTRY_DEBUG__"],[76,30,85,28],[76,35,85,33],[76,46,85,44],[76,50,85,48,"__SENTRY_DEBUG__"],[76,66,85,64],[76,71,86,6,"utils"],[76,76,86,11],[76,77,86,12,"logger"],[76,83,86,18],[76,84,86,19,"log"],[76,87,86,22],[76,88,87,8],[76,188,87,108,"Number"],[76,194,87,114],[76,195,88,10,"sampleRate"],[76,205,89,8],[76,206,89,9],[76,209,90,6],[76,210,90,7],[77,6,91,4],[77,13,91,11,"transaction"],[77,24,91,22],[78,4,92,2],[79,4,94,2],[79,5,94,3],[79,12,94,10,"__SENTRY_DEBUG__"],[79,28,94,26],[79,33,94,31],[79,44,94,42],[79,48,94,46,"__SENTRY_DEBUG__"],[79,64,94,62],[79,69,94,67,"utils"],[79,74,94,72],[79,75,94,73,"logger"],[79,81,94,79],[79,82,94,80,"log"],[79,85,94,83],[79,86,94,84],[79,108,94,106,"transaction"],[79,119,94,117],[79,120,94,118,"op"],[79,122,94,120],[79,140,94,138,"transaction"],[79,151,94,149],[79,152,94,150,"name"],[79,156,94,154],[79,158,94,156],[79,159,94,157],[80,4,95,2],[80,11,95,9,"transaction"],[80,22,95,20],[81,2,96,0],[83,2,98,0],[84,0,99,0],[85,0,100,0],[86,2,101,0],[86,11,101,9,"isValidSampleRate"],[86,28,101,26,"isValidSampleRate"],[86,29,101,27,"rate"],[86,33,101,31],[86,35,101,33],[87,4,102,2],[88,4,103,2],[89,4,104,2],[89,8,104,6,"utils"],[89,13,104,11],[89,14,104,12,"isNaN"],[89,19,104,17],[89,20,104,18,"rate"],[89,24,104,22],[89,25,104,23],[89,29,104,27],[89,31,104,29],[89,38,104,36,"rate"],[89,42,104,40],[89,47,104,45],[89,55,104,53],[89,59,104,57],[89,66,104,64,"rate"],[89,70,104,68],[89,75,104,73],[89,84,104,82],[89,85,104,83],[89,87,104,85],[90,6,105,4],[90,7,105,5],[90,14,105,12,"__SENTRY_DEBUG__"],[90,30,105,28],[90,35,105,33],[90,46,105,44],[90,50,105,48,"__SENTRY_DEBUG__"],[90,66,105,64],[90,71,106,6,"utils"],[90,76,106,11],[90,77,106,12,"logger"],[90,83,106,18],[90,84,106,19,"warn"],[90,88,106,23],[90,89,107,8],[90,195,107,114,"JSON"],[90,199,107,118],[90,200,107,119,"stringify"],[90,209,107,128],[90,210,108,10,"rate"],[90,214,109,8],[90,215,109,9],[90,227,109,21,"JSON"],[90,231,109,25],[90,232,109,26,"stringify"],[90,241,109,35],[90,242,109,36],[90,249,109,43,"rate"],[90,253,109,47],[90,254,109,48],[90,257,110,6],[90,258,110,7],[91,6,111,4],[91,13,111,11],[91,18,111,16],[92,4,112,2],[94,4,114,2],[95,4,115,2],[95,8,115,6,"rate"],[95,12,115,10],[95,15,115,13],[95,16,115,14],[95,20,115,18,"rate"],[95,24,115,22],[95,27,115,25],[95,28,115,26],[95,30,115,28],[96,6,116,4],[96,7,116,5],[96,14,116,12,"__SENTRY_DEBUG__"],[96,30,116,28],[96,35,116,33],[96,46,116,44],[96,50,116,48,"__SENTRY_DEBUG__"],[96,66,116,64],[96,71,117,6,"utils"],[96,76,117,11],[96,77,117,12,"logger"],[96,83,117,18],[96,84,117,19,"warn"],[96,88,117,23],[96,89,117,24],[96,173,117,108,"rate"],[96,177,117,112],[96,180,117,115],[96,181,117,116],[97,6,118,4],[97,13,118,11],[97,18,118,16],[98,4,119,2],[99,4,120,2],[99,11,120,9],[99,15,120,13],[100,2,121,0],[101,2,123,0,"exports"],[101,9,123,7],[101,10,123,8,"sampleTransaction"],[101,27,123,25],[101,30,123,28,"sampleTransaction"],[101,47,123,45],[102,0,123,46],[102,3]],"functionMap":{"names":["<global>","sampleTransaction","isValidSampleRate"],"mappings":"AAA;ACc;CDiF;AEK;CFoB"},"hasCjsExports":true},"type":"js/module"}]}