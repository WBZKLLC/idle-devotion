{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"m+kcirlwHAgMIuUoyR2vCxbhWD4=","exportNames":["*"],"imports":1}},{"name":"../hub.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":40},"end":{"line":2,"column":43,"index":83}}],"key":"zULRLUIjTEh01Aba4FYqVmrjf0A=","exportNames":["*"],"imports":1}},{"name":"./errors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":84},"end":{"line":3,"column":59,"index":143}}],"key":"sBFAilsnlkNTfGhyvhhjLjsyBXM=","exportNames":["*"],"imports":1}},{"name":"./idletransaction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":144},"end":{"line":4,"column":55,"index":199}}],"key":"GWbLjkxFm4TdABLKOJNYeLsFBOk=","exportNames":["*"],"imports":1}},{"name":"./sampling.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":200},"end":{"line":5,"column":50,"index":250}}],"key":"4efP59LIIQeRPpu2Pzd7YKAG0T4=","exportNames":["*"],"imports":1}},{"name":"./transaction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":251},"end":{"line":6,"column":47,"index":298}}],"key":"2/VCqMf6AP+oca+/ayXQIhLr0Nk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"addTracingExtensions\", {\n    enumerable: true,\n    get: function () {\n      return addTracingExtensions;\n    }\n  });\n  Object.defineProperty(exports, \"startIdleTransaction\", {\n    enumerable: true,\n    get: function () {\n      return startIdleTransaction;\n    }\n  });\n  var _sentryUtils = require(_dependencyMap[0], \"@sentry/utils\");\n  var _hubJs = require(_dependencyMap[1], \"../hub.js\");\n  var _errorsJs = require(_dependencyMap[2], \"./errors.js\");\n  var _idletransactionJs = require(_dependencyMap[3], \"./idletransaction.js\");\n  var _samplingJs = require(_dependencyMap[4], \"./sampling.js\");\n  var _transactionJs = require(_dependencyMap[5], \"./transaction.js\");\n  /** Returns all trace headers that are currently on the top scope. */\n  function traceHeaders() {\n    const scope = this.getScope();\n    const span = scope.getSpan();\n    return span ? {\n      'sentry-trace': span.toTraceparent()\n    } : {};\n  }\n\n  /**\n   * Creates a new transaction and adds a sampling decision if it doesn't yet have one.\n   *\n   * The Hub.startTransaction method delegates to this method to do its work, passing the Hub instance in as `this`, as if\n   * it had been called on the hub directly. Exists as a separate function so that it can be injected into the class as an\n   * \"extension method.\"\n   *\n   * @param this: The Hub starting the transaction\n   * @param transactionContext: Data used to configure the transaction\n   * @param CustomSamplingContext: Optional data to be provided to the `tracesSampler` function (if any)\n   *\n   * @returns The new transaction\n   *\n   * @see {@link Hub.startTransaction}\n   */\n  function _startTransaction(transactionContext, customSamplingContext) {\n    const client = this.getClient();\n    const options = client && client.getOptions() || {};\n    const configInstrumenter = options.instrumenter || 'sentry';\n    const transactionInstrumenter = transactionContext.instrumenter || 'sentry';\n    if (configInstrumenter !== transactionInstrumenter) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.error(`A transaction was started with instrumenter=\\`${transactionInstrumenter}\\`, but the SDK is configured with the \\`${configInstrumenter}\\` instrumenter.\nThe transaction will not be sampled. Please use the ${configInstrumenter} instrumentation to start transactions.`);\n      transactionContext.sampled = false;\n    }\n    let transaction = new _transactionJs.Transaction(transactionContext, this);\n    transaction = (0, _samplingJs.sampleTransaction)(transaction, options, {\n      parentSampled: transactionContext.parentSampled,\n      transactionContext,\n      ...customSamplingContext\n    });\n    if (transaction.sampled) {\n      transaction.initSpanRecorder(options._experiments && options._experiments.maxSpans);\n    }\n    if (client && client.emit) {\n      client.emit('startTransaction', transaction);\n    }\n    return transaction;\n  }\n\n  /**\n   * Create new idle transaction.\n   */\n  function startIdleTransaction(hub, transactionContext, idleTimeout, finalTimeout, onScope, customSamplingContext, heartbeatInterval) {\n    const client = hub.getClient();\n    const options = client && client.getOptions() || {};\n    let transaction = new _idletransactionJs.IdleTransaction(transactionContext, hub, idleTimeout, finalTimeout, heartbeatInterval, onScope);\n    transaction = (0, _samplingJs.sampleTransaction)(transaction, options, {\n      parentSampled: transactionContext.parentSampled,\n      transactionContext,\n      ...customSamplingContext\n    });\n    if (transaction.sampled) {\n      transaction.initSpanRecorder(options._experiments && options._experiments.maxSpans);\n    }\n    if (client && client.emit) {\n      client.emit('startTransaction', transaction);\n    }\n    return transaction;\n  }\n\n  /**\n   * Adds tracing extensions to the global hub.\n   */\n  function addTracingExtensions() {\n    const carrier = (0, _hubJs.getMainCarrier)();\n    if (!carrier.__SENTRY__) {\n      return;\n    }\n    carrier.__SENTRY__.extensions = carrier.__SENTRY__.extensions || {};\n    if (!carrier.__SENTRY__.extensions.startTransaction) {\n      carrier.__SENTRY__.extensions.startTransaction = _startTransaction;\n    }\n    if (!carrier.__SENTRY__.extensions.traceHeaders) {\n      carrier.__SENTRY__.extensions.traceHeaders = traceHeaders;\n    }\n    (0, _errorsJs.registerErrorInstrumentation)();\n  }\n});","lineCount":112,"map":[[7,2,120,0,"Object"],[7,8,120,0],[7,9,120,0,"defineProperty"],[7,23,120,0],[7,24,120,0,"exports"],[7,31,120,0],[8,4,120,0,"enumerable"],[8,14,120,0],[9,4,120,0,"get"],[9,7,120,0],[9,18,120,0,"get"],[9,19,120,0],[10,6,120,0],[10,13,120,9,"addTracingExtensions"],[10,33,120,29],[11,4,120,29],[12,2,120,29],[13,2,120,0,"Object"],[13,8,120,0],[13,9,120,0,"defineProperty"],[13,23,120,0],[13,24,120,0,"exports"],[13,31,120,0],[14,4,120,0,"enumerable"],[14,14,120,0],[15,4,120,0,"get"],[15,7,120,0],[15,18,120,0,"get"],[15,19,120,0],[16,6,120,0],[16,13,120,31,"startIdleTransaction"],[16,33,120,51],[17,4,120,51],[18,2,120,51],[19,2,1,0],[19,6,1,0,"_sentryUtils"],[19,18,1,0],[19,21,1,0,"require"],[19,28,1,0],[19,29,1,0,"_dependencyMap"],[19,43,1,0],[20,2,2,0],[20,6,2,0,"_hubJs"],[20,12,2,0],[20,15,2,0,"require"],[20,22,2,0],[20,23,2,0,"_dependencyMap"],[20,37,2,0],[21,2,3,0],[21,6,3,0,"_errorsJs"],[21,15,3,0],[21,18,3,0,"require"],[21,25,3,0],[21,26,3,0,"_dependencyMap"],[21,40,3,0],[22,2,4,0],[22,6,4,0,"_idletransactionJs"],[22,24,4,0],[22,27,4,0,"require"],[22,34,4,0],[22,35,4,0,"_dependencyMap"],[22,49,4,0],[23,2,5,0],[23,6,5,0,"_samplingJs"],[23,17,5,0],[23,20,5,0,"require"],[23,27,5,0],[23,28,5,0,"_dependencyMap"],[23,42,5,0],[24,2,6,0],[24,6,6,0,"_transactionJs"],[24,20,6,0],[24,23,6,0,"require"],[24,30,6,0],[24,31,6,0,"_dependencyMap"],[24,45,6,0],[25,2,8,0],[26,2,9,0],[26,11,9,9,"traceHeaders"],[26,23,9,21,"traceHeaders"],[26,24,9,21],[26,26,9,24],[27,4,10,2],[27,10,10,8,"scope"],[27,15,10,13],[27,18,10,16],[27,22,10,20],[27,23,10,21,"getScope"],[27,31,10,29],[27,32,10,30],[27,33,10,31],[28,4,11,2],[28,10,11,8,"span"],[28,14,11,12],[28,17,11,15,"scope"],[28,22,11,20],[28,23,11,21,"getSpan"],[28,30,11,28],[28,31,11,29],[28,32,11,30],[29,4,13,2],[29,11,13,9,"span"],[29,15,13,13],[29,18,14,6],[30,6,15,8],[30,20,15,22],[30,22,15,24,"span"],[30,26,15,28],[30,27,15,29,"toTraceparent"],[30,40,15,42],[30,41,15,43],[31,4,16,6],[31,5,16,7],[31,8,17,6],[31,9,17,7],[31,10,17,8],[32,2,18,0],[34,2,20,0],[35,0,21,0],[36,0,22,0],[37,0,23,0],[38,0,24,0],[39,0,25,0],[40,0,26,0],[41,0,27,0],[42,0,28,0],[43,0,29,0],[44,0,30,0],[45,0,31,0],[46,0,32,0],[47,0,33,0],[48,0,34,0],[49,2,35,0],[49,11,35,9,"_startTransaction"],[49,28,35,26,"_startTransaction"],[49,29,37,2,"transactionContext"],[49,47,37,20],[49,49,38,2,"customSamplingContext"],[49,70,38,23],[49,72,39,2],[50,4,40,2],[50,10,40,8,"client"],[50,16,40,14],[50,19,40,17],[50,23,40,21],[50,24,40,22,"getClient"],[50,33,40,31],[50,34,40,32],[50,35,40,33],[51,4,41,2],[51,10,41,8,"options"],[51,17,41,15],[51,20,41,19,"client"],[51,26,41,25],[51,30,41,29,"client"],[51,36,41,35],[51,37,41,36,"getOptions"],[51,47,41,46],[51,48,41,47],[51,49,41,48],[51,53,41,53],[51,54,41,54],[51,55,41,55],[52,4,43,2],[52,10,43,8,"configInstrumenter"],[52,28,43,26],[52,31,43,29,"options"],[52,38,43,36],[52,39,43,37,"instrumenter"],[52,51,43,49],[52,55,43,53],[52,63,43,61],[53,4,44,2],[53,10,44,8,"transactionInstrumenter"],[53,33,44,31],[53,36,44,34,"transactionContext"],[53,54,44,52],[53,55,44,53,"instrumenter"],[53,67,44,65],[53,71,44,69],[53,79,44,77],[54,4,46,2],[54,8,46,6,"configInstrumenter"],[54,26,46,24],[54,31,46,29,"transactionInstrumenter"],[54,54,46,52],[54,56,46,54],[55,6,47,4],[55,7,47,5],[55,14,47,12,"__SENTRY_DEBUG__"],[55,30,47,28],[55,35,47,33],[55,46,47,44],[55,50,47,48,"__SENTRY_DEBUG__"],[55,66,47,64],[55,71,48,6,"logger"],[55,83,48,12],[55,84,48,12,"logger"],[55,90,48,12],[55,91,48,13,"error"],[55,96,48,18],[55,97,49,8],[55,146,49,57,"transactionInstrumenter"],[55,169,49,80],[55,213,49,124,"configInstrumenter"],[55,231,49,142],[56,0,50,0],[56,54,50,54,"configInstrumenter"],[56,72,50,72],[56,113,51,6],[56,114,51,7],[57,6,53,4,"transactionContext"],[57,24,53,22],[57,25,53,23,"sampled"],[57,32,53,30],[57,35,53,33],[57,40,53,38],[58,4,54,2],[59,4,56,2],[59,8,56,6,"transaction"],[59,19,56,17],[59,22,56,20],[59,26,56,24,"Transaction"],[59,40,56,35],[59,41,56,35,"Transaction"],[59,52,56,35],[59,53,56,36,"transactionContext"],[59,71,56,54],[59,73,56,56],[59,77,56,60],[59,78,56,61],[60,4,57,2,"transaction"],[60,15,57,13],[60,18,57,16],[60,22,57,16,"sampleTransaction"],[60,33,57,33],[60,34,57,33,"sampleTransaction"],[60,51,57,33],[60,53,57,34,"transaction"],[60,64,57,45],[60,66,57,47,"options"],[60,73,57,54],[60,75,57,56],[61,6,58,4,"parentSampled"],[61,19,58,17],[61,21,58,19,"transactionContext"],[61,39,58,37],[61,40,58,38,"parentSampled"],[61,53,58,51],[62,6,59,4,"transactionContext"],[62,24,59,22],[63,6,60,4],[63,9,60,7,"customSamplingContext"],[64,4,61,2],[64,5,61,3],[64,6,61,4],[65,4,62,2],[65,8,62,6,"transaction"],[65,19,62,17],[65,20,62,18,"sampled"],[65,27,62,25],[65,29,62,27],[66,6,63,4,"transaction"],[66,17,63,15],[66,18,63,16,"initSpanRecorder"],[66,34,63,32],[66,35,63,33,"options"],[66,42,63,40],[66,43,63,41,"_experiments"],[66,55,63,53],[66,59,63,58,"options"],[66,66,63,65],[66,67,63,66,"_experiments"],[66,79,63,78],[66,80,63,79,"maxSpans"],[66,88,63,89],[66,89,63,90],[67,4,64,2],[68,4,65,2],[68,8,65,6,"client"],[68,14,65,12],[68,18,65,16,"client"],[68,24,65,22],[68,25,65,23,"emit"],[68,29,65,27],[68,31,65,29],[69,6,66,4,"client"],[69,12,66,10],[69,13,66,11,"emit"],[69,17,66,15],[69,18,66,16],[69,36,66,34],[69,38,66,36,"transaction"],[69,49,66,47],[69,50,66,48],[70,4,67,2],[71,4,68,2],[71,11,68,9,"transaction"],[71,22,68,20],[72,2,69,0],[74,2,71,0],[75,0,72,0],[76,0,73,0],[77,2,74,0],[77,11,74,9,"startIdleTransaction"],[77,31,74,29,"startIdleTransaction"],[77,32,75,2,"hub"],[77,35,75,5],[77,37,76,2,"transactionContext"],[77,55,76,20],[77,57,77,2,"idleTimeout"],[77,68,77,13],[77,70,78,2,"finalTimeout"],[77,82,78,14],[77,84,79,2,"onScope"],[77,91,79,9],[77,93,80,2,"customSamplingContext"],[77,114,80,23],[77,116,81,2,"heartbeatInterval"],[77,133,81,19],[77,135,82,2],[78,4,83,2],[78,10,83,8,"client"],[78,16,83,14],[78,19,83,17,"hub"],[78,22,83,20],[78,23,83,21,"getClient"],[78,32,83,30],[78,33,83,31],[78,34,83,32],[79,4,84,2],[79,10,84,8,"options"],[79,17,84,15],[79,20,84,19,"client"],[79,26,84,25],[79,30,84,29,"client"],[79,36,84,35],[79,37,84,36,"getOptions"],[79,47,84,46],[79,48,84,47],[79,49,84,48],[79,53,84,53],[79,54,84,54],[79,55,84,55],[80,4,86,2],[80,8,86,6,"transaction"],[80,19,86,17],[80,22,86,20],[80,26,86,24,"IdleTransaction"],[80,44,86,39],[80,45,86,39,"IdleTransaction"],[80,60,86,39],[80,61,86,40,"transactionContext"],[80,79,86,58],[80,81,86,60,"hub"],[80,84,86,63],[80,86,86,65,"idleTimeout"],[80,97,86,76],[80,99,86,78,"finalTimeout"],[80,111,86,90],[80,113,86,92,"heartbeatInterval"],[80,130,86,109],[80,132,86,111,"onScope"],[80,139,86,118],[80,140,86,119],[81,4,87,2,"transaction"],[81,15,87,13],[81,18,87,16],[81,22,87,16,"sampleTransaction"],[81,33,87,33],[81,34,87,33,"sampleTransaction"],[81,51,87,33],[81,53,87,34,"transaction"],[81,64,87,45],[81,66,87,47,"options"],[81,73,87,54],[81,75,87,56],[82,6,88,4,"parentSampled"],[82,19,88,17],[82,21,88,19,"transactionContext"],[82,39,88,37],[82,40,88,38,"parentSampled"],[82,53,88,51],[83,6,89,4,"transactionContext"],[83,24,89,22],[84,6,90,4],[84,9,90,7,"customSamplingContext"],[85,4,91,2],[85,5,91,3],[85,6,91,4],[86,4,92,2],[86,8,92,6,"transaction"],[86,19,92,17],[86,20,92,18,"sampled"],[86,27,92,25],[86,29,92,27],[87,6,93,4,"transaction"],[87,17,93,15],[87,18,93,16,"initSpanRecorder"],[87,34,93,32],[87,35,93,33,"options"],[87,42,93,40],[87,43,93,41,"_experiments"],[87,55,93,53],[87,59,93,58,"options"],[87,66,93,65],[87,67,93,66,"_experiments"],[87,79,93,78],[87,80,93,79,"maxSpans"],[87,88,93,89],[87,89,93,90],[88,4,94,2],[89,4,95,2],[89,8,95,6,"client"],[89,14,95,12],[89,18,95,16,"client"],[89,24,95,22],[89,25,95,23,"emit"],[89,29,95,27],[89,31,95,29],[90,6,96,4,"client"],[90,12,96,10],[90,13,96,11,"emit"],[90,17,96,15],[90,18,96,16],[90,36,96,34],[90,38,96,36,"transaction"],[90,49,96,47],[90,50,96,48],[91,4,97,2],[92,4,98,2],[92,11,98,9,"transaction"],[92,22,98,20],[93,2,99,0],[95,2,101,0],[96,0,102,0],[97,0,103,0],[98,2,104,0],[98,11,104,9,"addTracingExtensions"],[98,31,104,29,"addTracingExtensions"],[98,32,104,29],[98,34,104,32],[99,4,105,2],[99,10,105,8,"carrier"],[99,17,105,15],[99,20,105,18],[99,24,105,18,"getMainCarrier"],[99,30,105,32],[99,31,105,32,"getMainCarrier"],[99,45,105,32],[99,47,105,33],[99,48,105,34],[100,4,106,2],[100,8,106,6],[100,9,106,7,"carrier"],[100,16,106,14],[100,17,106,15,"__SENTRY__"],[100,27,106,25],[100,29,106,27],[101,6,107,4],[102,4,108,2],[103,4,109,2,"carrier"],[103,11,109,9],[103,12,109,10,"__SENTRY__"],[103,22,109,20],[103,23,109,21,"extensions"],[103,33,109,31],[103,36,109,34,"carrier"],[103,43,109,41],[103,44,109,42,"__SENTRY__"],[103,54,109,52],[103,55,109,53,"extensions"],[103,65,109,63],[103,69,109,67],[103,70,109,68],[103,71,109,69],[104,4,110,2],[104,8,110,6],[104,9,110,7,"carrier"],[104,16,110,14],[104,17,110,15,"__SENTRY__"],[104,27,110,25],[104,28,110,26,"extensions"],[104,38,110,36],[104,39,110,37,"startTransaction"],[104,55,110,53],[104,57,110,55],[105,6,111,4,"carrier"],[105,13,111,11],[105,14,111,12,"__SENTRY__"],[105,24,111,22],[105,25,111,23,"extensions"],[105,35,111,33],[105,36,111,34,"startTransaction"],[105,52,111,50],[105,55,111,53,"_startTransaction"],[105,72,111,70],[106,4,112,2],[107,4,113,2],[107,8,113,6],[107,9,113,7,"carrier"],[107,16,113,14],[107,17,113,15,"__SENTRY__"],[107,27,113,25],[107,28,113,26,"extensions"],[107,38,113,36],[107,39,113,37,"traceHeaders"],[107,51,113,49],[107,53,113,51],[108,6,114,4,"carrier"],[108,13,114,11],[108,14,114,12,"__SENTRY__"],[108,24,114,22],[108,25,114,23,"extensions"],[108,35,114,33],[108,36,114,34,"traceHeaders"],[108,48,114,46],[108,51,114,49,"traceHeaders"],[108,63,114,61],[109,4,115,2],[110,4,117,2],[110,8,117,2,"registerErrorInstrumentation"],[110,17,117,30],[110,18,117,30,"registerErrorInstrumentation"],[110,46,117,30],[110,48,117,31],[110,49,117,32],[111,2,118,0],[112,0,118,1],[112,3]],"functionMap":{"names":["<global>","traceHeaders","_startTransaction","startIdleTransaction","addTracingExtensions"],"mappings":"AAA;ACQ;CDS;AEiB;CFkC;AGK;CHyB;AIK;CJc"},"hasCjsExports":false},"type":"js/module"}]}