{"dependencies":[{"name":"./features","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":419},"end":{"line":14,"column":46,"index":465}}],"key":"bmouY5/rpPD3Ua8O/sPZIfrV9Jw=","exportNames":["*"],"imports":1}},{"name":"./entitlements/gating","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":532},"end":{"line":16,"column":98,"index":630}}],"key":"XAmmiiz1xDYBiUCtpO5ZlQoS9FQ=","exportNames":["*"],"imports":1}},{"name":"./entitlements/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":631},"end":{"line":17,"column":82,"index":713}}],"key":"WFFU4HFKj7ZPoJL6d99FCOSpwv4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.canAccessCinematics = canAccessCinematics;\n  exports.useCanAccessCinematics = useCanAccessCinematics;\n  exports.hasHeroPremiumCinematicOwned = hasHeroPremiumCinematicOwned;\n  exports.useHasHeroPremiumCinematicOwned = useHasHeroPremiumCinematicOwned;\n  var _features = require(_dependencyMap[0], \"./features\");\n  var _entitlementsGating = require(_dependencyMap[1], \"./entitlements/gating\");\n  var _entitlementsTypes = require(_dependencyMap[2], \"./entitlements/types\");\n  /**\n   * Cinematics Access Helper\n   * \n   * Determines if user can access cinematics based on:\n   * 1. Paid entitlement (PREMIUM_CINEMATICS_PACK)\n   * 2. Feature flag (HERO_CINEMATICS)\n   * \n   * Also provides per-hero ownership check for stat bonuses.\n   * \n   * NOTE: For navigation to paywall, use openPremiumCinematic() from openPremiumCinematic.ts\n   * or goToPaywall() from entitlements/navigation.ts - NOT direct router.push.\n   */\n\n  /**\n   * Check if user can access cinematics system (synchronous check)\n   * Requires BOTH: paid pack entitlement AND feature flag enabled\n   * @param stableId - User ID for feature flag rollout\n   * @returns true if user has paid AND feature flag is enabled\n   */\n  function canAccessCinematics(stableId) {\n    // Use canonical gating helper\n    const hasPack = (0, _entitlementsGating.hasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Hook version for reactive updates\n   */\n  function useCanAccessCinematics(stableId) {\n    // Use canonical gating hook\n    const hasPack = (0, _entitlementsGating.useHasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Check if user owns the premium cinematic for a specific hero.\n   * This is what grants the stat perk (+10% HP, +5% ATK).\n   * @param heroId - The hero's stable ID (e.g., 'michael_the_archangel')\n   * @returns true if user owns this hero's premium cinematic\n   */\n  function hasHeroPremiumCinematicOwned(heroId) {\n    if (!heroId) return false;\n    // Use canonical gating helper\n    return (0, _entitlementsGating.canAccessHeroCinematic)(heroId);\n  }\n\n  /**\n   * Hook version for reactive per-hero ownership check\n   */\n  function useHasHeroPremiumCinematicOwned(heroId) {\n    // Use canonical gating hook with dynamic key\n    const key = (0, _entitlementsTypes.premiumCinematicOwnedKey)(heroId);\n    const hasHero = (0, _entitlementsGating.useHasEntitlement)(key);\n    const hasPack = (0, _entitlementsGating.useHasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    // User has access if they own the pack OR own the individual hero cinematic\n    return hasHero || hasPack;\n  }\n});","lineCount":77,"map":[[7,2,25,0,"exports"],[7,9,25,0],[7,10,25,0,"canAccessCinematics"],[7,29,25,0],[7,32,25,0,"canAccessCinematics"],[7,51,25,0],[8,2,36,0,"exports"],[8,9,36,0],[8,10,36,0,"useCanAccessCinematics"],[8,32,36,0],[8,35,36,0,"useCanAccessCinematics"],[8,57,36,0],[9,2,50,0,"exports"],[9,9,50,0],[9,10,50,0,"hasHeroPremiumCinematicOwned"],[9,38,50,0],[9,41,50,0,"hasHeroPremiumCinematicOwned"],[9,69,50,0],[10,2,59,0,"exports"],[10,9,59,0],[10,10,59,0,"useHasHeroPremiumCinematicOwned"],[10,41,59,0],[10,44,59,0,"useHasHeroPremiumCinematicOwned"],[10,75,59,0],[11,2,14,0],[11,6,14,0,"_features"],[11,15,14,0],[11,18,14,0,"require"],[11,25,14,0],[11,26,14,0,"_dependencyMap"],[11,40,14,0],[12,2,16,0],[12,6,16,0,"_entitlementsGating"],[12,25,16,0],[12,28,16,0,"require"],[12,35,16,0],[12,36,16,0,"_dependencyMap"],[12,50,16,0],[13,2,17,0],[13,6,17,0,"_entitlementsTypes"],[13,24,17,0],[13,27,17,0,"require"],[13,34,17,0],[13,35,17,0,"_dependencyMap"],[13,49,17,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[27,2,19,0],[28,0,20,0],[29,0,21,0],[30,0,22,0],[31,0,23,0],[32,0,24,0],[33,2,25,7],[33,11,25,16,"canAccessCinematics"],[33,30,25,35,"canAccessCinematics"],[33,31,25,36,"stableId"],[33,39,25,53],[33,41,25,64],[34,4,26,2],[35,4,27,2],[35,10,27,8,"hasPack"],[35,17,27,15],[35,20,27,18],[35,24,27,18,"hasEntitlement"],[35,43,27,32],[35,44,27,32,"hasEntitlement"],[35,58,27,32],[35,60,27,33,"ENTITLEMENT_KEYS"],[35,78,27,49],[35,79,27,49,"ENTITLEMENT_KEYS"],[35,95,27,49],[35,96,27,50,"PREMIUM_CINEMATICS_PACK"],[35,119,27,73],[35,120,27,74],[36,4,28,2],[36,8,28,6],[36,9,28,7,"hasPack"],[36,16,28,14],[36,18,28,16],[36,25,28,23],[36,30,28,28],[37,4,30,2],[37,11,30,9],[37,15,30,9,"isFeatureEnabled"],[37,24,30,25],[37,25,30,25,"isFeatureEnabled"],[37,41,30,25],[37,43,30,26],[37,60,30,43],[37,62,30,45],[38,6,30,47,"stableId"],[39,4,30,56],[39,5,30,57],[39,6,30,58],[40,2,31,0],[42,2,33,0],[43,0,34,0],[44,0,35,0],[45,2,36,7],[45,11,36,16,"useCanAccessCinematics"],[45,33,36,38,"useCanAccessCinematics"],[45,34,36,39,"stableId"],[45,42,36,56],[45,44,36,67],[46,4,37,2],[47,4,38,2],[47,10,38,8,"hasPack"],[47,17,38,15],[47,20,38,18],[47,24,38,18,"useHasEntitlement"],[47,43,38,35],[47,44,38,35,"useHasEntitlement"],[47,61,38,35],[47,63,38,36,"ENTITLEMENT_KEYS"],[47,81,38,52],[47,82,38,52,"ENTITLEMENT_KEYS"],[47,98,38,52],[47,99,38,53,"PREMIUM_CINEMATICS_PACK"],[47,122,38,76],[47,123,38,77],[48,4,39,2],[48,8,39,6],[48,9,39,7,"hasPack"],[48,16,39,14],[48,18,39,16],[48,25,39,23],[48,30,39,28],[49,4,41,2],[49,11,41,9],[49,15,41,9,"isFeatureEnabled"],[49,24,41,25],[49,25,41,25,"isFeatureEnabled"],[49,41,41,25],[49,43,41,26],[49,60,41,43],[49,62,41,45],[50,6,41,47,"stableId"],[51,4,41,56],[51,5,41,57],[51,6,41,58],[52,2,42,0],[54,2,44,0],[55,0,45,0],[56,0,46,0],[57,0,47,0],[58,0,48,0],[59,0,49,0],[60,2,50,7],[60,11,50,16,"hasHeroPremiumCinematicOwned"],[60,39,50,44,"hasHeroPremiumCinematicOwned"],[60,40,50,45,"heroId"],[60,46,50,59],[60,48,50,70],[61,4,51,2],[61,8,51,6],[61,9,51,7,"heroId"],[61,15,51,13],[61,17,51,15],[61,24,51,22],[61,29,51,27],[62,4,52,2],[63,4,53,2],[63,11,53,9],[63,15,53,9,"canAccessHeroCinematic"],[63,34,53,31],[63,35,53,31,"canAccessHeroCinematic"],[63,57,53,31],[63,59,53,32,"heroId"],[63,65,53,38],[63,66,53,39],[64,2,54,0],[66,2,56,0],[67,0,57,0],[68,0,58,0],[69,2,59,7],[69,11,59,16,"useHasHeroPremiumCinematicOwned"],[69,42,59,47,"useHasHeroPremiumCinematicOwned"],[69,43,59,48,"heroId"],[69,49,59,62],[69,51,59,73],[70,4,60,2],[71,4,61,2],[71,10,61,8,"key"],[71,13,61,11],[71,16,61,14],[71,20,61,14,"premiumCinematicOwnedKey"],[71,38,61,38],[71,39,61,38,"premiumCinematicOwnedKey"],[71,63,61,38],[71,65,61,39,"heroId"],[71,71,61,45],[71,72,61,46],[72,4,62,2],[72,10,62,8,"hasHero"],[72,17,62,15],[72,20,62,18],[72,24,62,18,"useHasEntitlement"],[72,43,62,35],[72,44,62,35,"useHasEntitlement"],[72,61,62,35],[72,63,62,36,"key"],[72,66,62,39],[72,67,62,40],[73,4,63,2],[73,10,63,8,"hasPack"],[73,17,63,15],[73,20,63,18],[73,24,63,18,"useHasEntitlement"],[73,43,63,35],[73,44,63,35,"useHasEntitlement"],[73,61,63,35],[73,63,63,36,"ENTITLEMENT_KEYS"],[73,81,63,52],[73,82,63,52,"ENTITLEMENT_KEYS"],[73,98,63,52],[73,99,63,53,"PREMIUM_CINEMATICS_PACK"],[73,122,63,76],[73,123,63,77],[74,4,64,2],[75,4,65,2],[75,11,65,9,"hasHero"],[75,18,65,16],[75,22,65,20,"hasPack"],[75,29,65,27],[76,2,66,0],[77,0,66,1],[77,3]],"functionMap":{"names":["<global>","canAccessCinematics","useCanAccessCinematics","hasHeroPremiumCinematicOwned","useHasHeroPremiumCinematicOwned"],"mappings":"AAA;OCwB;CDM;OEK;CFM;OGQ;CHI;OIK;CJO"},"hasCjsExports":false},"type":"js/module"}]}