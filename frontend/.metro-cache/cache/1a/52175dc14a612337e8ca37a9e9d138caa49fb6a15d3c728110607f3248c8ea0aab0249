{"dependencies":[{"name":"./logger.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"iVYhB1kviQI8ndYBeJYcuS1MqTQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"dsnFromString\", {\n    enumerable: true,\n    get: function () {\n      return dsnFromString;\n    }\n  });\n  Object.defineProperty(exports, \"dsnToString\", {\n    enumerable: true,\n    get: function () {\n      return dsnToString;\n    }\n  });\n  Object.defineProperty(exports, \"makeDsn\", {\n    enumerable: true,\n    get: function () {\n      return makeDsn;\n    }\n  });\n  var _loggerJs = require(_dependencyMap[0], \"./logger.js\");\n  /** Regular expression used to parse a Dsn. */\n  const DSN_REGEX = /^(?:(\\w+):)\\/\\/(?:(\\w+)(?::(\\w+)?)?@)([\\w.-]+)(?::(\\d+))?\\/(.+)/;\n  function isValidProtocol(protocol) {\n    return protocol === 'http' || protocol === 'https';\n  }\n\n  /**\n   * Renders the string representation of this Dsn.\n   *\n   * By default, this will render the public representation without the password\n   * component. To get the deprecated private representation, set `withPassword`\n   * to true.\n   *\n   * @param withPassword When set to true, the password will be included.\n   */\n  function dsnToString(dsn, withPassword = false) {\n    const {\n      host,\n      path,\n      pass,\n      port,\n      projectId,\n      protocol,\n      publicKey\n    } = dsn;\n    return `${protocol}://${publicKey}${withPassword && pass ? `:${pass}` : ''}` + `@${host}${port ? `:${port}` : ''}/${path ? `${path}/` : path}${projectId}`;\n  }\n\n  /**\n   * Parses a Dsn from a given string.\n   *\n   * @param str A Dsn as string\n   * @returns Dsn as DsnComponents or undefined if @param str is not a valid DSN string\n   */\n  function dsnFromString(str) {\n    const match = DSN_REGEX.exec(str);\n    if (!match) {\n      // This should be logged to the console\n      // eslint-disable-next-line no-console\n      console.error(`Invalid Sentry Dsn: ${str}`);\n      return undefined;\n    }\n    const [protocol, publicKey, pass = '', host, port = '', lastPath] = match.slice(1);\n    let path = '';\n    let projectId = lastPath;\n    const split = projectId.split('/');\n    if (split.length > 1) {\n      path = split.slice(0, -1).join('/');\n      projectId = split.pop();\n    }\n    if (projectId) {\n      const projectMatch = projectId.match(/^\\d+/);\n      if (projectMatch) {\n        projectId = projectMatch[0];\n      }\n    }\n    return dsnFromComponents({\n      host,\n      pass,\n      path,\n      projectId,\n      port,\n      protocol: protocol,\n      publicKey\n    });\n  }\n  function dsnFromComponents(components) {\n    return {\n      protocol: components.protocol,\n      publicKey: components.publicKey || '',\n      pass: components.pass || '',\n      host: components.host,\n      port: components.port || '',\n      path: components.path || '',\n      projectId: components.projectId\n    };\n  }\n  function validateDsn(dsn) {\n    if (!(typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n      return true;\n    }\n    const {\n      port,\n      projectId,\n      protocol\n    } = dsn;\n    const requiredComponents = ['protocol', 'publicKey', 'host', 'projectId'];\n    const hasMissingRequiredComponent = requiredComponents.find(component => {\n      if (!dsn[component]) {\n        _loggerJs.logger.error(`Invalid Sentry Dsn: ${component} missing`);\n        return true;\n      }\n      return false;\n    });\n    if (hasMissingRequiredComponent) {\n      return false;\n    }\n    if (!projectId.match(/^\\d+$/)) {\n      _loggerJs.logger.error(`Invalid Sentry Dsn: Invalid projectId ${projectId}`);\n      return false;\n    }\n    if (!isValidProtocol(protocol)) {\n      _loggerJs.logger.error(`Invalid Sentry Dsn: Invalid protocol ${protocol}`);\n      return false;\n    }\n    if (port && isNaN(parseInt(port, 10))) {\n      _loggerJs.logger.error(`Invalid Sentry Dsn: Invalid port ${port}`);\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Creates a valid Sentry Dsn object, identifying a Sentry instance and project.\n   * @returns a valid DsnComponents object or `undefined` if @param from is an invalid DSN source\n   */\n  function makeDsn(from) {\n    const components = typeof from === 'string' ? dsnFromString(from) : dsnFromComponents(from);\n    if (!components || !validateDsn(components)) {\n      return undefined;\n    }\n    return components;\n  }\n});","lineCount":149,"map":[[7,2,125,0,"Object"],[7,8,125,0],[7,9,125,0,"defineProperty"],[7,23,125,0],[7,24,125,0,"exports"],[7,31,125,0],[8,4,125,0,"enumerable"],[8,14,125,0],[9,4,125,0,"get"],[9,7,125,0],[9,18,125,0,"get"],[9,19,125,0],[10,6,125,0],[10,13,125,9,"dsnFromString"],[10,26,125,22],[11,4,125,22],[12,2,125,22],[13,2,125,0,"Object"],[13,8,125,0],[13,9,125,0,"defineProperty"],[13,23,125,0],[13,24,125,0,"exports"],[13,31,125,0],[14,4,125,0,"enumerable"],[14,14,125,0],[15,4,125,0,"get"],[15,7,125,0],[15,18,125,0,"get"],[15,19,125,0],[16,6,125,0],[16,13,125,24,"dsnToString"],[16,24,125,35],[17,4,125,35],[18,2,125,35],[19,2,125,0,"Object"],[19,8,125,0],[19,9,125,0,"defineProperty"],[19,23,125,0],[19,24,125,0,"exports"],[19,31,125,0],[20,4,125,0,"enumerable"],[20,14,125,0],[21,4,125,0,"get"],[21,7,125,0],[21,18,125,0,"get"],[21,19,125,0],[22,6,125,0],[22,13,125,37,"makeDsn"],[22,20,125,44],[23,4,125,44],[24,2,125,44],[25,2,1,0],[25,6,1,0,"_loggerJs"],[25,15,1,0],[25,18,1,0,"require"],[25,25,1,0],[25,26,1,0,"_dependencyMap"],[25,40,1,0],[26,2,3,0],[27,2,4,0],[27,8,4,6,"DSN_REGEX"],[27,17,4,15],[27,20,4,18],[27,85,4,83],[28,2,6,0],[28,11,6,9,"isValidProtocol"],[28,26,6,24,"isValidProtocol"],[28,27,6,25,"protocol"],[28,35,6,33],[28,37,6,35],[29,4,7,2],[29,11,7,9,"protocol"],[29,19,7,17],[29,24,7,22],[29,30,7,28],[29,34,7,32,"protocol"],[29,42,7,40],[29,47,7,45],[29,54,7,52],[30,2,8,0],[32,2,10,0],[33,0,11,0],[34,0,12,0],[35,0,13,0],[36,0,14,0],[37,0,15,0],[38,0,16,0],[39,0,17,0],[40,0,18,0],[41,2,19,0],[41,11,19,9,"dsnToString"],[41,22,19,20,"dsnToString"],[41,23,19,21,"dsn"],[41,26,19,24],[41,28,19,26,"withPassword"],[41,40,19,38],[41,43,19,41],[41,48,19,46],[41,50,19,48],[42,4,20,2],[42,10,20,8],[43,6,20,10,"host"],[43,10,20,14],[44,6,20,16,"path"],[44,10,20,20],[45,6,20,22,"pass"],[45,10,20,26],[46,6,20,28,"port"],[46,10,20,32],[47,6,20,34,"projectId"],[47,15,20,43],[48,6,20,45,"protocol"],[48,14,20,53],[49,6,20,55,"publicKey"],[50,4,20,65],[50,5,20,66],[50,8,20,69,"dsn"],[50,11,20,72],[51,4,21,2],[51,11,22,4],[51,14,22,7,"protocol"],[51,22,22,15],[51,28,22,21,"publicKey"],[51,37,22,30],[51,40,22,33,"withPassword"],[51,52,22,45],[51,56,22,49,"pass"],[51,60,22,53],[51,63,22,56],[51,67,22,60,"pass"],[51,71,22,64],[51,73,22,66],[51,76,22,69],[51,78,22,71],[51,80,22,73],[51,83,23,4],[51,87,23,8,"host"],[51,91,23,12],[51,94,23,15,"port"],[51,98,23,19],[51,101,23,22],[51,105,23,26,"port"],[51,109,23,30],[51,111,23,32],[51,114,23,35],[51,116,23,37],[51,120,23,41,"path"],[51,124,23,45],[51,127,23,48],[51,130,23,51,"path"],[51,134,23,55],[51,137,23,58],[51,140,23,61,"path"],[51,144,23,65],[51,147,23,68,"projectId"],[51,156,23,77],[51,158,23,79],[52,2,25,0],[54,2,27,0],[55,0,28,0],[56,0,29,0],[57,0,30,0],[58,0,31,0],[59,0,32,0],[60,2,33,0],[60,11,33,9,"dsnFromString"],[60,24,33,22,"dsnFromString"],[60,25,33,23,"str"],[60,28,33,26],[60,30,33,28],[61,4,34,2],[61,10,34,8,"match"],[61,15,34,13],[61,18,34,16,"DSN_REGEX"],[61,27,34,25],[61,28,34,26,"exec"],[61,32,34,30],[61,33,34,31,"str"],[61,36,34,34],[61,37,34,35],[62,4,36,2],[62,8,36,6],[62,9,36,7,"match"],[62,14,36,12],[62,16,36,14],[63,6,37,4],[64,6,38,4],[65,6,39,4,"console"],[65,13,39,11],[65,14,39,12,"error"],[65,19,39,17],[65,20,39,18],[65,43,39,41,"str"],[65,46,39,44],[65,48,39,46],[65,49,39,47],[66,6,40,4],[66,13,40,11,"undefined"],[66,22,40,20],[67,4,41,2],[68,4,43,2],[68,10,43,8],[68,11,43,9,"protocol"],[68,19,43,17],[68,21,43,19,"publicKey"],[68,30,43,28],[68,32,43,30,"pass"],[68,36,43,34],[68,39,43,37],[68,41,43,39],[68,43,43,41,"host"],[68,47,43,45],[68,49,43,47,"port"],[68,53,43,51],[68,56,43,54],[68,58,43,56],[68,60,43,58,"lastPath"],[68,68,43,66],[68,69,43,67],[68,72,43,70,"match"],[68,77,43,75],[68,78,43,76,"slice"],[68,83,43,81],[68,84,43,82],[68,85,43,83],[68,86,43,84],[69,4,44,2],[69,8,44,6,"path"],[69,12,44,10],[69,15,44,13],[69,17,44,15],[70,4,45,2],[70,8,45,6,"projectId"],[70,17,45,15],[70,20,45,18,"lastPath"],[70,28,45,26],[71,4,47,2],[71,10,47,8,"split"],[71,15,47,13],[71,18,47,16,"projectId"],[71,27,47,25],[71,28,47,26,"split"],[71,33,47,31],[71,34,47,32],[71,37,47,35],[71,38,47,36],[72,4,48,2],[72,8,48,6,"split"],[72,13,48,11],[72,14,48,12,"length"],[72,20,48,18],[72,23,48,21],[72,24,48,22],[72,26,48,24],[73,6,49,4,"path"],[73,10,49,8],[73,13,49,11,"split"],[73,18,49,16],[73,19,49,17,"slice"],[73,24,49,22],[73,25,49,23],[73,26,49,24],[73,28,49,26],[73,29,49,27],[73,30,49,28],[73,31,49,29],[73,32,49,30,"join"],[73,36,49,34],[73,37,49,35],[73,40,49,38],[73,41,49,39],[74,6,50,4,"projectId"],[74,15,50,13],[74,18,50,16,"split"],[74,23,50,21],[74,24,50,22,"pop"],[74,27,50,25],[74,28,50,26],[74,29,50,27],[75,4,51,2],[76,4,53,2],[76,8,53,6,"projectId"],[76,17,53,15],[76,19,53,17],[77,6,54,4],[77,12,54,10,"projectMatch"],[77,24,54,22],[77,27,54,25,"projectId"],[77,36,54,34],[77,37,54,35,"match"],[77,42,54,40],[77,43,54,41],[77,49,54,47],[77,50,54,48],[78,6,55,4],[78,10,55,8,"projectMatch"],[78,22,55,20],[78,24,55,22],[79,8,56,6,"projectId"],[79,17,56,15],[79,20,56,18,"projectMatch"],[79,32,56,30],[79,33,56,31],[79,34,56,32],[79,35,56,33],[80,6,57,4],[81,4,58,2],[82,4,60,2],[82,11,60,9,"dsnFromComponents"],[82,28,60,26],[82,29,60,27],[83,6,60,29,"host"],[83,10,60,33],[84,6,60,35,"pass"],[84,10,60,39],[85,6,60,41,"path"],[85,10,60,45],[86,6,60,47,"projectId"],[86,15,60,56],[87,6,60,58,"port"],[87,10,60,62],[88,6,60,64,"protocol"],[88,14,60,72],[88,16,60,74,"protocol"],[88,24,60,82],[89,6,60,85,"publicKey"],[90,4,60,95],[90,5,60,96],[90,6,60,97],[91,2,61,0],[92,2,63,0],[92,11,63,9,"dsnFromComponents"],[92,28,63,26,"dsnFromComponents"],[92,29,63,27,"components"],[92,39,63,37],[92,41,63,39],[93,4,64,2],[93,11,64,9],[94,6,65,4,"protocol"],[94,14,65,12],[94,16,65,14,"components"],[94,26,65,24],[94,27,65,25,"protocol"],[94,35,65,33],[95,6,66,4,"publicKey"],[95,15,66,13],[95,17,66,15,"components"],[95,27,66,25],[95,28,66,26,"publicKey"],[95,37,66,35],[95,41,66,39],[95,43,66,41],[96,6,67,4,"pass"],[96,10,67,8],[96,12,67,10,"components"],[96,22,67,20],[96,23,67,21,"pass"],[96,27,67,25],[96,31,67,29],[96,33,67,31],[97,6,68,4,"host"],[97,10,68,8],[97,12,68,10,"components"],[97,22,68,20],[97,23,68,21,"host"],[97,27,68,25],[98,6,69,4,"port"],[98,10,69,8],[98,12,69,10,"components"],[98,22,69,20],[98,23,69,21,"port"],[98,27,69,25],[98,31,69,29],[98,33,69,31],[99,6,70,4,"path"],[99,10,70,8],[99,12,70,10,"components"],[99,22,70,20],[99,23,70,21,"path"],[99,27,70,25],[99,31,70,29],[99,33,70,31],[100,6,71,4,"projectId"],[100,15,71,13],[100,17,71,15,"components"],[100,27,71,25],[100,28,71,26,"projectId"],[101,4,72,2],[101,5,72,3],[102,2,73,0],[103,2,75,0],[103,11,75,9,"validateDsn"],[103,22,75,20,"validateDsn"],[103,23,75,21,"dsn"],[103,26,75,24],[103,28,75,26],[104,4,76,2],[104,8,76,6],[104,10,76,8],[104,17,76,15,"__SENTRY_DEBUG__"],[104,33,76,31],[104,38,76,36],[104,49,76,47],[104,53,76,51,"__SENTRY_DEBUG__"],[104,69,76,67],[104,70,76,68],[104,72,76,70],[105,6,77,4],[105,13,77,11],[105,17,77,15],[106,4,78,2],[107,4,80,2],[107,10,80,8],[108,6,80,10,"port"],[108,10,80,14],[109,6,80,16,"projectId"],[109,15,80,25],[110,6,80,27,"protocol"],[111,4,80,36],[111,5,80,37],[111,8,80,40,"dsn"],[111,11,80,43],[112,4,82,2],[112,10,82,8,"requiredComponents"],[112,28,82,26],[112,31,82,29],[112,32,82,30],[112,42,82,40],[112,44,82,42],[112,55,82,53],[112,57,82,55],[112,63,82,61],[112,65,82,63],[112,76,82,74],[112,77,82,75],[113,4,83,2],[113,10,83,8,"hasMissingRequiredComponent"],[113,37,83,35],[113,40,83,38,"requiredComponents"],[113,58,83,56],[113,59,83,57,"find"],[113,63,83,61],[113,64,83,62,"component"],[113,73,83,71],[113,77,83,75],[114,6,84,4],[114,10,84,8],[114,11,84,9,"dsn"],[114,14,84,12],[114,15,84,13,"component"],[114,24,84,22],[114,25,84,23],[114,27,84,25],[115,8,85,6,"logger"],[115,17,85,12],[115,18,85,12,"logger"],[115,24,85,12],[115,25,85,13,"error"],[115,30,85,18],[115,31,85,19],[115,54,85,42,"component"],[115,63,85,51],[115,73,85,61],[115,74,85,62],[116,8,86,6],[116,15,86,13],[116,19,86,17],[117,6,87,4],[118,6,88,4],[118,13,88,11],[118,18,88,16],[119,4,89,2],[119,5,89,3],[119,6,89,4],[120,4,91,2],[120,8,91,6,"hasMissingRequiredComponent"],[120,35,91,33],[120,37,91,35],[121,6,92,4],[121,13,92,11],[121,18,92,16],[122,4,93,2],[123,4,95,2],[123,8,95,6],[123,9,95,7,"projectId"],[123,18,95,16],[123,19,95,17,"match"],[123,24,95,22],[123,25,95,23],[123,32,95,30],[123,33,95,31],[123,35,95,33],[124,6,96,4,"logger"],[124,15,96,10],[124,16,96,10,"logger"],[124,22,96,10],[124,23,96,11,"error"],[124,28,96,16],[124,29,96,17],[124,70,96,58,"projectId"],[124,79,96,67],[124,81,96,69],[124,82,96,70],[125,6,97,4],[125,13,97,11],[125,18,97,16],[126,4,98,2],[127,4,100,2],[127,8,100,6],[127,9,100,7,"isValidProtocol"],[127,24,100,22],[127,25,100,23,"protocol"],[127,33,100,31],[127,34,100,32],[127,36,100,34],[128,6,101,4,"logger"],[128,15,101,10],[128,16,101,10,"logger"],[128,22,101,10],[128,23,101,11,"error"],[128,28,101,16],[128,29,101,17],[128,69,101,57,"protocol"],[128,77,101,65],[128,79,101,67],[128,80,101,68],[129,6,102,4],[129,13,102,11],[129,18,102,16],[130,4,103,2],[131,4,105,2],[131,8,105,6,"port"],[131,12,105,10],[131,16,105,14,"isNaN"],[131,21,105,19],[131,22,105,20,"parseInt"],[131,30,105,28],[131,31,105,29,"port"],[131,35,105,33],[131,37,105,35],[131,39,105,37],[131,40,105,38],[131,41,105,39],[131,43,105,41],[132,6,106,4,"logger"],[132,15,106,10],[132,16,106,10,"logger"],[132,22,106,10],[132,23,106,11,"error"],[132,28,106,16],[132,29,106,17],[132,65,106,53,"port"],[132,69,106,57],[132,71,106,59],[132,72,106,60],[133,6,107,4],[133,13,107,11],[133,18,107,16],[134,4,108,2],[135,4,110,2],[135,11,110,9],[135,15,110,13],[136,2,111,0],[138,2,113,0],[139,0,114,0],[140,0,115,0],[141,0,116,0],[142,2,117,0],[142,11,117,9,"makeDsn"],[142,18,117,16,"makeDsn"],[142,19,117,17,"from"],[142,23,117,21],[142,25,117,23],[143,4,118,2],[143,10,118,8,"components"],[143,20,118,18],[143,23,118,21],[143,30,118,28,"from"],[143,34,118,32],[143,39,118,37],[143,47,118,45],[143,50,118,48,"dsnFromString"],[143,63,118,61],[143,64,118,62,"from"],[143,68,118,66],[143,69,118,67],[143,72,118,70,"dsnFromComponents"],[143,89,118,87],[143,90,118,88,"from"],[143,94,118,92],[143,95,118,93],[144,4,119,2],[144,8,119,6],[144,9,119,7,"components"],[144,19,119,17],[144,23,119,21],[144,24,119,22,"validateDsn"],[144,35,119,33],[144,36,119,34,"components"],[144,46,119,44],[144,47,119,45],[144,49,119,47],[145,6,120,4],[145,13,120,11,"undefined"],[145,22,120,20],[146,4,121,2],[147,4,122,2],[147,11,122,9,"components"],[147,21,122,19],[148,2,123,0],[149,0,123,1],[149,3]],"functionMap":{"names":["<global>","isValidProtocol","dsnToString","dsnFromString","dsnFromComponents","validateDsn","requiredComponents.find$argument_0","makeDsn"],"mappings":"AAA;ACK;CDE;AEW;CFM;AGQ;CH4B;AIE;CJU;AKE;8DCQ;GDM;CLsB;AOM;CPM"},"hasCjsExports":false},"type":"js/module"}]}