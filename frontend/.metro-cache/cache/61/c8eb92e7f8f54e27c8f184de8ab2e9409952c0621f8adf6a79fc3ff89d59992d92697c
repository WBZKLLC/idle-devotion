{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":96,"index":96}}],"key":"m+kcirlwHAgMIuUoyR2vCxbhWD4=","exportNames":["*"],"imports":1}},{"name":"./types.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":97},"end":{"line":2,"column":36,"index":133}}],"key":"yJvqu7zVoaSgx/LOxsKU/6eppkQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"instrumentRoutingWithDefaults\", {\n    enumerable: true,\n    get: function () {\n      return instrumentRoutingWithDefaults;\n    }\n  });\n  var _sentryUtils = require(_dependencyMap[0], \"@sentry/utils\");\n  var _typesJs = require(_dependencyMap[1], \"./types.js\");\n  /**\n   * Default function implementing pageload and navigation transactions\n   */\n  function instrumentRoutingWithDefaults(customStartTransaction, startTransactionOnPageLoad = true, startTransactionOnLocationChange = true) {\n    if (!_typesJs.WINDOW || !_typesJs.WINDOW.location) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.warn('Could not initialize routing instrumentation due to invalid location');\n      return;\n    }\n    let startingUrl = _typesJs.WINDOW.location.href;\n    let activeTransaction;\n    if (startTransactionOnPageLoad) {\n      activeTransaction = customStartTransaction({\n        name: _typesJs.WINDOW.location.pathname,\n        // pageload should always start at timeOrigin (and needs to be in s, not ms)\n        startTimestamp: _sentryUtils.browserPerformanceTimeOrigin ? _sentryUtils.browserPerformanceTimeOrigin / 1000 : undefined,\n        op: 'pageload',\n        origin: 'auto.pageload.browser',\n        metadata: {\n          source: 'url'\n        }\n      });\n    }\n    if (startTransactionOnLocationChange) {\n      (0, _sentryUtils.addInstrumentationHandler)('history', ({\n        to,\n        from\n      }) => {\n        /**\n         * This early return is there to account for some cases where a navigation transaction starts right after\n         * long-running pageload. We make sure that if `from` is undefined and a valid `startingURL` exists, we don't\n         * create an uneccessary navigation transaction.\n         *\n         * This was hard to duplicate, but this behavior stopped as soon as this fix was applied. This issue might also\n         * only be caused in certain development environments where the usage of a hot module reloader is causing\n         * errors.\n         */\n        if (from === undefined && startingUrl && startingUrl.indexOf(to) !== -1) {\n          startingUrl = undefined;\n          return;\n        }\n        if (from !== to) {\n          startingUrl = undefined;\n          if (activeTransaction) {\n            (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.log(`[Tracing] Finishing current transaction with op: ${activeTransaction.op}`);\n            // If there's an open transaction on the scope, we need to finish it before creating an new one.\n            activeTransaction.finish();\n          }\n          activeTransaction = customStartTransaction({\n            name: _typesJs.WINDOW.location.pathname,\n            op: 'navigation',\n            origin: 'auto.navigation.browser',\n            metadata: {\n              source: 'url'\n            }\n          });\n        }\n      });\n    }\n  }\n});","lineCount":74,"map":[[7,2,65,0,"Object"],[7,8,65,0],[7,9,65,0,"defineProperty"],[7,23,65,0],[7,24,65,0,"exports"],[7,31,65,0],[8,4,65,0,"enumerable"],[8,14,65,0],[9,4,65,0,"get"],[9,7,65,0],[9,18,65,0,"get"],[9,19,65,0],[10,6,65,0],[10,13,65,9,"instrumentRoutingWithDefaults"],[10,42,65,38],[11,4,65,38],[12,2,65,38],[13,2,1,0],[13,6,1,0,"_sentryUtils"],[13,18,1,0],[13,21,1,0,"require"],[13,28,1,0],[13,29,1,0,"_dependencyMap"],[13,43,1,0],[14,2,2,0],[14,6,2,0,"_typesJs"],[14,14,2,0],[14,17,2,0,"require"],[14,24,2,0],[14,25,2,0,"_dependencyMap"],[14,39,2,0],[15,2,4,0],[16,0,5,0],[17,0,6,0],[18,2,7,0],[18,11,7,9,"instrumentRoutingWithDefaults"],[18,40,7,38,"instrumentRoutingWithDefaults"],[18,41,8,2,"customStartTransaction"],[18,63,8,24],[18,65,9,2,"startTransactionOnPageLoad"],[18,91,9,28],[18,94,9,31],[18,98,9,35],[18,100,10,2,"startTransactionOnLocationChange"],[18,132,10,34],[18,135,10,37],[18,139,10,41],[18,141,11,2],[19,4,12,2],[19,8,12,6],[19,9,12,7,"WINDOW"],[19,17,12,13],[19,18,12,13,"WINDOW"],[19,24,12,13],[19,28,12,17],[19,29,12,18,"WINDOW"],[19,37,12,24],[19,38,12,24,"WINDOW"],[19,44,12,24],[19,45,12,25,"location"],[19,53,12,33],[19,55,12,35],[20,6,13,4],[20,7,13,5],[20,14,13,12,"__SENTRY_DEBUG__"],[20,30,13,28],[20,35,13,33],[20,46,13,44],[20,50,13,48,"__SENTRY_DEBUG__"],[20,66,13,64],[20,71,13,69,"logger"],[20,83,13,75],[20,84,13,75,"logger"],[20,90,13,75],[20,91,13,76,"warn"],[20,95,13,80],[20,96,13,81],[20,166,13,151],[20,167,13,152],[21,6,14,4],[22,4,15,2],[23,4,17,2],[23,8,17,6,"startingUrl"],[23,19,17,17],[23,22,17,20,"WINDOW"],[23,30,17,26],[23,31,17,26,"WINDOW"],[23,37,17,26],[23,38,17,27,"location"],[23,46,17,35],[23,47,17,36,"href"],[23,51,17,40],[24,4,19,2],[24,8,19,6,"activeTransaction"],[24,25,19,23],[25,4,20,2],[25,8,20,6,"startTransactionOnPageLoad"],[25,34,20,32],[25,36,20,34],[26,6,21,4,"activeTransaction"],[26,23,21,21],[26,26,21,24,"customStartTransaction"],[26,48,21,46],[26,49,21,47],[27,8,22,6,"name"],[27,12,22,10],[27,14,22,12,"WINDOW"],[27,22,22,18],[27,23,22,18,"WINDOW"],[27,29,22,18],[27,30,22,19,"location"],[27,38,22,27],[27,39,22,28,"pathname"],[27,47,22,36],[28,8,23,6],[29,8,24,6,"startTimestamp"],[29,22,24,20],[29,24,24,22,"browserPerformanceTimeOrigin"],[29,36,24,50],[29,37,24,50,"browserPerformanceTimeOrigin"],[29,65,24,50],[29,68,24,53,"browserPerformanceTimeOrigin"],[29,80,24,81],[29,81,24,81,"browserPerformanceTimeOrigin"],[29,109,24,81],[29,112,24,84],[29,116,24,88],[29,119,24,91,"undefined"],[29,128,24,100],[30,8,25,6,"op"],[30,10,25,8],[30,12,25,10],[30,22,25,20],[31,8,26,6,"origin"],[31,14,26,12],[31,16,26,14],[31,39,26,37],[32,8,27,6,"metadata"],[32,16,27,14],[32,18,27,16],[33,10,27,18,"source"],[33,16,27,24],[33,18,27,26],[34,8,27,32],[35,6,28,4],[35,7,28,5],[35,8,28,6],[36,4,29,2],[37,4,31,2],[37,8,31,6,"startTransactionOnLocationChange"],[37,40,31,38],[37,42,31,40],[38,6,32,4],[38,10,32,4,"addInstrumentationHandler"],[38,22,32,29],[38,23,32,29,"addInstrumentationHandler"],[38,48,32,29],[38,50,32,30],[38,59,32,39],[38,61,32,41],[38,62,32,42],[39,8,32,44,"to"],[39,10,32,46],[40,8,32,48,"from"],[41,6,32,53],[41,7,32,54],[41,12,32,59],[42,8,33,6],[43,0,34,0],[44,0,35,0],[45,0,36,0],[46,0,37,0],[47,0,38,0],[48,0,39,0],[49,0,40,0],[50,0,41,0],[51,8,42,6],[51,12,42,10,"from"],[51,16,42,14],[51,21,42,19,"undefined"],[51,30,42,28],[51,34,42,32,"startingUrl"],[51,45,42,43],[51,49,42,47,"startingUrl"],[51,60,42,58],[51,61,42,59,"indexOf"],[51,68,42,66],[51,69,42,67,"to"],[51,71,42,69],[51,72,42,70],[51,77,42,75],[51,78,42,76],[51,79,42,77],[51,81,42,79],[52,10,43,8,"startingUrl"],[52,21,43,19],[52,24,43,22,"undefined"],[52,33,43,31],[53,10,44,8],[54,8,45,6],[55,8,47,6],[55,12,47,10,"from"],[55,16,47,14],[55,21,47,19,"to"],[55,23,47,21],[55,25,47,23],[56,10,48,8,"startingUrl"],[56,21,48,19],[56,24,48,22,"undefined"],[56,33,48,31],[57,10,49,8],[57,14,49,12,"activeTransaction"],[57,31,49,29],[57,33,49,31],[58,12,50,10],[58,13,50,11],[58,20,50,18,"__SENTRY_DEBUG__"],[58,36,50,34],[58,41,50,39],[58,52,50,50],[58,56,50,54,"__SENTRY_DEBUG__"],[58,72,50,70],[58,77,50,75,"logger"],[58,89,50,81],[58,90,50,81,"logger"],[58,96,50,81],[58,97,50,82,"log"],[58,100,50,85],[58,101,50,86],[58,153,50,138,"activeTransaction"],[58,170,50,155],[58,171,50,156,"op"],[58,173,50,158],[58,175,50,160],[58,176,50,161],[59,12,51,10],[60,12,52,10,"activeTransaction"],[60,29,52,27],[60,30,52,28,"finish"],[60,36,52,34],[60,37,52,35],[60,38,52,36],[61,10,53,8],[62,10,54,8,"activeTransaction"],[62,27,54,25],[62,30,54,28,"customStartTransaction"],[62,52,54,50],[62,53,54,51],[63,12,55,10,"name"],[63,16,55,14],[63,18,55,16,"WINDOW"],[63,26,55,22],[63,27,55,22,"WINDOW"],[63,33,55,22],[63,34,55,23,"location"],[63,42,55,31],[63,43,55,32,"pathname"],[63,51,55,40],[64,12,56,10,"op"],[64,14,56,12],[64,16,56,14],[64,28,56,26],[65,12,57,10,"origin"],[65,18,57,16],[65,20,57,18],[65,45,57,43],[66,12,58,10,"metadata"],[66,20,58,18],[66,22,58,20],[67,14,58,22,"source"],[67,20,58,28],[67,22,58,30],[68,12,58,36],[69,10,59,8],[69,11,59,9],[69,12,59,10],[70,8,60,6],[71,6,61,4],[71,7,61,5],[71,8,61,6],[72,4,62,2],[73,2,63,0],[74,0,63,1],[74,3]],"functionMap":{"names":["<global>","instrumentRoutingWithDefaults","addInstrumentationHandler$argument_1"],"mappings":"AAA;ACM;yCCyB;KD6B;CDE"},"hasCjsExports":false},"type":"js/module"}]}