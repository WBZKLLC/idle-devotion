{"dependencies":[{"name":"./node-stack-trace.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"I4HuW3JMH4XPRKx+RMlbO8AEW38=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"filenameIsInApp\", {\n    enumerable: true,\n    get: function () {\n      return _nodeStackTraceJs.filenameIsInApp;\n    }\n  });\n  Object.defineProperty(exports, \"createStackParser\", {\n    enumerable: true,\n    get: function () {\n      return createStackParser;\n    }\n  });\n  Object.defineProperty(exports, \"getFunctionName\", {\n    enumerable: true,\n    get: function () {\n      return getFunctionName;\n    }\n  });\n  Object.defineProperty(exports, \"nodeStackLineParser\", {\n    enumerable: true,\n    get: function () {\n      return nodeStackLineParser;\n    }\n  });\n  Object.defineProperty(exports, \"stackParserFromStackParserOptions\", {\n    enumerable: true,\n    get: function () {\n      return stackParserFromStackParserOptions;\n    }\n  });\n  Object.defineProperty(exports, \"stripSentryFramesAndReverse\", {\n    enumerable: true,\n    get: function () {\n      return stripSentryFramesAndReverse;\n    }\n  });\n  var _nodeStackTraceJs = require(_dependencyMap[0], \"./node-stack-trace.js\");\n  const STACKTRACE_FRAME_LIMIT = 50;\n  // Used to sanitize webpack (error: *) wrapped stack errors\n  const WEBPACK_ERROR_REGEXP = /\\(error: (.*)\\)/;\n  const STRIP_FRAME_REGEXP = /captureMessage|captureException/;\n\n  /**\n   * Creates a stack parser with the supplied line parsers\n   *\n   * StackFrames are returned in the correct order for Sentry Exception\n   * frames and with Sentry SDK internal frames removed from the top and bottom\n   *\n   */\n  function createStackParser(...parsers) {\n    const sortedParsers = parsers.sort((a, b) => a[0] - b[0]).map(p => p[1]);\n    return (stack, skipFirst = 0) => {\n      const frames = [];\n      const lines = stack.split('\\n');\n      for (let i = skipFirst; i < lines.length; i++) {\n        const line = lines[i];\n        // Ignore lines over 1kb as they are unlikely to be stack frames.\n        // Many of the regular expressions use backtracking which results in run time that increases exponentially with\n        // input size. Huge strings can result in hangs/Denial of Service:\n        // https://github.com/getsentry/sentry-javascript/issues/2286\n        if (line.length > 1024) {\n          continue;\n        }\n\n        // https://github.com/getsentry/sentry-javascript/issues/5459\n        // Remove webpack (error: *) wrappers\n        const cleanedLine = WEBPACK_ERROR_REGEXP.test(line) ? line.replace(WEBPACK_ERROR_REGEXP, '$1') : line;\n\n        // https://github.com/getsentry/sentry-javascript/issues/7813\n        // Skip Error: lines\n        if (cleanedLine.match(/\\S*Error: /)) {\n          continue;\n        }\n        for (const parser of sortedParsers) {\n          const frame = parser(cleanedLine);\n          if (frame) {\n            frames.push(frame);\n            break;\n          }\n        }\n        if (frames.length >= STACKTRACE_FRAME_LIMIT) {\n          break;\n        }\n      }\n      return stripSentryFramesAndReverse(frames);\n    };\n  }\n\n  /**\n   * Gets a stack parser implementation from Options.stackParser\n   * @see Options\n   *\n   * If options contains an array of line parsers, it is converted into a parser\n   */\n  function stackParserFromStackParserOptions(stackParser) {\n    if (Array.isArray(stackParser)) {\n      return createStackParser(...stackParser);\n    }\n    return stackParser;\n  }\n\n  /**\n   * Removes Sentry frames from the top and bottom of the stack if present and enforces a limit of max number of frames.\n   * Assumes stack input is ordered from top to bottom and returns the reverse representation so call site of the\n   * function that caused the crash is the last frame in the array.\n   * @hidden\n   */\n  function stripSentryFramesAndReverse(stack) {\n    if (!stack.length) {\n      return [];\n    }\n    const localStack = Array.from(stack);\n\n    // If stack starts with one of our API calls, remove it (starts, meaning it's the top of the stack - aka last call)\n    if (/sentryWrapped/.test(localStack[localStack.length - 1].function || '')) {\n      localStack.pop();\n    }\n\n    // Reversing in the middle of the procedure allows us to just pop the values off the stack\n    localStack.reverse();\n\n    // If stack ends with one of our internal API calls, remove it (ends, meaning it's the bottom of the stack - aka top-most call)\n    if (STRIP_FRAME_REGEXP.test(localStack[localStack.length - 1].function || '')) {\n      localStack.pop();\n\n      // When using synthetic events, we will have a 2 levels deep stack, as `new Error('Sentry syntheticException')`\n      // is produced within the hub itself, making it:\n      //\n      //   Sentry.captureException()\n      //   getCurrentHub().captureException()\n      //\n      // instead of just the top `Sentry` call itself.\n      // This forces us to possibly strip an additional frame in the exact same was as above.\n      if (STRIP_FRAME_REGEXP.test(localStack[localStack.length - 1].function || '')) {\n        localStack.pop();\n      }\n    }\n    return localStack.slice(0, STACKTRACE_FRAME_LIMIT).map(frame => Object.assign({}, frame, {\n      filename: frame.filename || localStack[localStack.length - 1].filename,\n      function: frame.function || '?'\n    }));\n  }\n  const defaultFunctionName = '<anonymous>';\n\n  /**\n   * Safely extract function name from itself\n   */\n  function getFunctionName(fn) {\n    try {\n      if (!fn || typeof fn !== 'function') {\n        return defaultFunctionName;\n      }\n      return fn.name || defaultFunctionName;\n    } catch (e) {\n      // Just accessing custom props in some Selenium environments\n      // can cause a \"Permission denied\" exception (see raven-js#495).\n      return defaultFunctionName;\n    }\n  }\n\n  /**\n   * Node.js stack line parser\n   *\n   * This is in @sentry/utils so it can be used from the Electron SDK in the browser for when `nodeIntegration == true`.\n   * This allows it to be used without referencing or importing any node specific code which causes bundlers to complain\n   */\n  function nodeStackLineParser(getModule) {\n    return [90, (0, _nodeStackTraceJs.node)(getModule)];\n  }\n});","lineCount":176,"map":[[7,2,2,0,"Object"],[7,8,2,0],[7,9,2,0,"defineProperty"],[7,23,2,0],[7,24,2,0,"exports"],[7,31,2,0],[8,4,2,0,"enumerable"],[8,14,2,0],[9,4,2,0,"get"],[9,7,2,0],[9,18,2,0,"get"],[9,19,2,0],[10,6,2,0],[10,13,2,0,"_nodeStackTraceJs"],[10,30,2,0],[10,31,2,0,"filenameIsInApp"],[10,46,2,0],[11,4,2,0],[12,2,2,0],[13,2,147,0,"Object"],[13,8,147,0],[13,9,147,0,"defineProperty"],[13,23,147,0],[13,24,147,0,"exports"],[13,31,147,0],[14,4,147,0,"enumerable"],[14,14,147,0],[15,4,147,0,"get"],[15,7,147,0],[15,18,147,0,"get"],[15,19,147,0],[16,6,147,0],[16,13,147,9,"createStackParser"],[16,30,147,26],[17,4,147,26],[18,2,147,26],[19,2,147,0,"Object"],[19,8,147,0],[19,9,147,0,"defineProperty"],[19,23,147,0],[19,24,147,0,"exports"],[19,31,147,0],[20,4,147,0,"enumerable"],[20,14,147,0],[21,4,147,0,"get"],[21,7,147,0],[21,18,147,0,"get"],[21,19,147,0],[22,6,147,0],[22,13,147,28,"getFunctionName"],[22,28,147,43],[23,4,147,43],[24,2,147,43],[25,2,147,0,"Object"],[25,8,147,0],[25,9,147,0,"defineProperty"],[25,23,147,0],[25,24,147,0,"exports"],[25,31,147,0],[26,4,147,0,"enumerable"],[26,14,147,0],[27,4,147,0,"get"],[27,7,147,0],[27,18,147,0,"get"],[27,19,147,0],[28,6,147,0],[28,13,147,45,"nodeStackLineParser"],[28,32,147,64],[29,4,147,64],[30,2,147,64],[31,2,147,0,"Object"],[31,8,147,0],[31,9,147,0,"defineProperty"],[31,23,147,0],[31,24,147,0,"exports"],[31,31,147,0],[32,4,147,0,"enumerable"],[32,14,147,0],[33,4,147,0,"get"],[33,7,147,0],[33,18,147,0,"get"],[33,19,147,0],[34,6,147,0],[34,13,147,66,"stackParserFromStackParserOptions"],[34,46,147,99],[35,4,147,99],[36,2,147,99],[37,2,147,0,"Object"],[37,8,147,0],[37,9,147,0,"defineProperty"],[37,23,147,0],[37,24,147,0,"exports"],[37,31,147,0],[38,4,147,0,"enumerable"],[38,14,147,0],[39,4,147,0,"get"],[39,7,147,0],[39,18,147,0,"get"],[39,19,147,0],[40,6,147,0],[40,13,147,101,"stripSentryFramesAndReverse"],[40,40,147,128],[41,4,147,128],[42,2,147,128],[43,2,1,0],[43,6,1,0,"_nodeStackTraceJs"],[43,23,1,0],[43,26,1,0,"require"],[43,33,1,0],[43,34,1,0,"_dependencyMap"],[43,48,1,0],[44,2,4,0],[44,8,4,6,"STACKTRACE_FRAME_LIMIT"],[44,30,4,28],[44,33,4,31],[44,35,4,33],[45,2,5,0],[46,2,6,0],[46,8,6,6,"WEBPACK_ERROR_REGEXP"],[46,28,6,26],[46,31,6,29],[46,48,6,46],[47,2,7,0],[47,8,7,6,"STRIP_FRAME_REGEXP"],[47,26,7,24],[47,29,7,27],[47,62,7,60],[49,2,9,0],[50,0,10,0],[51,0,11,0],[52,0,12,0],[53,0,13,0],[54,0,14,0],[55,0,15,0],[56,2,16,0],[56,11,16,9,"createStackParser"],[56,28,16,26,"createStackParser"],[56,29,16,27],[56,32,16,30,"parsers"],[56,39,16,37],[56,41,16,39],[57,4,17,2],[57,10,17,8,"sortedParsers"],[57,23,17,21],[57,26,17,24,"parsers"],[57,33,17,31],[57,34,17,32,"sort"],[57,38,17,36],[57,39,17,37],[57,40,17,38,"a"],[57,41,17,39],[57,43,17,41,"b"],[57,44,17,42],[57,49,17,47,"a"],[57,50,17,48],[57,51,17,49],[57,52,17,50],[57,53,17,51],[57,56,17,54,"b"],[57,57,17,55],[57,58,17,56],[57,59,17,57],[57,60,17,58],[57,61,17,59],[57,62,17,60,"map"],[57,65,17,63],[57,66,17,64,"p"],[57,67,17,65],[57,71,17,69,"p"],[57,72,17,70],[57,73,17,71],[57,74,17,72],[57,75,17,73],[57,76,17,74],[58,4,19,2],[58,11,19,9],[58,12,19,10,"stack"],[58,17,19,15],[58,19,19,17,"skipFirst"],[58,28,19,26],[58,31,19,29],[58,32,19,30],[58,37,19,35],[59,6,20,4],[59,12,20,10,"frames"],[59,18,20,16],[59,21,20,19],[59,23,20,21],[60,6,21,4],[60,12,21,10,"lines"],[60,17,21,15],[60,20,21,18,"stack"],[60,25,21,23],[60,26,21,24,"split"],[60,31,21,29],[60,32,21,30],[60,36,21,34],[60,37,21,35],[61,6,23,4],[61,11,23,9],[61,15,23,13,"i"],[61,16,23,14],[61,19,23,17,"skipFirst"],[61,28,23,26],[61,30,23,28,"i"],[61,31,23,29],[61,34,23,32,"lines"],[61,39,23,37],[61,40,23,38,"length"],[61,46,23,44],[61,48,23,46,"i"],[61,49,23,47],[61,51,23,49],[61,53,23,51],[62,8,24,6],[62,14,24,12,"line"],[62,18,24,16],[62,21,24,19,"lines"],[62,26,24,24],[62,27,24,25,"i"],[62,28,24,26],[62,29,24,27],[63,8,25,6],[64,8,26,6],[65,8,27,6],[66,8,28,6],[67,8,29,6],[67,12,29,10,"line"],[67,16,29,14],[67,17,29,15,"length"],[67,23,29,21],[67,26,29,24],[67,30,29,28],[67,32,29,30],[68,10,30,8],[69,8,31,6],[71,8,33,6],[72,8,34,6],[73,8,35,6],[73,14,35,12,"cleanedLine"],[73,25,35,23],[73,28,35,26,"WEBPACK_ERROR_REGEXP"],[73,48,35,46],[73,49,35,47,"test"],[73,53,35,51],[73,54,35,52,"line"],[73,58,35,56],[73,59,35,57],[73,62,35,60,"line"],[73,66,35,64],[73,67,35,65,"replace"],[73,74,35,72],[73,75,35,73,"WEBPACK_ERROR_REGEXP"],[73,95,35,93],[73,97,35,95],[73,101,35,99],[73,102,35,100],[73,105,35,103,"line"],[73,109,35,107],[75,8,37,6],[76,8,38,6],[77,8,39,6],[77,12,39,10,"cleanedLine"],[77,23,39,21],[77,24,39,22,"match"],[77,29,39,27],[77,30,39,28],[77,42,39,40],[77,43,39,41],[77,45,39,43],[78,10,40,8],[79,8,41,6],[80,8,43,6],[80,13,43,11],[80,19,43,17,"parser"],[80,25,43,23],[80,29,43,27,"sortedParsers"],[80,42,43,40],[80,44,43,42],[81,10,44,8],[81,16,44,14,"frame"],[81,21,44,19],[81,24,44,22,"parser"],[81,30,44,28],[81,31,44,29,"cleanedLine"],[81,42,44,40],[81,43,44,41],[82,10,46,8],[82,14,46,12,"frame"],[82,19,46,17],[82,21,46,19],[83,12,47,10,"frames"],[83,18,47,16],[83,19,47,17,"push"],[83,23,47,21],[83,24,47,22,"frame"],[83,29,47,27],[83,30,47,28],[84,12,48,10],[85,10,49,8],[86,8,50,6],[87,8,52,6],[87,12,52,10,"frames"],[87,18,52,16],[87,19,52,17,"length"],[87,25,52,23],[87,29,52,27,"STACKTRACE_FRAME_LIMIT"],[87,51,52,49],[87,53,52,51],[88,10,53,8],[89,8,54,6],[90,6,55,4],[91,6,57,4],[91,13,57,11,"stripSentryFramesAndReverse"],[91,40,57,38],[91,41,57,39,"frames"],[91,47,57,45],[91,48,57,46],[92,4,58,2],[92,5,58,3],[93,2,59,0],[95,2,61,0],[96,0,62,0],[97,0,63,0],[98,0,64,0],[99,0,65,0],[100,0,66,0],[101,2,67,0],[101,11,67,9,"stackParserFromStackParserOptions"],[101,44,67,42,"stackParserFromStackParserOptions"],[101,45,67,43,"stackParser"],[101,56,67,54],[101,58,67,56],[102,4,68,2],[102,8,68,6,"Array"],[102,13,68,11],[102,14,68,12,"isArray"],[102,21,68,19],[102,22,68,20,"stackParser"],[102,33,68,31],[102,34,68,32],[102,36,68,34],[103,6,69,4],[103,13,69,11,"createStackParser"],[103,30,69,28],[103,31,69,29],[103,34,69,32,"stackParser"],[103,45,69,43],[103,46,69,44],[104,4,70,2],[105,4,71,2],[105,11,71,9,"stackParser"],[105,22,71,20],[106,2,72,0],[108,2,74,0],[109,0,75,0],[110,0,76,0],[111,0,77,0],[112,0,78,0],[113,0,79,0],[114,2,80,0],[114,11,80,9,"stripSentryFramesAndReverse"],[114,38,80,36,"stripSentryFramesAndReverse"],[114,39,80,37,"stack"],[114,44,80,42],[114,46,80,44],[115,4,81,2],[115,8,81,6],[115,9,81,7,"stack"],[115,14,81,12],[115,15,81,13,"length"],[115,21,81,19],[115,23,81,21],[116,6,82,4],[116,13,82,11],[116,15,82,13],[117,4,83,2],[118,4,85,2],[118,10,85,8,"localStack"],[118,20,85,18],[118,23,85,21,"Array"],[118,28,85,26],[118,29,85,27,"from"],[118,33,85,31],[118,34,85,32,"stack"],[118,39,85,37],[118,40,85,38],[120,4,87,2],[121,4,88,2],[121,8,88,6],[121,23,88,21],[121,24,88,22,"test"],[121,28,88,26],[121,29,88,27,"localStack"],[121,39,88,37],[121,40,88,38,"localStack"],[121,50,88,48],[121,51,88,49,"length"],[121,57,88,55],[121,60,88,58],[121,61,88,59],[121,62,88,60],[121,63,88,61,"function"],[121,71,88,69],[121,75,88,73],[121,77,88,75],[121,78,88,76],[121,80,88,78],[122,6,89,4,"localStack"],[122,16,89,14],[122,17,89,15,"pop"],[122,20,89,18],[122,21,89,19],[122,22,89,20],[123,4,90,2],[125,4,92,2],[126,4,93,2,"localStack"],[126,14,93,12],[126,15,93,13,"reverse"],[126,22,93,20],[126,23,93,21],[126,24,93,22],[128,4,95,2],[129,4,96,2],[129,8,96,6,"STRIP_FRAME_REGEXP"],[129,26,96,24],[129,27,96,25,"test"],[129,31,96,29],[129,32,96,30,"localStack"],[129,42,96,40],[129,43,96,41,"localStack"],[129,53,96,51],[129,54,96,52,"length"],[129,60,96,58],[129,63,96,61],[129,64,96,62],[129,65,96,63],[129,66,96,64,"function"],[129,74,96,72],[129,78,96,76],[129,80,96,78],[129,81,96,79],[129,83,96,81],[130,6,97,4,"localStack"],[130,16,97,14],[130,17,97,15,"pop"],[130,20,97,18],[130,21,97,19],[130,22,97,20],[132,6,99,4],[133,6,100,4],[134,6,101,4],[135,6,102,4],[136,6,103,4],[137,6,104,4],[138,6,105,4],[139,6,106,4],[140,6,107,4],[140,10,107,8,"STRIP_FRAME_REGEXP"],[140,28,107,26],[140,29,107,27,"test"],[140,33,107,31],[140,34,107,32,"localStack"],[140,44,107,42],[140,45,107,43,"localStack"],[140,55,107,53],[140,56,107,54,"length"],[140,62,107,60],[140,65,107,63],[140,66,107,64],[140,67,107,65],[140,68,107,66,"function"],[140,76,107,74],[140,80,107,78],[140,82,107,80],[140,83,107,81],[140,85,107,83],[141,8,108,6,"localStack"],[141,18,108,16],[141,19,108,17,"pop"],[141,22,108,20],[141,23,108,21],[141,24,108,22],[142,6,109,4],[143,4,110,2],[144,4,112,2],[144,11,112,9,"localStack"],[144,21,112,19],[144,22,112,20,"slice"],[144,27,112,25],[144,28,112,26],[144,29,112,27],[144,31,112,29,"STACKTRACE_FRAME_LIMIT"],[144,53,112,51],[144,54,112,52],[144,55,112,53,"map"],[144,58,112,56],[144,59,112,57,"frame"],[144,64,112,62],[144,68,112,62,"Object"],[144,74,112,62],[144,75,112,62,"assign"],[144,81,112,62],[144,86,113,7,"frame"],[144,91,113,12],[145,6,114,4,"filename"],[145,14,114,12],[145,16,114,14,"frame"],[145,21,114,19],[145,22,114,20,"filename"],[145,30,114,28],[145,34,114,32,"localStack"],[145,44,114,42],[145,45,114,43,"localStack"],[145,55,114,53],[145,56,114,54,"length"],[145,62,114,60],[145,65,114,63],[145,66,114,64],[145,67,114,65],[145,68,114,66,"filename"],[145,76,114,74],[146,6,115,4,"function"],[146,14,115,12],[146,16,115,14,"frame"],[146,21,115,19],[146,22,115,20,"function"],[146,30,115,28],[146,34,115,32],[147,4,115,35],[147,6,116,4],[147,7,116,5],[148,2,117,0],[149,2,119,0],[149,8,119,6,"defaultFunctionName"],[149,27,119,25],[149,30,119,28],[149,43,119,41],[151,2,121,0],[152,0,122,0],[153,0,123,0],[154,2,124,0],[154,11,124,9,"getFunctionName"],[154,26,124,24,"getFunctionName"],[154,27,124,25,"fn"],[154,29,124,27],[154,31,124,29],[155,4,125,2],[155,8,125,6],[156,6,126,4],[156,10,126,8],[156,11,126,9,"fn"],[156,13,126,11],[156,17,126,15],[156,24,126,22,"fn"],[156,26,126,24],[156,31,126,29],[156,41,126,39],[156,43,126,41],[157,8,127,6],[157,15,127,13,"defaultFunctionName"],[157,34,127,32],[158,6,128,4],[159,6,129,4],[159,13,129,11,"fn"],[159,15,129,13],[159,16,129,14,"name"],[159,20,129,18],[159,24,129,22,"defaultFunctionName"],[159,43,129,41],[160,4,130,2],[160,5,130,3],[160,6,130,4],[160,13,130,11,"e"],[160,14,130,12],[160,16,130,14],[161,6,131,4],[162,6,132,4],[163,6,133,4],[163,13,133,11,"defaultFunctionName"],[163,32,133,30],[164,4,134,2],[165,2,135,0],[167,2,137,0],[168,0,138,0],[169,0,139,0],[170,0,140,0],[171,0,141,0],[172,0,142,0],[173,2,143,0],[173,11,143,9,"nodeStackLineParser"],[173,30,143,28,"nodeStackLineParser"],[173,31,143,29,"getModule"],[173,40,143,38],[173,42,143,40],[174,4,144,2],[174,11,144,9],[174,12,144,10],[174,14,144,12],[174,16,144,14],[174,20,144,14,"node"],[174,37,144,18],[174,38,144,18,"node"],[174,42,144,18],[174,44,144,19,"getModule"],[174,53,144,28],[174,54,144,29],[174,55,144,30],[175,2,145,0],[176,0,145,1],[176,3]],"functionMap":{"names":["<global>","createStackParser","parsers.sort$argument_0","parsers.sort.map$argument_0","<anonymous>","stackParserFromStackParserOptions","stripSentryFramesAndReverse","localStack.slice.map$argument_0","getFunctionName","nodeStackLineParser"],"mappings":"AAA;ACe;qCCC,qBD,ME,SF;SGE;GHuC;CDC;AKQ;CLK;AMQ;yDCgC;IDI;CNC;AQO;CRW;ASQ;CTE"},"hasCjsExports":false},"type":"js/module"}]}