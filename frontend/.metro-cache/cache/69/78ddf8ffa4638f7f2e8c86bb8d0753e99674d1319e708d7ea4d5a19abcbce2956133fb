{"dependencies":[{"name":"../authStorage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":339},"end":{"line":10,"column":47,"index":386}}],"key":"8h7N/7sKemAZqrgZg8dH/jTl5ys=","exportNames":["*"],"imports":1}},{"name":"../types/receipt","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":387},"end":{"line":15,"column":26,"index":481}}],"key":"W14jz77KoHdh2OnwnpYz6E6ocCQ=","exportNames":["*"],"imports":1}},{"name":"../telemetry/events","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":482},"end":{"line":16,"column":52,"index":534}}],"key":"k7LZwhoWMWET/ud396YGvDlODrM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getMailSummary = getMailSummary;\n  exports.getMailRewards = getMailRewards;\n  exports.getMailMessages = getMailMessages;\n  exports.getMailGifts = getMailGifts;\n  exports.claimMailReward = claimMailReward;\n  exports.claimMailGift = claimMailGift;\n  var _authStorage = require(_dependencyMap[0], \"../authStorage\");\n  var _typesReceipt = require(_dependencyMap[1], \"../types/receipt\");\n  var _telemetryEvents = require(_dependencyMap[2], \"../telemetry/events\");\n  // /app/frontend/lib/api/mail.ts\n  // Phase 3.23.2.P: Mail API Layer with Auth\n  // Phase 3.24: Canonical Receipt Integration + Telemetry\n  //\n  // Canonical API calls for mail system.\n  // Uses auth token from gameStore for server identity.\n  // Returns canonical receipts for all claim operations.\n  // Emits telemetry events with source + sourceId.\n\n  const API_BASE = process.env.EXPO_PUBLIC_API_URL || '';\n\n  /**\n   * Get auth headers for API calls\n   */\n  async function getAuthHeaders() {\n    const token = await (0, _authStorage.loadAuthToken)();\n    if (token) {\n      return {\n        Authorization: `Bearer ${token}`\n      };\n    }\n    return {};\n  }\n\n  /**\n   * Get mail summary (badge counts) - uses auth token\n   */\n  async function getMailSummary(username) {\n    try {\n      const headers = await getAuthHeaders();\n      // Use legacy route for compatibility, but server uses auth token for identity\n      const res = await fetch(`${API_BASE}/api/mail/summary/${username}`, {\n        headers\n      });\n      if (res.status === 401) {\n        // Token invalid - return defaults, let auth layer handle logout\n        return {\n          rewardsAvailable: 0,\n          unreadMessages: 0,\n          giftsAvailable: 0\n        };\n      }\n      if (!res.ok) throw new Error('Failed to fetch mail summary');\n      return await res.json();\n    } catch {\n      return {\n        rewardsAvailable: 0,\n        unreadMessages: 0,\n        giftsAvailable: 0\n      };\n    }\n  }\n\n  /**\n   * Get mail rewards list\n   */\n  async function getMailRewards(username) {\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/rewards/${username}`, {\n        headers\n      });\n      if (!res.ok) throw new Error('Failed to fetch rewards');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail messages list\n   */\n  async function getMailMessages(username) {\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/messages/${username}`, {\n        headers\n      });\n      if (!res.ok) throw new Error('Failed to fetch messages');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail gifts list\n   */\n  async function getMailGifts(username) {\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/gifts/${username}`, {\n        headers\n      });\n      if (!res.ok) throw new Error('Failed to fetch gifts');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Claim a mail reward (idempotent)\n   * Phase 3.24: Returns canonical receipt + emits telemetry\n   */\n  async function claimMailReward(username, rewardId) {\n    // Emit submission event\n    (0, _telemetryEvents.track)(_telemetryEvents.Events.MAIL_CLAIM_SUBMITTED, {\n      source: 'mail_reward_claim',\n      sourceId: rewardId\n    });\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/rewards/${username}/${rewardId}/claim`, {\n        method: 'POST',\n        headers\n      });\n      if (!res.ok) {\n        (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ERROR, {\n          source: 'mail_reward_claim',\n          sourceId: rewardId,\n          status: res.status\n        });\n        throw new Error('Failed to claim reward');\n      }\n      const receipt = await res.json();\n\n      // Phase 3.24: Validate receipt shape\n      if ((0, _typesReceipt.isValidReceipt)(receipt)) {\n        // Emit receipt received\n        (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_RECEIPT_RECEIVED, {\n          source: receipt.source,\n          sourceId: receipt.sourceId,\n          itemCount: receipt.items.length\n        });\n\n        // Emit success/already claimed\n        if (receipt.alreadyClaimed) {\n          (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ALREADY_CLAIMED, {\n            source: receipt.source,\n            sourceId: receipt.sourceId\n          });\n        } else {\n          (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_SUCCESS, {\n            source: receipt.source,\n            sourceId: receipt.sourceId,\n            itemCount: receipt.items.length\n          });\n        }\n        return receipt;\n      }\n\n      // Legacy fallback: convert old response to canonical receipt\n      console.warn('[claimMailReward] Legacy response detected, converting to receipt');\n      const legacyReceipt = {\n        source: 'mail_reward_claim',\n        sourceId: rewardId,\n        items: [],\n        balances: {\n          gold: 0,\n          coins: 0,\n          gems: 0,\n          divine_gems: 0,\n          crystals: 0,\n          stamina: 0,\n          divine_essence: 0,\n          soul_dust: 0,\n          skill_essence: 0,\n          enhancement_stones: 0,\n          hero_shards: 0,\n          rune_essence: 0\n        },\n        alreadyClaimed: receipt.alreadyClaimed ?? false,\n        message: receipt.message\n      };\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_RECEIPT_RECEIVED, {\n        source: legacyReceipt.source,\n        sourceId: legacyReceipt.sourceId,\n        legacy: true\n      });\n      return legacyReceipt;\n    } catch (error) {\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ERROR, {\n        source: 'mail_reward_claim',\n        sourceId: rewardId,\n        error: String(error)\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Claim a mail gift (idempotent)\n   * Phase 3.24: Returns canonical receipt + emits telemetry\n   */\n  async function claimMailGift(username, giftId) {\n    // Emit submission event\n    (0, _telemetryEvents.track)(_telemetryEvents.Events.MAIL_CLAIM_SUBMITTED, {\n      source: 'mail_gift_claim',\n      sourceId: giftId\n    });\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/gifts/${username}/${giftId}/claim`, {\n        method: 'POST',\n        headers\n      });\n      if (!res.ok) {\n        (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ERROR, {\n          source: 'mail_gift_claim',\n          sourceId: giftId,\n          status: res.status\n        });\n        throw new Error('Failed to claim gift');\n      }\n      const receipt = await res.json();\n\n      // Phase 3.24: Validate receipt shape\n      if ((0, _typesReceipt.isValidReceipt)(receipt)) {\n        // Emit receipt received\n        (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_RECEIPT_RECEIVED, {\n          source: receipt.source,\n          sourceId: receipt.sourceId,\n          itemCount: receipt.items.length\n        });\n\n        // Emit success/already claimed\n        if (receipt.alreadyClaimed) {\n          (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ALREADY_CLAIMED, {\n            source: receipt.source,\n            sourceId: receipt.sourceId\n          });\n        } else {\n          (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_SUCCESS, {\n            source: receipt.source,\n            sourceId: receipt.sourceId,\n            itemCount: receipt.items.length\n          });\n        }\n        return receipt;\n      }\n\n      // Legacy fallback: convert old response to canonical receipt\n      console.warn('[claimMailGift] Legacy response detected, converting to receipt');\n      const legacyReceipt = {\n        source: 'mail_gift_claim',\n        sourceId: giftId,\n        items: [],\n        balances: {\n          gold: 0,\n          coins: 0,\n          gems: 0,\n          divine_gems: 0,\n          crystals: 0,\n          stamina: 0,\n          divine_essence: 0,\n          soul_dust: 0,\n          skill_essence: 0,\n          enhancement_stones: 0,\n          hero_shards: 0,\n          rune_essence: 0\n        },\n        alreadyClaimed: receipt.alreadyClaimed ?? false,\n        message: receipt.message\n      };\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_RECEIPT_RECEIVED, {\n        source: legacyReceipt.source,\n        sourceId: legacyReceipt.sourceId,\n        legacy: true\n      });\n      return legacyReceipt;\n    } catch (error) {\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ERROR, {\n        source: 'mail_gift_claim',\n        sourceId: giftId,\n        error: String(error)\n      });\n      throw error;\n    }\n  }\n});","lineCount":296,"map":[[7,2,34,0,"exports"],[7,9,34,0],[7,10,34,0,"getMailSummary"],[7,24,34,0],[7,27,34,0,"getMailSummary"],[7,41,34,0],[8,2,57,0,"exports"],[8,9,57,0],[8,10,57,0,"getMailRewards"],[8,24,57,0],[8,27,57,0,"getMailRewards"],[8,41,57,0],[9,2,78,0,"exports"],[9,9,78,0],[9,10,78,0,"getMailMessages"],[9,25,78,0],[9,28,78,0,"getMailMessages"],[9,43,78,0],[10,2,98,0,"exports"],[10,9,98,0],[10,10,98,0,"getMailGifts"],[10,22,98,0],[10,25,98,0,"getMailGifts"],[10,37,98,0],[11,2,119,0,"exports"],[11,9,119,0],[11,10,119,0,"claimMailReward"],[11,25,119,0],[11,28,119,0,"claimMailReward"],[11,43,119,0],[12,2,206,0,"exports"],[12,9,206,0],[12,10,206,0,"claimMailGift"],[12,23,206,0],[12,26,206,0,"claimMailGift"],[12,39,206,0],[13,2,10,0],[13,6,10,0,"_authStorage"],[13,18,10,0],[13,21,10,0,"require"],[13,28,10,0],[13,29,10,0,"_dependencyMap"],[13,43,10,0],[14,2,11,0],[14,6,11,0,"_typesReceipt"],[14,19,11,0],[14,22,11,0,"require"],[14,29,11,0],[14,30,11,0,"_dependencyMap"],[14,44,11,0],[15,2,16,0],[15,6,16,0,"_telemetryEvents"],[15,22,16,0],[15,25,16,0,"require"],[15,32,16,0],[15,33,16,0,"_dependencyMap"],[15,47,16,0],[16,2,1,0],[17,2,2,0],[18,2,3,0],[19,2,4,0],[20,2,5,0],[21,2,6,0],[22,2,7,0],[23,2,8,0],[25,2,18,0],[25,8,18,6,"API_BASE"],[25,16,18,14],[25,19,18,17,"process"],[25,26,18,24],[25,27,18,25,"env"],[25,30,18,28],[25,31,18,29,"EXPO_PUBLIC_API_URL"],[25,50,18,48],[25,54,18,52],[25,56,18,54],[27,2,20,0],[28,0,21,0],[29,0,22,0],[30,2,23,0],[30,17,23,15,"getAuthHeaders"],[30,31,23,29,"getAuthHeaders"],[30,32,23,29],[30,34,23,65],[31,4,24,2],[31,10,24,8,"token"],[31,15,24,13],[31,18,24,16],[31,24,24,22],[31,28,24,22,"loadAuthToken"],[31,40,24,35],[31,41,24,35,"loadAuthToken"],[31,54,24,35],[31,56,24,36],[31,57,24,37],[32,4,25,2],[32,8,25,6,"token"],[32,13,25,11],[32,15,25,13],[33,6,26,4],[33,13,26,11],[34,8,26,13,"Authorization"],[34,21,26,26],[34,23,26,28],[34,33,26,38,"token"],[34,38,26,43],[35,6,26,46],[35,7,26,47],[36,4,27,2],[37,4,28,2],[37,11,28,9],[37,12,28,10],[37,13,28,11],[38,2,29,0],[40,2,31,0],[41,0,32,0],[42,0,33,0],[43,2,34,7],[43,17,34,22,"getMailSummary"],[43,31,34,36,"getMailSummary"],[43,32,34,37,"username"],[43,40,34,53],[43,42,38,3],[44,4,39,2],[44,8,39,6],[45,6,40,4],[45,12,40,10,"headers"],[45,19,40,17],[45,22,40,20],[45,28,40,26,"getAuthHeaders"],[45,42,40,40],[45,43,40,41],[45,44,40,42],[46,6,41,4],[47,6,42,4],[47,12,42,10,"res"],[47,15,42,13],[47,18,42,16],[47,24,42,22,"fetch"],[47,29,42,27],[47,30,42,28],[47,33,42,31,"API_BASE"],[47,41,42,39],[47,62,42,60,"username"],[47,70,42,68],[47,72,42,70],[47,74,42,72],[48,8,42,74,"headers"],[49,6,42,82],[49,7,42,83],[49,8,42,84],[50,6,43,4],[50,10,43,8,"res"],[50,13,43,11],[50,14,43,12,"status"],[50,20,43,18],[50,25,43,23],[50,28,43,26],[50,30,43,28],[51,8,44,6],[52,8,45,6],[52,15,45,13],[53,10,45,15,"rewardsAvailable"],[53,26,45,31],[53,28,45,33],[53,29,45,34],[54,10,45,36,"unreadMessages"],[54,24,45,50],[54,26,45,52],[54,27,45,53],[55,10,45,55,"giftsAvailable"],[55,24,45,69],[55,26,45,71],[56,8,45,73],[56,9,45,74],[57,6,46,4],[58,6,47,4],[58,10,47,8],[58,11,47,9,"res"],[58,14,47,12],[58,15,47,13,"ok"],[58,17,47,15],[58,19,47,17],[58,25,47,23],[58,29,47,27,"Error"],[58,34,47,32],[58,35,47,33],[58,65,47,63],[58,66,47,64],[59,6,48,4],[59,13,48,11],[59,19,48,17,"res"],[59,22,48,20],[59,23,48,21,"json"],[59,27,48,25],[59,28,48,26],[59,29,48,27],[60,4,49,2],[60,5,49,3],[60,6,49,4],[60,12,49,10],[61,6,50,4],[61,13,50,11],[62,8,50,13,"rewardsAvailable"],[62,24,50,29],[62,26,50,31],[62,27,50,32],[63,8,50,34,"unreadMessages"],[63,22,50,48],[63,24,50,50],[63,25,50,51],[64,8,50,53,"giftsAvailable"],[64,22,50,67],[64,24,50,69],[65,6,50,71],[65,7,50,72],[66,4,51,2],[67,2,52,0],[69,2,54,0],[70,0,55,0],[71,0,56,0],[72,2,57,7],[72,17,57,22,"getMailRewards"],[72,31,57,36,"getMailRewards"],[72,32,57,37,"username"],[72,40,57,53],[72,42,64,4],[73,4,65,2],[73,8,65,6],[74,6,66,4],[74,12,66,10,"headers"],[74,19,66,17],[74,22,66,20],[74,28,66,26,"getAuthHeaders"],[74,42,66,40],[74,43,66,41],[74,44,66,42],[75,6,67,4],[75,12,67,10,"res"],[75,15,67,13],[75,18,67,16],[75,24,67,22,"fetch"],[75,29,67,27],[75,30,67,28],[75,33,67,31,"API_BASE"],[75,41,67,39],[75,62,67,60,"username"],[75,70,67,68],[75,72,67,70],[75,74,67,72],[76,8,67,74,"headers"],[77,6,67,82],[77,7,67,83],[77,8,67,84],[78,6,68,4],[78,10,68,8],[78,11,68,9,"res"],[78,14,68,12],[78,15,68,13,"ok"],[78,17,68,15],[78,19,68,17],[78,25,68,23],[78,29,68,27,"Error"],[78,34,68,32],[78,35,68,33],[78,60,68,58],[78,61,68,59],[79,6,69,4],[79,13,69,11],[79,19,69,17,"res"],[79,22,69,20],[79,23,69,21,"json"],[79,27,69,25],[79,28,69,26],[79,29,69,27],[80,4,70,2],[80,5,70,3],[80,6,70,4],[80,12,70,10],[81,6,71,4],[81,13,71,11],[81,15,71,13],[82,4,72,2],[83,2,73,0],[85,2,75,0],[86,0,76,0],[87,0,77,0],[88,2,78,7],[88,17,78,22,"getMailMessages"],[88,32,78,37,"getMailMessages"],[88,33,78,38,"username"],[88,41,78,54],[88,43,84,4],[89,4,85,2],[89,8,85,6],[90,6,86,4],[90,12,86,10,"headers"],[90,19,86,17],[90,22,86,20],[90,28,86,26,"getAuthHeaders"],[90,42,86,40],[90,43,86,41],[90,44,86,42],[91,6,87,4],[91,12,87,10,"res"],[91,15,87,13],[91,18,87,16],[91,24,87,22,"fetch"],[91,29,87,27],[91,30,87,28],[91,33,87,31,"API_BASE"],[91,41,87,39],[91,63,87,61,"username"],[91,71,87,69],[91,73,87,71],[91,75,87,73],[92,8,87,75,"headers"],[93,6,87,83],[93,7,87,84],[93,8,87,85],[94,6,88,4],[94,10,88,8],[94,11,88,9,"res"],[94,14,88,12],[94,15,88,13,"ok"],[94,17,88,15],[94,19,88,17],[94,25,88,23],[94,29,88,27,"Error"],[94,34,88,32],[94,35,88,33],[94,61,88,59],[94,62,88,60],[95,6,89,4],[95,13,89,11],[95,19,89,17,"res"],[95,22,89,20],[95,23,89,21,"json"],[95,27,89,25],[95,28,89,26],[95,29,89,27],[96,4,90,2],[96,5,90,3],[96,6,90,4],[96,12,90,10],[97,6,91,4],[97,13,91,11],[97,15,91,13],[98,4,92,2],[99,2,93,0],[101,2,95,0],[102,0,96,0],[103,0,97,0],[104,2,98,7],[104,17,98,22,"getMailGifts"],[104,29,98,34,"getMailGifts"],[104,30,98,35,"username"],[104,38,98,51],[104,40,104,4],[105,4,105,2],[105,8,105,6],[106,6,106,4],[106,12,106,10,"headers"],[106,19,106,17],[106,22,106,20],[106,28,106,26,"getAuthHeaders"],[106,42,106,40],[106,43,106,41],[106,44,106,42],[107,6,107,4],[107,12,107,10,"res"],[107,15,107,13],[107,18,107,16],[107,24,107,22,"fetch"],[107,29,107,27],[107,30,107,28],[107,33,107,31,"API_BASE"],[107,41,107,39],[107,60,107,58,"username"],[107,68,107,66],[107,70,107,68],[107,72,107,70],[108,8,107,72,"headers"],[109,6,107,80],[109,7,107,81],[109,8,107,82],[110,6,108,4],[110,10,108,8],[110,11,108,9,"res"],[110,14,108,12],[110,15,108,13,"ok"],[110,17,108,15],[110,19,108,17],[110,25,108,23],[110,29,108,27,"Error"],[110,34,108,32],[110,35,108,33],[110,58,108,56],[110,59,108,57],[111,6,109,4],[111,13,109,11],[111,19,109,17,"res"],[111,22,109,20],[111,23,109,21,"json"],[111,27,109,25],[111,28,109,26],[111,29,109,27],[112,4,110,2],[112,5,110,3],[112,6,110,4],[112,12,110,10],[113,6,111,4],[113,13,111,11],[113,15,111,13],[114,4,112,2],[115,2,113,0],[117,2,115,0],[118,0,116,0],[119,0,117,0],[120,0,118,0],[121,2,119,7],[121,17,119,22,"claimMailReward"],[121,32,119,37,"claimMailReward"],[121,33,119,38,"username"],[121,41,119,54],[121,43,119,56,"rewardId"],[121,51,119,72],[121,53,119,98],[122,4,120,2],[123,4,121,2],[123,8,121,2,"track"],[123,24,121,7],[123,25,121,7,"track"],[123,30,121,7],[123,32,121,8,"Events"],[123,48,121,14],[123,49,121,14,"Events"],[123,55,121,14],[123,56,121,15,"MAIL_CLAIM_SUBMITTED"],[123,76,121,35],[123,78,121,37],[124,6,122,4,"source"],[124,12,122,10],[124,14,122,12],[124,33,122,31],[125,6,123,4,"sourceId"],[125,14,123,12],[125,16,123,14,"rewardId"],[126,4,124,2],[126,5,124,3],[126,6,124,4],[127,4,126,2],[127,8,126,6],[128,6,127,4],[128,12,127,10,"headers"],[128,19,127,17],[128,22,127,20],[128,28,127,26,"getAuthHeaders"],[128,42,127,40],[128,43,127,41],[128,44,127,42],[129,6,128,4],[129,12,128,10,"res"],[129,15,128,13],[129,18,128,16],[129,24,128,22,"fetch"],[129,29,128,27],[129,30,128,28],[129,33,128,31,"API_BASE"],[129,41,128,39],[129,62,128,60,"username"],[129,70,128,68],[129,74,128,72,"rewardId"],[129,82,128,80],[129,90,128,88],[129,92,128,90],[130,8,129,6,"method"],[130,14,129,12],[130,16,129,14],[130,22,129,20],[131,8,130,6,"headers"],[132,6,131,4],[132,7,131,5],[132,8,131,6],[133,6,133,4],[133,10,133,8],[133,11,133,9,"res"],[133,14,133,12],[133,15,133,13,"ok"],[133,17,133,15],[133,19,133,17],[134,8,134,6],[134,12,134,6,"track"],[134,28,134,11],[134,29,134,11,"track"],[134,34,134,11],[134,36,134,12,"Events"],[134,52,134,18],[134,53,134,18,"Events"],[134,59,134,18],[134,60,134,19,"REWARD_CLAIM_ERROR"],[134,78,134,37],[134,80,134,39],[135,10,135,8,"source"],[135,16,135,14],[135,18,135,16],[135,37,135,35],[136,10,136,8,"sourceId"],[136,18,136,16],[136,20,136,18,"rewardId"],[136,28,136,26],[137,10,137,8,"status"],[137,16,137,14],[137,18,137,16,"res"],[137,21,137,19],[137,22,137,20,"status"],[138,8,138,6],[138,9,138,7],[138,10,138,8],[139,8,139,6],[139,14,139,12],[139,18,139,16,"Error"],[139,23,139,21],[139,24,139,22],[139,48,139,46],[139,49,139,47],[140,6,140,4],[141,6,142,4],[141,12,142,10,"receipt"],[141,19,142,17],[141,22,142,20],[141,28,142,26,"res"],[141,31,142,29],[141,32,142,30,"json"],[141,36,142,34],[141,37,142,35],[141,38,142,36],[143,6,144,4],[144,6,145,4],[144,10,145,8],[144,14,145,8,"isValidReceipt"],[144,27,145,22],[144,28,145,22,"isValidReceipt"],[144,42,145,22],[144,44,145,23,"receipt"],[144,51,145,30],[144,52,145,31],[144,54,145,33],[145,8,146,6],[146,8,147,6],[146,12,147,6,"track"],[146,28,147,11],[146,29,147,11,"track"],[146,34,147,11],[146,36,147,12,"Events"],[146,52,147,18],[146,53,147,18,"Events"],[146,59,147,18],[146,60,147,19,"REWARD_RECEIPT_RECEIVED"],[146,83,147,42],[146,85,147,44],[147,10,148,8,"source"],[147,16,148,14],[147,18,148,16,"receipt"],[147,25,148,23],[147,26,148,24,"source"],[147,32,148,30],[148,10,149,8,"sourceId"],[148,18,149,16],[148,20,149,18,"receipt"],[148,27,149,25],[148,28,149,26,"sourceId"],[148,36,149,34],[149,10,150,8,"itemCount"],[149,19,150,17],[149,21,150,19,"receipt"],[149,28,150,26],[149,29,150,27,"items"],[149,34,150,32],[149,35,150,33,"length"],[150,8,151,6],[150,9,151,7],[150,10,151,8],[152,8,153,6],[153,8,154,6],[153,12,154,10,"receipt"],[153,19,154,17],[153,20,154,18,"alreadyClaimed"],[153,34,154,32],[153,36,154,34],[154,10,155,8],[154,14,155,8,"track"],[154,30,155,13],[154,31,155,13,"track"],[154,36,155,13],[154,38,155,14,"Events"],[154,54,155,20],[154,55,155,20,"Events"],[154,61,155,20],[154,62,155,21,"REWARD_CLAIM_ALREADY_CLAIMED"],[154,90,155,49],[154,92,155,51],[155,12,156,10,"source"],[155,18,156,16],[155,20,156,18,"receipt"],[155,27,156,25],[155,28,156,26,"source"],[155,34,156,32],[156,12,157,10,"sourceId"],[156,20,157,18],[156,22,157,20,"receipt"],[156,29,157,27],[156,30,157,28,"sourceId"],[157,10,158,8],[157,11,158,9],[157,12,158,10],[158,8,159,6],[158,9,159,7],[158,15,159,13],[159,10,160,8],[159,14,160,8,"track"],[159,30,160,13],[159,31,160,13,"track"],[159,36,160,13],[159,38,160,14,"Events"],[159,54,160,20],[159,55,160,20,"Events"],[159,61,160,20],[159,62,160,21,"REWARD_CLAIM_SUCCESS"],[159,82,160,41],[159,84,160,43],[160,12,161,10,"source"],[160,18,161,16],[160,20,161,18,"receipt"],[160,27,161,25],[160,28,161,26,"source"],[160,34,161,32],[161,12,162,10,"sourceId"],[161,20,162,18],[161,22,162,20,"receipt"],[161,29,162,27],[161,30,162,28,"sourceId"],[161,38,162,36],[162,12,163,10,"itemCount"],[162,21,163,19],[162,23,163,21,"receipt"],[162,30,163,28],[162,31,163,29,"items"],[162,36,163,34],[162,37,163,35,"length"],[163,10,164,8],[163,11,164,9],[163,12,164,10],[164,8,165,6],[165,8,167,6],[165,15,167,13,"receipt"],[165,22,167,20],[166,6,168,4],[168,6,170,4],[169,6,171,4,"console"],[169,13,171,11],[169,14,171,12,"warn"],[169,18,171,16],[169,19,171,17],[169,86,171,84],[169,87,171,85],[170,6,172,4],[170,12,172,10,"legacyReceipt"],[170,25,172,38],[170,28,172,41],[171,8,173,6,"source"],[171,14,173,12],[171,16,173,14],[171,35,173,33],[172,8,174,6,"sourceId"],[172,16,174,14],[172,18,174,16,"rewardId"],[172,26,174,24],[173,8,175,6,"items"],[173,13,175,11],[173,15,175,13],[173,17,175,15],[174,8,176,6,"balances"],[174,16,176,14],[174,18,176,16],[175,10,177,8,"gold"],[175,14,177,12],[175,16,177,14],[175,17,177,15],[176,10,177,17,"coins"],[176,15,177,22],[176,17,177,24],[176,18,177,25],[177,10,177,27,"gems"],[177,14,177,31],[177,16,177,33],[177,17,177,34],[178,10,177,36,"divine_gems"],[178,21,177,47],[178,23,177,49],[178,24,177,50],[179,10,177,52,"crystals"],[179,18,177,60],[179,20,177,62],[179,21,177,63],[180,10,178,8,"stamina"],[180,17,178,15],[180,19,178,17],[180,20,178,18],[181,10,178,20,"divine_essence"],[181,24,178,34],[181,26,178,36],[181,27,178,37],[182,10,178,39,"soul_dust"],[182,19,178,48],[182,21,178,50],[182,22,178,51],[183,10,178,53,"skill_essence"],[183,23,178,66],[183,25,178,68],[183,26,178,69],[184,10,179,8,"enhancement_stones"],[184,28,179,26],[184,30,179,28],[184,31,179,29],[185,10,179,31,"hero_shards"],[185,21,179,42],[185,23,179,44],[185,24,179,45],[186,10,179,47,"rune_essence"],[186,22,179,59],[186,24,179,61],[187,8,180,6],[187,9,180,7],[188,8,181,6,"alreadyClaimed"],[188,22,181,20],[188,24,181,22,"receipt"],[188,31,181,29],[188,32,181,30,"alreadyClaimed"],[188,46,181,44],[188,50,181,48],[188,55,181,53],[189,8,182,6,"message"],[189,15,182,13],[189,17,182,15,"receipt"],[189,24,182,22],[189,25,182,23,"message"],[190,6,183,4],[190,7,183,5],[191,6,185,4],[191,10,185,4,"track"],[191,26,185,9],[191,27,185,9,"track"],[191,32,185,9],[191,34,185,10,"Events"],[191,50,185,16],[191,51,185,16,"Events"],[191,57,185,16],[191,58,185,17,"REWARD_RECEIPT_RECEIVED"],[191,81,185,40],[191,83,185,42],[192,8,186,6,"source"],[192,14,186,12],[192,16,186,14,"legacyReceipt"],[192,29,186,27],[192,30,186,28,"source"],[192,36,186,34],[193,8,187,6,"sourceId"],[193,16,187,14],[193,18,187,16,"legacyReceipt"],[193,31,187,29],[193,32,187,30,"sourceId"],[193,40,187,38],[194,8,188,6,"legacy"],[194,14,188,12],[194,16,188,14],[195,6,189,4],[195,7,189,5],[195,8,189,6],[196,6,191,4],[196,13,191,11,"legacyReceipt"],[196,26,191,24],[197,4,192,2],[197,5,192,3],[197,6,192,4],[197,13,192,11,"error"],[197,18,192,16],[197,20,192,18],[198,6,193,4],[198,10,193,4,"track"],[198,26,193,9],[198,27,193,9,"track"],[198,32,193,9],[198,34,193,10,"Events"],[198,50,193,16],[198,51,193,16,"Events"],[198,57,193,16],[198,58,193,17,"REWARD_CLAIM_ERROR"],[198,76,193,35],[198,78,193,37],[199,8,194,6,"source"],[199,14,194,12],[199,16,194,14],[199,35,194,33],[200,8,195,6,"sourceId"],[200,16,195,14],[200,18,195,16,"rewardId"],[200,26,195,24],[201,8,196,6,"error"],[201,13,196,11],[201,15,196,13,"String"],[201,21,196,19],[201,22,196,20,"error"],[201,27,196,25],[202,6,197,4],[202,7,197,5],[202,8,197,6],[203,6,198,4],[203,12,198,10,"error"],[203,17,198,15],[204,4,199,2],[205,2,200,0],[207,2,202,0],[208,0,203,0],[209,0,204,0],[210,0,205,0],[211,2,206,7],[211,17,206,22,"claimMailGift"],[211,30,206,35,"claimMailGift"],[211,31,206,36,"username"],[211,39,206,52],[211,41,206,54,"giftId"],[211,47,206,68],[211,49,206,94],[212,4,207,2],[213,4,208,2],[213,8,208,2,"track"],[213,24,208,7],[213,25,208,7,"track"],[213,30,208,7],[213,32,208,8,"Events"],[213,48,208,14],[213,49,208,14,"Events"],[213,55,208,14],[213,56,208,15,"MAIL_CLAIM_SUBMITTED"],[213,76,208,35],[213,78,208,37],[214,6,209,4,"source"],[214,12,209,10],[214,14,209,12],[214,31,209,29],[215,6,210,4,"sourceId"],[215,14,210,12],[215,16,210,14,"giftId"],[216,4,211,2],[216,5,211,3],[216,6,211,4],[217,4,213,2],[217,8,213,6],[218,6,214,4],[218,12,214,10,"headers"],[218,19,214,17],[218,22,214,20],[218,28,214,26,"getAuthHeaders"],[218,42,214,40],[218,43,214,41],[218,44,214,42],[219,6,215,4],[219,12,215,10,"res"],[219,15,215,13],[219,18,215,16],[219,24,215,22,"fetch"],[219,29,215,27],[219,30,215,28],[219,33,215,31,"API_BASE"],[219,41,215,39],[219,60,215,58,"username"],[219,68,215,66],[219,72,215,70,"giftId"],[219,78,215,76],[219,86,215,84],[219,88,215,86],[220,8,216,6,"method"],[220,14,216,12],[220,16,216,14],[220,22,216,20],[221,8,217,6,"headers"],[222,6,218,4],[222,7,218,5],[222,8,218,6],[223,6,220,4],[223,10,220,8],[223,11,220,9,"res"],[223,14,220,12],[223,15,220,13,"ok"],[223,17,220,15],[223,19,220,17],[224,8,221,6],[224,12,221,6,"track"],[224,28,221,11],[224,29,221,11,"track"],[224,34,221,11],[224,36,221,12,"Events"],[224,52,221,18],[224,53,221,18,"Events"],[224,59,221,18],[224,60,221,19,"REWARD_CLAIM_ERROR"],[224,78,221,37],[224,80,221,39],[225,10,222,8,"source"],[225,16,222,14],[225,18,222,16],[225,35,222,33],[226,10,223,8,"sourceId"],[226,18,223,16],[226,20,223,18,"giftId"],[226,26,223,24],[227,10,224,8,"status"],[227,16,224,14],[227,18,224,16,"res"],[227,21,224,19],[227,22,224,20,"status"],[228,8,225,6],[228,9,225,7],[228,10,225,8],[229,8,226,6],[229,14,226,12],[229,18,226,16,"Error"],[229,23,226,21],[229,24,226,22],[229,46,226,44],[229,47,226,45],[230,6,227,4],[231,6,229,4],[231,12,229,10,"receipt"],[231,19,229,17],[231,22,229,20],[231,28,229,26,"res"],[231,31,229,29],[231,32,229,30,"json"],[231,36,229,34],[231,37,229,35],[231,38,229,36],[233,6,231,4],[234,6,232,4],[234,10,232,8],[234,14,232,8,"isValidReceipt"],[234,27,232,22],[234,28,232,22,"isValidReceipt"],[234,42,232,22],[234,44,232,23,"receipt"],[234,51,232,30],[234,52,232,31],[234,54,232,33],[235,8,233,6],[236,8,234,6],[236,12,234,6,"track"],[236,28,234,11],[236,29,234,11,"track"],[236,34,234,11],[236,36,234,12,"Events"],[236,52,234,18],[236,53,234,18,"Events"],[236,59,234,18],[236,60,234,19,"REWARD_RECEIPT_RECEIVED"],[236,83,234,42],[236,85,234,44],[237,10,235,8,"source"],[237,16,235,14],[237,18,235,16,"receipt"],[237,25,235,23],[237,26,235,24,"source"],[237,32,235,30],[238,10,236,8,"sourceId"],[238,18,236,16],[238,20,236,18,"receipt"],[238,27,236,25],[238,28,236,26,"sourceId"],[238,36,236,34],[239,10,237,8,"itemCount"],[239,19,237,17],[239,21,237,19,"receipt"],[239,28,237,26],[239,29,237,27,"items"],[239,34,237,32],[239,35,237,33,"length"],[240,8,238,6],[240,9,238,7],[240,10,238,8],[242,8,240,6],[243,8,241,6],[243,12,241,10,"receipt"],[243,19,241,17],[243,20,241,18,"alreadyClaimed"],[243,34,241,32],[243,36,241,34],[244,10,242,8],[244,14,242,8,"track"],[244,30,242,13],[244,31,242,13,"track"],[244,36,242,13],[244,38,242,14,"Events"],[244,54,242,20],[244,55,242,20,"Events"],[244,61,242,20],[244,62,242,21,"REWARD_CLAIM_ALREADY_CLAIMED"],[244,90,242,49],[244,92,242,51],[245,12,243,10,"source"],[245,18,243,16],[245,20,243,18,"receipt"],[245,27,243,25],[245,28,243,26,"source"],[245,34,243,32],[246,12,244,10,"sourceId"],[246,20,244,18],[246,22,244,20,"receipt"],[246,29,244,27],[246,30,244,28,"sourceId"],[247,10,245,8],[247,11,245,9],[247,12,245,10],[248,8,246,6],[248,9,246,7],[248,15,246,13],[249,10,247,8],[249,14,247,8,"track"],[249,30,247,13],[249,31,247,13,"track"],[249,36,247,13],[249,38,247,14,"Events"],[249,54,247,20],[249,55,247,20,"Events"],[249,61,247,20],[249,62,247,21,"REWARD_CLAIM_SUCCESS"],[249,82,247,41],[249,84,247,43],[250,12,248,10,"source"],[250,18,248,16],[250,20,248,18,"receipt"],[250,27,248,25],[250,28,248,26,"source"],[250,34,248,32],[251,12,249,10,"sourceId"],[251,20,249,18],[251,22,249,20,"receipt"],[251,29,249,27],[251,30,249,28,"sourceId"],[251,38,249,36],[252,12,250,10,"itemCount"],[252,21,250,19],[252,23,250,21,"receipt"],[252,30,250,28],[252,31,250,29,"items"],[252,36,250,34],[252,37,250,35,"length"],[253,10,251,8],[253,11,251,9],[253,12,251,10],[254,8,252,6],[255,8,254,6],[255,15,254,13,"receipt"],[255,22,254,20],[256,6,255,4],[258,6,257,4],[259,6,258,4,"console"],[259,13,258,11],[259,14,258,12,"warn"],[259,18,258,16],[259,19,258,17],[259,84,258,82],[259,85,258,83],[260,6,259,4],[260,12,259,10,"legacyReceipt"],[260,25,259,38],[260,28,259,41],[261,8,260,6,"source"],[261,14,260,12],[261,16,260,14],[261,33,260,31],[262,8,261,6,"sourceId"],[262,16,261,14],[262,18,261,16,"giftId"],[262,24,261,22],[263,8,262,6,"items"],[263,13,262,11],[263,15,262,13],[263,17,262,15],[264,8,263,6,"balances"],[264,16,263,14],[264,18,263,16],[265,10,264,8,"gold"],[265,14,264,12],[265,16,264,14],[265,17,264,15],[266,10,264,17,"coins"],[266,15,264,22],[266,17,264,24],[266,18,264,25],[267,10,264,27,"gems"],[267,14,264,31],[267,16,264,33],[267,17,264,34],[268,10,264,36,"divine_gems"],[268,21,264,47],[268,23,264,49],[268,24,264,50],[269,10,264,52,"crystals"],[269,18,264,60],[269,20,264,62],[269,21,264,63],[270,10,265,8,"stamina"],[270,17,265,15],[270,19,265,17],[270,20,265,18],[271,10,265,20,"divine_essence"],[271,24,265,34],[271,26,265,36],[271,27,265,37],[272,10,265,39,"soul_dust"],[272,19,265,48],[272,21,265,50],[272,22,265,51],[273,10,265,53,"skill_essence"],[273,23,265,66],[273,25,265,68],[273,26,265,69],[274,10,266,8,"enhancement_stones"],[274,28,266,26],[274,30,266,28],[274,31,266,29],[275,10,266,31,"hero_shards"],[275,21,266,42],[275,23,266,44],[275,24,266,45],[276,10,266,47,"rune_essence"],[276,22,266,59],[276,24,266,61],[277,8,267,6],[277,9,267,7],[278,8,268,6,"alreadyClaimed"],[278,22,268,20],[278,24,268,22,"receipt"],[278,31,268,29],[278,32,268,30,"alreadyClaimed"],[278,46,268,44],[278,50,268,48],[278,55,268,53],[279,8,269,6,"message"],[279,15,269,13],[279,17,269,15,"receipt"],[279,24,269,22],[279,25,269,23,"message"],[280,6,270,4],[280,7,270,5],[281,6,272,4],[281,10,272,4,"track"],[281,26,272,9],[281,27,272,9,"track"],[281,32,272,9],[281,34,272,10,"Events"],[281,50,272,16],[281,51,272,16,"Events"],[281,57,272,16],[281,58,272,17,"REWARD_RECEIPT_RECEIVED"],[281,81,272,40],[281,83,272,42],[282,8,273,6,"source"],[282,14,273,12],[282,16,273,14,"legacyReceipt"],[282,29,273,27],[282,30,273,28,"source"],[282,36,273,34],[283,8,274,6,"sourceId"],[283,16,274,14],[283,18,274,16,"legacyReceipt"],[283,31,274,29],[283,32,274,30,"sourceId"],[283,40,274,38],[284,8,275,6,"legacy"],[284,14,275,12],[284,16,275,14],[285,6,276,4],[285,7,276,5],[285,8,276,6],[286,6,278,4],[286,13,278,11,"legacyReceipt"],[286,26,278,24],[287,4,279,2],[287,5,279,3],[287,6,279,4],[287,13,279,11,"error"],[287,18,279,16],[287,20,279,18],[288,6,280,4],[288,10,280,4,"track"],[288,26,280,9],[288,27,280,9,"track"],[288,32,280,9],[288,34,280,10,"Events"],[288,50,280,16],[288,51,280,16,"Events"],[288,57,280,16],[288,58,280,17,"REWARD_CLAIM_ERROR"],[288,76,280,35],[288,78,280,37],[289,8,281,6,"source"],[289,14,281,12],[289,16,281,14],[289,33,281,31],[290,8,282,6,"sourceId"],[290,16,282,14],[290,18,282,16,"giftId"],[290,24,282,22],[291,8,283,6,"error"],[291,13,283,11],[291,15,283,13,"String"],[291,21,283,19],[291,22,283,20,"error"],[291,27,283,25],[292,6,284,4],[292,7,284,5],[292,8,284,6],[293,6,285,4],[293,12,285,10,"error"],[293,17,285,15],[294,4,286,2],[295,2,287,0],[296,0,287,1],[296,3]],"functionMap":{"names":["<global>","getAuthHeaders","getMailSummary","getMailRewards","getMailMessages","getMailGifts","claimMailReward","claimMailGift"],"mappings":"AAA;ACsB;CDM;OEK;CFkB;OGK;CHgB;OIK;CJe;OKK;CLe;OMM;CNiF;OOM;CPiF"},"hasCjsExports":false},"type":"js/module"}]}