{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":47,"index":47}}],"key":"m+kcirlwHAgMIuUoyR2vCxbhWD4=","exportNames":["*"],"imports":1}},{"name":"./utils/node-utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":73,"index":179}}],"key":"P5a/WZsfI6fXR126iSDKjdcy1Kk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"Mysql\", {\n    enumerable: true,\n    get: function () {\n      return Mysql;\n    }\n  });\n  var _sentryUtils = require(_dependencyMap[0], \"@sentry/utils\");\n  var _utilsNodeUtilsJs = require(_dependencyMap[1], \"./utils/node-utils.js\");\n  /** Tracing integration for node-mysql package */\n  class Mysql {\n    /**\n     * @inheritDoc\n     */\n    static __initStatic() {\n      this.id = 'Mysql';\n    }\n\n    /**\n     * @inheritDoc\n     */\n\n    constructor() {\n      this.name = Mysql.id;\n    }\n\n    /** @inheritdoc */\n    loadDependency() {\n      return this._module = this._module || (0, _sentryUtils.loadModule)('mysql/lib/Connection.js');\n    }\n\n    /**\n     * @inheritDoc\n     */\n    setupOnce(_, getCurrentHub) {\n      if ((0, _utilsNodeUtilsJs.shouldDisableAutoInstrumentation)(getCurrentHub)) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.log('Mysql Integration is skipped because of instrumenter configuration.');\n        return;\n      }\n      const pkg = this.loadDependency();\n      if (!pkg) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.error('Mysql Integration was unable to require `mysql` package.');\n        return;\n      }\n      let mySqlConfig = undefined;\n      try {\n        pkg.prototype.connect = new Proxy(pkg.prototype.connect, {\n          apply(wrappingTarget, thisArg, args) {\n            if (!mySqlConfig) {\n              mySqlConfig = thisArg.config;\n            }\n            return wrappingTarget.apply(thisArg, args);\n          }\n        });\n      } catch (e) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && _sentryUtils.logger.error('Mysql Integration was unable to instrument `mysql` config.');\n      }\n      function spanDataFromConfig() {\n        if (!mySqlConfig) {\n          return {};\n        }\n        return {\n          'server.address': mySqlConfig.host,\n          'server.port': mySqlConfig.port,\n          'db.user': mySqlConfig.user\n        };\n      }\n      function finishSpan(span) {\n        if (!span || span.endTimestamp) {\n          return;\n        }\n        const data = spanDataFromConfig();\n        Object.keys(data).forEach(key => {\n          span.setData(key, data[key]);\n        });\n        span.finish();\n      }\n\n      // The original function will have one of these signatures:\n      //    function (callback) => void\n      //    function (options, callback) => void\n      //    function (options, values, callback) => void\n      (0, _sentryUtils.fill)(pkg, 'createQuery', function (orig) {\n        return function (options, values, callback) {\n          const scope = getCurrentHub().getScope();\n          const parentSpan = scope.getSpan();\n          const span = (0, _sentryUtils._optionalChain)([parentSpan, 'optionalAccess', _2 => _2.startChild, 'call', _3 => _3({\n            description: typeof options === 'string' ? options : options.sql,\n            op: 'db',\n            origin: 'auto.db.mysql',\n            data: {\n              'db.system': 'mysql'\n            }\n          })]);\n          if (typeof callback === 'function') {\n            return orig.call(this, options, values, function (err, result, fields) {\n              finishSpan(span);\n              callback(err, result, fields);\n            });\n          }\n          if (typeof values === 'function') {\n            return orig.call(this, options, function (err, result, fields) {\n              finishSpan(span);\n              values(err, result, fields);\n            });\n          }\n\n          // streaming, no callback!\n          const query = orig.call(this, options, values);\n          query.on('end', () => {\n            finishSpan(span);\n          });\n          return query;\n        };\n      });\n    }\n  }\n  Mysql.__initStatic();\n});","lineCount":124,"map":[[7,2,125,0,"Object"],[7,8,125,0],[7,9,125,0,"defineProperty"],[7,23,125,0],[7,24,125,0,"exports"],[7,31,125,0],[8,4,125,0,"enumerable"],[8,14,125,0],[9,4,125,0,"get"],[9,7,125,0],[9,18,125,0,"get"],[9,19,125,0],[10,6,125,0],[10,13,125,9,"Mysql"],[10,18,125,14],[11,4,125,14],[12,2,125,14],[13,2,1,0],[13,6,1,0,"_sentryUtils"],[13,18,1,0],[13,21,1,0,"require"],[13,28,1,0],[13,29,1,0,"_dependencyMap"],[13,43,1,0],[14,2,3,0],[14,6,3,0,"_utilsNodeUtilsJs"],[14,23,3,0],[14,26,3,0,"require"],[14,33,3,0],[14,34,3,0,"_dependencyMap"],[14,48,3,0],[15,2,5,0],[16,2,6,0],[16,8,6,6,"Mysql"],[16,13,6,11],[16,14,6,13],[17,4,7,2],[18,0,8,0],[19,0,9,0],[20,4,10,3],[20,11,10,10,"__initStatic"],[20,23,10,22,"__initStatic"],[20,24,10,22],[20,26,10,25],[21,6,10,26],[21,10,10,30],[21,11,10,31,"id"],[21,13,10,33],[21,16,10,36],[21,23,10,43],[22,4,10,44],[24,4,12,2],[25,0,13,0],[26,0,14,0],[28,4,16,3,"constructor"],[28,15,16,14,"constructor"],[28,16,16,14],[28,18,16,17],[29,6,17,4],[29,10,17,8],[29,11,17,9,"name"],[29,15,17,13],[29,18,17,16,"Mysql"],[29,23,17,21],[29,24,17,22,"id"],[29,26,17,24],[30,4,18,2],[32,4,20,2],[33,4,21,3,"loadDependency"],[33,18,21,17,"loadDependency"],[33,19,21,17],[33,21,21,20],[34,6,22,4],[34,13,22,12],[34,17,22,16],[34,18,22,17,"_module"],[34,25,22,24],[34,28,22,27],[34,32,22,31],[34,33,22,32,"_module"],[34,40,22,39],[34,44,22,43],[34,48,22,43,"loadModule"],[34,60,22,53],[34,61,22,53,"loadModule"],[34,71,22,53],[34,73,22,54],[34,98,22,79],[34,99,22,80],[35,4,23,2],[37,4,25,2],[38,0,26,0],[39,0,27,0],[40,4,28,3,"setupOnce"],[40,13,28,12,"setupOnce"],[40,14,28,13,"_"],[40,15,28,14],[40,17,28,16,"getCurrentHub"],[40,30,28,29],[40,32,28,31],[41,6,29,4],[41,10,29,8],[41,14,29,8,"shouldDisableAutoInstrumentation"],[41,31,29,40],[41,32,29,40,"shouldDisableAutoInstrumentation"],[41,64,29,40],[41,66,29,41,"getCurrentHub"],[41,79,29,54],[41,80,29,55],[41,82,29,57],[42,8,30,6],[42,9,30,7],[42,16,30,14,"__SENTRY_DEBUG__"],[42,32,30,30],[42,37,30,35],[42,48,30,46],[42,52,30,50,"__SENTRY_DEBUG__"],[42,68,30,66],[42,73,30,71,"logger"],[42,85,30,77],[42,86,30,77,"logger"],[42,92,30,77],[42,93,30,78,"log"],[42,96,30,81],[42,97,30,82],[42,166,30,151],[42,167,30,152],[43,8,31,6],[44,6,32,4],[45,6,34,4],[45,12,34,10,"pkg"],[45,15,34,13],[45,18,34,16],[45,22,34,20],[45,23,34,21,"loadDependency"],[45,37,34,35],[45,38,34,36],[45,39,34,37],[46,6,36,4],[46,10,36,8],[46,11,36,9,"pkg"],[46,14,36,12],[46,16,36,14],[47,8,37,6],[47,9,37,7],[47,16,37,14,"__SENTRY_DEBUG__"],[47,32,37,30],[47,37,37,35],[47,48,37,46],[47,52,37,50,"__SENTRY_DEBUG__"],[47,68,37,66],[47,73,37,71,"logger"],[47,85,37,77],[47,86,37,77,"logger"],[47,92,37,77],[47,93,37,78,"error"],[47,98,37,83],[47,99,37,84],[47,157,37,142],[47,158,37,143],[48,8,38,6],[49,6,39,4],[50,6,41,4],[50,10,41,8,"mySqlConfig"],[50,21,41,19],[50,24,41,22,"undefined"],[50,33,41,31],[51,6,43,4],[51,10,43,8],[52,8,44,6,"pkg"],[52,11,44,9],[52,12,44,10,"prototype"],[52,21,44,19],[52,22,44,20,"connect"],[52,29,44,27],[52,32,44,30],[52,36,44,34,"Proxy"],[52,41,44,39],[52,42,44,40,"pkg"],[52,45,44,43],[52,46,44,44,"prototype"],[52,55,44,53],[52,56,44,54,"connect"],[52,63,44,61],[52,65,44,63],[53,10,45,8,"apply"],[53,15,45,13,"apply"],[53,16,45,14,"wrappingTarget"],[53,30,45,28],[53,32,45,30,"thisArg"],[53,39,45,37],[53,41,45,39,"args"],[53,45,45,43],[53,47,45,45],[54,12,46,10],[54,16,46,14],[54,17,46,15,"mySqlConfig"],[54,28,46,26],[54,30,46,28],[55,14,47,12,"mySqlConfig"],[55,25,47,23],[55,28,47,26,"thisArg"],[55,35,47,33],[55,36,47,34,"config"],[55,42,47,40],[56,12,48,10],[57,12,49,10],[57,19,49,17,"wrappingTarget"],[57,33,49,31],[57,34,49,32,"apply"],[57,39,49,37],[57,40,49,38,"thisArg"],[57,47,49,45],[57,49,49,47,"args"],[57,53,49,51],[57,54,49,52],[58,10,50,8],[59,8,51,6],[59,9,51,7],[59,10,51,8],[60,6,52,4],[60,7,52,5],[60,8,52,6],[60,15,52,13,"e"],[60,16,52,14],[60,18,52,16],[61,8,53,6],[61,9,53,7],[61,16,53,14,"__SENTRY_DEBUG__"],[61,32,53,30],[61,37,53,35],[61,48,53,46],[61,52,53,50,"__SENTRY_DEBUG__"],[61,68,53,66],[61,73,53,71,"logger"],[61,85,53,77],[61,86,53,77,"logger"],[61,92,53,77],[61,93,53,78,"error"],[61,98,53,83],[61,99,53,84],[61,159,53,144],[61,160,53,145],[62,6,54,4],[63,6,56,4],[63,15,56,13,"spanDataFromConfig"],[63,33,56,31,"spanDataFromConfig"],[63,34,56,31],[63,36,56,34],[64,8,57,6],[64,12,57,10],[64,13,57,11,"mySqlConfig"],[64,24,57,22],[64,26,57,24],[65,10,58,8],[65,17,58,15],[65,18,58,16],[65,19,58,17],[66,8,59,6],[67,8,60,6],[67,15,60,13],[68,10,61,8],[68,26,61,24],[68,28,61,26,"mySqlConfig"],[68,39,61,37],[68,40,61,38,"host"],[68,44,61,42],[69,10,62,8],[69,23,62,21],[69,25,62,23,"mySqlConfig"],[69,36,62,34],[69,37,62,35,"port"],[69,41,62,39],[70,10,63,8],[70,19,63,17],[70,21,63,19,"mySqlConfig"],[70,32,63,30],[70,33,63,31,"user"],[71,8,64,6],[71,9,64,7],[72,6,65,4],[73,6,67,4],[73,15,67,13,"finishSpan"],[73,25,67,23,"finishSpan"],[73,26,67,24,"span"],[73,30,67,28],[73,32,67,30],[74,8,68,6],[74,12,68,10],[74,13,68,11,"span"],[74,17,68,15],[74,21,68,19,"span"],[74,25,68,23],[74,26,68,24,"endTimestamp"],[74,38,68,36],[74,40,68,38],[75,10,69,8],[76,8,70,6],[77,8,72,6],[77,14,72,12,"data"],[77,18,72,16],[77,21,72,19,"spanDataFromConfig"],[77,39,72,37],[77,40,72,38],[77,41,72,39],[78,8,73,6,"Object"],[78,14,73,12],[78,15,73,13,"keys"],[78,19,73,17],[78,20,73,18,"data"],[78,24,73,22],[78,25,73,23],[78,26,73,24,"forEach"],[78,33,73,31],[78,34,73,32,"key"],[78,37,73,35],[78,41,73,39],[79,10,74,8,"span"],[79,14,74,12],[79,15,74,13,"setData"],[79,22,74,20],[79,23,74,21,"key"],[79,26,74,24],[79,28,74,26,"data"],[79,32,74,30],[79,33,74,31,"key"],[79,36,74,34],[79,37,74,35],[79,38,74,36],[80,8,75,6],[80,9,75,7],[80,10,75,8],[81,8,77,6,"span"],[81,12,77,10],[81,13,77,11,"finish"],[81,19,77,17],[81,20,77,18],[81,21,77,19],[82,6,78,4],[84,6,80,4],[85,6,81,4],[86,6,82,4],[87,6,83,4],[88,6,84,4],[88,10,84,4,"fill"],[88,22,84,8],[88,23,84,8,"fill"],[88,27,84,8],[88,29,84,9,"pkg"],[88,32,84,12],[88,34,84,14],[88,47,84,27],[88,49,84,29],[88,59,84,39,"orig"],[88,63,84,43],[88,65,84,45],[89,8,85,6],[89,15,85,13],[89,25,85,24,"options"],[89,32,85,31],[89,34,85,33,"values"],[89,40,85,39],[89,42,85,41,"callback"],[89,50,85,49],[89,52,85,51],[90,10,86,8],[90,16,86,14,"scope"],[90,21,86,19],[90,24,86,22,"getCurrentHub"],[90,37,86,35],[90,38,86,36],[90,39,86,37],[90,40,86,38,"getScope"],[90,48,86,46],[90,49,86,47],[90,50,86,48],[91,10,87,8],[91,16,87,14,"parentSpan"],[91,26,87,24],[91,29,87,27,"scope"],[91,34,87,32],[91,35,87,33,"getSpan"],[91,42,87,40],[91,43,87,41],[91,44,87,42],[92,10,89,8],[92,16,89,14,"span"],[92,20,89,18],[92,23,89,21],[92,27,89,21,"_optionalChain"],[92,39,89,35],[92,40,89,35,"_optionalChain"],[92,54,89,35],[92,56,89,36],[92,57,89,37,"parentSpan"],[92,67,89,47],[92,69,89,49],[92,85,89,65],[92,87,89,67,"_2"],[92,89,89,69],[92,93,89,73,"_2"],[92,95,89,75],[92,96,89,76,"startChild"],[92,106,89,86],[92,108,89,88],[92,114,89,94],[92,116,89,96,"_3"],[92,118,89,98],[92,122,89,102,"_3"],[92,124,89,104],[92,125,89,105],[93,12,90,10,"description"],[93,23,90,21],[93,25,90,23],[93,32,90,30,"options"],[93,39,90,37],[93,44,90,42],[93,52,90,50],[93,55,90,53,"options"],[93,62,90,60],[93,65,90,64,"options"],[93,72,90,71],[93,73,90,74,"sql"],[93,76,90,77],[94,12,91,10,"op"],[94,14,91,12],[94,16,91,14],[94,20,91,18],[95,12,92,10,"origin"],[95,18,92,16],[95,20,92,18],[95,35,92,33],[96,12,93,10,"data"],[96,16,93,14],[96,18,93,16],[97,14,94,12],[97,25,94,23],[97,27,94,25],[98,12,95,10],[99,10,96,8],[99,11,96,9],[99,12,96,10],[99,13,96,11],[99,14,96,12],[100,10,98,8],[100,14,98,12],[100,21,98,19,"callback"],[100,29,98,27],[100,34,98,32],[100,44,98,42],[100,46,98,44],[101,12,99,10],[101,19,99,17,"orig"],[101,23,99,21],[101,24,99,22,"call"],[101,28,99,26],[101,29,99,27],[101,33,99,31],[101,35,99,33,"options"],[101,42,99,40],[101,44,99,42,"values"],[101,50,99,48],[101,52,99,50],[101,62,99,60,"err"],[101,65,99,63],[101,67,99,65,"result"],[101,73,99,71],[101,75,99,73,"fields"],[101,81,99,79],[101,83,99,81],[102,14,100,12,"finishSpan"],[102,24,100,22],[102,25,100,23,"span"],[102,29,100,27],[102,30,100,28],[103,14,101,12,"callback"],[103,22,101,20],[103,23,101,21,"err"],[103,26,101,24],[103,28,101,26,"result"],[103,34,101,32],[103,36,101,34,"fields"],[103,42,101,40],[103,43,101,41],[104,12,102,10],[104,13,102,11],[104,14,102,12],[105,10,103,8],[106,10,105,8],[106,14,105,12],[106,21,105,19,"values"],[106,27,105,25],[106,32,105,30],[106,42,105,40],[106,44,105,42],[107,12,106,10],[107,19,106,17,"orig"],[107,23,106,21],[107,24,106,22,"call"],[107,28,106,26],[107,29,106,27],[107,33,106,31],[107,35,106,33,"options"],[107,42,106,40],[107,44,106,42],[107,54,106,52,"err"],[107,57,106,55],[107,59,106,57,"result"],[107,65,106,63],[107,67,106,65,"fields"],[107,73,106,71],[107,75,106,73],[108,14,107,12,"finishSpan"],[108,24,107,22],[108,25,107,23,"span"],[108,29,107,27],[108,30,107,28],[109,14,108,12,"values"],[109,20,108,18],[109,21,108,19,"err"],[109,24,108,22],[109,26,108,24,"result"],[109,32,108,30],[109,34,108,32,"fields"],[109,40,108,38],[109,41,108,39],[110,12,109,10],[110,13,109,11],[110,14,109,12],[111,10,110,8],[113,10,112,8],[114,10,113,8],[114,16,113,14,"query"],[114,21,113,19],[114,24,113,22,"orig"],[114,28,113,26],[114,29,113,27,"call"],[114,33,113,31],[114,34,113,32],[114,38,113,36],[114,40,113,38,"options"],[114,47,113,45],[114,49,113,47,"values"],[114,55,113,53],[114,56,113,54],[115,10,115,8,"query"],[115,15,115,13],[115,16,115,14,"on"],[115,18,115,16],[115,19,115,17],[115,24,115,22],[115,26,115,24],[115,32,115,30],[116,12,116,10,"finishSpan"],[116,22,116,20],[116,23,116,21,"span"],[116,27,116,25],[116,28,116,26],[117,10,117,8],[117,11,117,9],[117,12,117,10],[118,10,119,8],[118,17,119,15,"query"],[118,22,119,20],[119,8,120,6],[119,9,120,7],[120,6,121,4],[120,7,121,5],[120,8,121,6],[121,4,122,2],[122,2,123,0],[123,2,123,1,"Mysql"],[123,7,123,6],[123,8,123,7,"__initStatic"],[123,20,123,19],[123,21,123,20],[123,22,123,21],[124,0,123,22],[124,3]],"functionMap":{"names":["<global>","Mysql","Mysql.__initStatic","Mysql#constructor","Mysql#loadDependency","Mysql#setupOnce","Proxy$argument_1.apply","spanDataFromConfig","finishSpan","Object.keys.forEach$argument_0","fill$argument_2","<anonymous>","orig.call$argument_3","orig.call$argument_2","query.on$argument_1"],"mappings":"AAA;ACK;GCI,0CD;GEM;GFE;GGG;GHE;GIK;QCiB;SDK;IEM;KFS;IGE;gCCM;ODE;KHG;6BKM;aCC;kDCc;WDG;0CEI;WFG;wBGM;SHE;ODG;KLC;GJC;CDC"},"hasCjsExports":false},"type":"js/module"}]}