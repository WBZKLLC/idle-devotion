{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"displayStars\", {\n    enumerable: true,\n    get: function () {\n      return displayStars;\n    }\n  });\n  Object.defineProperty(exports, \"unlockedTierForHero\", {\n    enumerable: true,\n    get: function () {\n      return unlockedTierForHero;\n    }\n  });\n  Object.defineProperty(exports, \"effectiveTierForHero\", {\n    enumerable: true,\n    get: function () {\n      return effectiveTierForHero;\n    }\n  });\n  Object.defineProperty(exports, \"resolveTierArt\", {\n    enumerable: true,\n    get: function () {\n      return resolveTierArt;\n    }\n  });\n  Object.defineProperty(exports, \"computeUserMaxUnlockedTier\", {\n    enumerable: true,\n    get: function () {\n      return computeUserMaxUnlockedTier;\n    }\n  });\n  Object.defineProperty(exports, \"TIER_LABELS\", {\n    enumerable: true,\n    get: function () {\n      return TIER_LABELS;\n    }\n  });\n  Object.defineProperty(exports, \"TIER_LABEL_ARRAY\", {\n    enumerable: true,\n    get: function () {\n      return TIER_LABEL_ARRAY;\n    }\n  });\n  // /app/frontend/lib/tier.ts\n  // SINGLE SOURCE OF TRUTH for stars → tiers → art → gating\n  // DO NOT reimplement this logic elsewhere\n\n  /**\n   * Raw backend stars (0–6). UI shows EXACT value.\n   */\n  const displayStars = hero => {\n    const s = Number(hero?.stars ?? 0);\n    if (!isFinite(s)) return 0;\n    return Math.max(0, Math.min(6, s));\n  };\n\n  /**\n   * Maps backend stars + awakening to unlocked tier.\n   *\n   * RULES (AUTHORITATIVE):\n   * stars = 0  → tier 1\n   * stars = 1  → tier 2\n   * stars = 2  → tier 3\n   * stars = 3  → tier 4\n   * stars = 4  → tier 5\n   * stars ≥ 5 OR awakening > 0 → tier 6 (5★+)\n   */\n  const unlockedTierForHero = hero => {\n    const stars = displayStars(hero);\n    const awaken = Number(hero?.awakening_level ?? 0);\n    if (awaken > 0 || stars >= 5) return 6;\n    return Math.max(1, Math.min(5, stars + 1));\n  };\n\n  /**\n   * Clamp a requested tier (global or local) to what the hero has unlocked.\n   */\n  const effectiveTierForHero = (hero, requestedTier) => {\n    const unlocked = unlockedTierForHero(hero);\n    return requestedTier <= unlocked ? requestedTier : unlocked;\n  };\n\n  /**\n   * Resolve ascension art EXACTLY from API response.\n   * IMPORTANT: Returns a STRING url (or undefined), NOT an { uri: ... } object.\n   * This prevents \"Objects are not valid as a React child\" errors.\n   */\n  const resolveTierArt = (heroData, tier) => {\n    const t = String(Math.max(1, Math.min(6, Number(tier) || 1)));\n    const asc = heroData?.ascension_images;\n    if (asc && typeof asc === 'object') {\n      const v = asc[t];\n      if (typeof v === 'string' && v.length > 0) return v;\n    }\n\n    // Fallback to default image_url but still a STRING\n    const img = heroData?.image_url;\n    if (typeof img === 'string' && img.length > 0) return img;\n    return undefined;\n  };\n\n  /**\n   * Compute max unlocked tier across all heroes (for global tier selector)\n   */\n  const computeUserMaxUnlockedTier = heroes => {\n    let max = 1;\n    for (const h of heroes || []) {\n      const t = unlockedTierForHero(h);\n      if (t > max) max = t;\n    }\n    return max;\n  };\n\n  /**\n   * Tier labels for UI (object format for lookup)\n   */\n  const TIER_LABELS = {\n    1: '1★',\n    2: '2★',\n    3: '3★',\n    4: '4★',\n    5: '5★',\n    6: '5★+'\n  };\n\n  /**\n   * Tier labels array for mapping in UI selectors\n   */\n  const TIER_LABEL_ARRAY = [{\n    tier: 1,\n    label: '1★'\n  }, {\n    tier: 2,\n    label: '2★'\n  }, {\n    tier: 3,\n    label: '3★'\n  }, {\n    tier: 4,\n    label: '4★'\n  }, {\n    tier: 5,\n    label: '5★'\n  }, {\n    tier: 6,\n    label: '5★+'\n  }];\n});","lineCount":153,"map":[[7,2,10,0,"Object"],[7,8,10,0],[7,9,10,0,"defineProperty"],[7,23,10,0],[7,24,10,0,"exports"],[7,31,10,0],[8,4,10,0,"enumerable"],[8,14,10,0],[9,4,10,0,"get"],[9,7,10,0],[9,18,10,0,"get"],[9,19,10,0],[10,6,10,0],[10,13,10,0,"displayStars"],[10,25,10,0],[11,4,10,0],[12,2,10,0],[13,2,27,0,"Object"],[13,8,27,0],[13,9,27,0,"defineProperty"],[13,23,27,0],[13,24,27,0,"exports"],[13,31,27,0],[14,4,27,0,"enumerable"],[14,14,27,0],[15,4,27,0,"get"],[15,7,27,0],[15,18,27,0,"get"],[15,19,27,0],[16,6,27,0],[16,13,27,0,"unlockedTierForHero"],[16,32,27,0],[17,4,27,0],[18,2,27,0],[19,2,38,0,"Object"],[19,8,38,0],[19,9,38,0,"defineProperty"],[19,23,38,0],[19,24,38,0,"exports"],[19,31,38,0],[20,4,38,0,"enumerable"],[20,14,38,0],[21,4,38,0,"get"],[21,7,38,0],[21,18,38,0,"get"],[21,19,38,0],[22,6,38,0],[22,13,38,0,"effectiveTierForHero"],[22,33,38,0],[23,4,38,0],[24,2,38,0],[25,2,51,0,"Object"],[25,8,51,0],[25,9,51,0,"defineProperty"],[25,23,51,0],[25,24,51,0,"exports"],[25,31,51,0],[26,4,51,0,"enumerable"],[26,14,51,0],[27,4,51,0,"get"],[27,7,51,0],[27,18,51,0,"get"],[27,19,51,0],[28,6,51,0],[28,13,51,0,"resolveTierArt"],[28,27,51,0],[29,4,51,0],[30,2,51,0],[31,2,73,0,"Object"],[31,8,73,0],[31,9,73,0,"defineProperty"],[31,23,73,0],[31,24,73,0,"exports"],[31,31,73,0],[32,4,73,0,"enumerable"],[32,14,73,0],[33,4,73,0,"get"],[33,7,73,0],[33,18,73,0,"get"],[33,19,73,0],[34,6,73,0],[34,13,73,0,"computeUserMaxUnlockedTier"],[34,39,73,0],[35,4,73,0],[36,2,73,0],[37,2,85,0,"Object"],[37,8,85,0],[37,9,85,0,"defineProperty"],[37,23,85,0],[37,24,85,0,"exports"],[37,31,85,0],[38,4,85,0,"enumerable"],[38,14,85,0],[39,4,85,0,"get"],[39,7,85,0],[39,18,85,0,"get"],[39,19,85,0],[40,6,85,0],[40,13,85,0,"TIER_LABELS"],[40,24,85,0],[41,4,85,0],[42,2,85,0],[43,2,97,0,"Object"],[43,8,97,0],[43,9,97,0,"defineProperty"],[43,23,97,0],[43,24,97,0,"exports"],[43,31,97,0],[44,4,97,0,"enumerable"],[44,14,97,0],[45,4,97,0,"get"],[45,7,97,0],[45,18,97,0,"get"],[45,19,97,0],[46,6,97,0],[46,13,97,0,"TIER_LABEL_ARRAY"],[46,29,97,0],[47,4,97,0],[48,2,97,0],[49,2,1,0],[50,2,2,0],[51,2,3,0],[53,2,7,0],[54,0,8,0],[55,0,9,0],[56,2,10,7],[56,8,10,13,"displayStars"],[56,20,10,25],[56,23,10,29,"hero"],[56,27,10,38],[56,31,10,51],[57,4,11,2],[57,10,11,8,"s"],[57,11,11,9],[57,14,11,12,"Number"],[57,20,11,18],[57,21,11,19,"hero"],[57,25,11,23],[57,27,11,25,"stars"],[57,32,11,30],[57,36,11,34],[57,37,11,35],[57,38,11,36],[58,4,12,2],[58,8,12,6],[58,9,12,7,"isFinite"],[58,17,12,15],[58,18,12,16,"s"],[58,19,12,17],[58,20,12,18],[58,22,12,20],[58,29,12,27],[58,30,12,28],[59,4,13,2],[59,11,13,9,"Math"],[59,15,13,13],[59,16,13,14,"max"],[59,19,13,17],[59,20,13,18],[59,21,13,19],[59,23,13,21,"Math"],[59,27,13,25],[59,28,13,26,"min"],[59,31,13,29],[59,32,13,30],[59,33,13,31],[59,35,13,33,"s"],[59,36,13,34],[59,37,13,35],[59,38,13,36],[60,2,14,0],[60,3,14,1],[62,2,16,0],[63,0,17,0],[64,0,18,0],[65,0,19,0],[66,0,20,0],[67,0,21,0],[68,0,22,0],[69,0,23,0],[70,0,24,0],[71,0,25,0],[72,0,26,0],[73,2,27,7],[73,8,27,13,"unlockedTierForHero"],[73,27,27,32],[73,30,27,36,"hero"],[73,34,27,45],[73,38,27,63],[74,4,28,2],[74,10,28,8,"stars"],[74,15,28,13],[74,18,28,16,"displayStars"],[74,30,28,28],[74,31,28,29,"hero"],[74,35,28,33],[74,36,28,34],[75,4,29,2],[75,10,29,8,"awaken"],[75,16,29,14],[75,19,29,17,"Number"],[75,25,29,23],[75,26,29,24,"hero"],[75,30,29,28],[75,32,29,30,"awakening_level"],[75,47,29,45],[75,51,29,49],[75,52,29,50],[75,53,29,51],[76,4,31,2],[76,8,31,6,"awaken"],[76,14,31,12],[76,17,31,15],[76,18,31,16],[76,22,31,20,"stars"],[76,27,31,25],[76,31,31,29],[76,32,31,30],[76,34,31,32],[76,41,31,39],[76,42,31,40],[77,4,32,2],[77,11,32,10,"Math"],[77,15,32,14],[77,16,32,15,"max"],[77,19,32,18],[77,20,32,19],[77,21,32,20],[77,23,32,22,"Math"],[77,27,32,26],[77,28,32,27,"min"],[77,31,32,30],[77,32,32,31],[77,33,32,32],[77,35,32,34,"stars"],[77,40,32,39],[77,43,32,42],[77,44,32,43],[77,45,32,44],[77,46,32,45],[78,2,33,0],[78,3,33,1],[80,2,35,0],[81,0,36,0],[82,0,37,0],[83,2,38,7],[83,8,38,13,"effectiveTierForHero"],[83,28,38,33],[83,31,38,36,"effectiveTierForHero"],[83,32,39,2,"hero"],[83,36,39,11],[83,38,40,2,"requestedTier"],[83,51,40,28],[83,56,41,18],[84,4,42,2],[84,10,42,8,"unlocked"],[84,18,42,16],[84,21,42,19,"unlockedTierForHero"],[84,40,42,38],[84,41,42,39,"hero"],[84,45,42,43],[84,46,42,44],[85,4,43,2],[85,11,43,9,"requestedTier"],[85,24,43,22],[85,28,43,26,"unlocked"],[85,36,43,34],[85,39,43,37,"requestedTier"],[85,52,43,50],[85,55,43,53,"unlocked"],[85,63,43,61],[86,2,44,0],[86,3,44,1],[88,2,46,0],[89,0,47,0],[90,0,48,0],[91,0,49,0],[92,0,50,0],[93,2,51,7],[93,8,51,13,"resolveTierArt"],[93,22,51,27],[93,25,51,30,"resolveTierArt"],[93,26,52,2,"heroData"],[93,34,52,15],[93,36,53,2,"tier"],[93,40,53,14],[93,45,54,25],[94,4,55,2],[94,10,55,8,"t"],[94,11,55,9],[94,14,55,12,"String"],[94,20,55,18],[94,21,55,19,"Math"],[94,25,55,23],[94,26,55,24,"max"],[94,29,55,27],[94,30,55,28],[94,31,55,29],[94,33,55,31,"Math"],[94,37,55,35],[94,38,55,36,"min"],[94,41,55,39],[94,42,55,40],[94,43,55,41],[94,45,55,43,"Number"],[94,51,55,49],[94,52,55,50,"tier"],[94,56,55,54],[94,57,55,55],[94,61,55,59],[94,62,55,60],[94,63,55,61],[94,64,55,62],[94,65,55,63],[95,4,57,2],[95,10,57,8,"asc"],[95,13,57,11],[95,16,57,14,"heroData"],[95,24,57,22],[95,26,57,24,"ascension_images"],[95,42,57,40],[96,4,58,2],[96,8,58,6,"asc"],[96,11,58,9],[96,15,58,13],[96,22,58,20,"asc"],[96,25,58,23],[96,30,58,28],[96,38,58,36],[96,40,58,38],[97,6,59,4],[97,12,59,10,"v"],[97,13,59,11],[97,16,59,14,"asc"],[97,19,59,17],[97,20,59,18,"t"],[97,21,59,19],[97,22,59,20],[98,6,60,4],[98,10,60,8],[98,17,60,15,"v"],[98,18,60,16],[98,23,60,21],[98,31,60,29],[98,35,60,33,"v"],[98,36,60,34],[98,37,60,35,"length"],[98,43,60,41],[98,46,60,44],[98,47,60,45],[98,49,60,47],[98,56,60,54,"v"],[98,57,60,55],[99,4,61,2],[101,4,63,2],[102,4,64,2],[102,10,64,8,"img"],[102,13,64,11],[102,16,64,14,"heroData"],[102,24,64,22],[102,26,64,24,"image_url"],[102,35,64,33],[103,4,65,2],[103,8,65,6],[103,15,65,13,"img"],[103,18,65,16],[103,23,65,21],[103,31,65,29],[103,35,65,33,"img"],[103,38,65,36],[103,39,65,37,"length"],[103,45,65,43],[103,48,65,46],[103,49,65,47],[103,51,65,49],[103,58,65,56,"img"],[103,61,65,59],[104,4,67,2],[104,11,67,9,"undefined"],[104,20,67,18],[105,2,68,0],[105,3,68,1],[107,2,70,0],[108,0,71,0],[109,0,72,0],[110,2,73,7],[110,8,73,13,"computeUserMaxUnlockedTier"],[110,34,73,39],[110,37,73,43,"heroes"],[110,43,73,56],[110,47,73,74],[111,4,74,2],[111,8,74,6,"max"],[111,11,74,22],[111,14,74,25],[111,15,74,26],[112,4,75,2],[112,9,75,7],[112,15,75,13,"h"],[112,16,75,14],[112,20,75,18,"heroes"],[112,26,75,24],[112,30,75,28],[112,32,75,30],[112,34,75,32],[113,6,76,4],[113,12,76,10,"t"],[113,13,76,11],[113,16,76,14,"unlockedTierForHero"],[113,35,76,33],[113,36,76,34,"h"],[113,37,76,35],[113,38,76,36],[114,6,77,4],[114,10,77,8,"t"],[114,11,77,9],[114,14,77,12,"max"],[114,17,77,15],[114,19,77,17,"max"],[114,22,77,20],[114,25,77,23,"t"],[114,26,77,24],[115,4,78,2],[116,4,79,2],[116,11,79,9,"max"],[116,14,79,12],[117,2,80,0],[117,3,80,1],[119,2,82,0],[120,0,83,0],[121,0,84,0],[122,2,85,7],[122,8,85,13,"TIER_LABELS"],[122,19,85,53],[122,22,85,56],[123,4,86,2],[123,5,86,3],[123,7,86,5],[123,11,86,9],[124,4,87,2],[124,5,87,3],[124,7,87,5],[124,11,87,9],[125,4,88,2],[125,5,88,3],[125,7,88,5],[125,11,88,9],[126,4,89,2],[126,5,89,3],[126,7,89,5],[126,11,89,9],[127,4,90,2],[127,5,90,3],[127,7,90,5],[127,11,90,9],[128,4,91,2],[128,5,91,3],[128,7,91,5],[129,2,92,0],[129,3,92,1],[131,2,94,0],[132,0,95,0],[133,0,96,0],[134,2,97,7],[134,8,97,13,"TIER_LABEL_ARRAY"],[134,24,97,69],[134,27,97,72],[134,28,98,2],[135,4,98,4,"tier"],[135,8,98,8],[135,10,98,10],[135,11,98,11],[136,4,98,13,"label"],[136,9,98,18],[136,11,98,20],[137,2,98,25],[137,3,98,26],[137,5,99,2],[138,4,99,4,"tier"],[138,8,99,8],[138,10,99,10],[138,11,99,11],[139,4,99,13,"label"],[139,9,99,18],[139,11,99,20],[140,2,99,25],[140,3,99,26],[140,5,100,2],[141,4,100,4,"tier"],[141,8,100,8],[141,10,100,10],[141,11,100,11],[142,4,100,13,"label"],[142,9,100,18],[142,11,100,20],[143,2,100,25],[143,3,100,26],[143,5,101,2],[144,4,101,4,"tier"],[144,8,101,8],[144,10,101,10],[144,11,101,11],[145,4,101,13,"label"],[145,9,101,18],[145,11,101,20],[146,2,101,25],[146,3,101,26],[146,5,102,2],[147,4,102,4,"tier"],[147,8,102,8],[147,10,102,10],[147,11,102,11],[148,4,102,13,"label"],[148,9,102,18],[148,11,102,20],[149,2,102,25],[149,3,102,26],[149,5,103,2],[150,4,103,4,"tier"],[150,8,103,8],[150,10,103,10],[150,11,103,11],[151,4,103,13,"label"],[151,9,103,18],[151,11,103,20],[152,2,103,26],[152,3,103,27],[152,4,104,1],[153,0,104,2],[153,3]],"functionMap":{"names":["<global>","displayStars","unlockedTierForHero","effectiveTierForHero","resolveTierArt","computeUserMaxUnlockedTier"],"mappings":"AAA;4BCS;CDI;mCEa;CFM;oCGK;CHM;8BIO;CJiB;0CKK;CLO"},"hasCjsExports":false},"type":"js/module"}]}