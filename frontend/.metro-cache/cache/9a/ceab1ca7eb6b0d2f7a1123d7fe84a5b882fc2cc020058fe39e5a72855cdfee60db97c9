{"dependencies":[{"name":"./is.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":11,"index":75},"end":{"line":3,"column":29,"index":93}}],"key":"7L+qE4U1JkzGTtK8kDgvAl12vZ8=","exportNames":["*"],"imports":1}},{"name":"./normalize.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":18,"index":113},"end":{"line":4,"column":43,"index":138}}],"key":"JqQ+STmFgUm2VaJ+7TFZ+WGdtxE=","exportNames":["*"],"imports":1}},{"name":"./url.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":12,"index":152},"end":{"line":5,"column":31,"index":171}}],"key":"6d5xGvFlrAvUaHGBTen8HnED/4M=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const is = require(_dependencyMap[0], \"./is.js\");\n  const normalize = require(_dependencyMap[1], \"./normalize.js\");\n  const url = require(_dependencyMap[2], \"./url.js\");\n  const DEFAULT_INCLUDES = {\n    ip: false,\n    request: true,\n    transaction: true,\n    user: true\n  };\n  const DEFAULT_REQUEST_INCLUDES = ['cookies', 'data', 'headers', 'method', 'query_string', 'url'];\n  const DEFAULT_USER_INCLUDES = ['id', 'username', 'email'];\n\n  /**\n   * Sets parameterized route as transaction name e.g.: `GET /users/:id`\n   * Also adds more context data on the transaction from the request\n   */\n  function addRequestDataToTransaction(transaction, req, deps) {\n    if (!transaction) return;\n    if (!transaction.metadata.source || transaction.metadata.source === 'url') {\n      // Attempt to grab a parameterized route off of the request\n      transaction.setName(...extractPathForTransaction(req, {\n        path: true,\n        method: true\n      }));\n    }\n    transaction.setData('url', req.originalUrl || req.url);\n    if (req.baseUrl) {\n      transaction.setData('baseUrl', req.baseUrl);\n    }\n    transaction.setData('query', extractQueryParams(req, deps));\n  }\n\n  /**\n   * Extracts a complete and parameterized path from the request object and uses it to construct transaction name.\n   * If the parameterized transaction name cannot be extracted, we fall back to the raw URL.\n   *\n   * Additionally, this function determines and returns the transaction name source\n   *\n   * eg. GET /mountpoint/user/:id\n   *\n   * @param req A request object\n   * @param options What to include in the transaction name (method, path, or a custom route name to be\n   *                used instead of the request's route)\n   *\n   * @returns A tuple of the fully constructed transaction name [0] and its source [1] (can be either 'route' or 'url')\n   */\n  function extractPathForTransaction(req, options = {}) {\n    const method = req.method && req.method.toUpperCase();\n    let path = '';\n    let source = 'url';\n\n    // Check to see if there's a parameterized route we can use (as there is in Express)\n    if (options.customRoute || req.route) {\n      path = options.customRoute || `${req.baseUrl || ''}${req.route && req.route.path}`;\n      source = 'route';\n    }\n\n    // Otherwise, just take the original URL\n    else if (req.originalUrl || req.url) {\n      path = url.stripUrlQueryAndFragment(req.originalUrl || req.url || '');\n    }\n    let name = '';\n    if (options.method && method) {\n      name += method;\n    }\n    if (options.method && options.path) {\n      name += ' ';\n    }\n    if (options.path && path) {\n      name += path;\n    }\n    return [name, source];\n  }\n\n  /** JSDoc */\n  function extractTransaction(req, type) {\n    switch (type) {\n      case 'path':\n        {\n          return extractPathForTransaction(req, {\n            path: true\n          })[0];\n        }\n      case 'handler':\n        {\n          return req.route && req.route.stack && req.route.stack[0] && req.route.stack[0].name || '<anonymous>';\n        }\n      case 'methodPath':\n      default:\n        {\n          return extractPathForTransaction(req, {\n            path: true,\n            method: true\n          })[0];\n        }\n    }\n  }\n\n  /** JSDoc */\n  function extractUserData(user, keys) {\n    const extractedUser = {};\n    const attributes = Array.isArray(keys) ? keys : DEFAULT_USER_INCLUDES;\n    attributes.forEach(key => {\n      if (user && key in user) {\n        extractedUser[key] = user[key];\n      }\n    });\n    return extractedUser;\n  }\n\n  /**\n   * Normalize data from the request object, accounting for framework differences.\n   *\n   * @param req The request object from which to extract data\n   * @param options.include An optional array of keys to include in the normalized data. Defaults to\n   * DEFAULT_REQUEST_INCLUDES if not provided.\n   * @param options.deps Injected, platform-specific dependencies\n   * @returns An object containing normalized request data\n   */\n  function extractRequestData(req, options) {\n    const {\n      include = DEFAULT_REQUEST_INCLUDES,\n      deps\n    } = options || {};\n    const requestData = {};\n\n    // headers:\n    //   node, express, koa, nextjs: req.headers\n    const headers = req.headers || {};\n    // method:\n    //   node, express, koa, nextjs: req.method\n    const method = req.method;\n    // host:\n    //   express: req.hostname in > 4 and req.host in < 4\n    //   koa: req.host\n    //   node, nextjs: req.headers.host\n    const host = req.hostname || req.host || headers.host || '<no host>';\n    // protocol:\n    //   node, nextjs: <n/a>\n    //   express, koa: req.protocol\n    const protocol = req.protocol === 'https' || req.socket && req.socket.encrypted ? 'https' : 'http';\n    // url (including path and query string):\n    //   node, express: req.originalUrl\n    //   koa, nextjs: req.url\n    const originalUrl = req.originalUrl || req.url || '';\n    // absolute url\n    const absoluteUrl = `${protocol}://${host}${originalUrl}`;\n    include.forEach(key => {\n      switch (key) {\n        case 'headers':\n          {\n            requestData.headers = headers;\n            break;\n          }\n        case 'method':\n          {\n            requestData.method = method;\n            break;\n          }\n        case 'url':\n          {\n            requestData.url = absoluteUrl;\n            break;\n          }\n        case 'cookies':\n          {\n            // cookies:\n            //   node, express, koa: req.headers.cookie\n            //   vercel, sails.js, express (w/ cookie middleware), nextjs: req.cookies\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            requestData.cookies =\n            // TODO (v8 / #5257): We're only sending the empty object for backwards compatibility, so the last bit can\n            // come off in v8\n            req.cookies || headers.cookie && deps && deps.cookie && deps.cookie.parse(headers.cookie) || {};\n            break;\n          }\n        case 'query_string':\n          {\n            // query string:\n            //   node: req.url (raw)\n            //   express, koa, nextjs: req.query\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            requestData.query_string = extractQueryParams(req, deps);\n            break;\n          }\n        case 'data':\n          {\n            if (method === 'GET' || method === 'HEAD') {\n              break;\n            }\n            // body data:\n            //   express, koa, nextjs: req.body\n            //\n            //   when using node by itself, you have to read the incoming stream(see\n            //   https://nodejs.dev/learn/get-http-request-body-data-using-nodejs); if a user is doing that, we can't know\n            //   where they're going to store the final result, so they'll have to capture this data themselves\n            if (req.body !== undefined) {\n              requestData.data = is.isString(req.body) ? req.body : JSON.stringify(normalize.normalize(req.body));\n            }\n            break;\n          }\n        default:\n          {\n            if ({}.hasOwnProperty.call(req, key)) {\n              requestData[key] = req[key];\n            }\n          }\n      }\n    });\n    return requestData;\n  }\n\n  /**\n   * Options deciding what parts of the request to use when enhancing an event\n   */\n\n  /**\n   * Add data from the given request to the given event\n   *\n   * @param event The event to which the request data will be added\n   * @param req Request object\n   * @param options.include Flags to control what data is included\n   * @param options.deps Injected platform-specific dependencies\n   * @hidden\n   */\n  function addRequestDataToEvent(event, req, options) {\n    const include = {\n      ...DEFAULT_INCLUDES,\n      ...(options && options.include)\n    };\n    if (include.request) {\n      const extractedRequestData = Array.isArray(include.request) ? extractRequestData(req, {\n        include: include.request,\n        deps: options && options.deps\n      }) : extractRequestData(req, {\n        deps: options && options.deps\n      });\n      event.request = {\n        ...event.request,\n        ...extractedRequestData\n      };\n    }\n    if (include.user) {\n      const extractedUser = req.user && is.isPlainObject(req.user) ? extractUserData(req.user, include.user) : {};\n      if (Object.keys(extractedUser).length) {\n        event.user = {\n          ...event.user,\n          ...extractedUser\n        };\n      }\n    }\n\n    // client ip:\n    //   node, nextjs: req.socket.remoteAddress\n    //   express, koa: req.ip\n    if (include.ip) {\n      const ip = req.ip || req.socket && req.socket.remoteAddress;\n      if (ip) {\n        event.user = {\n          ...event.user,\n          ip_address: ip\n        };\n      }\n    }\n    if (include.transaction && !event.transaction) {\n      // TODO do we even need this anymore?\n      // TODO make this work for nextjs\n      event.transaction = extractTransaction(req, include.transaction);\n    }\n    return event;\n  }\n  function extractQueryParams(req, deps) {\n    // url (including path and query string):\n    //   node, express: req.originalUrl\n    //   koa, nextjs: req.url\n    let originalUrl = req.originalUrl || req.url || '';\n    if (!originalUrl) {\n      return;\n    }\n\n    // The `URL` constructor can't handle internal URLs of the form `/some/path/here`, so stick a dummy protocol and\n    // hostname on the beginning. Since the point here is just to grab the query string, it doesn't matter what we use.\n    if (originalUrl.startsWith('/')) {\n      originalUrl = `http://dogs.are.great${originalUrl}`;\n    }\n    return req.query || typeof URL !== undefined && new URL(originalUrl).search.replace('?', '') ||\n    // In Node 8, `URL` isn't in the global scope, so we have to use the built-in module from Node\n    deps && deps.url && deps.url.parse(originalUrl).query || undefined;\n  }\n  exports.addRequestDataToEvent = addRequestDataToEvent;\n  exports.addRequestDataToTransaction = addRequestDataToTransaction;\n  exports.extractPathForTransaction = extractPathForTransaction;\n  exports.extractRequestData = extractRequestData;\n});","lineCount":298,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"is"],[5,10,3,8],[5,13,3,11,"require"],[5,20,3,18],[5,21,3,18,"_dependencyMap"],[5,35,3,18],[5,49,3,28],[5,50,3,29],[6,2,4,0],[6,8,4,6,"normalize"],[6,17,4,15],[6,20,4,18,"require"],[6,27,4,25],[6,28,4,25,"_dependencyMap"],[6,42,4,25],[6,63,4,42],[6,64,4,43],[7,2,5,0],[7,8,5,6,"url"],[7,11,5,9],[7,14,5,12,"require"],[7,21,5,19],[7,22,5,19,"_dependencyMap"],[7,36,5,19],[7,51,5,30],[7,52,5,31],[8,2,7,0],[8,8,7,6,"DEFAULT_INCLUDES"],[8,24,7,22],[8,27,7,25],[9,4,8,2,"ip"],[9,6,8,4],[9,8,8,6],[9,13,8,11],[10,4,9,2,"request"],[10,11,9,9],[10,13,9,11],[10,17,9,15],[11,4,10,2,"transaction"],[11,15,10,13],[11,17,10,15],[11,21,10,19],[12,4,11,2,"user"],[12,8,11,6],[12,10,11,8],[13,2,12,0],[13,3,12,1],[14,2,13,0],[14,8,13,6,"DEFAULT_REQUEST_INCLUDES"],[14,32,13,30],[14,35,13,33],[14,36,13,34],[14,45,13,43],[14,47,13,45],[14,53,13,51],[14,55,13,53],[14,64,13,62],[14,66,13,64],[14,74,13,72],[14,76,13,74],[14,90,13,88],[14,92,13,90],[14,97,13,95],[14,98,13,96],[15,2,14,0],[15,8,14,6,"DEFAULT_USER_INCLUDES"],[15,29,14,27],[15,32,14,30],[15,33,14,31],[15,37,14,35],[15,39,14,37],[15,49,14,47],[15,51,14,49],[15,58,14,56],[15,59,14,57],[17,2,16,0],[18,0,17,0],[19,0,18,0],[20,0,19,0],[21,2,20,0],[21,11,20,9,"addRequestDataToTransaction"],[21,38,20,36,"addRequestDataToTransaction"],[21,39,21,2,"transaction"],[21,50,21,13],[21,52,22,2,"req"],[21,55,22,5],[21,57,23,2,"deps"],[21,61,23,6],[21,63,24,2],[22,4,25,2],[22,8,25,6],[22,9,25,7,"transaction"],[22,20,25,18],[22,22,25,20],[23,4,26,2],[23,8,26,6],[23,9,26,7,"transaction"],[23,20,26,18],[23,21,26,19,"metadata"],[23,29,26,27],[23,30,26,28,"source"],[23,36,26,34],[23,40,26,38,"transaction"],[23,51,26,49],[23,52,26,50,"metadata"],[23,60,26,58],[23,61,26,59,"source"],[23,67,26,65],[23,72,26,70],[23,77,26,75],[23,79,26,77],[24,6,27,4],[25,6,28,4,"transaction"],[25,17,28,15],[25,18,28,16,"setName"],[25,25,28,23],[25,26,28,24],[25,29,28,27,"extractPathForTransaction"],[25,54,28,52],[25,55,28,53,"req"],[25,58,28,56],[25,60,28,58],[26,8,28,60,"path"],[26,12,28,64],[26,14,28,66],[26,18,28,70],[27,8,28,72,"method"],[27,14,28,78],[27,16,28,80],[28,6,28,85],[28,7,28,86],[28,8,28,87],[28,9,28,88],[29,4,29,2],[30,4,30,2,"transaction"],[30,15,30,13],[30,16,30,14,"setData"],[30,23,30,21],[30,24,30,22],[30,29,30,27],[30,31,30,29,"req"],[30,34,30,32],[30,35,30,33,"originalUrl"],[30,46,30,44],[30,50,30,48,"req"],[30,53,30,51],[30,54,30,52,"url"],[30,57,30,55],[30,58,30,56],[31,4,31,2],[31,8,31,6,"req"],[31,11,31,9],[31,12,31,10,"baseUrl"],[31,19,31,17],[31,21,31,19],[32,6,32,4,"transaction"],[32,17,32,15],[32,18,32,16,"setData"],[32,25,32,23],[32,26,32,24],[32,35,32,33],[32,37,32,35,"req"],[32,40,32,38],[32,41,32,39,"baseUrl"],[32,48,32,46],[32,49,32,47],[33,4,33,2],[34,4,34,2,"transaction"],[34,15,34,13],[34,16,34,14,"setData"],[34,23,34,21],[34,24,34,22],[34,31,34,29],[34,33,34,31,"extractQueryParams"],[34,51,34,49],[34,52,34,50,"req"],[34,55,34,53],[34,57,34,55,"deps"],[34,61,34,59],[34,62,34,60],[34,63,34,61],[35,2,35,0],[37,2,37,0],[38,0,38,0],[39,0,39,0],[40,0,40,0],[41,0,41,0],[42,0,42,0],[43,0,43,0],[44,0,44,0],[45,0,45,0],[46,0,46,0],[47,0,47,0],[48,0,48,0],[49,0,49,0],[50,0,50,0],[51,2,51,0],[51,11,51,9,"extractPathForTransaction"],[51,36,51,34,"extractPathForTransaction"],[51,37,52,2,"req"],[51,40,52,5],[51,42,53,2,"options"],[51,49,53,9],[51,52,53,12],[51,53,53,13],[51,54,53,14],[51,56,54,2],[52,4,55,2],[52,10,55,8,"method"],[52,16,55,14],[52,19,55,17,"req"],[52,22,55,20],[52,23,55,21,"method"],[52,29,55,27],[52,33,55,31,"req"],[52,36,55,34],[52,37,55,35,"method"],[52,43,55,41],[52,44,55,42,"toUpperCase"],[52,55,55,53],[52,56,55,54],[52,57,55,55],[53,4,57,2],[53,8,57,6,"path"],[53,12,57,10],[53,15,57,13],[53,17,57,15],[54,4,58,2],[54,8,58,6,"source"],[54,14,58,12],[54,17,58,15],[54,22,58,20],[56,4,60,2],[57,4,61,2],[57,8,61,6,"options"],[57,15,61,13],[57,16,61,14,"customRoute"],[57,27,61,25],[57,31,61,29,"req"],[57,34,61,32],[57,35,61,33,"route"],[57,40,61,38],[57,42,61,40],[58,6,62,4,"path"],[58,10,62,8],[58,13,62,11,"options"],[58,20,62,18],[58,21,62,19,"customRoute"],[58,32,62,30],[58,36,62,34],[58,39,62,37,"req"],[58,42,62,40],[58,43,62,41,"baseUrl"],[58,50,62,48],[58,54,62,52],[58,56,62,54],[58,59,62,57,"req"],[58,62,62,60],[58,63,62,61,"route"],[58,68,62,66],[58,72,62,70,"req"],[58,75,62,73],[58,76,62,74,"route"],[58,81,62,79],[58,82,62,80,"path"],[58,86,62,84],[58,88,62,86],[59,6,63,4,"source"],[59,12,63,10],[59,15,63,13],[59,22,63,20],[60,4,64,2],[62,4,66,2],[63,4,66,2],[63,9,67,7],[63,13,67,11,"req"],[63,16,67,14],[63,17,67,15,"originalUrl"],[63,28,67,26],[63,32,67,30,"req"],[63,35,67,33],[63,36,67,34,"url"],[63,39,67,37],[63,41,67,39],[64,6,68,4,"path"],[64,10,68,8],[64,13,68,11,"url"],[64,16,68,14],[64,17,68,15,"stripUrlQueryAndFragment"],[64,41,68,39],[64,42,68,40,"req"],[64,45,68,43],[64,46,68,44,"originalUrl"],[64,57,68,55],[64,61,68,59,"req"],[64,64,68,62],[64,65,68,63,"url"],[64,68,68,66],[64,72,68,70],[64,74,68,72],[64,75,68,73],[65,4,69,2],[66,4,71,2],[66,8,71,6,"name"],[66,12,71,10],[66,15,71,13],[66,17,71,15],[67,4,72,2],[67,8,72,6,"options"],[67,15,72,13],[67,16,72,14,"method"],[67,22,72,20],[67,26,72,24,"method"],[67,32,72,30],[67,34,72,32],[68,6,73,4,"name"],[68,10,73,8],[68,14,73,12,"method"],[68,20,73,18],[69,4,74,2],[70,4,75,2],[70,8,75,6,"options"],[70,15,75,13],[70,16,75,14,"method"],[70,22,75,20],[70,26,75,24,"options"],[70,33,75,31],[70,34,75,32,"path"],[70,38,75,36],[70,40,75,38],[71,6,76,4,"name"],[71,10,76,8],[71,14,76,12],[71,17,76,15],[72,4,77,2],[73,4,78,2],[73,8,78,6,"options"],[73,15,78,13],[73,16,78,14,"path"],[73,20,78,18],[73,24,78,22,"path"],[73,28,78,26],[73,30,78,28],[74,6,79,4,"name"],[74,10,79,8],[74,14,79,12,"path"],[74,18,79,16],[75,4,80,2],[76,4,82,2],[76,11,82,9],[76,12,82,10,"name"],[76,16,82,14],[76,18,82,16,"source"],[76,24,82,22],[76,25,82,23],[77,2,83,0],[79,2,85,0],[80,2,86,0],[80,11,86,9,"extractTransaction"],[80,29,86,27,"extractTransaction"],[80,30,86,28,"req"],[80,33,86,31],[80,35,86,33,"type"],[80,39,86,37],[80,41,86,39],[81,4,87,2],[81,12,87,10,"type"],[81,16,87,14],[82,6,88,4],[82,11,88,9],[82,17,88,15],[83,8,88,17],[84,10,89,6],[84,17,89,13,"extractPathForTransaction"],[84,42,89,38],[84,43,89,39,"req"],[84,46,89,42],[84,48,89,44],[85,12,89,46,"path"],[85,16,89,50],[85,18,89,52],[86,10,89,57],[86,11,89,58],[86,12,89,59],[86,13,89,60],[86,14,89,61],[86,15,89,62],[87,8,90,4],[88,6,91,4],[88,11,91,9],[88,20,91,18],[89,8,91,20],[90,10,92,6],[90,17,92,14,"req"],[90,20,92,17],[90,21,92,18,"route"],[90,26,92,23],[90,30,92,27,"req"],[90,33,92,30],[90,34,92,31,"route"],[90,39,92,36],[90,40,92,37,"stack"],[90,45,92,42],[90,49,92,46,"req"],[90,52,92,49],[90,53,92,50,"route"],[90,58,92,55],[90,59,92,56,"stack"],[90,64,92,61],[90,65,92,62],[90,66,92,63],[90,67,92,64],[90,71,92,68,"req"],[90,74,92,71],[90,75,92,72,"route"],[90,80,92,77],[90,81,92,78,"stack"],[90,86,92,83],[90,87,92,84],[90,88,92,85],[90,89,92,86],[90,90,92,87,"name"],[90,94,92,91],[90,98,92,96],[90,111,92,109],[91,8,93,4],[92,6,94,4],[92,11,94,9],[92,23,94,21],[93,6,95,4],[94,8,95,13],[95,10,96,6],[95,17,96,13,"extractPathForTransaction"],[95,42,96,38],[95,43,96,39,"req"],[95,46,96,42],[95,48,96,44],[96,12,96,46,"path"],[96,16,96,50],[96,18,96,52],[96,22,96,56],[97,12,96,58,"method"],[97,18,96,64],[97,20,96,66],[98,10,96,71],[98,11,96,72],[98,12,96,73],[98,13,96,74],[98,14,96,75],[98,15,96,76],[99,8,97,4],[100,4,98,2],[101,2,99,0],[103,2,101,0],[104,2,102,0],[104,11,102,9,"extractUserData"],[104,26,102,24,"extractUserData"],[104,27,103,2,"user"],[104,31,103,6],[104,33,106,2,"keys"],[104,37,106,6],[104,39,107,2],[105,4,108,2],[105,10,108,8,"extractedUser"],[105,23,108,21],[105,26,108,24],[105,27,108,25],[105,28,108,26],[106,4,109,2],[106,10,109,8,"attributes"],[106,20,109,18],[106,23,109,21,"Array"],[106,28,109,26],[106,29,109,27,"isArray"],[106,36,109,34],[106,37,109,35,"keys"],[106,41,109,39],[106,42,109,40],[106,45,109,43,"keys"],[106,49,109,47],[106,52,109,50,"DEFAULT_USER_INCLUDES"],[106,73,109,71],[107,4,111,2,"attributes"],[107,14,111,12],[107,15,111,13,"forEach"],[107,22,111,20],[107,23,111,21,"key"],[107,26,111,24],[107,30,111,28],[108,6,112,4],[108,10,112,8,"user"],[108,14,112,12],[108,18,112,16,"key"],[108,21,112,19],[108,25,112,23,"user"],[108,29,112,27],[108,31,112,29],[109,8,113,6,"extractedUser"],[109,21,113,19],[109,22,113,20,"key"],[109,25,113,23],[109,26,113,24],[109,29,113,27,"user"],[109,33,113,31],[109,34,113,32,"key"],[109,37,113,35],[109,38,113,36],[110,6,114,4],[111,4,115,2],[111,5,115,3],[111,6,115,4],[112,4,117,2],[112,11,117,9,"extractedUser"],[112,24,117,22],[113,2,118,0],[115,2,120,0],[116,0,121,0],[117,0,122,0],[118,0,123,0],[119,0,124,0],[120,0,125,0],[121,0,126,0],[122,0,127,0],[123,0,128,0],[124,2,129,0],[124,11,129,9,"extractRequestData"],[124,29,129,27,"extractRequestData"],[124,30,130,2,"req"],[124,33,130,5],[124,35,131,2,"options"],[124,42,131,9],[124,44,134,2],[125,4,135,2],[125,10,135,8],[126,6,135,10,"include"],[126,13,135,17],[126,16,135,20,"DEFAULT_REQUEST_INCLUDES"],[126,40,135,44],[127,6,135,46,"deps"],[128,4,135,51],[128,5,135,52],[128,8,135,55,"options"],[128,15,135,62],[128,19,135,66],[128,20,135,67],[128,21,135,68],[129,4,136,2],[129,10,136,8,"requestData"],[129,21,136,19],[129,24,136,22],[129,25,136,23],[129,26,136,24],[131,4,138,2],[132,4,139,2],[133,4,140,2],[133,10,140,8,"headers"],[133,17,140,15],[133,20,140,19,"req"],[133,23,140,22],[133,24,140,23,"headers"],[133,31,140,30],[133,35,140,34],[133,36,140,35],[133,37,140,37],[134,4,143,2],[135,4,144,2],[136,4,145,2],[136,10,145,8,"method"],[136,16,145,14],[136,19,145,17,"req"],[136,22,145,20],[136,23,145,21,"method"],[136,29,145,27],[137,4,146,2],[138,4,147,2],[139,4,148,2],[140,4,149,2],[141,4,150,2],[141,10,150,8,"host"],[141,14,150,12],[141,17,150,15,"req"],[141,20,150,18],[141,21,150,19,"hostname"],[141,29,150,27],[141,33,150,31,"req"],[141,36,150,34],[141,37,150,35,"host"],[141,41,150,39],[141,45,150,43,"headers"],[141,52,150,50],[141,53,150,51,"host"],[141,57,150,55],[141,61,150,59],[141,72,150,70],[142,4,151,2],[143,4,152,2],[144,4,153,2],[145,4,154,2],[145,10,154,8,"protocol"],[145,18,154,16],[145,21,154,19,"req"],[145,24,154,22],[145,25,154,23,"protocol"],[145,33,154,31],[145,38,154,36],[145,45,154,43],[145,49,154,48,"req"],[145,52,154,51],[145,53,154,52,"socket"],[145,59,154,58],[145,63,154,62,"req"],[145,66,154,65],[145,67,154,66,"socket"],[145,73,154,72],[145,74,154,73,"encrypted"],[145,83,154,83],[145,86,154,86],[145,93,154,93],[145,96,154,96],[145,102,154,102],[146,4,155,2],[147,4,156,2],[148,4,157,2],[149,4,158,2],[149,10,158,8,"originalUrl"],[149,21,158,19],[149,24,158,22,"req"],[149,27,158,25],[149,28,158,26,"originalUrl"],[149,39,158,37],[149,43,158,41,"req"],[149,46,158,44],[149,47,158,45,"url"],[149,50,158,48],[149,54,158,52],[149,56,158,54],[150,4,159,2],[151,4,160,2],[151,10,160,8,"absoluteUrl"],[151,21,160,19],[151,24,160,22],[151,27,160,25,"protocol"],[151,35,160,33],[151,41,160,39,"host"],[151,45,160,43],[151,48,160,46,"originalUrl"],[151,59,160,57],[151,61,160,59],[152,4,161,2,"include"],[152,11,161,9],[152,12,161,10,"forEach"],[152,19,161,17],[152,20,161,18,"key"],[152,23,161,21],[152,27,161,25],[153,6,162,4],[153,14,162,12,"key"],[153,17,162,15],[154,8,163,6],[154,13,163,11],[154,22,163,20],[155,10,163,22],[156,12,164,8,"requestData"],[156,23,164,19],[156,24,164,20,"headers"],[156,31,164,27],[156,34,164,30,"headers"],[156,41,164,37],[157,12,165,8],[158,10,166,6],[159,8,167,6],[159,13,167,11],[159,21,167,19],[160,10,167,21],[161,12,168,8,"requestData"],[161,23,168,19],[161,24,168,20,"method"],[161,30,168,26],[161,33,168,29,"method"],[161,39,168,35],[162,12,169,8],[163,10,170,6],[164,8,171,6],[164,13,171,11],[164,18,171,16],[165,10,171,18],[166,12,172,8,"requestData"],[166,23,172,19],[166,24,172,20,"url"],[166,27,172,23],[166,30,172,26,"absoluteUrl"],[166,41,172,37],[167,12,173,8],[168,10,174,6],[169,8,175,6],[169,13,175,11],[169,22,175,20],[170,10,175,22],[171,12,176,8],[172,12,177,8],[173,12,178,8],[174,12,179,8],[175,12,180,8,"requestData"],[175,23,180,19],[175,24,180,20,"cookies"],[175,31,180,27],[176,12,181,10],[177,12,182,10],[178,12,183,10,"req"],[178,15,183,13],[178,16,183,14,"cookies"],[178,23,183,21],[178,27,183,26,"headers"],[178,34,183,33],[178,35,183,34,"cookie"],[178,41,183,40],[178,45,183,44,"deps"],[178,49,183,48],[178,53,183,52,"deps"],[178,57,183,56],[178,58,183,57,"cookie"],[178,64,183,63],[178,68,183,67,"deps"],[178,72,183,71],[178,73,183,72,"cookie"],[178,79,183,78],[178,80,183,79,"parse"],[178,85,183,84],[178,86,183,85,"headers"],[178,93,183,92],[178,94,183,93,"cookie"],[178,100,183,99],[178,101,183,101],[178,105,183,105],[178,106,183,106],[178,107,183,107],[179,12,184,8],[180,10,185,6],[181,8,186,6],[181,13,186,11],[181,27,186,25],[182,10,186,27],[183,12,187,8],[184,12,188,8],[185,12,189,8],[186,12,190,8],[187,12,191,8,"requestData"],[187,23,191,19],[187,24,191,20,"query_string"],[187,36,191,32],[187,39,191,35,"extractQueryParams"],[187,57,191,53],[187,58,191,54,"req"],[187,61,191,57],[187,63,191,59,"deps"],[187,67,191,63],[187,68,191,64],[188,12,192,8],[189,10,193,6],[190,8,194,6],[190,13,194,11],[190,19,194,17],[191,10,194,19],[192,12,195,8],[192,16,195,12,"method"],[192,22,195,18],[192,27,195,23],[192,32,195,28],[192,36,195,32,"method"],[192,42,195,38],[192,47,195,43],[192,53,195,49],[192,55,195,51],[193,14,196,10],[194,12,197,8],[195,12,198,8],[196,12,199,8],[197,12,200,8],[198,12,201,8],[199,12,202,8],[200,12,203,8],[201,12,204,8],[201,16,204,12,"req"],[201,19,204,15],[201,20,204,16,"body"],[201,24,204,20],[201,29,204,25,"undefined"],[201,38,204,34],[201,40,204,36],[202,14,205,10,"requestData"],[202,25,205,21],[202,26,205,22,"data"],[202,30,205,26],[202,33,205,29,"is"],[202,35,205,31],[202,36,205,32,"isString"],[202,44,205,40],[202,45,205,41,"req"],[202,48,205,44],[202,49,205,45,"body"],[202,53,205,49],[202,54,205,50],[202,57,205,53,"req"],[202,60,205,56],[202,61,205,57,"body"],[202,65,205,61],[202,68,205,64,"JSON"],[202,72,205,68],[202,73,205,69,"stringify"],[202,82,205,78],[202,83,205,79,"normalize"],[202,92,205,88],[202,93,205,89,"normalize"],[202,102,205,98],[202,103,205,99,"req"],[202,106,205,102],[202,107,205,103,"body"],[202,111,205,107],[202,112,205,108],[202,113,205,109],[203,12,206,8],[204,12,207,8],[205,10,208,6],[206,8,209,6],[207,10,209,15],[208,12,210,8],[208,16,210,12],[208,17,210,13],[208,18,210,14],[208,19,210,15,"hasOwnProperty"],[208,33,210,29],[208,34,210,30,"call"],[208,38,210,34],[208,39,210,35,"req"],[208,42,210,38],[208,44,210,40,"key"],[208,47,210,43],[208,48,210,44],[208,50,210,46],[209,14,211,10,"requestData"],[209,25,211,21],[209,26,211,22,"key"],[209,29,211,25],[209,30,211,26],[209,33,211,30,"req"],[209,36,211,33],[209,37,211,36,"key"],[209,40,211,39],[209,41,211,40],[210,12,212,8],[211,10,213,6],[212,6,214,4],[213,4,215,2],[213,5,215,3],[213,6,215,4],[214,4,217,2],[214,11,217,9,"requestData"],[214,22,217,20],[215,2,218,0],[217,2,220,0],[218,0,221,0],[219,0,222,0],[221,2,224,0],[222,0,225,0],[223,0,226,0],[224,0,227,0],[225,0,228,0],[226,0,229,0],[227,0,230,0],[228,0,231,0],[229,0,232,0],[230,2,233,0],[230,11,233,9,"addRequestDataToEvent"],[230,32,233,30,"addRequestDataToEvent"],[230,33,234,2,"event"],[230,38,234,7],[230,40,235,2,"req"],[230,43,235,5],[230,45,236,2,"options"],[230,52,236,9],[230,54,237,2],[231,4,238,2],[231,10,238,8,"include"],[231,17,238,15],[231,20,238,18],[232,6,239,4],[232,9,239,7,"DEFAULT_INCLUDES"],[232,25,239,23],[233,6,240,4],[233,10,240,8,"options"],[233,17,240,15],[233,21,240,19,"options"],[233,28,240,26],[233,29,240,27,"include"],[233,36,240,34],[234,4,241,2],[234,5,241,3],[235,4,243,2],[235,8,243,6,"include"],[235,15,243,13],[235,16,243,14,"request"],[235,23,243,21],[235,25,243,23],[236,6,244,4],[236,12,244,10,"extractedRequestData"],[236,32,244,30],[236,35,244,33,"Array"],[236,40,244,38],[236,41,244,39,"isArray"],[236,48,244,46],[236,49,244,47,"include"],[236,56,244,54],[236,57,244,55,"request"],[236,64,244,62],[236,65,244,63],[236,68,245,8,"extractRequestData"],[236,86,245,26],[236,87,245,27,"req"],[236,90,245,30],[236,92,245,32],[237,8,245,34,"include"],[237,15,245,41],[237,17,245,43,"include"],[237,24,245,50],[237,25,245,51,"request"],[237,32,245,58],[238,8,245,60,"deps"],[238,12,245,64],[238,14,245,66,"options"],[238,21,245,73],[238,25,245,77,"options"],[238,32,245,84],[238,33,245,85,"deps"],[239,6,245,90],[239,7,245,91],[239,8,245,92],[239,11,246,8,"extractRequestData"],[239,29,246,26],[239,30,246,27,"req"],[239,33,246,30],[239,35,246,32],[240,8,246,34,"deps"],[240,12,246,38],[240,14,246,40,"options"],[240,21,246,47],[240,25,246,51,"options"],[240,32,246,58],[240,33,246,59,"deps"],[241,6,246,64],[241,7,246,65],[241,8,246,66],[242,6,248,4,"event"],[242,11,248,9],[242,12,248,10,"request"],[242,19,248,17],[242,22,248,20],[243,8,249,6],[243,11,249,9,"event"],[243,16,249,14],[243,17,249,15,"request"],[243,24,249,22],[244,8,250,6],[244,11,250,9,"extractedRequestData"],[245,6,251,4],[245,7,251,5],[246,4,252,2],[247,4,254,2],[247,8,254,6,"include"],[247,15,254,13],[247,16,254,14,"user"],[247,20,254,18],[247,22,254,20],[248,6,255,4],[248,12,255,10,"extractedUser"],[248,25,255,23],[248,28,255,26,"req"],[248,31,255,29],[248,32,255,30,"user"],[248,36,255,34],[248,40,255,38,"is"],[248,42,255,40],[248,43,255,41,"isPlainObject"],[248,56,255,54],[248,57,255,55,"req"],[248,60,255,58],[248,61,255,59,"user"],[248,65,255,63],[248,66,255,64],[248,69,255,67,"extractUserData"],[248,84,255,82],[248,85,255,83,"req"],[248,88,255,86],[248,89,255,87,"user"],[248,93,255,91],[248,95,255,93,"include"],[248,102,255,100],[248,103,255,101,"user"],[248,107,255,105],[248,108,255,106],[248,111,255,109],[248,112,255,110],[248,113,255,111],[249,6,257,4],[249,10,257,8,"Object"],[249,16,257,14],[249,17,257,15,"keys"],[249,21,257,19],[249,22,257,20,"extractedUser"],[249,35,257,33],[249,36,257,34],[249,37,257,35,"length"],[249,43,257,41],[249,45,257,43],[250,8,258,6,"event"],[250,13,258,11],[250,14,258,12,"user"],[250,18,258,16],[250,21,258,19],[251,10,259,8],[251,13,259,11,"event"],[251,18,259,16],[251,19,259,17,"user"],[251,23,259,21],[252,10,260,8],[252,13,260,11,"extractedUser"],[253,8,261,6],[253,9,261,7],[254,6,262,4],[255,4,263,2],[257,4,265,2],[258,4,266,2],[259,4,267,2],[260,4,268,2],[260,8,268,6,"include"],[260,15,268,13],[260,16,268,14,"ip"],[260,18,268,16],[260,20,268,18],[261,6,269,4],[261,12,269,10,"ip"],[261,14,269,12],[261,17,269,15,"req"],[261,20,269,18],[261,21,269,19,"ip"],[261,23,269,21],[261,27,269,26,"req"],[261,30,269,29],[261,31,269,30,"socket"],[261,37,269,36],[261,41,269,40,"req"],[261,44,269,43],[261,45,269,44,"socket"],[261,51,269,50],[261,52,269,51,"remoteAddress"],[261,65,269,65],[262,6,270,4],[262,10,270,8,"ip"],[262,12,270,10],[262,14,270,12],[263,8,271,6,"event"],[263,13,271,11],[263,14,271,12,"user"],[263,18,271,16],[263,21,271,19],[264,10,272,8],[264,13,272,11,"event"],[264,18,272,16],[264,19,272,17,"user"],[264,23,272,21],[265,10,273,8,"ip_address"],[265,20,273,18],[265,22,273,20,"ip"],[266,8,274,6],[266,9,274,7],[267,6,275,4],[268,4,276,2],[269,4,278,2],[269,8,278,6,"include"],[269,15,278,13],[269,16,278,14,"transaction"],[269,27,278,25],[269,31,278,29],[269,32,278,30,"event"],[269,37,278,35],[269,38,278,36,"transaction"],[269,49,278,47],[269,51,278,49],[270,6,279,4],[271,6,280,4],[272,6,281,4,"event"],[272,11,281,9],[272,12,281,10,"transaction"],[272,23,281,21],[272,26,281,24,"extractTransaction"],[272,44,281,42],[272,45,281,43,"req"],[272,48,281,46],[272,50,281,48,"include"],[272,57,281,55],[272,58,281,56,"transaction"],[272,69,281,67],[272,70,281,68],[273,4,282,2],[274,4,284,2],[274,11,284,9,"event"],[274,16,284,14],[275,2,285,0],[276,2,287,0],[276,11,287,9,"extractQueryParams"],[276,29,287,27,"extractQueryParams"],[276,30,288,2,"req"],[276,33,288,5],[276,35,289,2,"deps"],[276,39,289,6],[276,41,290,2],[277,4,291,2],[278,4,292,2],[279,4,293,2],[280,4,294,2],[280,8,294,6,"originalUrl"],[280,19,294,17],[280,22,294,20,"req"],[280,25,294,23],[280,26,294,24,"originalUrl"],[280,37,294,35],[280,41,294,39,"req"],[280,44,294,42],[280,45,294,43,"url"],[280,48,294,46],[280,52,294,50],[280,54,294,52],[281,4,296,2],[281,8,296,6],[281,9,296,7,"originalUrl"],[281,20,296,18],[281,22,296,20],[282,6,297,4],[283,4,298,2],[285,4,300,2],[286,4,301,2],[287,4,302,2],[287,8,302,6,"originalUrl"],[287,19,302,17],[287,20,302,18,"startsWith"],[287,30,302,28],[287,31,302,29],[287,34,302,32],[287,35,302,33],[287,37,302,35],[288,6,303,4,"originalUrl"],[288,17,303,15],[288,20,303,18],[288,44,303,42,"originalUrl"],[288,55,303,53],[288,57,303,55],[289,4,304,2],[290,4,306,2],[290,11,307,4,"req"],[290,14,307,7],[290,15,307,8,"query"],[290,20,307,13],[290,24,308,5],[290,31,308,12,"URL"],[290,34,308,15],[290,39,308,20,"undefined"],[290,48,308,29],[290,52,308,33],[290,56,308,37,"URL"],[290,59,308,40],[290,60,308,41,"originalUrl"],[290,71,308,52],[290,72,308,53],[290,73,308,54,"search"],[290,79,308,60],[290,80,308,61,"replace"],[290,87,308,68],[290,88,308,69],[290,91,308,72],[290,93,308,74],[290,95,308,76],[290,96,308,78],[291,4,309,4],[292,4,310,5,"deps"],[292,8,310,9],[292,12,310,13,"deps"],[292,16,310,17],[292,17,310,18,"url"],[292,20,310,21],[292,24,310,25,"deps"],[292,28,310,29],[292,29,310,30,"url"],[292,32,310,33],[292,33,310,34,"parse"],[292,38,310,39],[292,39,310,40,"originalUrl"],[292,50,310,51],[292,51,310,52],[292,52,310,53,"query"],[292,57,310,59],[292,61,311,4,"undefined"],[292,70,311,13],[293,2,313,0],[294,2,315,0,"exports"],[294,9,315,7],[294,10,315,8,"addRequestDataToEvent"],[294,31,315,29],[294,34,315,32,"addRequestDataToEvent"],[294,55,315,53],[295,2,316,0,"exports"],[295,9,316,7],[295,10,316,8,"addRequestDataToTransaction"],[295,37,316,35],[295,40,316,38,"addRequestDataToTransaction"],[295,67,316,65],[296,2,317,0,"exports"],[296,9,317,7],[296,10,317,8,"extractPathForTransaction"],[296,35,317,33],[296,38,317,36,"extractPathForTransaction"],[296,63,317,61],[297,2,318,0,"exports"],[297,9,318,7],[297,10,318,8,"extractRequestData"],[297,28,318,26],[297,31,318,29,"extractRequestData"],[297,49,318,47],[298,0,318,48],[298,3]],"functionMap":{"names":["<global>","addRequestDataToTransaction","extractPathForTransaction","extractTransaction","extractUserData","attributes.forEach$argument_0","extractRequestData","include.forEach$argument_0","addRequestDataToEvent","extractQueryParams"],"mappings":"AAA;ACmB;CDe;AEgB;CFgC;AGG;CHa;AIG;qBCS;GDI;CJG;AMW;kBCgC;GDsD;CNG;AQe;CRoD;ASE;CT0B"},"hasCjsExports":true},"type":"js/module"}]}