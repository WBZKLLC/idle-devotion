{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"displayStars\", {\n    enumerable: true,\n    get: function () {\n      return displayStars;\n    }\n  });\n  Object.defineProperty(exports, \"unlockedTierForHero\", {\n    enumerable: true,\n    get: function () {\n      return unlockedTierForHero;\n    }\n  });\n  Object.defineProperty(exports, \"effectiveTierForHero\", {\n    enumerable: true,\n    get: function () {\n      return effectiveTierForHero;\n    }\n  });\n  Object.defineProperty(exports, \"resolveTierArt\", {\n    enumerable: true,\n    get: function () {\n      return resolveTierArt;\n    }\n  });\n  Object.defineProperty(exports, \"computeUserMaxUnlockedTier\", {\n    enumerable: true,\n    get: function () {\n      return computeUserMaxUnlockedTier;\n    }\n  });\n  Object.defineProperty(exports, \"TIER_LABELS\", {\n    enumerable: true,\n    get: function () {\n      return TIER_LABELS;\n    }\n  });\n  // /app/frontend/lib/tier.ts\n  // SINGLE SOURCE OF TRUTH for stars → tiers → art → gating\n  // DO NOT reimplement this logic elsewhere\n\n  /**\n   * Raw backend stars (0–6). UI shows EXACT value.\n   */\n  const displayStars = hero => {\n    const s = Number(hero?.stars ?? 0);\n    if (!isFinite(s)) return 0;\n    return Math.max(0, Math.min(6, s));\n  };\n\n  /**\n   * Maps backend stars + awakening to unlocked tier.\n   *\n   * RULES (AUTHORITATIVE):\n   * stars = 0  → tier 1\n   * stars = 1  → tier 2\n   * stars = 2  → tier 3\n   * stars = 3  → tier 4\n   * stars = 4  → tier 5\n   * stars ≥ 5 OR awakening > 0 → tier 6 (5★+)\n   */\n  const unlockedTierForHero = hero => {\n    const stars = displayStars(hero);\n    const awaken = Number(hero?.awakening_level ?? 0);\n    if (awaken > 0 || stars >= 5) return 6;\n    return Math.max(1, Math.min(5, stars + 1));\n  };\n\n  /**\n   * Clamp a requested tier (global or local) to what the hero has unlocked.\n   */\n  const effectiveTierForHero = (hero, requestedTier) => {\n    const unlocked = unlockedTierForHero(hero);\n    return requestedTier <= unlocked ? requestedTier : unlocked;\n  };\n\n  /**\n   * Resolve ascension art EXACTLY from API response.\n   * NO GUESSING. NO FALLBACKS except explicit.\n   */\n  const resolveTierArt = (heroData, tier) => {\n    if (!heroData?.ascension_images) return heroData?.image_url ?? null;\n    return heroData.ascension_images[String(tier)] || heroData.image_url || null;\n  };\n\n  /**\n   * Compute max unlocked tier across all heroes (for global tier selector)\n   */\n  const computeUserMaxUnlockedTier = heroes => {\n    let max = 1;\n    for (const h of heroes || []) {\n      const t = unlockedTierForHero(h);\n      if (t > max) max = t;\n    }\n    return max;\n  };\n\n  /**\n   * Tier labels for UI\n   */\n  const TIER_LABELS = {\n    1: '1★',\n    2: '2★',\n    3: '3★',\n    4: '4★',\n    5: '5★',\n    6: '5★+'\n  };\n});","lineCount":114,"map":[[7,2,10,0,"Object"],[7,8,10,0],[7,9,10,0,"defineProperty"],[7,23,10,0],[7,24,10,0,"exports"],[7,31,10,0],[8,4,10,0,"enumerable"],[8,14,10,0],[9,4,10,0,"get"],[9,7,10,0],[9,18,10,0,"get"],[9,19,10,0],[10,6,10,0],[10,13,10,0,"displayStars"],[10,25,10,0],[11,4,10,0],[12,2,10,0],[13,2,27,0,"Object"],[13,8,27,0],[13,9,27,0,"defineProperty"],[13,23,27,0],[13,24,27,0,"exports"],[13,31,27,0],[14,4,27,0,"enumerable"],[14,14,27,0],[15,4,27,0,"get"],[15,7,27,0],[15,18,27,0,"get"],[15,19,27,0],[16,6,27,0],[16,13,27,0,"unlockedTierForHero"],[16,32,27,0],[17,4,27,0],[18,2,27,0],[19,2,38,0,"Object"],[19,8,38,0],[19,9,38,0,"defineProperty"],[19,23,38,0],[19,24,38,0,"exports"],[19,31,38,0],[20,4,38,0,"enumerable"],[20,14,38,0],[21,4,38,0,"get"],[21,7,38,0],[21,18,38,0,"get"],[21,19,38,0],[22,6,38,0],[22,13,38,0,"effectiveTierForHero"],[22,33,38,0],[23,4,38,0],[24,2,38,0],[25,2,50,0,"Object"],[25,8,50,0],[25,9,50,0,"defineProperty"],[25,23,50,0],[25,24,50,0,"exports"],[25,31,50,0],[26,4,50,0,"enumerable"],[26,14,50,0],[27,4,50,0,"get"],[27,7,50,0],[27,18,50,0,"get"],[27,19,50,0],[28,6,50,0],[28,13,50,0,"resolveTierArt"],[28,27,50,0],[29,4,50,0],[30,2,50,0],[31,2,66,0,"Object"],[31,8,66,0],[31,9,66,0,"defineProperty"],[31,23,66,0],[31,24,66,0,"exports"],[31,31,66,0],[32,4,66,0,"enumerable"],[32,14,66,0],[33,4,66,0,"get"],[33,7,66,0],[33,18,66,0,"get"],[33,19,66,0],[34,6,66,0],[34,13,66,0,"computeUserMaxUnlockedTier"],[34,39,66,0],[35,4,66,0],[36,2,66,0],[37,2,78,0,"Object"],[37,8,78,0],[37,9,78,0,"defineProperty"],[37,23,78,0],[37,24,78,0,"exports"],[37,31,78,0],[38,4,78,0,"enumerable"],[38,14,78,0],[39,4,78,0,"get"],[39,7,78,0],[39,18,78,0,"get"],[39,19,78,0],[40,6,78,0],[40,13,78,0,"TIER_LABELS"],[40,24,78,0],[41,4,78,0],[42,2,78,0],[43,2,1,0],[44,2,2,0],[45,2,3,0],[47,2,7,0],[48,0,8,0],[49,0,9,0],[50,2,10,7],[50,8,10,13,"displayStars"],[50,20,10,25],[50,23,10,29,"hero"],[50,27,10,38],[50,31,10,51],[51,4,11,2],[51,10,11,8,"s"],[51,11,11,9],[51,14,11,12,"Number"],[51,20,11,18],[51,21,11,19,"hero"],[51,25,11,23],[51,27,11,25,"stars"],[51,32,11,30],[51,36,11,34],[51,37,11,35],[51,38,11,36],[52,4,12,2],[52,8,12,6],[52,9,12,7,"isFinite"],[52,17,12,15],[52,18,12,16,"s"],[52,19,12,17],[52,20,12,18],[52,22,12,20],[52,29,12,27],[52,30,12,28],[53,4,13,2],[53,11,13,9,"Math"],[53,15,13,13],[53,16,13,14,"max"],[53,19,13,17],[53,20,13,18],[53,21,13,19],[53,23,13,21,"Math"],[53,27,13,25],[53,28,13,26,"min"],[53,31,13,29],[53,32,13,30],[53,33,13,31],[53,35,13,33,"s"],[53,36,13,34],[53,37,13,35],[53,38,13,36],[54,2,14,0],[54,3,14,1],[56,2,16,0],[57,0,17,0],[58,0,18,0],[59,0,19,0],[60,0,20,0],[61,0,21,0],[62,0,22,0],[63,0,23,0],[64,0,24,0],[65,0,25,0],[66,0,26,0],[67,2,27,7],[67,8,27,13,"unlockedTierForHero"],[67,27,27,32],[67,30,27,36,"hero"],[67,34,27,45],[67,38,27,63],[68,4,28,2],[68,10,28,8,"stars"],[68,15,28,13],[68,18,28,16,"displayStars"],[68,30,28,28],[68,31,28,29,"hero"],[68,35,28,33],[68,36,28,34],[69,4,29,2],[69,10,29,8,"awaken"],[69,16,29,14],[69,19,29,17,"Number"],[69,25,29,23],[69,26,29,24,"hero"],[69,30,29,28],[69,32,29,30,"awakening_level"],[69,47,29,45],[69,51,29,49],[69,52,29,50],[69,53,29,51],[70,4,31,2],[70,8,31,6,"awaken"],[70,14,31,12],[70,17,31,15],[70,18,31,16],[70,22,31,20,"stars"],[70,27,31,25],[70,31,31,29],[70,32,31,30],[70,34,31,32],[70,41,31,39],[70,42,31,40],[71,4,32,2],[71,11,32,10,"Math"],[71,15,32,14],[71,16,32,15,"max"],[71,19,32,18],[71,20,32,19],[71,21,32,20],[71,23,32,22,"Math"],[71,27,32,26],[71,28,32,27,"min"],[71,31,32,30],[71,32,32,31],[71,33,32,32],[71,35,32,34,"stars"],[71,40,32,39],[71,43,32,42],[71,44,32,43],[71,45,32,44],[71,46,32,45],[72,2,33,0],[72,3,33,1],[74,2,35,0],[75,0,36,0],[76,0,37,0],[77,2,38,7],[77,8,38,13,"effectiveTierForHero"],[77,28,38,33],[77,31,38,36,"effectiveTierForHero"],[77,32,39,2,"hero"],[77,36,39,11],[77,38,40,2,"requestedTier"],[77,51,40,28],[77,56,41,18],[78,4,42,2],[78,10,42,8,"unlocked"],[78,18,42,16],[78,21,42,19,"unlockedTierForHero"],[78,40,42,38],[78,41,42,39,"hero"],[78,45,42,43],[78,46,42,44],[79,4,43,2],[79,11,43,9,"requestedTier"],[79,24,43,22],[79,28,43,26,"unlocked"],[79,36,43,34],[79,39,43,37,"requestedTier"],[79,52,43,50],[79,55,43,53,"unlocked"],[79,63,43,61],[80,2,44,0],[80,3,44,1],[82,2,46,0],[83,0,47,0],[84,0,48,0],[85,0,49,0],[86,2,50,7],[86,8,50,13,"resolveTierArt"],[86,22,50,27],[86,25,50,30,"resolveTierArt"],[86,26,51,2,"heroData"],[86,34,51,15],[86,36,52,2,"tier"],[86,40,52,19],[86,45,53,20],[87,4,54,2],[87,8,54,6],[87,9,54,7,"heroData"],[87,17,54,15],[87,19,54,17,"ascension_images"],[87,35,54,33],[87,37,54,35],[87,44,54,42,"heroData"],[87,52,54,50],[87,54,54,52,"image_url"],[87,63,54,61],[87,67,54,65],[87,71,54,69],[88,4,56,2],[88,11,57,4,"heroData"],[88,19,57,12],[88,20,57,13,"ascension_images"],[88,36,57,29],[88,37,57,30,"String"],[88,43,57,36],[88,44,57,37,"tier"],[88,48,57,41],[88,49,57,42],[88,50,57,43],[88,54,58,4,"heroData"],[88,62,58,12],[88,63,58,13,"image_url"],[88,72,58,22],[88,76,59,4],[88,80,59,8],[89,2,61,0],[89,3,61,1],[91,2,63,0],[92,0,64,0],[93,0,65,0],[94,2,66,7],[94,8,66,13,"computeUserMaxUnlockedTier"],[94,34,66,39],[94,37,66,43,"heroes"],[94,43,66,56],[94,47,66,74],[95,4,67,2],[95,8,67,6,"max"],[95,11,67,22],[95,14,67,25],[95,15,67,26],[96,4,68,2],[96,9,68,7],[96,15,68,13,"h"],[96,16,68,14],[96,20,68,18,"heroes"],[96,26,68,24],[96,30,68,28],[96,32,68,30],[96,34,68,32],[97,6,69,4],[97,12,69,10,"t"],[97,13,69,11],[97,16,69,14,"unlockedTierForHero"],[97,35,69,33],[97,36,69,34,"h"],[97,37,69,35],[97,38,69,36],[98,6,70,4],[98,10,70,8,"t"],[98,11,70,9],[98,14,70,12,"max"],[98,17,70,15],[98,19,70,17,"max"],[98,22,70,20],[98,25,70,23,"t"],[98,26,70,24],[99,4,71,2],[100,4,72,2],[100,11,72,9,"max"],[100,14,72,12],[101,2,73,0],[101,3,73,1],[103,2,75,0],[104,0,76,0],[105,0,77,0],[106,2,78,7],[106,8,78,13,"TIER_LABELS"],[106,19,78,53],[106,22,78,56],[107,4,79,2],[107,5,79,3],[107,7,79,5],[107,11,79,9],[108,4,80,2],[108,5,80,3],[108,7,80,5],[108,11,80,9],[109,4,81,2],[109,5,81,3],[109,7,81,5],[109,11,81,9],[110,4,82,2],[110,5,82,3],[110,7,82,5],[110,11,82,9],[111,4,83,2],[111,5,83,3],[111,7,83,5],[111,11,83,9],[112,4,84,2],[112,5,84,3],[112,7,84,5],[113,2,85,0],[113,3,85,1],[114,0,85,2],[114,3]],"functionMap":{"names":["<global>","displayStars","unlockedTierForHero","effectiveTierForHero","resolveTierArt","computeUserMaxUnlockedTier"],"mappings":"AAA;4BCS;CDI;mCEa;CFM;oCGK;CHM;8BIM;CJW;0CKK;CLO"},"hasCjsExports":false},"type":"js/module"}]}