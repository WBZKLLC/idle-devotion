{"dependencies":[{"name":"../../types.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"W1BH0a3HSCo8tOLXH7X+m5FGigs=","exportNames":["*"],"imports":1}},{"name":"./onHidden.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":41,"index":82}}],"key":"jMxYG0qCUzQ5xC/izD0vNxgsljI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"getVisibilityWatcher\", {\n    enumerable: true,\n    get: function () {\n      return getVisibilityWatcher;\n    }\n  });\n  var _typesJs = require(_dependencyMap[0], \"../../types.js\");\n  var _onHiddenJs = require(_dependencyMap[1], \"./onHidden.js\");\n  /*\n   * Copyright 2020 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  let firstHiddenTime = -1;\n  const initHiddenTime = () => {\n    // If the document is hidden and not prerendering, assume it was always\n    // hidden and the page was loaded in the background.\n    return _typesJs.WINDOW.document.visibilityState === 'hidden' && !_typesJs.WINDOW.document.prerendering ? 0 : Infinity;\n  };\n  const trackChanges = () => {\n    // Update the time if/when the document becomes hidden.\n    (0, _onHiddenJs.onHidden)(({\n      timeStamp\n    }) => {\n      firstHiddenTime = timeStamp;\n    }, true);\n  };\n  const getVisibilityWatcher = () => {\n    if (firstHiddenTime < 0) {\n      // If the document is hidden when this code runs, assume it was hidden\n      // since navigation start. This isn't a perfect heuristic, but it's the\n      // best we can do until an API is available to support querying past\n      // visibilityState.\n      firstHiddenTime = initHiddenTime();\n      trackChanges();\n    }\n    return {\n      get firstHiddenTime() {\n        return firstHiddenTime;\n      }\n    };\n  };\n});","lineCount":60,"map":[[7,2,53,0,"Object"],[7,8,53,0],[7,9,53,0,"defineProperty"],[7,23,53,0],[7,24,53,0,"exports"],[7,31,53,0],[8,4,53,0,"enumerable"],[8,14,53,0],[9,4,53,0,"get"],[9,7,53,0],[9,18,53,0,"get"],[9,19,53,0],[10,6,53,0],[10,13,53,9,"getVisibilityWatcher"],[10,33,53,29],[11,4,53,29],[12,2,53,29],[13,2,1,0],[13,6,1,0,"_typesJs"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,2,0],[14,6,2,0,"_onHiddenJs"],[14,17,2,0],[14,20,2,0,"require"],[14,27,2,0],[14,28,2,0,"_dependencyMap"],[14,42,2,0],[15,2,4,0],[16,0,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[31,2,20,0],[31,6,20,4,"firstHiddenTime"],[31,21,20,19],[31,24,20,22],[31,25,20,23],[31,26,20,24],[32,2,22,0],[32,8,22,6,"initHiddenTime"],[32,22,22,20],[32,25,22,23,"initHiddenTime"],[32,26,22,23],[32,31,22,29],[33,4,23,2],[34,4,24,2],[35,4,25,2],[35,11,25,9,"WINDOW"],[35,19,25,15],[35,20,25,15,"WINDOW"],[35,26,25,15],[35,27,25,16,"document"],[35,35,25,24],[35,36,25,25,"visibilityState"],[35,51,25,40],[35,56,25,45],[35,64,25,53],[35,68,25,57],[35,69,25,58,"WINDOW"],[35,77,25,64],[35,78,25,64,"WINDOW"],[35,84,25,64],[35,85,25,65,"document"],[35,93,25,73],[35,94,25,74,"prerendering"],[35,106,25,86],[35,109,25,89],[35,110,25,90],[35,113,25,93,"Infinity"],[35,121,25,101],[36,2,26,0],[36,3,26,1],[37,2,28,0],[37,8,28,6,"trackChanges"],[37,20,28,18],[37,23,28,21,"trackChanges"],[37,24,28,21],[37,29,28,27],[38,4,29,2],[39,4,30,2],[39,8,30,2,"onHidden"],[39,19,30,10],[39,20,30,10,"onHidden"],[39,28,30,10],[39,30,30,11],[39,31,30,12],[40,6,30,14,"timeStamp"],[41,4,30,24],[41,5,30,25],[41,10,30,30],[42,6,31,4,"firstHiddenTime"],[42,21,31,19],[42,24,31,22,"timeStamp"],[42,33,31,31],[43,4,32,2],[43,5,32,3],[43,7,32,5],[43,11,32,9],[43,12,32,10],[44,2,33,0],[44,3,33,1],[45,2,35,0],[45,8,35,6,"getVisibilityWatcher"],[45,28,35,26],[45,31,35,29,"getVisibilityWatcher"],[45,32,35,29],[45,37,37,5],[46,4,38,2],[46,8,38,6,"firstHiddenTime"],[46,23,38,21],[46,26,38,24],[46,27,38,25],[46,29,38,27],[47,6,39,4],[48,6,40,4],[49,6,41,4],[50,6,42,4],[51,6,43,4,"firstHiddenTime"],[51,21,43,19],[51,24,43,22,"initHiddenTime"],[51,38,43,36],[51,39,43,37],[51,40,43,38],[52,6,44,4,"trackChanges"],[52,18,44,16],[52,19,44,17],[52,20,44,18],[53,4,45,2],[54,4,46,2],[54,11,46,9],[55,6,47,4],[55,10,47,8,"firstHiddenTime"],[55,25,47,23,"firstHiddenTime"],[55,26,47,23],[55,28,47,26],[56,8,48,6],[56,15,48,13,"firstHiddenTime"],[56,30,48,28],[57,6,49,4],[58,4,50,2],[58,5,50,3],[59,2,51,0],[59,3,51,1],[60,0,51,2],[60,3]],"functionMap":{"names":["<global>","initHiddenTime","trackChanges","onHidden$argument_0","getVisibilityWatcher","get__firstHiddenTime"],"mappings":"AAA;uBCqB;CDI;qBEE;WCE;GDE;CFC;6BIE;ICY;KDE;CJE"},"hasCjsExports":false},"type":"js/module"}]}