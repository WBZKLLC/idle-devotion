{"dependencies":[{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"API_BASE\", {\n    enumerable: true,\n    get: function () {\n      return API_BASE;\n    }\n  });\n  exports.apiUrl = apiUrl;\n  exports.getAuthHeaders = getAuthHeaders;\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[0], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  /**\n   * Centralized API Configuration\n   * \n   * Single source of truth for API base URL across all platforms.\n   * Web preview, device, and tunnel all use this.\n   */\n\n  /**\n   * Get the API base URL based on platform and environment.\n   * \n   * Priority:\n   * 1. EXPO_PUBLIC_BACKEND_URL (if set)\n   * 2. EXPO_PUBLIC_API_URL (legacy fallback)\n   * 3. Platform-specific defaults\n   */\n  function getApiBaseUrl() {\n    // Check environment variables\n    const backendUrl = process.env.EXPO_PUBLIC_BACKEND_URL;\n    const apiUrl = process.env.EXPO_PUBLIC_API_URL;\n\n    // Use explicitly set URLs first\n    if (backendUrl) {\n      return backendUrl;\n    }\n    if (apiUrl) {\n      return apiUrl;\n    }\n\n    // Platform-specific defaults when no env var is set\n    if (Platform.default.OS === 'web') {\n      // Web preview: use relative paths (assumes proxy is configured)\n      // If no proxy, this will fail - but that's expected\n      return '';\n    }\n\n    // Native device: default to localhost:8001 (won't work on real device without tunnel)\n    // In production, EXPO_PUBLIC_BACKEND_URL should always be set\n    return 'http://localhost:8001';\n  }\n\n  /**\n   * The API base URL - use this everywhere instead of hardcoding.\n   * \n   * Usage:\n   *   import { API_BASE } from '@/lib/api/config';\n   *   fetch(`${API_BASE}/api/endpoint`, { ... });\n   */\n  const API_BASE = getApiBaseUrl();\n\n  /**\n   * Construct a full API URL.\n   * \n   * @param path - The API path (e.g., '/api/daily/status')\n   * @returns Full URL with base\n   */\n  function apiUrl(path) {\n    // Ensure path starts with /\n    const normalizedPath = path.startsWith('/') ? path : `/${path}`;\n    return `${API_BASE}${normalizedPath}`;\n  }\n\n  /**\n   * Get auth headers for API requests.\n   * \n   * @param token - JWT token\n   * @returns Headers object with Authorization\n   */\n  function getAuthHeaders(token) {\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n\n  // Log the API base URL in development for debugging\n  if (__DEV__) {\n    console.log('[API Config] Base URL:', API_BASE || '(relative paths)');\n    console.log('[API Config] Platform:', Platform.default.OS);\n\n    // WARN if API_BASE is empty - likely means env var not picked up\n    if (!API_BASE) {\n      console.warn('[API Config] ⚠️ API_BASE is empty! ' + 'Set EXPO_PUBLIC_BACKEND_URL in .env for web preview to work. ' + 'Falling back to relative paths (will 404 if no proxy configured).');\n    }\n  }\n});","lineCount":106,"map":[[12,2,51,0,"Object"],[12,8,51,0],[12,9,51,0,"defineProperty"],[12,23,51,0],[12,24,51,0,"exports"],[12,31,51,0],[13,4,51,0,"enumerable"],[13,14,51,0],[14,4,51,0,"get"],[14,7,51,0],[14,18,51,0,"get"],[14,19,51,0],[15,6,51,0],[15,13,51,0,"API_BASE"],[15,21,51,0],[16,4,51,0],[17,2,51,0],[18,2,59,0,"exports"],[18,9,59,0],[18,10,59,0,"apiUrl"],[18,16,59,0],[18,19,59,0,"apiUrl"],[18,25,59,0],[19,2,71,0,"exports"],[19,9,71,0],[19,10,71,0,"getAuthHeaders"],[19,24,71,0],[19,27,71,0,"getAuthHeaders"],[19,41,71,0],[20,2,76,1],[20,6,76,1,"_reactNativeWebDistExportsPlatform"],[20,40,76,1],[20,43,76,1,"require"],[20,50,76,1],[20,51,76,1,"_dependencyMap"],[20,65,76,1],[21,2,76,1],[21,6,76,1,"Platform"],[21,14,76,1],[21,17,76,1,"_interopDefault"],[21,32,76,1],[21,33,76,1,"_reactNativeWebDistExportsPlatform"],[21,67,76,1],[22,2,1,0],[23,0,2,0],[24,0,3,0],[25,0,4,0],[26,0,5,0],[27,0,6,0],[29,2,10,0],[30,0,11,0],[31,0,12,0],[32,0,13,0],[33,0,14,0],[34,0,15,0],[35,0,16,0],[36,0,17,0],[37,2,18,0],[37,11,18,9,"getApiBaseUrl"],[37,24,18,22,"getApiBaseUrl"],[37,25,18,22],[37,27,18,33],[38,4,19,2],[39,4,20,2],[39,10,20,8,"backendUrl"],[39,20,20,18],[39,23,20,21,"process"],[39,30,20,28],[39,31,20,29,"env"],[39,34,20,32],[39,35,20,33,"EXPO_PUBLIC_BACKEND_URL"],[39,58,20,56],[40,4,21,2],[40,10,21,8,"apiUrl"],[40,16,21,14],[40,19,21,17,"process"],[40,26,21,24],[40,27,21,25,"env"],[40,30,21,28],[40,31,21,29,"EXPO_PUBLIC_API_URL"],[40,50,21,48],[42,4,23,2],[43,4,24,2],[43,8,24,6,"backendUrl"],[43,18,24,16],[43,20,24,18],[44,6,25,4],[44,13,25,11,"backendUrl"],[44,23,25,21],[45,4,26,2],[46,4,28,2],[46,8,28,6,"apiUrl"],[46,14,28,12],[46,16,28,14],[47,6,29,4],[47,13,29,11,"apiUrl"],[47,19,29,17],[48,4,30,2],[50,4,32,2],[51,4,33,2],[51,8,33,6,"Platform"],[51,16,33,14],[51,17,33,14,"default"],[51,24,33,14],[51,25,33,15,"OS"],[51,27,33,17],[51,32,33,22],[51,37,33,27],[51,39,33,29],[52,6,34,4],[53,6,35,4],[54,6,36,4],[54,13,36,11],[54,15,36,13],[55,4,37,2],[57,4,39,2],[58,4,40,2],[59,4,41,2],[59,11,41,9],[59,34,41,32],[60,2,42,0],[62,2,44,0],[63,0,45,0],[64,0,46,0],[65,0,47,0],[66,0,48,0],[67,0,49,0],[68,0,50,0],[69,2,51,7],[69,8,51,13,"API_BASE"],[69,16,51,21],[69,19,51,24,"getApiBaseUrl"],[69,32,51,37],[69,33,51,38],[69,34,51,39],[71,2,53,0],[72,0,54,0],[73,0,55,0],[74,0,56,0],[75,0,57,0],[76,0,58,0],[77,2,59,7],[77,11,59,16,"apiUrl"],[77,17,59,22,"apiUrl"],[77,18,59,23,"path"],[77,22,59,35],[77,24,59,45],[78,4,60,2],[79,4,61,2],[79,10,61,8,"normalizedPath"],[79,24,61,22],[79,27,61,25,"path"],[79,31,61,29],[79,32,61,30,"startsWith"],[79,42,61,40],[79,43,61,41],[79,46,61,44],[79,47,61,45],[79,50,61,48,"path"],[79,54,61,52],[79,57,61,55],[79,61,61,59,"path"],[79,65,61,63],[79,67,61,65],[80,4,62,2],[80,11,62,9],[80,14,62,12,"API_BASE"],[80,22,62,20],[80,25,62,23,"normalizedPath"],[80,39,62,37],[80,41,62,39],[81,2,63,0],[83,2,65,0],[84,0,66,0],[85,0,67,0],[86,0,68,0],[87,0,69,0],[88,0,70,0],[89,2,71,7],[89,11,71,16,"getAuthHeaders"],[89,25,71,30,"getAuthHeaders"],[89,26,71,31,"token"],[89,31,71,44],[89,33,71,70],[90,4,72,2],[90,11,72,9],[91,6,73,4],[91,20,73,18],[91,22,73,20],[91,40,73,38],[92,6,74,4],[92,21,74,19],[92,23,74,21],[92,33,74,31,"token"],[92,38,74,36],[93,4,75,2],[93,5,75,3],[94,2,76,0],[96,2,78,0],[97,2,79,0],[97,6,79,4,"__DEV__"],[97,13,79,11],[97,15,79,13],[98,4,80,2,"console"],[98,11,80,9],[98,12,80,10,"log"],[98,15,80,13],[98,16,80,14],[98,40,80,38],[98,42,80,40,"API_BASE"],[98,50,80,48],[98,54,80,52],[98,72,80,70],[98,73,80,71],[99,4,81,2,"console"],[99,11,81,9],[99,12,81,10,"log"],[99,15,81,13],[99,16,81,14],[99,40,81,38],[99,42,81,40,"Platform"],[99,50,81,48],[99,51,81,48,"default"],[99,58,81,48],[99,59,81,49,"OS"],[99,61,81,51],[99,62,81,52],[101,4,83,2],[102,4,84,2],[102,8,84,6],[102,9,84,7,"API_BASE"],[102,17,84,15],[102,19,84,17],[103,6,85,4,"console"],[103,13,85,11],[103,14,85,12,"warn"],[103,18,85,16],[103,19,86,6],[103,56,86,43],[103,59,87,6],[103,122,87,69],[103,125,88,6],[103,192,89,4],[103,193,89,5],[104,4,90,2],[105,2,91,0],[106,0,91,1],[106,3]],"functionMap":{"names":["<global>","getApiBaseUrl","apiUrl","getAuthHeaders"],"mappings":"AAA;ACiB;CDwB;OEiB;CFI;OGQ;CHK"},"hasCjsExports":false},"type":"js/module"}]}