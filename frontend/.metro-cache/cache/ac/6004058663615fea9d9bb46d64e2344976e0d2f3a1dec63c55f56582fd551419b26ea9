{"dependencies":[{"name":"./node.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":13,"index":77},"end":{"line":3,"column":33,"index":97}}],"key":"i0CEVblbl+Ewn+OoAZJmuV7+ezU=","exportNames":["*"],"imports":1}},{"name":"./worldwide.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":18,"index":117},"end":{"line":4,"column":43,"index":142}}],"key":"SrQUD3Ho0bI6Tzb2C+2O5n+17C0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var node = require(_dependencyMap[0], \"./node.js\");\n  var worldwide = require(_dependencyMap[1], \"./worldwide.js\");\n\n  // eslint-disable-next-line deprecation/deprecation\n  var WINDOW = worldwide.getGlobalObject();\n\n  /**\n   * An object that can return the current timestamp in seconds since the UNIX epoch.\n   */\n\n  /**\n   * A TimestampSource implementation for environments that do not support the Performance Web API natively.\n   *\n   * Note that this TimestampSource does not use a monotonic clock. A call to `nowSeconds` may return a timestamp earlier\n   * than a previously returned value. We do not try to emulate a monotonic behavior in order to facilitate debugging. It\n   * is more obvious to explain \"why does my span have negative duration\" than \"why my spans have zero duration\".\n   */\n  var dateTimestampSource = {\n    nowSeconds: () => Date.now() / 1000\n  };\n\n  /**\n   * A partial definition of the [Performance Web API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}\n   * for accessing a high-resolution monotonic clock.\n   */\n\n  /**\n   * Returns a wrapper around the native Performance API browser implementation, or undefined for browsers that do not\n   * support the API.\n   *\n   * Wrapping the native API works around differences in behavior from different browsers.\n   */\n  function getBrowserPerformance() {\n    var performance = WINDOW.performance;\n    if (!performance || !performance.now) {\n      return undefined;\n    }\n\n    // Replace performance.timeOrigin with our own timeOrigin based on Date.now().\n    //\n    // This is a partial workaround for browsers reporting performance.timeOrigin such that performance.timeOrigin +\n    // performance.now() gives a date arbitrarily in the past.\n    //\n    // Additionally, computing timeOrigin in this way fills the gap for browsers where performance.timeOrigin is\n    // undefined.\n    //\n    // The assumption that performance.timeOrigin + performance.now() ~= Date.now() is flawed, but we depend on it to\n    // interact with data coming out of performance entries.\n    //\n    // Note that despite recommendations against it in the spec, browsers implement the Performance API with a clock that\n    // might stop when the computer is asleep (and perhaps under other circumstances). Such behavior causes\n    // performance.timeOrigin + performance.now() to have an arbitrary skew over Date.now(). In laptop computers, we have\n    // observed skews that can be as long as days, weeks or months.\n    //\n    // See https://github.com/getsentry/sentry-javascript/issues/2590.\n    //\n    // BUG: despite our best intentions, this workaround has its limitations. It mostly addresses timings of pageload\n    // transactions, but ignores the skew built up over time that can aversely affect timestamps of navigation\n    // transactions of long-lived web pages.\n    var timeOrigin = Date.now() - performance.now();\n    return {\n      now: () => performance.now(),\n      timeOrigin\n    };\n  }\n\n  /**\n   * Returns the native Performance API implementation from Node.js. Returns undefined in old Node.js versions that don't\n   * implement the API.\n   */\n  function getNodePerformance() {\n    try {\n      var perfHooks = node.dynamicRequire(module, 'perf_hooks');\n      return perfHooks.performance;\n    } catch (_) {\n      return undefined;\n    }\n  }\n\n  /**\n   * The Performance API implementation for the current platform, if available.\n   */\n  var platformPerformance = node.isNodeEnv() ? getNodePerformance() : getBrowserPerformance();\n  var timestampSource = platformPerformance === undefined ? dateTimestampSource : {\n    nowSeconds: () => (platformPerformance.timeOrigin + platformPerformance.now()) / 1000\n  };\n\n  /**\n   * Returns a timestamp in seconds since the UNIX epoch using the Date API.\n   */\n  var dateTimestampInSeconds = dateTimestampSource.nowSeconds.bind(dateTimestampSource);\n\n  /**\n   * Returns a timestamp in seconds since the UNIX epoch using either the Performance or Date APIs, depending on the\n   * availability of the Performance API.\n   *\n   * See `usingPerformanceAPI` to test whether the Performance API is used.\n   *\n   * BUG: Note that because of how browsers implement the Performance API, the clock might stop when the computer is\n   * asleep. This creates a skew between `dateTimestampInSeconds` and `timestampInSeconds`. The\n   * skew can grow to arbitrary amounts like days, weeks or months.\n   * See https://github.com/getsentry/sentry-javascript/issues/2590.\n   */\n  var timestampInSeconds = timestampSource.nowSeconds.bind(timestampSource);\n\n  /**\n   * Re-exported with an old name for backwards-compatibility.\n   * TODO (v8): Remove this\n   *\n   * @deprecated Use `timestampInSeconds` instead.\n   */\n  var timestampWithMs = timestampInSeconds;\n\n  /**\n   * A boolean that is true when timestampInSeconds uses the Performance API to produce monotonic timestamps.\n   */\n  var usingPerformanceAPI = platformPerformance !== undefined;\n\n  /**\n   * Internal helper to store what is the source of browserPerformanceTimeOrigin below. For debugging only.\n   */\n  exports._browserPerformanceTimeOriginMode = void 0;\n\n  /**\n   * The number of milliseconds since the UNIX epoch. This value is only usable in a browser, and only when the\n   * performance API is available.\n   */\n  var browserPerformanceTimeOrigin = (() => {\n    // Unfortunately browsers may report an inaccurate time origin data, through either performance.timeOrigin or\n    // performance.timing.navigationStart, which results in poor results in performance data. We only treat time origin\n    // data as reliable if they are within a reasonable threshold of the current time.\n\n    var performance = WINDOW.performance;\n    if (!performance || !performance.now) {\n      exports._browserPerformanceTimeOriginMode = 'none';\n      return undefined;\n    }\n    var threshold = 3600 * 1000;\n    var performanceNow = performance.now();\n    var dateNow = Date.now();\n\n    // if timeOrigin isn't available set delta to threshold so it isn't used\n    var timeOriginDelta = performance.timeOrigin ? Math.abs(performance.timeOrigin + performanceNow - dateNow) : threshold;\n    var timeOriginIsReliable = timeOriginDelta < threshold;\n\n    // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin\n    // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.\n    // Also as of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always\n    // a valid fallback. In the absence of an initial time provided by the browser, fallback to the current time from the\n    // Date API.\n    // eslint-disable-next-line deprecation/deprecation\n    var navigationStart = performance.timing && performance.timing.navigationStart;\n    var hasNavigationStart = typeof navigationStart === 'number';\n    // if navigationStart isn't available set delta to threshold so it isn't used\n    var navigationStartDelta = hasNavigationStart ? Math.abs(navigationStart + performanceNow - dateNow) : threshold;\n    var navigationStartIsReliable = navigationStartDelta < threshold;\n    if (timeOriginIsReliable || navigationStartIsReliable) {\n      // Use the more reliable time origin\n      if (timeOriginDelta <= navigationStartDelta) {\n        exports._browserPerformanceTimeOriginMode = 'timeOrigin';\n        return performance.timeOrigin;\n      } else {\n        exports._browserPerformanceTimeOriginMode = 'navigationStart';\n        return navigationStart;\n      }\n    }\n\n    // Either both timeOrigin and navigationStart are skewed or neither is available, fallback to Date.\n    exports._browserPerformanceTimeOriginMode = 'dateNow';\n    return dateNow;\n  })();\n  exports.browserPerformanceTimeOrigin = browserPerformanceTimeOrigin;\n  exports.dateTimestampInSeconds = dateTimestampInSeconds;\n  exports.timestampInSeconds = timestampInSeconds;\n  exports.timestampWithMs = timestampWithMs;\n  exports.usingPerformanceAPI = usingPerformanceAPI;\n});","lineCount":181,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,6,3,6,"node"],[5,10,3,10],[5,13,3,13,"require"],[5,20,3,20],[5,21,3,20,"_dependencyMap"],[5,35,3,20],[5,51,3,32],[5,52,3,33],[6,2,4,0],[6,6,4,6,"worldwide"],[6,15,4,15],[6,18,4,18,"require"],[6,25,4,25],[6,26,4,25,"_dependencyMap"],[6,40,4,25],[6,61,4,42],[6,62,4,43],[8,2,6,0],[9,2,7,0],[9,6,7,6,"WINDOW"],[9,12,7,12],[9,15,7,15,"worldwide"],[9,24,7,24],[9,25,7,25,"getGlobalObject"],[9,40,7,40],[9,41,7,41],[9,42,7,42],[11,2,9,0],[12,0,10,0],[13,0,11,0],[15,2,13,0],[16,0,14,0],[17,0,15,0],[18,0,16,0],[19,0,17,0],[20,0,18,0],[21,0,19,0],[22,2,20,0],[22,6,20,6,"dateTimestampSource"],[22,25,20,25],[22,28,20,28],[23,4,21,2,"nowSeconds"],[23,14,21,12],[23,16,21,14,"nowSeconds"],[23,17,21,14],[23,22,21,20,"Date"],[23,26,21,24],[23,27,21,25,"now"],[23,30,21,28],[23,31,21,29],[23,32,21,30],[23,35,21,33],[24,2,22,0],[24,3,22,1],[26,2,24,0],[27,0,25,0],[28,0,26,0],[29,0,27,0],[31,2,29,0],[32,0,30,0],[33,0,31,0],[34,0,32,0],[35,0,33,0],[36,0,34,0],[37,2,35,0],[37,11,35,9,"getBrowserPerformance"],[37,32,35,30,"getBrowserPerformance"],[37,33,35,30],[37,35,35,33],[38,4,36,2],[38,8,36,10,"performance"],[38,19,36,21],[38,22,36,26,"WINDOW"],[38,28,36,32],[38,29,36,10,"performance"],[38,40,36,21],[39,4,37,2],[39,8,37,6],[39,9,37,7,"performance"],[39,20,37,18],[39,24,37,22],[39,25,37,23,"performance"],[39,36,37,34],[39,37,37,35,"now"],[39,40,37,38],[39,42,37,40],[40,6,38,4],[40,13,38,11,"undefined"],[40,22,38,20],[41,4,39,2],[43,4,41,2],[44,4,42,2],[45,4,43,2],[46,4,44,2],[47,4,45,2],[48,4,46,2],[49,4,47,2],[50,4,48,2],[51,4,49,2],[52,4,50,2],[53,4,51,2],[54,4,52,2],[55,4,53,2],[56,4,54,2],[57,4,55,2],[58,4,56,2],[59,4,57,2],[60,4,58,2],[61,4,59,2],[62,4,60,2],[63,4,61,2],[64,4,62,2],[64,8,62,8,"timeOrigin"],[64,18,62,18],[64,21,62,21,"Date"],[64,25,62,25],[64,26,62,26,"now"],[64,29,62,29],[64,30,62,30],[64,31,62,31],[64,34,62,34,"performance"],[64,45,62,45],[64,46,62,46,"now"],[64,49,62,49],[64,50,62,50],[64,51,62,51],[65,4,64,2],[65,11,64,9],[66,6,65,4,"now"],[66,9,65,7],[66,11,65,9,"now"],[66,12,65,9],[66,17,65,15,"performance"],[66,28,65,26],[66,29,65,27,"now"],[66,32,65,30],[66,33,65,31],[66,34,65,32],[67,6,66,4,"timeOrigin"],[68,4,67,2],[68,5,67,3],[69,2,68,0],[71,2,70,0],[72,0,71,0],[73,0,72,0],[74,0,73,0],[75,2,74,0],[75,11,74,9,"getNodePerformance"],[75,29,74,27,"getNodePerformance"],[75,30,74,27],[75,32,74,30],[76,4,75,2],[76,8,75,6],[77,6,76,4],[77,10,76,10,"perfHooks"],[77,19,76,19],[77,22,76,22,"node"],[77,26,76,26],[77,27,76,27,"dynamicRequire"],[77,41,76,41],[77,42,76,42,"module"],[77,48,76,48],[77,50,76,50],[77,62,76,62],[77,63,76,63],[78,6,77,4],[78,13,77,11,"perfHooks"],[78,22,77,20],[78,23,77,21,"performance"],[78,34,77,32],[79,4,78,2],[79,5,78,3],[79,6,78,4],[79,13,78,11,"_"],[79,14,78,12],[79,16,78,14],[80,6,79,4],[80,13,79,11,"undefined"],[80,22,79,20],[81,4,80,2],[82,2,81,0],[84,2,83,0],[85,0,84,0],[86,0,85,0],[87,2,86,0],[87,6,86,6,"platformPerformance"],[87,25,86,25],[87,28,86,28,"node"],[87,32,86,32],[87,33,86,33,"isNodeEnv"],[87,42,86,42],[87,43,86,43],[87,44,86,44],[87,47,86,47,"getNodePerformance"],[87,65,86,65],[87,66,86,66],[87,67,86,67],[87,70,86,70,"getBrowserPerformance"],[87,91,86,91],[87,92,86,92],[87,93,86,93],[88,2,88,0],[88,6,88,6,"timestampSource"],[88,21,88,21],[88,24,89,2,"platformPerformance"],[88,43,89,21],[88,48,89,26,"undefined"],[88,57,89,35],[88,60,90,6,"dateTimestampSource"],[88,79,90,25],[88,82,91,6],[89,4,92,8,"nowSeconds"],[89,14,92,18],[89,16,92,20,"nowSeconds"],[89,17,92,20],[89,22,92,26],[89,23,92,27,"platformPerformance"],[89,42,92,46],[89,43,92,47,"timeOrigin"],[89,53,92,57],[89,56,92,60,"platformPerformance"],[89,75,92,79],[89,76,92,80,"now"],[89,79,92,83],[89,80,92,84],[89,81,92,85],[89,85,92,89],[90,2,93,6],[90,3,93,7],[92,2,95,0],[93,0,96,0],[94,0,97,0],[95,2,98,0],[95,6,98,6,"dateTimestampInSeconds"],[95,28,98,28],[95,31,98,31,"dateTimestampSource"],[95,50,98,50],[95,51,98,51,"nowSeconds"],[95,61,98,61],[95,62,98,62,"bind"],[95,66,98,66],[95,67,98,67,"dateTimestampSource"],[95,86,98,86],[95,87,98,87],[97,2,100,0],[98,0,101,0],[99,0,102,0],[100,0,103,0],[101,0,104,0],[102,0,105,0],[103,0,106,0],[104,0,107,0],[105,0,108,0],[106,0,109,0],[107,0,110,0],[108,2,111,0],[108,6,111,6,"timestampInSeconds"],[108,24,111,24],[108,27,111,27,"timestampSource"],[108,42,111,42],[108,43,111,43,"nowSeconds"],[108,53,111,53],[108,54,111,54,"bind"],[108,58,111,58],[108,59,111,59,"timestampSource"],[108,74,111,74],[108,75,111,75],[110,2,113,0],[111,0,114,0],[112,0,115,0],[113,0,116,0],[114,0,117,0],[115,0,118,0],[116,2,119,0],[116,6,119,6,"timestampWithMs"],[116,21,119,21],[116,24,119,24,"timestampInSeconds"],[116,42,119,42],[118,2,121,0],[119,0,122,0],[120,0,123,0],[121,2,124,0],[121,6,124,6,"usingPerformanceAPI"],[121,25,124,25],[121,28,124,28,"platformPerformance"],[121,47,124,47],[121,52,124,52,"undefined"],[121,61,124,61],[123,2,126,0],[124,0,127,0],[125,0,128,0],[126,2,129,0,"exports"],[126,9,129,7],[126,10,129,8,"_browserPerformanceTimeOriginMode"],[126,43,129,41],[126,46,129,44],[126,51,129,49],[126,52,129,50],[128,2,131,0],[129,0,132,0],[130,0,133,0],[131,0,134,0],[132,2,135,0],[132,6,135,6,"browserPerformanceTimeOrigin"],[132,34,135,34],[132,37,135,37],[132,38,135,38],[132,44,135,44],[133,4,136,2],[134,4,137,2],[135,4,138,2],[137,4,140,2],[137,8,140,10,"performance"],[137,19,140,21],[137,22,140,26,"WINDOW"],[137,28,140,32],[137,29,140,10,"performance"],[137,40,140,21],[138,4,141,2],[138,8,141,6],[138,9,141,7,"performance"],[138,20,141,18],[138,24,141,22],[138,25,141,23,"performance"],[138,36,141,34],[138,37,141,35,"now"],[138,40,141,38],[138,42,141,40],[139,6,142,4,"exports"],[139,13,142,11],[139,14,142,12,"_browserPerformanceTimeOriginMode"],[139,47,142,45],[139,50,142,48],[139,56,142,54],[140,6,143,4],[140,13,143,11,"undefined"],[140,22,143,20],[141,4,144,2],[142,4,146,2],[142,8,146,8,"threshold"],[142,17,146,17],[142,20,146,20],[142,24,146,24],[142,27,146,27],[142,31,146,31],[143,4,147,2],[143,8,147,8,"performanceNow"],[143,22,147,22],[143,25,147,25,"performance"],[143,36,147,36],[143,37,147,37,"now"],[143,40,147,40],[143,41,147,41],[143,42,147,42],[144,4,148,2],[144,8,148,8,"dateNow"],[144,15,148,15],[144,18,148,18,"Date"],[144,22,148,22],[144,23,148,23,"now"],[144,26,148,26],[144,27,148,27],[144,28,148,28],[146,4,150,2],[147,4,151,2],[147,8,151,8,"timeOriginDelta"],[147,23,151,23],[147,26,151,26,"performance"],[147,37,151,37],[147,38,151,38,"timeOrigin"],[147,48,151,48],[147,51,152,6,"Math"],[147,55,152,10],[147,56,152,11,"abs"],[147,59,152,14],[147,60,152,15,"performance"],[147,71,152,26],[147,72,152,27,"timeOrigin"],[147,82,152,37],[147,85,152,40,"performanceNow"],[147,99,152,54],[147,102,152,57,"dateNow"],[147,109,152,64],[147,110,152,65],[147,113,153,6,"threshold"],[147,122,153,15],[148,4,154,2],[148,8,154,8,"timeOriginIsReliable"],[148,28,154,28],[148,31,154,31,"timeOriginDelta"],[148,46,154,46],[148,49,154,49,"threshold"],[148,58,154,58],[150,4,156,2],[151,4,157,2],[152,4,158,2],[153,4,159,2],[154,4,160,2],[155,4,161,2],[156,4,162,2],[156,8,162,8,"navigationStart"],[156,23,162,23],[156,26,162,26,"performance"],[156,37,162,37],[156,38,162,38,"timing"],[156,44,162,44],[156,48,162,48,"performance"],[156,59,162,59],[156,60,162,60,"timing"],[156,66,162,66],[156,67,162,67,"navigationStart"],[156,82,162,82],[157,4,163,2],[157,8,163,8,"hasNavigationStart"],[157,26,163,26],[157,29,163,29],[157,36,163,36,"navigationStart"],[157,51,163,51],[157,56,163,56],[157,64,163,64],[158,4,164,2],[159,4,165,2],[159,8,165,8,"navigationStartDelta"],[159,28,165,28],[159,31,165,31,"hasNavigationStart"],[159,49,165,49],[159,52,165,52,"Math"],[159,56,165,56],[159,57,165,57,"abs"],[159,60,165,60],[159,61,165,61,"navigationStart"],[159,76,165,76],[159,79,165,79,"performanceNow"],[159,93,165,93],[159,96,165,96,"dateNow"],[159,103,165,103],[159,104,165,104],[159,107,165,107,"threshold"],[159,116,165,116],[160,4,166,2],[160,8,166,8,"navigationStartIsReliable"],[160,33,166,33],[160,36,166,36,"navigationStartDelta"],[160,56,166,56],[160,59,166,59,"threshold"],[160,68,166,68],[161,4,168,2],[161,8,168,6,"timeOriginIsReliable"],[161,28,168,26],[161,32,168,30,"navigationStartIsReliable"],[161,57,168,55],[161,59,168,57],[162,6,169,4],[163,6,170,4],[163,10,170,8,"timeOriginDelta"],[163,25,170,23],[163,29,170,27,"navigationStartDelta"],[163,49,170,47],[163,51,170,49],[164,8,171,6,"exports"],[164,15,171,13],[164,16,171,14,"_browserPerformanceTimeOriginMode"],[164,49,171,47],[164,52,171,50],[164,64,171,62],[165,8,172,6],[165,15,172,13,"performance"],[165,26,172,24],[165,27,172,25,"timeOrigin"],[165,37,172,35],[166,6,173,4],[166,7,173,5],[166,13,173,11],[167,8,174,6,"exports"],[167,15,174,13],[167,16,174,14,"_browserPerformanceTimeOriginMode"],[167,49,174,47],[167,52,174,50],[167,69,174,67],[168,8,175,6],[168,15,175,13,"navigationStart"],[168,30,175,28],[169,6,176,4],[170,4,177,2],[172,4,179,2],[173,4,180,2,"exports"],[173,11,180,9],[173,12,180,10,"_browserPerformanceTimeOriginMode"],[173,45,180,43],[173,48,180,46],[173,57,180,55],[174,4,181,2],[174,11,181,9,"dateNow"],[174,18,181,16],[175,2,182,0],[175,3,182,1],[175,5,182,3],[175,6,182,4],[176,2,184,0,"exports"],[176,9,184,7],[176,10,184,8,"browserPerformanceTimeOrigin"],[176,38,184,36],[176,41,184,39,"browserPerformanceTimeOrigin"],[176,69,184,67],[177,2,185,0,"exports"],[177,9,185,7],[177,10,185,8,"dateTimestampInSeconds"],[177,32,185,30],[177,35,185,33,"dateTimestampInSeconds"],[177,57,185,55],[178,2,186,0,"exports"],[178,9,186,7],[178,10,186,8,"timestampInSeconds"],[178,28,186,26],[178,31,186,29,"timestampInSeconds"],[178,49,186,47],[179,2,187,0,"exports"],[179,9,187,7],[179,10,187,8,"timestampWithMs"],[179,25,187,23],[179,28,187,26,"timestampWithMs"],[179,43,187,41],[180,2,188,0,"exports"],[180,9,188,7],[180,10,188,8,"usingPerformanceAPI"],[180,29,188,27],[180,32,188,30,"usingPerformanceAPI"],[180,51,188,49],[181,0,188,50],[181,3]],"functionMap":{"names":["<global>","dateTimestampSource.nowSeconds","getBrowserPerformance","now","getNodePerformance","nowSeconds","<anonymous>"],"mappings":"AAA;cCoB,uBD;AEc;SC8B,uBD;CFG;AIM;CJO;oBKW,yEL;sCM2C;CN+C"},"hasCjsExports":true},"type":"js/module"}]}