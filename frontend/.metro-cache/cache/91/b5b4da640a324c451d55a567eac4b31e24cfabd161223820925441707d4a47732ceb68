{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.validateConfig = validateConfig;\n  exports.getBackendUrl = getBackendUrl;\n  Object.defineProperty(exports, \"getEnvironmentMode\", {\n    enumerable: true,\n    get: function () {\n      return getEnvironmentMode;\n    }\n  });\n  Object.defineProperty(exports, \"isProductionEnvironment\", {\n    enumerable: true,\n    get: function () {\n      return isProductionEnvironment;\n    }\n  });\n  Object.defineProperty(exports, \"isDevelopmentEnvironment\", {\n    enumerable: true,\n    get: function () {\n      return isDevelopmentEnvironment;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  // /app/frontend/lib/config/validate.ts\n  // Startup config validation - catches misconfig early\n  // Phase 3.15: Enhanced with production build assertions\n  // Phase 3.15 P0 Revision B: Explicit environment detection via EXPO_PUBLIC_ENV\n\n  /**\n   * Environment modes for explicit control\n   * EXPO_PUBLIC_ENV takes precedence over __DEV__ for production detection\n   */\n\n  /**\n   * Get the explicit environment mode\n   * Priority:\n   * 1. EXPO_PUBLIC_ENV if set (explicit control)\n   * 2. __DEV__ as fallback (dev vs non-dev)\n   */\n  function getEnvironmentMode() {\n    const explicitEnv = _expoVirtualEnv.env.EXPO_PUBLIC_ENV?.toLowerCase();\n    if (explicitEnv === 'production') return 'production';\n    if (explicitEnv === 'staging') return 'staging';\n    if (explicitEnv === 'development') return 'development';\n\n    // Fallback to __DEV__ if no explicit env set\n    return __DEV__ ? 'development' : 'production';\n  }\n\n  /**\n   * Detect if this is a production environment\n   * Uses explicit EXPO_PUBLIC_ENV if set, falls back to __DEV__\n   */\n  function isProductionEnvironment() {\n    return getEnvironmentMode() === 'production';\n  }\n\n  /**\n   * Detect if this is a development environment\n   */\n  function isDevelopmentEnvironment() {\n    return getEnvironmentMode() === 'development';\n  }\n\n  /**\n   * Validate critical configuration at startup\n   * \n   * Behavior by environment:\n   * - development: throws on errors (fail-fast for devs)\n   * - staging: logs errors but doesn't crash\n   * - production: logs errors but doesn't crash (graceful degradation)\n   * \n   * Phase 3.15: Enhanced with production-specific validations\n   * Phase 3.15 P0 Revision B: Uses EXPO_PUBLIC_ENV for explicit control\n   */\n  function validateConfig() {\n    const errors = [];\n    const warnings = [];\n    const envMode = getEnvironmentMode();\n    const isProd = isProductionEnvironment();\n\n    // Log the environment mode for debugging\n    console.log(`[config] Environment mode: ${envMode} (EXPO_PUBLIC_ENV=${_expoVirtualEnv.env.EXPO_PUBLIC_ENV ?? 'not set'}, __DEV__=${__DEV__})`);\n\n    // ==========================================================================\n    // REQUIRED: Backend URL\n    // ==========================================================================\n    const backend = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n    if (!backend) {\n      errors.push('Missing EXPO_PUBLIC_BACKEND_URL');\n    } else if (!backend.startsWith('http://') && !backend.startsWith('https://')) {\n      errors.push('EXPO_PUBLIC_BACKEND_URL must start with http:// or https://');\n    } else if (isProd && !backend.startsWith('https://')) {\n      // Phase 3.15: Production builds SHOULD use HTTPS\n      warnings.push('EXPO_PUBLIC_BACKEND_URL should use https:// in production');\n    }\n\n    // ==========================================================================\n    // RECOMMENDED: Sentry DSN (critical for prod crash reporting)\n    // ==========================================================================\n    const sentryDsn = _expoVirtualEnv.env.EXPO_PUBLIC_SENTRY_DSN;\n    if (!sentryDsn && isProd) {\n      warnings.push('No EXPO_PUBLIC_SENTRY_DSN - crash reporting disabled in production');\n    }\n\n    // ==========================================================================\n    // RECOMMENDED: Analytics (optional but useful for production)\n    // ==========================================================================\n    const analyticsEnabled = _expoVirtualEnv.env.EXPO_PUBLIC_ANALYTICS_ENABLED;\n    if (isProd && analyticsEnabled !== 'true') {\n      // Just informational - analytics is optional\n      console.log('[config] Analytics disabled in production (EXPO_PUBLIC_ANALYTICS_ENABLED !== \"true\")');\n    }\n\n    // ==========================================================================\n    // INFO: RevenueCat (client-side SDK - only warn if missing)\n    // ==========================================================================\n    const revenueCatKey = _expoVirtualEnv.env.EXPO_PUBLIC_REVENUECAT_API_KEY;\n    if (!revenueCatKey && isProd) {\n      warnings.push('No EXPO_PUBLIC_REVENUECAT_API_KEY - RevenueCat SDK disabled');\n    }\n\n    // ==========================================================================\n    // P0 Revision B: Warn if production build without explicit EXPO_PUBLIC_ENV\n    // ==========================================================================\n    if (!__DEV__ && !_expoVirtualEnv.env.EXPO_PUBLIC_ENV) {\n      warnings.push('Release build detected but EXPO_PUBLIC_ENV not set - assuming production (set explicitly for clarity)');\n    }\n\n    // ==========================================================================\n    // Report warnings (logged but don't prevent startup)\n    // ==========================================================================\n    if (warnings.length > 0) {\n      const warningMsg = `[config] Configuration warnings:\\n${warnings.map(w => `  ⚠️ ${w}`).join('\\n')}`;\n      console.warn(warningMsg);\n    }\n\n    // ==========================================================================\n    // Report errors (critical issues)\n    // ==========================================================================\n    if (errors.length > 0) {\n      const message = `[config] Configuration errors:\\n${errors.map(e => `  ❌ ${e}`).join('\\n')}`;\n      if (isDevelopmentEnvironment()) {\n        // In dev, throw to make it obvious\n        throw new Error(message);\n      } else {\n        // In staging/prod, log but don't crash - app may still partially work\n        console.error(message);\n      }\n    }\n\n    // Success\n    if (errors.length === 0) {\n      console.log(`[config] ✅ Configuration validated (${envMode} mode)`);\n    }\n  }\n\n  /**\n   * Get validated backend URL\n   */\n  function getBackendUrl() {\n    const url = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n    if (!url) {\n      throw new Error('EXPO_PUBLIC_BACKEND_URL is not configured');\n    }\n    return url.replace(/\\/$/, ''); // Remove trailing slash\n  }\n\n  /**\n   * Export environment helpers for use elsewhere\n   */\n});","lineCount":176,"map":[[7,2,55,0,"exports"],[7,9,55,0],[7,10,55,0,"validateConfig"],[7,24,55,0],[7,27,55,0,"validateConfig"],[7,41,55,0],[8,2,141,0,"exports"],[8,9,141,0],[8,10,141,0,"getBackendUrl"],[8,23,141,0],[8,26,141,0,"getBackendUrl"],[8,39,141,0],[9,2,152,0,"Object"],[9,8,152,0],[9,9,152,0,"defineProperty"],[9,23,152,0],[9,24,152,0,"exports"],[9,31,152,0],[10,4,152,0,"enumerable"],[10,14,152,0],[11,4,152,0,"get"],[11,7,152,0],[11,18,152,0,"get"],[11,19,152,0],[12,6,152,0],[12,13,152,9,"getEnvironmentMode"],[12,31,152,27],[13,4,152,27],[14,2,152,27],[15,2,152,0,"Object"],[15,8,152,0],[15,9,152,0,"defineProperty"],[15,23,152,0],[15,24,152,0,"exports"],[15,31,152,0],[16,4,152,0,"enumerable"],[16,14,152,0],[17,4,152,0,"get"],[17,7,152,0],[17,18,152,0,"get"],[17,19,152,0],[18,6,152,0],[18,13,152,29,"isProductionEnvironment"],[18,36,152,52],[19,4,152,52],[20,2,152,52],[21,2,152,0,"Object"],[21,8,152,0],[21,9,152,0,"defineProperty"],[21,23,152,0],[21,24,152,0,"exports"],[21,31,152,0],[22,4,152,0,"enumerable"],[22,14,152,0],[23,4,152,0,"get"],[23,7,152,0],[23,18,152,0,"get"],[23,19,152,0],[24,6,152,0],[24,13,152,54,"isDevelopmentEnvironment"],[24,37,152,78],[25,4,152,78],[26,2,152,78],[27,2,152,81],[27,6,152,81,"_expoVirtualEnv"],[27,21,152,81],[27,24,152,81,"require"],[27,31,152,81],[27,32,152,81,"_dependencyMap"],[27,46,152,81],[28,2,1,0],[29,2,2,0],[30,2,3,0],[31,2,4,0],[33,2,6,0],[34,0,7,0],[35,0,8,0],[36,0,9,0],[38,2,12,0],[39,0,13,0],[40,0,14,0],[41,0,15,0],[42,0,16,0],[43,0,17,0],[44,2,18,0],[44,11,18,9,"getEnvironmentMode"],[44,29,18,27,"getEnvironmentMode"],[44,30,18,27],[44,32,18,47],[45,4,19,2],[45,10,19,8,"explicitEnv"],[45,21,19,19],[45,24,19,22,"_expoVirtualEnv"],[45,39,19,22],[45,40,19,22,"env"],[45,43,19,22],[45,44,19,22,"EXPO_PUBLIC_ENV"],[45,59,19,22],[45,61,19,51,"toLowerCase"],[45,72,19,62],[45,73,19,63],[45,74,19,64],[46,4,21,2],[46,8,21,6,"explicitEnv"],[46,19,21,17],[46,24,21,22],[46,36,21,34],[46,38,21,36],[46,45,21,43],[46,57,21,55],[47,4,22,2],[47,8,22,6,"explicitEnv"],[47,19,22,17],[47,24,22,22],[47,33,22,31],[47,35,22,33],[47,42,22,40],[47,51,22,49],[48,4,23,2],[48,8,23,6,"explicitEnv"],[48,19,23,17],[48,24,23,22],[48,37,23,35],[48,39,23,37],[48,46,23,44],[48,59,23,57],[50,4,25,2],[51,4,26,2],[51,11,26,9,"__DEV__"],[51,18,26,16],[51,21,26,19],[51,34,26,32],[51,37,26,35],[51,49,26,47],[52,2,27,0],[54,2,29,0],[55,0,30,0],[56,0,31,0],[57,0,32,0],[58,2,33,0],[58,11,33,9,"isProductionEnvironment"],[58,34,33,32,"isProductionEnvironment"],[58,35,33,32],[58,37,33,44],[59,4,34,2],[59,11,34,9,"getEnvironmentMode"],[59,29,34,27],[59,30,34,28],[59,31,34,29],[59,36,34,34],[59,48,34,46],[60,2,35,0],[62,2,37,0],[63,0,38,0],[64,0,39,0],[65,2,40,0],[65,11,40,9,"isDevelopmentEnvironment"],[65,35,40,33,"isDevelopmentEnvironment"],[65,36,40,33],[65,38,40,45],[66,4,41,2],[66,11,41,9,"getEnvironmentMode"],[66,29,41,27],[66,30,41,28],[66,31,41,29],[66,36,41,34],[66,49,41,47],[67,2,42,0],[69,2,44,0],[70,0,45,0],[71,0,46,0],[72,0,47,0],[73,0,48,0],[74,0,49,0],[75,0,50,0],[76,0,51,0],[77,0,52,0],[78,0,53,0],[79,0,54,0],[80,2,55,7],[80,11,55,16,"validateConfig"],[80,25,55,30,"validateConfig"],[80,26,55,30],[80,28,55,39],[81,4,56,2],[81,10,56,8,"errors"],[81,16,56,24],[81,19,56,27],[81,21,56,29],[82,4,57,2],[82,10,57,8,"warnings"],[82,18,57,26],[82,21,57,29],[82,23,57,31],[83,4,58,2],[83,10,58,8,"envMode"],[83,17,58,15],[83,20,58,18,"getEnvironmentMode"],[83,38,58,36],[83,39,58,37],[83,40,58,38],[84,4,59,2],[84,10,59,8,"isProd"],[84,16,59,14],[84,19,59,17,"isProductionEnvironment"],[84,42,59,40],[84,43,59,41],[84,44,59,42],[86,4,61,2],[87,4,62,2,"console"],[87,11,62,9],[87,12,62,10,"log"],[87,15,62,13],[87,16,62,14],[87,46,62,44,"envMode"],[87,53,62,51],[87,74,62,72,"_expoVirtualEnv"],[87,89,62,72],[87,90,62,72,"env"],[87,93,62,72],[87,94,62,72,"EXPO_PUBLIC_ENV"],[87,109,62,72],[87,113,62,103],[87,122,62,112],[87,135,62,125,"__DEV__"],[87,142,62,132],[87,145,62,135],[87,146,62,136],[89,4,64,2],[90,4,65,2],[91,4,66,2],[92,4,67,2],[92,10,67,8,"backend"],[92,17,67,15],[92,20,67,15,"_expoVirtualEnv"],[92,35,67,15],[92,36,67,15,"env"],[92,39,67,15],[92,40,67,15,"EXPO_PUBLIC_BACKEND_URL"],[92,63,67,53],[93,4,68,2],[93,8,68,6],[93,9,68,7,"backend"],[93,16,68,14],[93,18,68,16],[94,6,69,4,"errors"],[94,12,69,10],[94,13,69,11,"push"],[94,17,69,15],[94,18,69,16],[94,51,69,49],[94,52,69,50],[95,4,70,2],[95,5,70,3],[95,11,70,9],[95,15,70,13],[95,16,70,14,"backend"],[95,23,70,21],[95,24,70,22,"startsWith"],[95,34,70,32],[95,35,70,33],[95,44,70,42],[95,45,70,43],[95,49,70,47],[95,50,70,48,"backend"],[95,57,70,55],[95,58,70,56,"startsWith"],[95,68,70,66],[95,69,70,67],[95,79,70,77],[95,80,70,78],[95,82,70,80],[96,6,71,4,"errors"],[96,12,71,10],[96,13,71,11,"push"],[96,17,71,15],[96,18,71,16],[96,79,71,77],[96,80,71,78],[97,4,72,2],[97,5,72,3],[97,11,72,9],[97,15,72,13,"isProd"],[97,21,72,19],[97,25,72,23],[97,26,72,24,"backend"],[97,33,72,31],[97,34,72,32,"startsWith"],[97,44,72,42],[97,45,72,43],[97,55,72,53],[97,56,72,54],[97,58,72,56],[98,6,73,4],[99,6,74,4,"warnings"],[99,14,74,12],[99,15,74,13,"push"],[99,19,74,17],[99,20,74,18],[99,79,74,77],[99,80,74,78],[100,4,75,2],[102,4,77,2],[103,4,78,2],[104,4,79,2],[105,4,80,2],[105,10,80,8,"sentryDsn"],[105,19,80,17],[105,22,80,17,"_expoVirtualEnv"],[105,37,80,17],[105,38,80,17,"env"],[105,41,80,17],[105,42,80,17,"EXPO_PUBLIC_SENTRY_DSN"],[105,64,80,54],[106,4,81,2],[106,8,81,6],[106,9,81,7,"sentryDsn"],[106,18,81,16],[106,22,81,20,"isProd"],[106,28,81,26],[106,30,81,28],[107,6,82,4,"warnings"],[107,14,82,12],[107,15,82,13,"push"],[107,19,82,17],[107,20,82,18],[107,88,82,86],[107,89,82,87],[108,4,83,2],[110,4,85,2],[111,4,86,2],[112,4,87,2],[113,4,88,2],[113,10,88,8,"analyticsEnabled"],[113,26,88,24],[113,29,88,24,"_expoVirtualEnv"],[113,44,88,24],[113,45,88,24,"env"],[113,48,88,24],[113,49,88,24,"EXPO_PUBLIC_ANALYTICS_ENABLED"],[113,78,88,68],[114,4,89,2],[114,8,89,6,"isProd"],[114,14,89,12],[114,18,89,16,"analyticsEnabled"],[114,34,89,32],[114,39,89,37],[114,45,89,43],[114,47,89,45],[115,6,90,4],[116,6,91,4,"console"],[116,13,91,11],[116,14,91,12,"log"],[116,17,91,15],[116,18,91,16],[116,104,91,102],[116,105,91,103],[117,4,92,2],[119,4,94,2],[120,4,95,2],[121,4,96,2],[122,4,97,2],[122,10,97,8,"revenueCatKey"],[122,23,97,21],[122,26,97,21,"_expoVirtualEnv"],[122,41,97,21],[122,42,97,21,"env"],[122,45,97,21],[122,46,97,21,"EXPO_PUBLIC_REVENUECAT_API_KEY"],[122,76,97,66],[123,4,98,2],[123,8,98,6],[123,9,98,7,"revenueCatKey"],[123,22,98,20],[123,26,98,24,"isProd"],[123,32,98,30],[123,34,98,32],[124,6,99,4,"warnings"],[124,14,99,12],[124,15,99,13,"push"],[124,19,99,17],[124,20,99,18],[124,81,99,79],[124,82,99,80],[125,4,100,2],[127,4,102,2],[128,4,103,2],[129,4,104,2],[130,4,105,2],[130,8,105,6],[130,9,105,7,"__DEV__"],[130,16,105,14],[130,20,105,18],[130,21,105,18,"_expoVirtualEnv"],[130,36,105,18],[130,37,105,18,"env"],[130,40,105,18],[130,41,105,18,"EXPO_PUBLIC_ENV"],[130,56,105,46],[130,58,105,48],[131,6,106,4,"warnings"],[131,14,106,12],[131,15,106,13,"push"],[131,19,106,17],[131,20,106,18],[131,123,106,121],[131,124,106,122],[132,4,107,2],[134,4,109,2],[135,4,110,2],[136,4,111,2],[137,4,112,2],[137,8,112,6,"warnings"],[137,16,112,14],[137,17,112,15,"length"],[137,23,112,21],[137,26,112,24],[137,27,112,25],[137,29,112,27],[138,6,113,4],[138,12,113,10,"warningMsg"],[138,22,113,20],[138,25,113,23],[138,62,113,60,"warnings"],[138,70,113,68],[138,71,113,69,"map"],[138,74,113,72],[138,75,113,73,"w"],[138,76,113,74],[138,80,113,78],[138,88,113,86,"w"],[138,89,113,87],[138,91,113,89],[138,92,113,90],[138,93,113,91,"join"],[138,97,113,95],[138,98,113,96],[138,102,113,100],[138,103,113,101],[138,105,113,103],[139,6,114,4,"console"],[139,13,114,11],[139,14,114,12,"warn"],[139,18,114,16],[139,19,114,17,"warningMsg"],[139,29,114,27],[139,30,114,28],[140,4,115,2],[142,4,117,2],[143,4,118,2],[144,4,119,2],[145,4,120,2],[145,8,120,6,"errors"],[145,14,120,12],[145,15,120,13,"length"],[145,21,120,19],[145,24,120,22],[145,25,120,23],[145,27,120,25],[146,6,121,4],[146,12,121,10,"message"],[146,19,121,17],[146,22,121,20],[146,57,121,55,"errors"],[146,63,121,61],[146,64,121,62,"map"],[146,67,121,65],[146,68,121,66,"e"],[146,69,121,67],[146,73,121,71],[146,80,121,78,"e"],[146,81,121,79],[146,83,121,81],[146,84,121,82],[146,85,121,83,"join"],[146,89,121,87],[146,90,121,88],[146,94,121,92],[146,95,121,93],[146,97,121,95],[147,6,123,4],[147,10,123,8,"isDevelopmentEnvironment"],[147,34,123,32],[147,35,123,33],[147,36,123,34],[147,38,123,36],[148,8,124,6],[149,8,125,6],[149,14,125,12],[149,18,125,16,"Error"],[149,23,125,21],[149,24,125,22,"message"],[149,31,125,29],[149,32,125,30],[150,6,126,4],[150,7,126,5],[150,13,126,11],[151,8,127,6],[152,8,128,6,"console"],[152,15,128,13],[152,16,128,14,"error"],[152,21,128,19],[152,22,128,20,"message"],[152,29,128,27],[152,30,128,28],[153,6,129,4],[154,4,130,2],[156,4,132,2],[157,4,133,2],[157,8,133,6,"errors"],[157,14,133,12],[157,15,133,13,"length"],[157,21,133,19],[157,26,133,24],[157,27,133,25],[157,29,133,27],[158,6,134,4,"console"],[158,13,134,11],[158,14,134,12,"log"],[158,17,134,15],[158,18,134,16],[158,57,134,55,"envMode"],[158,64,134,62],[158,72,134,70],[158,73,134,71],[159,4,135,2],[160,2,136,0],[162,2,138,0],[163,0,139,0],[164,0,140,0],[165,2,141,7],[165,11,141,16,"getBackendUrl"],[165,24,141,29,"getBackendUrl"],[165,25,141,29],[165,27,141,40],[166,4,142,2],[166,10,142,8,"url"],[166,13,142,11],[166,16,142,11,"_expoVirtualEnv"],[166,31,142,11],[166,32,142,11,"env"],[166,35,142,11],[166,36,142,11,"EXPO_PUBLIC_BACKEND_URL"],[166,59,142,49],[167,4,143,2],[167,8,143,6],[167,9,143,7,"url"],[167,12,143,10],[167,14,143,12],[168,6,144,4],[168,12,144,10],[168,16,144,14,"Error"],[168,21,144,19],[168,22,144,20],[168,65,144,63],[168,66,144,64],[169,4,145,2],[170,4,146,2],[170,11,146,9,"url"],[170,14,146,12],[170,15,146,13,"replace"],[170,22,146,20],[170,23,146,21],[170,28,146,26],[170,30,146,28],[170,32,146,30],[170,33,146,31],[170,34,146,32],[170,35,146,33],[171,2,147,0],[173,2,149,0],[174,0,150,0],[175,0,151,0],[176,0,149,0],[176,3]],"functionMap":{"names":["<global>","getEnvironmentMode","isProductionEnvironment","isDevelopmentEnvironment","validateConfig","warnings.map$argument_0","errors.map$argument_0","getBackendUrl"],"mappings":"AAA;ACiB;CDS;AEM;CFE;AGK;CHE;OIa;yEC0D,gBD;kEEQ,eF;CJe;OOK;CPM"},"hasCjsExports":false},"type":"js/module"}]}