{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"FEATURES_STORAGE_KEY\", {\n    enumerable: true,\n    get: function () {\n      return FEATURES_STORAGE_KEY;\n    }\n  });\n  Object.defineProperty(exports, \"DEFAULT_FEATURES_TTL_SECONDS\", {\n    enumerable: true,\n    get: function () {\n      return DEFAULT_FEATURES_TTL_SECONDS;\n    }\n  });\n  Object.defineProperty(exports, \"MIN_FEATURES_TTL_SECONDS\", {\n    enumerable: true,\n    get: function () {\n      return MIN_FEATURES_TTL_SECONDS;\n    }\n  });\n  Object.defineProperty(exports, \"MAX_FEATURES_TTL_SECONDS\", {\n    enumerable: true,\n    get: function () {\n      return MAX_FEATURES_TTL_SECONDS;\n    }\n  });\n  exports.clamp01 = clamp01;\n  exports.clampTtlSeconds = clampTtlSeconds;\n  exports.normalizeRemoteFlagValue = normalizeRemoteFlagValue;\n  exports.normalizeRemoteFlags = normalizeRemoteFlags;\n  exports.fnv1a32 = fnv1a32;\n  exports.bucket01 = bucket01;\n  // /app/frontend/lib/featureUtils.ts\n\n  const FEATURES_STORAGE_KEY = '@idledevotion/features/v1';\n  const DEFAULT_FEATURES_TTL_SECONDS = 3600; // 1h fallback if server omits\n  const MIN_FEATURES_TTL_SECONDS = 60; // don't thrash the endpoint\n  const MAX_FEATURES_TTL_SECONDS = 24 * 60 * 60; // 24h clamp\n\n  function clamp01(n) {\n    if (Number.isNaN(n)) return 0;\n    if (n < 0) return 0;\n    if (n > 1) return 1;\n    return n;\n  }\n  function clampTtlSeconds(ttlSeconds) {\n    const raw = typeof ttlSeconds === 'number' ? ttlSeconds : DEFAULT_FEATURES_TTL_SECONDS;\n    const clamped = Math.max(MIN_FEATURES_TTL_SECONDS, Math.min(MAX_FEATURES_TTL_SECONDS, raw));\n    return clamped;\n  }\n  function normalizeRemoteFlagValue(value) {\n    if (typeof value === 'boolean') return {\n      enabled: value\n    };\n    const enabled = !!value.enabled;\n    const rollout = typeof value.rollout === 'number' ? clamp01(value.rollout) : undefined;\n    return rollout === undefined ? {\n      enabled\n    } : {\n      enabled,\n      rollout\n    };\n  }\n  function normalizeRemoteFlags(flags) {\n    const out = {};\n    if (!flags) return out;\n    for (const [k, v] of Object.entries(flags)) {\n      out[k] = normalizeRemoteFlagValue(v);\n    }\n    return out;\n  }\n\n  /**\n   * Fast deterministic 32-bit FNV-1a hash.\n   * Good enough for rollout bucketing; not for cryptography.\n   */\n  function fnv1a32(input) {\n    let hash = 0x811c9dc5; // offset basis\n    for (let i = 0; i < input.length; i++) {\n      hash ^= input.charCodeAt(i);\n      // hash *= 16777619 (with 32-bit overflow)\n      hash = hash + (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24) >>> 0;\n    }\n    return hash >>> 0;\n  }\n\n  /**\n   * Convert a stable identifier into a bucket in [0,1).\n   */\n  function bucket01(stableId) {\n    const h = fnv1a32(stableId);\n    // 2^32 = 4294967296\n    return h / 4294967296;\n  }\n});","lineCount":99,"map":[[7,2,3,0,"Object"],[7,8,3,0],[7,9,3,0,"defineProperty"],[7,23,3,0],[7,24,3,0,"exports"],[7,31,3,0],[8,4,3,0,"enumerable"],[8,14,3,0],[9,4,3,0,"get"],[9,7,3,0],[9,18,3,0,"get"],[9,19,3,0],[10,6,3,0],[10,13,3,0,"FEATURES_STORAGE_KEY"],[10,33,3,0],[11,4,3,0],[12,2,3,0],[13,2,4,0,"Object"],[13,8,4,0],[13,9,4,0,"defineProperty"],[13,23,4,0],[13,24,4,0,"exports"],[13,31,4,0],[14,4,4,0,"enumerable"],[14,14,4,0],[15,4,4,0,"get"],[15,7,4,0],[15,18,4,0,"get"],[15,19,4,0],[16,6,4,0],[16,13,4,0,"DEFAULT_FEATURES_TTL_SECONDS"],[16,41,4,0],[17,4,4,0],[18,2,4,0],[19,2,5,0,"Object"],[19,8,5,0],[19,9,5,0,"defineProperty"],[19,23,5,0],[19,24,5,0,"exports"],[19,31,5,0],[20,4,5,0,"enumerable"],[20,14,5,0],[21,4,5,0,"get"],[21,7,5,0],[21,18,5,0,"get"],[21,19,5,0],[22,6,5,0],[22,13,5,0,"MIN_FEATURES_TTL_SECONDS"],[22,37,5,0],[23,4,5,0],[24,2,5,0],[25,2,6,0,"Object"],[25,8,6,0],[25,9,6,0,"defineProperty"],[25,23,6,0],[25,24,6,0,"exports"],[25,31,6,0],[26,4,6,0,"enumerable"],[26,14,6,0],[27,4,6,0,"get"],[27,7,6,0],[27,18,6,0,"get"],[27,19,6,0],[28,6,6,0],[28,13,6,0,"MAX_FEATURES_TTL_SECONDS"],[28,37,6,0],[29,4,6,0],[30,2,6,0],[31,2,26,0,"exports"],[31,9,26,0],[31,10,26,0,"clamp01"],[31,17,26,0],[31,20,26,0,"clamp01"],[31,27,26,0],[32,2,33,0,"exports"],[32,9,33,0],[32,10,33,0,"clampTtlSeconds"],[32,25,33,0],[32,28,33,0,"clampTtlSeconds"],[32,43,33,0],[33,2,39,0,"exports"],[33,9,39,0],[33,10,39,0,"normalizeRemoteFlagValue"],[33,34,39,0],[33,37,39,0,"normalizeRemoteFlagValue"],[33,61,39,0],[34,2,47,0,"exports"],[34,9,47,0],[34,10,47,0,"normalizeRemoteFlags"],[34,30,47,0],[34,33,47,0,"normalizeRemoteFlags"],[34,53,47,0],[35,2,63,0,"exports"],[35,9,63,0],[35,10,63,0,"fnv1a32"],[35,17,63,0],[35,20,63,0,"fnv1a32"],[35,27,63,0],[36,2,76,0,"exports"],[36,9,76,0],[36,10,76,0,"bucket01"],[36,18,76,0],[36,21,76,0,"bucket01"],[36,29,76,0],[37,2,1,0],[39,2,3,7],[39,8,3,13,"FEATURES_STORAGE_KEY"],[39,28,3,33],[39,31,3,36],[39,58,3,63],[40,2,4,7],[40,8,4,13,"DEFAULT_FEATURES_TTL_SECONDS"],[40,36,4,41],[40,39,4,44],[40,43,4,48],[40,44,4,49],[40,45,4,50],[41,2,5,7],[41,8,5,13,"MIN_FEATURES_TTL_SECONDS"],[41,32,5,37],[41,35,5,40],[41,37,5,42],[41,38,5,43],[41,39,5,44],[42,2,6,7],[42,8,6,13,"MAX_FEATURES_TTL_SECONDS"],[42,32,6,37],[42,35,6,40],[42,37,6,42],[42,40,6,45],[42,42,6,47],[42,45,6,50],[42,47,6,52],[42,48,6,53],[42,49,6,54],[44,2,26,7],[44,11,26,16,"clamp01"],[44,18,26,23,"clamp01"],[44,19,26,24,"n"],[44,20,26,33],[44,22,26,43],[45,4,27,2],[45,8,27,6,"Number"],[45,14,27,12],[45,15,27,13,"isNaN"],[45,20,27,18],[45,21,27,19,"n"],[45,22,27,20],[45,23,27,21],[45,25,27,23],[45,32,27,30],[45,33,27,31],[46,4,28,2],[46,8,28,6,"n"],[46,9,28,7],[46,12,28,10],[46,13,28,11],[46,15,28,13],[46,22,28,20],[46,23,28,21],[47,4,29,2],[47,8,29,6,"n"],[47,9,29,7],[47,12,29,10],[47,13,29,11],[47,15,29,13],[47,22,29,20],[47,23,29,21],[48,4,30,2],[48,11,30,9,"n"],[48,12,30,10],[49,2,31,0],[50,2,33,7],[50,11,33,16,"clampTtlSeconds"],[50,26,33,31,"clampTtlSeconds"],[50,27,33,32,"ttlSeconds"],[50,37,33,51],[50,39,33,61],[51,4,34,2],[51,10,34,8,"raw"],[51,13,34,11],[51,16,34,14],[51,23,34,21,"ttlSeconds"],[51,33,34,31],[51,38,34,36],[51,46,34,44],[51,49,34,47,"ttlSeconds"],[51,59,34,57],[51,62,34,60,"DEFAULT_FEATURES_TTL_SECONDS"],[51,90,34,88],[52,4,35,2],[52,10,35,8,"clamped"],[52,17,35,15],[52,20,35,18,"Math"],[52,24,35,22],[52,25,35,23,"max"],[52,28,35,26],[52,29,35,27,"MIN_FEATURES_TTL_SECONDS"],[52,53,35,51],[52,55,35,53,"Math"],[52,59,35,57],[52,60,35,58,"min"],[52,63,35,61],[52,64,35,62,"MAX_FEATURES_TTL_SECONDS"],[52,88,35,86],[52,90,35,88,"raw"],[52,93,35,91],[52,94,35,92],[52,95,35,93],[53,4,36,2],[53,11,36,9,"clamped"],[53,18,36,16],[54,2,37,0],[55,2,39,7],[55,11,39,16,"normalizeRemoteFlagValue"],[55,35,39,40,"normalizeRemoteFlagValue"],[55,36,39,41,"value"],[55,41,39,63],[55,43,39,87],[56,4,40,2],[56,8,40,6],[56,15,40,13,"value"],[56,20,40,18],[56,25,40,23],[56,34,40,32],[56,36,40,34],[56,43,40,41],[57,6,40,43,"enabled"],[57,13,40,50],[57,15,40,52,"value"],[58,4,40,58],[58,5,40,59],[59,4,41,2],[59,10,41,8,"enabled"],[59,17,41,15],[59,20,41,18],[59,21,41,19],[59,22,41,20,"value"],[59,27,41,25],[59,28,41,26,"enabled"],[59,35,41,33],[60,4,42,2],[60,10,42,8,"rollout"],[60,17,42,15],[60,20,43,4],[60,27,43,11,"value"],[60,32,43,16],[60,33,43,17,"rollout"],[60,40,43,24],[60,45,43,29],[60,53,43,37],[60,56,43,40,"clamp01"],[60,63,43,47],[60,64,43,48,"value"],[60,69,43,53],[60,70,43,54,"rollout"],[60,77,43,61],[60,78,43,62],[60,81,43,65,"undefined"],[60,90,43,74],[61,4,44,2],[61,11,44,9,"rollout"],[61,18,44,16],[61,23,44,21,"undefined"],[61,32,44,30],[61,35,44,33],[62,6,44,35,"enabled"],[63,4,44,43],[63,5,44,44],[63,8,44,47],[64,6,44,49,"enabled"],[64,13,44,56],[65,6,44,58,"rollout"],[66,4,44,66],[66,5,44,67],[67,2,45,0],[68,2,47,7],[68,11,47,16,"normalizeRemoteFlags"],[68,31,47,36,"normalizeRemoteFlags"],[68,32,48,2,"flags"],[68,37,48,59],[68,39,49,40],[69,4,50,2],[69,10,50,8,"out"],[69,13,50,49],[69,16,50,52],[69,17,50,53],[69,18,50,54],[70,4,51,2],[70,8,51,6],[70,9,51,7,"flags"],[70,14,51,12],[70,16,51,14],[70,23,51,21,"out"],[70,26,51,24],[71,4,53,2],[71,9,53,7],[71,15,53,13],[71,16,53,14,"k"],[71,17,53,15],[71,19,53,17,"v"],[71,20,53,18],[71,21,53,19],[71,25,53,23,"Object"],[71,31,53,29],[71,32,53,30,"entries"],[71,39,53,37],[71,40,53,38,"flags"],[71,45,53,43],[71,46,53,44],[71,48,53,46],[72,6,54,4,"out"],[72,9,54,7],[72,10,54,8,"k"],[72,11,54,9],[72,12,54,10],[72,15,54,13,"normalizeRemoteFlagValue"],[72,39,54,37],[72,40,54,38,"v"],[72,41,54,39],[72,42,54,40],[73,4,55,2],[74,4,56,2],[74,11,56,9,"out"],[74,14,56,12],[75,2,57,0],[77,2,59,0],[78,0,60,0],[79,0,61,0],[80,0,62,0],[81,2,63,7],[81,11,63,16,"fnv1a32"],[81,18,63,23,"fnv1a32"],[81,19,63,24,"input"],[81,24,63,37],[81,26,63,47],[82,4,64,2],[82,8,64,6,"hash"],[82,12,64,10],[82,15,64,13],[82,25,64,23],[82,26,64,24],[82,27,64,25],[83,4,65,2],[83,9,65,7],[83,13,65,11,"i"],[83,14,65,12],[83,17,65,15],[83,18,65,16],[83,20,65,18,"i"],[83,21,65,19],[83,24,65,22,"input"],[83,29,65,27],[83,30,65,28,"length"],[83,36,65,34],[83,38,65,36,"i"],[83,39,65,37],[83,41,65,39],[83,43,65,41],[84,6,66,4,"hash"],[84,10,66,8],[84,14,66,12,"input"],[84,19,66,17],[84,20,66,18,"charCodeAt"],[84,30,66,28],[84,31,66,29,"i"],[84,32,66,30],[84,33,66,31],[85,6,67,4],[86,6,68,4,"hash"],[86,10,68,8],[86,13,68,12,"hash"],[86,17,68,16],[86,21,68,20,"hash"],[86,25,68,24],[86,29,68,28],[86,30,68,29],[86,31,68,30],[86,35,68,34,"hash"],[86,39,68,38],[86,43,68,42],[86,44,68,43],[86,45,68,44],[86,49,68,48,"hash"],[86,53,68,52],[86,57,68,56],[86,58,68,57],[86,59,68,58],[86,63,68,62,"hash"],[86,67,68,66],[86,71,68,70],[86,72,68,71],[86,73,68,72],[86,77,68,76,"hash"],[86,81,68,80],[86,85,68,84],[86,87,68,86],[86,88,68,87],[86,93,68,93],[86,94,68,94],[87,4,69,2],[88,4,70,2],[88,11,70,9,"hash"],[88,15,70,13],[88,20,70,18],[88,21,70,19],[89,2,71,0],[91,2,73,0],[92,0,74,0],[93,0,75,0],[94,2,76,7],[94,11,76,16,"bucket01"],[94,19,76,24,"bucket01"],[94,20,76,25,"stableId"],[94,28,76,41],[94,30,76,51],[95,4,77,2],[95,10,77,8,"h"],[95,11,77,9],[95,14,77,12,"fnv1a32"],[95,21,77,19],[95,22,77,20,"stableId"],[95,30,77,28],[95,31,77,29],[96,4,78,2],[97,4,79,2],[97,11,79,9,"h"],[97,12,79,10],[97,15,79,13],[97,25,79,23],[98,2,80,0],[99,0,80,1],[99,3]],"functionMap":{"names":["<global>","clamp01","clampTtlSeconds","normalizeRemoteFlagValue","normalizeRemoteFlags","fnv1a32","bucket01"],"mappings":"AAA;OCyB;CDK;OEE;CFI;OGE;CHM;OIE;CJU;OKM;CLQ;OMK;CNI"},"hasCjsExports":false},"type":"js/module"}]}