{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"],"imports":1}},{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":39,"index":74}}],"key":"m+kcirlwHAgMIuUoyR2vCxbhWD4=","exportNames":["*"],"imports":1}},{"name":"../wrapper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":75},"end":{"line":3,"column":36,"index":111}}],"key":"3qo6tWpJLamBuMFs5ex6CktRJQ4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"ViewHierarchy\", {\n    enumerable: true,\n    get: function () {\n      return ViewHierarchy;\n    }\n  });\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _tslib = require(_dependencyMap[2], \"tslib\");\n  var _sentryUtils = require(_dependencyMap[3], \"@sentry/utils\");\n  var _wrapper = require(_dependencyMap[4], \"../wrapper\");\n  /** Adds ViewHierarchy to error events */\n  var ViewHierarchy = /*#__PURE__*/function () {\n    function ViewHierarchy() {\n      (0, _classCallCheck.default)(this, ViewHierarchy);\n      /**\n       * @inheritDoc\n       */\n      this.name = ViewHierarchy.id;\n    }\n    /**\n     * @inheritDoc\n     */\n    return (0, _createClass.default)(ViewHierarchy, [{\n      key: \"setupOnce\",\n      value: function setupOnce(addGlobalEventProcessor) {\n        addGlobalEventProcessor((event, hint) => (0, _tslib.__awaiter)(this, void 0, void 0, function* () {\n          var hasException = event.exception && event.exception.values && event.exception.values.length > 0;\n          if (!hasException) {\n            return event;\n          }\n          var viewHierarchy = null;\n          try {\n            viewHierarchy = yield _wrapper.NATIVE.fetchViewHierarchy();\n          } catch (e) {\n            _sentryUtils.logger.error('Failed to get view hierarchy from native.', e);\n          }\n          if (viewHierarchy) {\n            hint.attachments = [{\n              filename: ViewHierarchy._fileName,\n              contentType: ViewHierarchy._contentType,\n              attachmentType: ViewHierarchy._attachmentType,\n              data: viewHierarchy\n            }, ...((hint === null || hint === void 0 ? void 0 : hint.attachments) || [])];\n          }\n          return event;\n        }));\n      }\n    }]);\n  }();\n  /**\n   * @inheritDoc\n   */\n  ViewHierarchy.id = 'ViewHierarchy';\n  ViewHierarchy._fileName = 'view-hierarchy.json';\n  ViewHierarchy._contentType = 'application/json';\n  ViewHierarchy._attachmentType = 'event.view_hierarchy';\n});","lineCount":71,"map":[[12,2,5,0,"Object"],[12,8,5,0],[12,9,5,0,"defineProperty"],[12,23,5,0],[12,24,5,0,"exports"],[12,31,5,0],[13,4,5,0,"enumerable"],[13,14,5,0],[14,4,5,0,"get"],[14,7,5,0],[14,18,5,0,"get"],[14,19,5,0],[15,6,5,0],[15,13,5,0,"ViewHierarchy"],[15,26,5,0],[16,4,5,0],[17,2,5,0],[18,2,42,1],[18,6,42,1,"_babelRuntimeHelpersClassCallCheck"],[18,40,42,1],[18,43,42,1,"require"],[18,50,42,1],[18,51,42,1,"_dependencyMap"],[18,65,42,1],[19,2,42,1],[19,6,42,1,"_classCallCheck"],[19,21,42,1],[19,24,42,1,"_interopDefault"],[19,39,42,1],[19,40,42,1,"_babelRuntimeHelpersClassCallCheck"],[19,74,42,1],[20,2,42,1],[20,6,42,1,"_babelRuntimeHelpersCreateClass"],[20,37,42,1],[20,40,42,1,"require"],[20,47,42,1],[20,48,42,1,"_dependencyMap"],[20,62,42,1],[21,2,42,1],[21,6,42,1,"_createClass"],[21,18,42,1],[21,21,42,1,"_interopDefault"],[21,36,42,1],[21,37,42,1,"_babelRuntimeHelpersCreateClass"],[21,68,42,1],[22,2,1,0],[22,6,1,0,"_tslib"],[22,12,1,0],[22,15,1,0,"require"],[22,22,1,0],[22,23,1,0,"_dependencyMap"],[22,37,1,0],[23,2,2,0],[23,6,2,0,"_sentryUtils"],[23,18,2,0],[23,21,2,0,"require"],[23,28,2,0],[23,29,2,0,"_dependencyMap"],[23,43,2,0],[24,2,3,0],[24,6,3,0,"_wrapper"],[24,14,3,0],[24,17,3,0,"require"],[24,24,3,0],[24,25,3,0,"_dependencyMap"],[24,39,3,0],[25,2,4,0],[26,2,4,0],[26,6,5,13,"ViewHierarchy"],[26,19,5,26],[27,4,6,4],[27,13,6,4,"ViewHierarchy"],[27,27,6,4],[27,29,6,18],[28,6,6,18],[28,10,6,18,"_classCallCheck"],[28,25,6,18],[28,26,6,18,"default"],[28,33,6,18],[28,41,6,18,"ViewHierarchy"],[28,54,6,18],[29,6,7,8],[30,0,8,0],[31,0,9,0],[32,6,10,8],[32,10,10,12],[32,11,10,13,"name"],[32,15,10,17],[32,18,10,20,"ViewHierarchy"],[32,31,10,33],[32,32,10,34,"id"],[32,34,10,36],[33,4,11,4],[34,4,12,4],[35,0,13,0],[36,0,14,0],[37,4,12,4],[37,15,12,4,"_createClass"],[37,27,12,4],[37,28,12,4,"default"],[37,35,12,4],[37,37,12,4,"ViewHierarchy"],[37,50,12,4],[38,6,12,4,"key"],[38,9,12,4],[39,6,12,4,"value"],[39,11,12,4],[39,13,15,4],[39,22,15,4,"setupOnce"],[39,31,15,13,"setupOnce"],[39,32,15,14,"addGlobalEventProcessor"],[39,55,15,37],[39,57,15,39],[40,8,16,8,"addGlobalEventProcessor"],[40,31,16,31],[40,32,16,32],[40,33,16,33,"event"],[40,38,16,38],[40,40,16,40,"hint"],[40,44,16,44],[40,49,16,49],[40,53,16,49,"__awaiter"],[40,59,16,58],[40,60,16,58,"__awaiter"],[40,69,16,58],[40,71,16,59],[40,75,16,63],[40,77,16,65],[40,82,16,70],[40,83,16,71],[40,85,16,73],[40,90,16,78],[40,91,16,79],[40,93,16,81],[40,106,16,94],[41,10,17,12],[41,14,17,18,"hasException"],[41,26,17,30],[41,29,17,33,"event"],[41,34,17,38],[41,35,17,39,"exception"],[41,44,17,48],[41,48,17,52,"event"],[41,53,17,57],[41,54,17,58,"exception"],[41,63,17,67],[41,64,17,68,"values"],[41,70,17,74],[41,74,17,78,"event"],[41,79,17,83],[41,80,17,84,"exception"],[41,89,17,93],[41,90,17,94,"values"],[41,96,17,100],[41,97,17,101,"length"],[41,103,17,107],[41,106,17,110],[41,107,17,111],[42,10,18,12],[42,14,18,16],[42,15,18,17,"hasException"],[42,27,18,29],[42,29,18,31],[43,12,19,16],[43,19,19,23,"event"],[43,24,19,28],[44,10,20,12],[45,10,21,12],[45,14,21,16,"viewHierarchy"],[45,27,21,29],[45,30,21,32],[45,34,21,36],[46,10,22,12],[46,14,22,16],[47,12,23,16,"viewHierarchy"],[47,25,23,29],[47,28,23,32],[47,34,23,38,"NATIVE"],[47,42,23,44],[47,43,23,44,"NATIVE"],[47,49,23,44],[47,50,23,45,"fetchViewHierarchy"],[47,68,23,63],[47,69,23,64],[47,70,23,65],[48,10,24,12],[48,11,24,13],[48,12,25,12],[48,19,25,19,"e"],[48,20,25,20],[48,22,25,22],[49,12,26,16,"logger"],[49,24,26,22],[49,25,26,22,"logger"],[49,31,26,22],[49,32,26,23,"error"],[49,37,26,28],[49,38,26,29],[49,81,26,72],[49,83,26,74,"e"],[49,84,26,75],[49,85,26,76],[50,10,27,12],[51,10,28,12],[51,14,28,16,"viewHierarchy"],[51,27,28,29],[51,29,28,31],[52,12,29,16,"hint"],[52,16,29,20],[52,17,29,21,"attachments"],[52,28,29,32],[52,31,29,35],[52,32,30,20],[53,14,31,24,"filename"],[53,22,31,32],[53,24,31,34,"ViewHierarchy"],[53,37,31,47],[53,38,31,48,"_fileName"],[53,47,31,57],[54,14,32,24,"contentType"],[54,25,32,35],[54,27,32,37,"ViewHierarchy"],[54,40,32,50],[54,41,32,51,"_contentType"],[54,53,32,63],[55,14,33,24,"attachmentType"],[55,28,33,38],[55,30,33,40,"ViewHierarchy"],[55,43,33,53],[55,44,33,54,"_attachmentType"],[55,59,33,69],[56,14,34,24,"data"],[56,18,34,28],[56,20,34,30,"viewHierarchy"],[57,12,35,20],[57,13,35,21],[57,15,36,20],[57,19,36,24],[57,20,36,25,"hint"],[57,24,36,29],[57,29,36,34],[57,33,36,38],[57,37,36,42,"hint"],[57,41,36,46],[57,46,36,51],[57,51,36,56],[57,52,36,57],[57,55,36,60],[57,60,36,65],[57,61,36,66],[57,64,36,69,"hint"],[57,68,36,73],[57,69,36,74,"attachments"],[57,80,36,85],[57,85,36,90],[57,87,36,92],[57,88,36,93],[57,89,37,17],[58,10,38,12],[59,10,39,12],[59,17,39,19,"event"],[59,22,39,24],[60,8,40,8],[60,9,40,9],[60,10,40,10],[60,11,40,11],[61,6,41,4],[62,4,41,5],[63,2,41,5],[64,2,43,0],[65,0,44,0],[66,0,45,0],[67,2,46,0,"ViewHierarchy"],[67,15,46,13],[67,16,46,14,"id"],[67,18,46,16],[67,21,46,19],[67,36,46,34],[68,2,47,0,"ViewHierarchy"],[68,15,47,13],[68,16,47,14,"_fileName"],[68,25,47,23],[68,28,47,26],[68,49,47,47],[69,2,48,0,"ViewHierarchy"],[69,15,48,13],[69,16,48,14,"_contentType"],[69,28,48,26],[69,31,48,29],[69,49,48,47],[70,2,49,0,"ViewHierarchy"],[70,15,49,13],[70,16,49,14,"_attachmentType"],[70,31,49,29],[70,34,49,32],[70,56,49,54],[71,0,49,55],[71,3]],"functionMap":{"names":["<global>","ViewHierarchy","ViewHierarchy#constructor","ViewHierarchy#setupOnce","addGlobalEventProcessor$argument_0","__awaiter$argument_3"],"mappings":"AAA;OCI;ICC;KDK;IEI;gCCC,iDC;SDwB,CD;KFC;CDC"},"hasCjsExports":false},"type":"js/module"}]}