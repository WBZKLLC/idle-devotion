{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":14,"index":78},"end":{"line":3,"column":38,"index":102}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}},{"name":"../metadata.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":17,"index":121},"end":{"line":4,"column":42,"index":146}}],"key":"0jUnJreXX8izbzCb7tdzUkkCTzI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const utils = require(_dependencyMap[0], \"@sentry/utils\");\n  const metadata = require(_dependencyMap[1], \"../metadata.js\");\n\n  /**\n   * Adds module metadata to stack frames.\n   *\n   * Metadata can be injected by the Sentry bundler plugins using the `_experiments.moduleMetadata` config option.\n   *\n   * When this integration is added, the metadata passed to the bundler plugin is added to the stack frames of all events\n   * under the `module_metadata` property. This can be used to help in tagging or routing of events from different teams\n   * our sources\n   */\n  class ModuleMetadata {\n    /*\n     * @inheritDoc\n     */\n    static __initStatic() {\n      this.id = 'ModuleMetadata';\n    }\n\n    /**\n     * @inheritDoc\n     */\n\n    constructor() {\n      this.name = ModuleMetadata.id;\n    }\n\n    /**\n     * @inheritDoc\n     */\n    setupOnce(addGlobalEventProcessor, getCurrentHub) {\n      const client = getCurrentHub().getClient();\n      if (!client || typeof client.on !== 'function') {\n        return;\n      }\n\n      // We need to strip metadata from stack frames before sending them to Sentry since these are client side only.\n      client.on('beforeEnvelope', envelope => {\n        utils.forEachEnvelopeItem(envelope, (item, type) => {\n          if (type === 'event') {\n            const event = Array.isArray(item) ? item[1] : undefined;\n            if (event) {\n              metadata.stripMetadataFromStackFrames(event);\n              item[1] = event;\n            }\n          }\n        });\n      });\n      const stackParser = client.getOptions().stackParser;\n      addGlobalEventProcessor(event => {\n        metadata.addMetadataToStackFrames(stackParser, event);\n        return event;\n      });\n    }\n  }\n  ModuleMetadata.__initStatic();\n  exports.ModuleMetadata = ModuleMetadata;\n});","lineCount":63,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"utils"],[5,13,3,11],[5,16,3,14,"require"],[5,23,3,21],[5,24,3,21,"_dependencyMap"],[5,38,3,21],[5,58,3,37],[5,59,3,38],[6,2,4,0],[6,8,4,6,"metadata"],[6,16,4,14],[6,19,4,17,"require"],[6,26,4,24],[6,27,4,24,"_dependencyMap"],[6,41,4,24],[6,62,4,41],[6,63,4,42],[8,2,6,0],[9,0,7,0],[10,0,8,0],[11,0,9,0],[12,0,10,0],[13,0,11,0],[14,0,12,0],[15,0,13,0],[16,0,14,0],[17,2,15,0],[17,8,15,6,"ModuleMetadata"],[17,22,15,20],[17,23,15,22],[18,4,16,2],[19,0,17,0],[20,0,18,0],[21,4,19,3],[21,11,19,10,"__initStatic"],[21,23,19,22,"__initStatic"],[21,24,19,22],[21,26,19,25],[22,6,19,26],[22,10,19,30],[22,11,19,31,"id"],[22,13,19,33],[22,16,19,36],[22,32,19,52],[23,4,19,53],[25,4,21,2],[26,0,22,0],[27,0,23,0],[29,4,25,3,"constructor"],[29,15,25,14,"constructor"],[29,16,25,14],[29,18,25,17],[30,6,26,4],[30,10,26,8],[30,11,26,9,"name"],[30,15,26,13],[30,18,26,16,"ModuleMetadata"],[30,32,26,30],[30,33,26,31,"id"],[30,35,26,33],[31,4,27,2],[33,4,29,2],[34,0,30,0],[35,0,31,0],[36,4,32,3,"setupOnce"],[36,13,32,12,"setupOnce"],[36,14,32,13,"addGlobalEventProcessor"],[36,37,32,36],[36,39,32,38,"getCurrentHub"],[36,52,32,51],[36,54,32,53],[37,6,33,4],[37,12,33,10,"client"],[37,18,33,16],[37,21,33,19,"getCurrentHub"],[37,34,33,32],[37,35,33,33],[37,36,33,34],[37,37,33,35,"getClient"],[37,46,33,44],[37,47,33,45],[37,48,33,46],[38,6,35,4],[38,10,35,8],[38,11,35,9,"client"],[38,17,35,15],[38,21,35,19],[38,28,35,26,"client"],[38,34,35,32],[38,35,35,33,"on"],[38,37,35,35],[38,42,35,40],[38,52,35,50],[38,54,35,52],[39,8,36,6],[40,6,37,4],[42,6,39,4],[43,6,40,4,"client"],[43,12,40,10],[43,13,40,11,"on"],[43,15,40,13],[43,16,40,14],[43,32,40,30],[43,34,40,32,"envelope"],[43,42,40,40],[43,46,40,44],[44,8,41,6,"utils"],[44,13,41,11],[44,14,41,12,"forEachEnvelopeItem"],[44,33,41,31],[44,34,41,32,"envelope"],[44,42,41,40],[44,44,41,42],[44,45,41,43,"item"],[44,49,41,47],[44,51,41,49,"type"],[44,55,41,53],[44,60,41,58],[45,10,42,8],[45,14,42,12,"type"],[45,18,42,16],[45,23,42,21],[45,30,42,28],[45,32,42,30],[46,12,43,10],[46,18,43,16,"event"],[46,23,43,21],[46,26,43,24,"Array"],[46,31,43,29],[46,32,43,30,"isArray"],[46,39,43,37],[46,40,43,38,"item"],[46,44,43,42],[46,45,43,43],[46,48,43,47,"item"],[46,52,43,51],[46,53,43,54],[46,54,43,55],[46,55,43,56],[46,58,43,59,"undefined"],[46,67,43,68],[47,12,45,10],[47,16,45,14,"event"],[47,21,45,19],[47,23,45,21],[48,14,46,12,"metadata"],[48,22,46,20],[48,23,46,21,"stripMetadataFromStackFrames"],[48,51,46,49],[48,52,46,50,"event"],[48,57,46,55],[48,58,46,56],[49,14,47,12,"item"],[49,18,47,16],[49,19,47,17],[49,20,47,18],[49,21,47,19],[49,24,47,22,"event"],[49,29,47,27],[50,12,48,10],[51,10,49,8],[52,8,50,6],[52,9,50,7],[52,10,50,8],[53,6,51,4],[53,7,51,5],[53,8,51,6],[54,6,53,4],[54,12,53,10,"stackParser"],[54,23,53,21],[54,26,53,24,"client"],[54,32,53,30],[54,33,53,31,"getOptions"],[54,43,53,41],[54,44,53,42],[54,45,53,43],[54,46,53,44,"stackParser"],[54,57,53,55],[55,6,55,4,"addGlobalEventProcessor"],[55,29,55,27],[55,30,55,28,"event"],[55,35,55,33],[55,39,55,37],[56,8,56,6,"metadata"],[56,16,56,14],[56,17,56,15,"addMetadataToStackFrames"],[56,41,56,39],[56,42,56,40,"stackParser"],[56,53,56,51],[56,55,56,53,"event"],[56,60,56,58],[56,61,56,59],[57,8,57,6],[57,15,57,13,"event"],[57,20,57,18],[58,6,58,4],[58,7,58,5],[58,8,58,6],[59,4,59,2],[60,2,60,0],[61,2,60,2,"ModuleMetadata"],[61,16,60,16],[61,17,60,17,"__initStatic"],[61,29,60,29],[61,30,60,30],[61,31,60,31],[62,2,62,0,"exports"],[62,9,62,7],[62,10,62,8,"ModuleMetadata"],[62,24,62,22],[62,27,62,25,"ModuleMetadata"],[62,41,62,39],[63,0,62,40],[63,3]],"functionMap":{"names":["<global>","ModuleMetadata","ModuleMetadata.__initStatic","ModuleMetadata#constructor","ModuleMetadata#setupOnce","client.on$argument_1","utils.forEachEnvelopeItem$argument_1","addGlobalEventProcessor$argument_0"],"mappings":"AAA;ACc;GCI,mDD;GEM;GFE;GGK;gCCQ;0CCC;ODS;KDC;4BGI;KHG;GHC;CDC"},"hasCjsExports":true},"type":"js/module"}]}