{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":559},"end":{"line":16,"column":33,"index":592}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../lib/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":593},"end":{"line":17,"column":71,"index":664}}],"key":"cGGbCGri3M695PzY+v7ylQ+Rxt0=","exportNames":["*"],"imports":1}},{"name":"../lib/entitlements/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":665},"end":{"line":26,"column":35,"index":901}}],"key":"W08TkULB6K5ayFSZK0DQ51a7f14=","exportNames":["*"],"imports":1}},{"name":"../lib/entitlements/legacy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":27,"column":0,"index":902},"end":{"line":31,"column":36,"index":1011}}],"key":"+rKOnoh7xdxUkJQypQ3SMN7jDOc=","exportNames":["*"],"imports":1}},{"name":"../lib/api","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":50,"column":22,"index":1763},"end":{"line":50,"column":42,"index":1783}}],"key":"qv6pIAfHV5HK/E8UlfJgciwW1c8=","exportNames":["*"],"imports":1}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":50,"column":16,"index":1757},"end":{"line":50,"column":42,"index":1783}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}},{"name":"./gameStore","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":60,"column":29,"index":2077},"end":{"line":60,"column":51,"index":2099}},{"start":{"line":70,"column":29,"index":2355},"end":{"line":70,"column":51,"index":2377}}],"key":"EF/vkdn/m34t6a9iVJBbEsaZi+A=","exportNames":["*"],"imports":2}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useEntitlementStore\", {\n    enumerable: true,\n    get: function () {\n      return useEntitlementStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _libStorage = require(_dependencyMap[1], \"../lib/storage\");\n  var _libEntitlementsTypes = require(_dependencyMap[2], \"../lib/entitlements/types\");\n  var _libEntitlementsLegacy = require(_dependencyMap[3], \"../lib/entitlements/legacy\");\n  /**\n   * Entitlement Store - Server Truth Model\n   * \n   * STRICT INVARIANTS:\n   * - Store NEVER grants entitlements - only server can grant\n   * - Store caches server snapshots for UX (offline/fast reads)\n   * - All reads go through gating helpers, not direct store access\n   * - Refresh from server on: startup, post-purchase, manual, gate (stale check)\n   * \n   * PHASE 3.10 - TTL DISCIPLINE:\n   * - Staleness uses server_time (not device time) \n   * - ensureFreshEntitlements() is the canonical refresh entry point\n   * - Fast reads from cache, disciplined refresh on gates\n   */\n\n  // Debug logging helpers\n  const dlog = (...args) => {\n    if (__DEV__) console.log(...args);\n  };\n  const STORAGE_KEY = '@idledevotion/entitlements/v4';\n  const LEGACY_STORAGE_KEY = '@idledevotion/entitlements/v3';\n\n  // Default TTL if server doesn't provide one (5 minutes)\n  const DEFAULT_TTL_SECONDS = 300;\n  // Minimum TTL to prevent runaway refreshes (30 seconds)\n  const MIN_TTL_SECONDS = 30;\n  // Maximum TTL to ensure eventual consistency (1 hour)\n  const MAX_TTL_SECONDS = 3600;\n\n  // API import (lazy to avoid circular deps at module load)\n  let _getEntitlementsSnapshot = null;\n  async function getEntitlementsSnapshotApi() {\n    if (!_getEntitlementsSnapshot) {\n      const api = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[4], _dependencyMap.paths, \"../lib/api\");\n      _getEntitlementsSnapshot = api.getEntitlementsSnapshot;\n    }\n    return _getEntitlementsSnapshot();\n  }\n\n  // Lazy import for gameStore to avoid circular deps\n  let _getAuthEpoch = null;\n  function getAuthEpoch() {\n    if (!_getAuthEpoch) {\n      const {\n        useGameStore\n      } = require(_dependencyMap[6], \"./gameStore\");\n      _getAuthEpoch = () => useGameStore.getState().authEpoch;\n    }\n    return _getAuthEpoch();\n  }\n\n  // Lazy import to check if user is logged in\n  let _getUser = null;\n  function getUser() {\n    if (!_getUser) {\n      const {\n        useGameStore\n      } = require(_dependencyMap[6], \"./gameStore\");\n      _getUser = () => useGameStore.getState().user;\n    }\n    return _getUser();\n  }\n  const useEntitlementStore = (0, _zustand.create)((set, get) => ({\n    snapshot: null,\n    entitlementsByKey: (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n    lastRefreshAt: null,\n    isRefreshing: false,\n    refreshError: null,\n    entitlementEpoch: 0,\n    // Bumped on clear() to invalidate in-flight requests\n\n    /**\n     * Hydrate from cached snapshot on app startup\n     * Does NOT grant - only restores last known server state\n     */\n    hydrateEntitlements: async () => {\n      dlog('[entitlementStore] Hydrating from cache...');\n      try {\n        // Try to load cached snapshot\n        const cached = await (0, _libStorage.storageGet)(STORAGE_KEY);\n        if (cached) {\n          const parsed = JSON.parse(cached);\n          const normalized = {\n            ...(0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n            ...parsed.entitlements\n          };\n          set({\n            snapshot: parsed,\n            entitlementsByKey: normalized\n          });\n          dlog('[entitlementStore] Hydrated from cache:', Object.keys(normalized).length, 'keys');\n        }\n\n        // Migrate legacy data if present\n        await migrateLegacyData(set, get);\n      } catch (e) {\n        console.error('[entitlementStore] Hydration error:', e);\n      }\n    },\n    /**\n     * Refresh entitlements from server\n     * This is the ONLY way to get authoritative entitlement state\n     * \n     * Phase 3.10: Also checks global authEpoch for cross-store invalidation\n     */\n    refreshFromServer: async reason => {\n      if (get().isRefreshing) {\n        dlog('[entitlementStore] Already refreshing, skipping');\n        return;\n      }\n      const epochAtStart = get().entitlementEpoch;\n      const authEpochAtStart = getAuthEpoch(); // Global auth epoch for cross-store check\n\n      dlog('[entitlementStore] Refreshing from server, reason:', reason);\n      set({\n        isRefreshing: true,\n        refreshError: null\n      });\n      try {\n        const snap = await getEntitlementsSnapshotApi();\n\n        // Epoch check: ignore late response if clear() was called (logout)\n        if (get().entitlementEpoch !== epochAtStart) {\n          dlog('[entitlementStore] Local epoch mismatch - discarding stale response');\n          set({\n            isRefreshing: false\n          });\n          return;\n        }\n\n        // Global auth epoch check: ignore if user logged out during request\n        if (getAuthEpoch() !== authEpochAtStart) {\n          dlog('[entitlementStore] Auth epoch mismatch - discarding stale response');\n          set({\n            isRefreshing: false\n          });\n          return;\n        }\n\n        // Strict normalization: fill missing keys as not_owned\n        const normalized = {\n          ...(0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n          ...snap.entitlements\n        };\n        set({\n          snapshot: snap,\n          entitlementsByKey: normalized,\n          lastRefreshAt: Date.now(),\n          isRefreshing: false\n        });\n\n        // Persist for offline cache\n        await (0, _libStorage.storageSet)(STORAGE_KEY, JSON.stringify(snap));\n        dlog('[entitlementStore] Refreshed from server:', snap.version);\n      } catch (e) {\n        // Epoch check before setting error state\n        if (get().entitlementEpoch !== epochAtStart || getAuthEpoch() !== authEpochAtStart) {\n          dlog('[entitlementStore] Epoch mismatch in error handler - discarding');\n          set({\n            isRefreshing: false\n          });\n          return;\n        }\n        const errorMsg = e?.response?.data?.detail || e?.message || 'Failed to refresh entitlements';\n        console.error('[entitlementStore] Refresh error:', errorMsg);\n        set({\n          isRefreshing: false,\n          refreshError: errorMsg\n        });\n      }\n    },\n    /**\n     * Apply a snapshot directly (used by purchase verify flow)\n     * Skips network call - uses snapshot returned from verify endpoint\n     */\n    applySnapshot: snap => {\n      dlog('[entitlementStore] Applying snapshot directly, version:', snap.version);\n\n      // Strict normalization\n      const normalized = {\n        ...(0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n        ...snap.entitlements\n      };\n      set({\n        snapshot: snap,\n        entitlementsByKey: normalized,\n        lastRefreshAt: Date.now(),\n        refreshError: null\n      });\n\n      // Persist for offline cache\n      (0, _libStorage.storageSet)(STORAGE_KEY, JSON.stringify(snap)).catch(() => {});\n    },\n    /**\n     * Phase 3.10: Check if cached entitlements are stale\n     * Uses SERVER time (not device time) for staleness calculation\n     * \n     * Stale if: server_now > server_time + ttl_seconds\n     */\n    isStale: () => {\n      const {\n        snapshot\n      } = get();\n\n      // No snapshot = stale (need to fetch)\n      if (!snapshot) return true;\n\n      // Get server time and TTL from snapshot\n      const serverTimeStr = snapshot.server_time;\n      const ttlSeconds = snapshot.ttl_seconds ?? DEFAULT_TTL_SECONDS;\n\n      // Clamp TTL to reasonable bounds\n      const clampedTtl = Math.max(MIN_TTL_SECONDS, Math.min(MAX_TTL_SECONDS, ttlSeconds));\n      if (!serverTimeStr) {\n        // No server time in snapshot - fall back to device time check\n        const {\n          lastRefreshAt\n        } = get();\n        if (!lastRefreshAt) return true;\n        const deviceNow = Date.now();\n        return deviceNow > lastRefreshAt + clampedTtl * 1000;\n      }\n\n      // Parse server time\n      const serverTime = new Date(serverTimeStr).getTime();\n      if (isNaN(serverTime)) {\n        dlog('[entitlementStore] Invalid server_time in snapshot, treating as stale');\n        return true;\n      }\n\n      // Estimate current server time (server_time + time_since_refresh)\n      const {\n        lastRefreshAt\n      } = get();\n      const timeSinceRefresh = lastRefreshAt ? Date.now() - lastRefreshAt : 0;\n      const estimatedServerNow = serverTime + timeSinceRefresh;\n\n      // Stale if estimated server time exceeds expiry\n      const expiresAt = serverTime + clampedTtl * 1000;\n      const isStale = estimatedServerNow > expiresAt;\n      if (__DEV__ && isStale) {\n        dlog('[entitlementStore] Cache is stale:', {\n          serverTime: new Date(serverTime).toISOString(),\n          estimatedServerNow: new Date(estimatedServerNow).toISOString(),\n          expiresAt: new Date(expiresAt).toISOString(),\n          ttlSeconds: clampedTtl\n        });\n      }\n      return isStale;\n    },\n    /**\n     * Phase 3.10: Canonical refresh entry point\n     * \n     * Use this at premium gates instead of direct refreshFromServer calls.\n     * Fire-and-forget for non-blocking UX, or await for blocking checks.\n     * \n     * Rules:\n     * - If no user logged in → no-op\n     * - If already refreshing → no-op (dedup)\n     * - If not stale → no-op\n     * - If stale → trigger refresh\n     */\n    ensureFreshEntitlements: async reason => {\n      // No user = no entitlements to refresh\n      const user = getUser();\n      if (!user) {\n        dlog('[entitlementStore] ensureFresh: no user, skipping');\n        return;\n      }\n\n      // Already refreshing = dedup\n      if (get().isRefreshing) {\n        dlog('[entitlementStore] ensureFresh: already refreshing, skipping');\n        return;\n      }\n\n      // Not stale = no-op\n      if (!get().isStale()) {\n        dlog('[entitlementStore] ensureFresh: cache is fresh, skipping');\n        return;\n      }\n      dlog('[entitlementStore] ensureFresh: cache stale, refreshing for', reason);\n      await get().refreshFromServer(reason);\n    },\n    /**\n     * Clear all entitlement state (on logout)\n     * Bumps epoch to invalidate any in-flight requests\n     */\n    clear: () => {\n      dlog('[entitlementStore] Clearing state');\n      set(s => ({\n        snapshot: null,\n        entitlementsByKey: (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n        lastRefreshAt: null,\n        refreshError: null,\n        entitlementEpoch: s.entitlementEpoch + 1 // Bump to invalidate in-flight requests\n      }));\n      (0, _libStorage.storageRemove)(STORAGE_KEY).catch(() => {});\n    },\n    /**\n     * Check if user has entitlement (internal use)\n     * Screens should use gating helpers instead\n     */\n    hasEntitlement: key => {\n      const {\n        entitlementsByKey,\n        snapshot\n      } = get();\n      const entitlement = entitlementsByKey[key];\n      if (!entitlement || entitlement.status !== 'owned') return false;\n\n      // Check expiry using server time\n      if (entitlement.expires_at && snapshot?.server_time) {\n        const expiresAt = new Date(entitlement.expires_at).getTime();\n        const serverNow = new Date(snapshot.server_time).getTime();\n        if (serverNow > expiresAt) return false;\n      }\n      return true;\n    },\n    // ═══════════════════════════════════════════════════════════\n    // DEV ONLY METHODS - For testing paywalls/features\n    // These should NEVER be called in production code paths\n    // ═══════════════════════════════════════════════════════════\n\n    devGrantEntitlement: key => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] devGrantEntitlement called in production - BLOCKED');\n        return;\n      }\n      const {\n        entitlementsByKey\n      } = get();\n      const updated = {\n        ...entitlementsByKey,\n        [key]: {\n          key,\n          status: 'owned',\n          granted_at: new Date().toISOString(),\n          reason: 'admin'\n        }\n      };\n\n      // Create fake snapshot for dev\n      const fakeSnapshot = {\n        server_time: new Date().toISOString(),\n        version: Date.now(),\n        username: 'DEV_USER',\n        entitlements: updated,\n        source: 'database'\n      };\n      set({\n        entitlementsByKey: updated,\n        snapshot: fakeSnapshot\n      });\n      dlog('[entitlementStore] DEV: Granted', key);\n    },\n    devRevokeEntitlement: key => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] devRevokeEntitlement called in production - BLOCKED');\n        return;\n      }\n      const {\n        entitlementsByKey\n      } = get();\n      const updated = {\n        ...entitlementsByKey,\n        [key]: {\n          key,\n          status: 'not_owned'\n        }\n      };\n      set({\n        entitlementsByKey: updated\n      });\n      dlog('[entitlementStore] DEV: Revoked', key);\n    },\n    devClearAll: () => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] devClearAll called in production - BLOCKED');\n        return;\n      }\n      set({\n        entitlementsByKey: (0, _libEntitlementsTypes.createEmptyEntitlementsMap)(),\n        snapshot: null\n      });\n      (0, _libStorage.storageRemove)(STORAGE_KEY).catch(() => {});\n      dlog('[entitlementStore] DEV: Cleared all entitlements');\n    }\n  }));\n\n  /**\n   * Migrate legacy entitlement data to new format\n   */\n  async function migrateLegacyData(set, get) {\n    try {\n      const legacyData = await (0, _libStorage.storageGet)(LEGACY_STORAGE_KEY);\n      if (!legacyData) return;\n      dlog('[entitlementStore] Migrating legacy data...');\n      const legacy = JSON.parse(legacyData);\n      const {\n        entitlementsByKey\n      } = get();\n      const updated = {\n        ...entitlementsByKey\n      };\n\n      // Migrate each legacy key\n      for (const [oldKey, value] of Object.entries(legacy)) {\n        if (value) {\n          const newKey = (0, _libEntitlementsLegacy.migrateLegacyKey)(oldKey);\n          updated[newKey] = {\n            key: newKey,\n            status: 'owned',\n            granted_at: new Date().toISOString(),\n            reason: 'unknown'\n          };\n          dlog('[entitlementStore] Migrated:', oldKey, '->', newKey);\n        }\n      }\n      set({\n        entitlementsByKey: updated\n      });\n\n      // Remove legacy data after migration\n      await (0, _libStorage.storageRemove)(LEGACY_STORAGE_KEY);\n      dlog('[entitlementStore] Legacy migration complete');\n    } catch (e) {\n      console.error('[entitlementStore] Legacy migration error:', e);\n    }\n  }\n});","lineCount":447,"map":[[7,2,112,0,"Object"],[7,8,112,0],[7,9,112,0,"defineProperty"],[7,23,112,0],[7,24,112,0,"exports"],[7,31,112,0],[8,4,112,0,"enumerable"],[8,14,112,0],[9,4,112,0,"get"],[9,7,112,0],[9,18,112,0,"get"],[9,19,112,0],[10,6,112,0],[10,13,112,0,"useEntitlementStore"],[10,32,112,0],[11,4,112,0],[12,2,112,0],[13,2,16,0],[13,6,16,0,"_zustand"],[13,14,16,0],[13,17,16,0,"require"],[13,24,16,0],[13,25,16,0,"_dependencyMap"],[13,39,16,0],[14,2,17,0],[14,6,17,0,"_libStorage"],[14,17,17,0],[14,20,17,0,"require"],[14,27,17,0],[14,28,17,0,"_dependencyMap"],[14,42,17,0],[15,2,18,0],[15,6,18,0,"_libEntitlementsTypes"],[15,27,18,0],[15,30,18,0,"require"],[15,37,18,0],[15,38,18,0,"_dependencyMap"],[15,52,18,0],[16,2,27,0],[16,6,27,0,"_libEntitlementsLegacy"],[16,28,27,0],[16,31,27,0,"require"],[16,38,27,0],[16,39,27,0,"_dependencyMap"],[16,53,27,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,0,10,0],[27,0,11,0],[28,0,12,0],[29,0,13,0],[30,0,14,0],[32,2,33,0],[33,2,34,0],[33,8,34,6,"dlog"],[33,12,34,10],[33,15,34,13,"dlog"],[33,16,34,14],[33,19,34,17,"args"],[33,23,34,28],[33,28,34,33],[34,4,34,35],[34,8,34,39,"__DEV__"],[34,15,34,46],[34,17,34,48,"console"],[34,24,34,55],[34,25,34,56,"log"],[34,28,34,59],[34,29,34,60],[34,32,34,63,"args"],[34,36,34,67],[34,37,34,68],[35,2,34,70],[35,3,34,71],[36,2,36,0],[36,8,36,6,"STORAGE_KEY"],[36,19,36,17],[36,22,36,20],[36,53,36,51],[37,2,37,0],[37,8,37,6,"LEGACY_STORAGE_KEY"],[37,26,37,24],[37,29,37,27],[37,60,37,58],[39,2,39,0],[40,2,40,0],[40,8,40,6,"DEFAULT_TTL_SECONDS"],[40,27,40,25],[40,30,40,28],[40,33,40,31],[41,2,41,0],[42,2,42,0],[42,8,42,6,"MIN_TTL_SECONDS"],[42,23,42,21],[42,26,42,24],[42,28,42,26],[43,2,43,0],[44,2,44,0],[44,8,44,6,"MAX_TTL_SECONDS"],[44,23,44,21],[44,26,44,24],[44,30,44,28],[46,2,46,0],[47,2,47,0],[47,6,47,4,"_getEntitlementsSnapshot"],[47,30,47,74],[47,33,47,77],[47,37,47,81],[48,2,48,0],[48,17,48,15,"getEntitlementsSnapshotApi"],[48,43,48,41,"getEntitlementsSnapshotApi"],[48,44,48,41],[48,46,48,75],[49,4,49,2],[49,8,49,6],[49,9,49,7,"_getEntitlementsSnapshot"],[49,33,49,31],[49,35,49,33],[50,6,50,4],[50,12,50,10,"api"],[50,15,50,13],[50,18,50,16],[50,24,50,16,"require"],[50,31,50,16],[50,32,50,16,"_dependencyMap"],[50,46,50,16],[50,89,50,16,"_dependencyMap"],[50,103,50,16],[50,108,50,16,"_dependencyMap"],[50,122,50,16],[50,123,50,16,"paths"],[50,128,50,16],[50,143,50,42],[51,6,51,4,"_getEntitlementsSnapshot"],[51,30,51,28],[51,33,51,31,"api"],[51,36,51,34],[51,37,51,35,"getEntitlementsSnapshot"],[51,60,51,58],[52,4,52,2],[53,4,53,2],[53,11,53,9,"_getEntitlementsSnapshot"],[53,35,53,33],[53,36,53,34],[53,37,53,35],[54,2,54,0],[56,2,56,0],[57,2,57,0],[57,6,57,4,"_getAuthEpoch"],[57,19,57,40],[57,22,57,43],[57,26,57,47],[58,2,58,0],[58,11,58,9,"getAuthEpoch"],[58,23,58,21,"getAuthEpoch"],[58,24,58,21],[58,26,58,32],[59,4,59,2],[59,8,59,6],[59,9,59,7,"_getAuthEpoch"],[59,22,59,20],[59,24,59,22],[60,6,60,4],[60,12,60,10],[61,8,60,12,"useGameStore"],[62,6,60,25],[62,7,60,26],[62,10,60,29,"require"],[62,17,60,36],[62,18,60,36,"_dependencyMap"],[62,32,60,36],[62,50,60,50],[62,51,60,51],[63,6,61,4,"_getAuthEpoch"],[63,19,61,17],[63,22,61,20,"_getAuthEpoch"],[63,23,61,20],[63,28,61,26,"useGameStore"],[63,40,61,38],[63,41,61,39,"getState"],[63,49,61,47],[63,50,61,48],[63,51,61,49],[63,52,61,50,"authEpoch"],[63,61,61,59],[64,4,62,2],[65,4,63,2],[65,11,63,9,"_getAuthEpoch"],[65,24,63,22],[65,25,63,23],[65,26,63,24],[66,2,64,0],[68,2,66,0],[69,2,67,0],[69,6,67,4,"_getUser"],[69,14,67,32],[69,17,67,35],[69,21,67,39],[70,2,68,0],[70,11,68,9,"getUser"],[70,18,68,16,"getUser"],[70,19,68,16],[70,21,68,24],[71,4,69,2],[71,8,69,6],[71,9,69,7,"_getUser"],[71,17,69,15],[71,19,69,17],[72,6,70,4],[72,12,70,10],[73,8,70,12,"useGameStore"],[74,6,70,25],[74,7,70,26],[74,10,70,29,"require"],[74,17,70,36],[74,18,70,36,"_dependencyMap"],[74,32,70,36],[74,50,70,50],[74,51,70,51],[75,6,71,4,"_getUser"],[75,14,71,12],[75,17,71,15,"_getUser"],[75,18,71,15],[75,23,71,21,"useGameStore"],[75,35,71,33],[75,36,71,34,"getState"],[75,44,71,42],[75,45,71,43],[75,46,71,44],[75,47,71,45,"user"],[75,51,71,49],[76,4,72,2],[77,4,73,2],[77,11,73,9,"_getUser"],[77,19,73,17],[77,20,73,18],[77,21,73,19],[78,2,74,0],[79,2,112,7],[79,8,112,13,"useEntitlementStore"],[79,27,112,32],[79,30,112,35],[79,34,112,35,"create"],[79,42,112,41],[79,43,112,41,"create"],[79,49,112,41],[79,51,112,65],[79,52,112,66,"set"],[79,55,112,69],[79,57,112,71,"get"],[79,60,112,74],[79,66,112,80],[80,4,113,2,"snapshot"],[80,12,113,10],[80,14,113,12],[80,18,113,16],[81,4,114,2,"entitlementsByKey"],[81,21,114,19],[81,23,114,21],[81,27,114,21,"createEmptyEntitlementsMap"],[81,48,114,47],[81,49,114,47,"createEmptyEntitlementsMap"],[81,75,114,47],[81,77,114,48],[81,78,114,49],[82,4,115,2,"lastRefreshAt"],[82,17,115,15],[82,19,115,17],[82,23,115,21],[83,4,116,2,"isRefreshing"],[83,16,116,14],[83,18,116,16],[83,23,116,21],[84,4,117,2,"refreshError"],[84,16,117,14],[84,18,117,16],[84,22,117,20],[85,4,118,2,"entitlementEpoch"],[85,20,118,18],[85,22,118,20],[85,23,118,21],[86,4,118,24],[88,4,120,2],[89,0,121,0],[90,0,122,0],[91,0,123,0],[92,4,124,2,"hydrateEntitlements"],[92,23,124,21],[92,25,124,23],[92,31,124,23,"hydrateEntitlements"],[92,32,124,23],[92,37,124,35],[93,6,125,4,"dlog"],[93,10,125,8],[93,11,125,9],[93,55,125,53],[93,56,125,54],[94,6,127,4],[94,10,127,8],[95,8,128,6],[96,8,129,6],[96,14,129,12,"cached"],[96,20,129,18],[96,23,129,21],[96,29,129,27],[96,33,129,27,"storageGet"],[96,44,129,37],[96,45,129,37,"storageGet"],[96,55,129,37],[96,57,129,38,"STORAGE_KEY"],[96,68,129,49],[96,69,129,50],[97,8,130,6],[97,12,130,10,"cached"],[97,18,130,16],[97,20,130,18],[98,10,131,8],[98,16,131,14,"parsed"],[98,22,131,20],[98,25,131,23,"JSON"],[98,29,131,27],[98,30,131,28,"parse"],[98,35,131,33],[98,36,131,34,"cached"],[98,42,131,40],[98,43,131,65],[99,10,132,8],[99,16,132,14,"normalized"],[99,26,132,24],[99,29,132,27],[100,12,132,29],[100,15,132,32],[100,19,132,32,"createEmptyEntitlementsMap"],[100,40,132,58],[100,41,132,58,"createEmptyEntitlementsMap"],[100,67,132,58],[100,69,132,59],[100,70,132,60],[101,12,132,62],[101,15,132,65,"parsed"],[101,21,132,71],[101,22,132,72,"entitlements"],[102,10,132,85],[102,11,132,86],[103,10,133,8,"set"],[103,13,133,11],[103,14,133,12],[104,12,134,10,"snapshot"],[104,20,134,18],[104,22,134,20,"parsed"],[104,28,134,26],[105,12,135,10,"entitlementsByKey"],[105,29,135,27],[105,31,135,29,"normalized"],[106,10,136,8],[106,11,136,9],[106,12,136,10],[107,10,137,8,"dlog"],[107,14,137,12],[107,15,137,13],[107,56,137,54],[107,58,137,56,"Object"],[107,64,137,62],[107,65,137,63,"keys"],[107,69,137,67],[107,70,137,68,"normalized"],[107,80,137,78],[107,81,137,79],[107,82,137,80,"length"],[107,88,137,86],[107,90,137,88],[107,96,137,94],[107,97,137,95],[108,8,138,6],[110,8,140,6],[111,8,141,6],[111,14,141,12,"migrateLegacyData"],[111,31,141,29],[111,32,141,30,"set"],[111,35,141,33],[111,37,141,35,"get"],[111,40,141,38],[111,41,141,39],[112,6,143,4],[112,7,143,5],[112,8,143,6],[112,15,143,13,"e"],[112,16,143,14],[112,18,143,16],[113,8,144,6,"console"],[113,15,144,13],[113,16,144,14,"error"],[113,21,144,19],[113,22,144,20],[113,59,144,57],[113,61,144,59,"e"],[113,62,144,60],[113,63,144,61],[114,6,145,4],[115,4,146,2],[115,5,146,3],[116,4,148,2],[117,0,149,0],[118,0,150,0],[119,0,151,0],[120,0,152,0],[121,0,153,0],[122,4,154,2,"refreshFromServer"],[122,21,154,19],[122,23,154,21],[122,29,154,28,"reason"],[122,35,154,34],[122,39,154,39],[123,6,155,4],[123,10,155,8,"get"],[123,13,155,11],[123,14,155,12],[123,15,155,13],[123,16,155,14,"isRefreshing"],[123,28,155,26],[123,30,155,28],[124,8,156,6,"dlog"],[124,12,156,10],[124,13,156,11],[124,62,156,60],[124,63,156,61],[125,8,157,6],[126,6,158,4],[127,6,160,4],[127,12,160,10,"epochAtStart"],[127,24,160,22],[127,27,160,25,"get"],[127,30,160,28],[127,31,160,29],[127,32,160,30],[127,33,160,31,"entitlementEpoch"],[127,49,160,47],[128,6,161,4],[128,12,161,10,"authEpochAtStart"],[128,28,161,26],[128,31,161,29,"getAuthEpoch"],[128,43,161,41],[128,44,161,42],[128,45,161,43],[128,46,161,44],[128,47,161,46],[130,6,163,4,"dlog"],[130,10,163,8],[130,11,163,9],[130,63,163,61],[130,65,163,63,"reason"],[130,71,163,69],[130,72,163,70],[131,6,164,4,"set"],[131,9,164,7],[131,10,164,8],[132,8,164,10,"isRefreshing"],[132,20,164,22],[132,22,164,24],[132,26,164,28],[133,8,164,30,"refreshError"],[133,20,164,42],[133,22,164,44],[134,6,164,49],[134,7,164,50],[134,8,164,51],[135,6,166,4],[135,10,166,8],[136,8,167,6],[136,14,167,12,"snap"],[136,18,167,16],[136,21,167,19],[136,27,167,25,"getEntitlementsSnapshotApi"],[136,53,167,51],[136,54,167,52],[136,55,167,53],[138,8,169,6],[139,8,170,6],[139,12,170,10,"get"],[139,15,170,13],[139,16,170,14],[139,17,170,15],[139,18,170,16,"entitlementEpoch"],[139,34,170,32],[139,39,170,37,"epochAtStart"],[139,51,170,49],[139,53,170,51],[140,10,171,8,"dlog"],[140,14,171,12],[140,15,171,13],[140,84,171,82],[140,85,171,83],[141,10,172,8,"set"],[141,13,172,11],[141,14,172,12],[142,12,172,14,"isRefreshing"],[142,24,172,26],[142,26,172,28],[143,10,172,34],[143,11,172,35],[143,12,172,36],[144,10,173,8],[145,8,174,6],[147,8,176,6],[148,8,177,6],[148,12,177,10,"getAuthEpoch"],[148,24,177,22],[148,25,177,23],[148,26,177,24],[148,31,177,29,"authEpochAtStart"],[148,47,177,45],[148,49,177,47],[149,10,178,8,"dlog"],[149,14,178,12],[149,15,178,13],[149,83,178,81],[149,84,178,82],[150,10,179,8,"set"],[150,13,179,11],[150,14,179,12],[151,12,179,14,"isRefreshing"],[151,24,179,26],[151,26,179,28],[152,10,179,34],[152,11,179,35],[152,12,179,36],[153,10,180,8],[154,8,181,6],[156,8,183,6],[157,8,184,6],[157,14,184,12,"normalized"],[157,24,184,22],[157,27,184,25],[158,10,184,27],[158,13,184,30],[158,17,184,30,"createEmptyEntitlementsMap"],[158,38,184,56],[158,39,184,56,"createEmptyEntitlementsMap"],[158,65,184,56],[158,67,184,57],[158,68,184,58],[159,10,184,60],[159,13,184,63,"snap"],[159,17,184,67],[159,18,184,68,"entitlements"],[160,8,184,81],[160,9,184,82],[161,8,186,6,"set"],[161,11,186,9],[161,12,186,10],[162,10,187,8,"snapshot"],[162,18,187,16],[162,20,187,18,"snap"],[162,24,187,22],[163,10,188,8,"entitlementsByKey"],[163,27,188,25],[163,29,188,27,"normalized"],[163,39,188,37],[164,10,189,8,"lastRefreshAt"],[164,23,189,21],[164,25,189,23,"Date"],[164,29,189,27],[164,30,189,28,"now"],[164,33,189,31],[164,34,189,32],[164,35,189,33],[165,10,190,8,"isRefreshing"],[165,22,190,20],[165,24,190,22],[166,8,191,6],[166,9,191,7],[166,10,191,8],[168,8,193,6],[169,8,194,6],[169,14,194,12],[169,18,194,12,"storageSet"],[169,29,194,22],[169,30,194,22,"storageSet"],[169,40,194,22],[169,42,194,23,"STORAGE_KEY"],[169,53,194,34],[169,55,194,36,"JSON"],[169,59,194,40],[169,60,194,41,"stringify"],[169,69,194,50],[169,70,194,51,"snap"],[169,74,194,55],[169,75,194,56],[169,76,194,57],[170,8,196,6,"dlog"],[170,12,196,10],[170,13,196,11],[170,56,196,54],[170,58,196,56,"snap"],[170,62,196,60],[170,63,196,61,"version"],[170,70,196,68],[170,71,196,69],[171,6,198,4],[171,7,198,5],[171,8,198,6],[171,15,198,13,"e"],[171,16,198,19],[171,18,198,21],[172,8,199,6],[173,8,200,6],[173,12,200,10,"get"],[173,15,200,13],[173,16,200,14],[173,17,200,15],[173,18,200,16,"entitlementEpoch"],[173,34,200,32],[173,39,200,37,"epochAtStart"],[173,51,200,49],[173,55,200,53,"getAuthEpoch"],[173,67,200,65],[173,68,200,66],[173,69,200,67],[173,74,200,72,"authEpochAtStart"],[173,90,200,88],[173,92,200,90],[174,10,201,8,"dlog"],[174,14,201,12],[174,15,201,13],[174,80,201,78],[174,81,201,79],[175,10,202,8,"set"],[175,13,202,11],[175,14,202,12],[176,12,202,14,"isRefreshing"],[176,24,202,26],[176,26,202,28],[177,10,202,34],[177,11,202,35],[177,12,202,36],[178,10,203,8],[179,8,204,6],[180,8,206,6],[180,14,206,12,"errorMsg"],[180,22,206,20],[180,25,206,23,"e"],[180,26,206,24],[180,28,206,26,"response"],[180,36,206,34],[180,38,206,36,"data"],[180,42,206,40],[180,44,206,42,"detail"],[180,50,206,48],[180,54,206,52,"e"],[180,55,206,53],[180,57,206,55,"message"],[180,64,206,62],[180,68,206,66],[180,100,206,98],[181,8,207,6,"console"],[181,15,207,13],[181,16,207,14,"error"],[181,21,207,19],[181,22,207,20],[181,57,207,55],[181,59,207,57,"errorMsg"],[181,67,207,65],[181,68,207,66],[182,8,208,6,"set"],[182,11,208,9],[182,12,208,10],[183,10,209,8,"isRefreshing"],[183,22,209,20],[183,24,209,22],[183,29,209,27],[184,10,210,8,"refreshError"],[184,22,210,20],[184,24,210,22,"errorMsg"],[185,8,211,6],[185,9,211,7],[185,10,211,8],[186,6,212,4],[187,4,213,2],[187,5,213,3],[188,4,215,2],[189,0,216,0],[190,0,217,0],[191,0,218,0],[192,4,219,2,"applySnapshot"],[192,17,219,15],[192,19,219,18,"snap"],[192,23,219,44],[192,27,219,49],[193,6,220,4,"dlog"],[193,10,220,8],[193,11,220,9],[193,68,220,66],[193,70,220,68,"snap"],[193,74,220,72],[193,75,220,73,"version"],[193,82,220,80],[193,83,220,81],[195,6,222,4],[196,6,223,4],[196,12,223,10,"normalized"],[196,22,223,20],[196,25,223,23],[197,8,223,25],[197,11,223,28],[197,15,223,28,"createEmptyEntitlementsMap"],[197,36,223,54],[197,37,223,54,"createEmptyEntitlementsMap"],[197,63,223,54],[197,65,223,55],[197,66,223,56],[198,8,223,58],[198,11,223,61,"snap"],[198,15,223,65],[198,16,223,66,"entitlements"],[199,6,223,79],[199,7,223,80],[200,6,225,4,"set"],[200,9,225,7],[200,10,225,8],[201,8,226,6,"snapshot"],[201,16,226,14],[201,18,226,16,"snap"],[201,22,226,20],[202,8,227,6,"entitlementsByKey"],[202,25,227,23],[202,27,227,25,"normalized"],[202,37,227,35],[203,8,228,6,"lastRefreshAt"],[203,21,228,19],[203,23,228,21,"Date"],[203,27,228,25],[203,28,228,26,"now"],[203,31,228,29],[203,32,228,30],[203,33,228,31],[204,8,229,6,"refreshError"],[204,20,229,18],[204,22,229,20],[205,6,230,4],[205,7,230,5],[205,8,230,6],[207,6,232,4],[208,6,233,4],[208,10,233,4,"storageSet"],[208,21,233,14],[208,22,233,14,"storageSet"],[208,32,233,14],[208,34,233,15,"STORAGE_KEY"],[208,45,233,26],[208,47,233,28,"JSON"],[208,51,233,32],[208,52,233,33,"stringify"],[208,61,233,42],[208,62,233,43,"snap"],[208,66,233,47],[208,67,233,48],[208,68,233,49],[208,69,233,50,"catch"],[208,74,233,55],[208,75,233,56],[208,81,233,62],[208,82,233,63],[208,83,233,64],[208,84,233,65],[209,4,234,2],[209,5,234,3],[210,4,236,2],[211,0,237,0],[212,0,238,0],[213,0,239,0],[214,0,240,0],[215,0,241,0],[216,4,242,2,"isStale"],[216,11,242,9],[216,13,242,11,"isStale"],[216,14,242,11],[216,19,242,17],[217,6,243,4],[217,12,243,10],[218,8,243,12,"snapshot"],[219,6,243,21],[219,7,243,22],[219,10,243,25,"get"],[219,13,243,28],[219,14,243,29],[219,15,243,30],[221,6,245,4],[222,6,246,4],[222,10,246,8],[222,11,246,9,"snapshot"],[222,19,246,17],[222,21,246,19],[222,28,246,26],[222,32,246,30],[224,6,248,4],[225,6,249,4],[225,12,249,10,"serverTimeStr"],[225,25,249,23],[225,28,249,26,"snapshot"],[225,36,249,34],[225,37,249,35,"server_time"],[225,48,249,46],[226,6,250,4],[226,12,250,10,"ttlSeconds"],[226,22,250,20],[226,25,250,23,"snapshot"],[226,33,250,31],[226,34,250,32,"ttl_seconds"],[226,45,250,43],[226,49,250,47,"DEFAULT_TTL_SECONDS"],[226,68,250,66],[228,6,252,4],[229,6,253,4],[229,12,253,10,"clampedTtl"],[229,22,253,20],[229,25,253,23,"Math"],[229,29,253,27],[229,30,253,28,"max"],[229,33,253,31],[229,34,253,32,"MIN_TTL_SECONDS"],[229,49,253,47],[229,51,253,49,"Math"],[229,55,253,53],[229,56,253,54,"min"],[229,59,253,57],[229,60,253,58,"MAX_TTL_SECONDS"],[229,75,253,73],[229,77,253,75,"ttlSeconds"],[229,87,253,85],[229,88,253,86],[229,89,253,87],[230,6,255,4],[230,10,255,8],[230,11,255,9,"serverTimeStr"],[230,24,255,22],[230,26,255,24],[231,8,256,6],[232,8,257,6],[232,14,257,12],[233,10,257,14,"lastRefreshAt"],[234,8,257,28],[234,9,257,29],[234,12,257,32,"get"],[234,15,257,35],[234,16,257,36],[234,17,257,37],[235,8,258,6],[235,12,258,10],[235,13,258,11,"lastRefreshAt"],[235,26,258,24],[235,28,258,26],[235,35,258,33],[235,39,258,37],[236,8,259,6],[236,14,259,12,"deviceNow"],[236,23,259,21],[236,26,259,24,"Date"],[236,30,259,28],[236,31,259,29,"now"],[236,34,259,32],[236,35,259,33],[236,36,259,34],[237,8,260,6],[237,15,260,13,"deviceNow"],[237,24,260,22],[237,27,260,25,"lastRefreshAt"],[237,40,260,38],[237,43,260,42,"clampedTtl"],[237,53,260,52],[237,56,260,55],[237,60,260,60],[238,6,261,4],[240,6,263,4],[241,6,264,4],[241,12,264,10,"serverTime"],[241,22,264,20],[241,25,264,23],[241,29,264,27,"Date"],[241,33,264,31],[241,34,264,32,"serverTimeStr"],[241,47,264,45],[241,48,264,46],[241,49,264,47,"getTime"],[241,56,264,54],[241,57,264,55],[241,58,264,56],[242,6,265,4],[242,10,265,8,"isNaN"],[242,15,265,13],[242,16,265,14,"serverTime"],[242,26,265,24],[242,27,265,25],[242,29,265,27],[243,8,266,6,"dlog"],[243,12,266,10],[243,13,266,11],[243,84,266,82],[243,85,266,83],[244,8,267,6],[244,15,267,13],[244,19,267,17],[245,6,268,4],[247,6,270,4],[248,6,271,4],[248,12,271,10],[249,8,271,12,"lastRefreshAt"],[250,6,271,26],[250,7,271,27],[250,10,271,30,"get"],[250,13,271,33],[250,14,271,34],[250,15,271,35],[251,6,272,4],[251,12,272,10,"timeSinceRefresh"],[251,28,272,26],[251,31,272,29,"lastRefreshAt"],[251,44,272,42],[251,47,272,45,"Date"],[251,51,272,49],[251,52,272,50,"now"],[251,55,272,53],[251,56,272,54],[251,57,272,55],[251,60,272,58,"lastRefreshAt"],[251,73,272,71],[251,76,272,74],[251,77,272,75],[252,6,273,4],[252,12,273,10,"estimatedServerNow"],[252,30,273,28],[252,33,273,31,"serverTime"],[252,43,273,41],[252,46,273,44,"timeSinceRefresh"],[252,62,273,60],[254,6,275,4],[255,6,276,4],[255,12,276,10,"expiresAt"],[255,21,276,19],[255,24,276,22,"serverTime"],[255,34,276,32],[255,37,276,36,"clampedTtl"],[255,47,276,46],[255,50,276,49],[255,54,276,54],[256,6,277,4],[256,12,277,10,"isStale"],[256,19,277,17],[256,22,277,20,"estimatedServerNow"],[256,40,277,38],[256,43,277,41,"expiresAt"],[256,52,277,50],[257,6,279,4],[257,10,279,8,"__DEV__"],[257,17,279,15],[257,21,279,19,"isStale"],[257,28,279,26],[257,30,279,28],[258,8,280,6,"dlog"],[258,12,280,10],[258,13,280,11],[258,49,280,47],[258,51,280,49],[259,10,281,8,"serverTime"],[259,20,281,18],[259,22,281,20],[259,26,281,24,"Date"],[259,30,281,28],[259,31,281,29,"serverTime"],[259,41,281,39],[259,42,281,40],[259,43,281,41,"toISOString"],[259,54,281,52],[259,55,281,53],[259,56,281,54],[260,10,282,8,"estimatedServerNow"],[260,28,282,26],[260,30,282,28],[260,34,282,32,"Date"],[260,38,282,36],[260,39,282,37,"estimatedServerNow"],[260,57,282,55],[260,58,282,56],[260,59,282,57,"toISOString"],[260,70,282,68],[260,71,282,69],[260,72,282,70],[261,10,283,8,"expiresAt"],[261,19,283,17],[261,21,283,19],[261,25,283,23,"Date"],[261,29,283,27],[261,30,283,28,"expiresAt"],[261,39,283,37],[261,40,283,38],[261,41,283,39,"toISOString"],[261,52,283,50],[261,53,283,51],[261,54,283,52],[262,10,284,8,"ttlSeconds"],[262,20,284,18],[262,22,284,20,"clampedTtl"],[263,8,285,6],[263,9,285,7],[263,10,285,8],[264,6,286,4],[265,6,288,4],[265,13,288,11,"isStale"],[265,20,288,18],[266,4,289,2],[266,5,289,3],[267,4,291,2],[268,0,292,0],[269,0,293,0],[270,0,294,0],[271,0,295,0],[272,0,296,0],[273,0,297,0],[274,0,298,0],[275,0,299,0],[276,0,300,0],[277,0,301,0],[278,0,302,0],[279,4,303,2,"ensureFreshEntitlements"],[279,27,303,25],[279,29,303,27],[279,35,303,34,"reason"],[279,41,303,55],[279,45,303,60],[280,6,304,4],[281,6,305,4],[281,12,305,10,"user"],[281,16,305,14],[281,19,305,17,"getUser"],[281,26,305,24],[281,27,305,25],[281,28,305,26],[282,6,306,4],[282,10,306,8],[282,11,306,9,"user"],[282,15,306,13],[282,17,306,15],[283,8,307,6,"dlog"],[283,12,307,10],[283,13,307,11],[283,64,307,62],[283,65,307,63],[284,8,308,6],[285,6,309,4],[287,6,311,4],[288,6,312,4],[288,10,312,8,"get"],[288,13,312,11],[288,14,312,12],[288,15,312,13],[288,16,312,14,"isRefreshing"],[288,28,312,26],[288,30,312,28],[289,8,313,6,"dlog"],[289,12,313,10],[289,13,313,11],[289,75,313,73],[289,76,313,74],[290,8,314,6],[291,6,315,4],[293,6,317,4],[294,6,318,4],[294,10,318,8],[294,11,318,9,"get"],[294,14,318,12],[294,15,318,13],[294,16,318,14],[294,17,318,15,"isStale"],[294,24,318,22],[294,25,318,23],[294,26,318,24],[294,28,318,26],[295,8,319,6,"dlog"],[295,12,319,10],[295,13,319,11],[295,71,319,69],[295,72,319,70],[296,8,320,6],[297,6,321,4],[298,6,323,4,"dlog"],[298,10,323,8],[298,11,323,9],[298,72,323,70],[298,74,323,72,"reason"],[298,80,323,78],[298,81,323,79],[299,6,324,4],[299,12,324,10,"get"],[299,15,324,13],[299,16,324,14],[299,17,324,15],[299,18,324,16,"refreshFromServer"],[299,35,324,33],[299,36,324,34,"reason"],[299,42,324,40],[299,43,324,41],[300,4,325,2],[300,5,325,3],[301,4,327,2],[302,0,328,0],[303,0,329,0],[304,0,330,0],[305,4,331,2,"clear"],[305,9,331,7],[305,11,331,9,"clear"],[305,12,331,9],[305,17,331,15],[306,6,332,4,"dlog"],[306,10,332,8],[306,11,332,9],[306,46,332,44],[306,47,332,45],[307,6,333,4,"set"],[307,9,333,7],[307,10,333,9,"s"],[307,11,333,10],[307,16,333,16],[308,8,334,6,"snapshot"],[308,16,334,14],[308,18,334,16],[308,22,334,20],[309,8,335,6,"entitlementsByKey"],[309,25,335,23],[309,27,335,25],[309,31,335,25,"createEmptyEntitlementsMap"],[309,52,335,51],[309,53,335,51,"createEmptyEntitlementsMap"],[309,79,335,51],[309,81,335,52],[309,82,335,53],[310,8,336,6,"lastRefreshAt"],[310,21,336,19],[310,23,336,21],[310,27,336,25],[311,8,337,6,"refreshError"],[311,20,337,18],[311,22,337,20],[311,26,337,24],[312,8,338,6,"entitlementEpoch"],[312,24,338,22],[312,26,338,24,"s"],[312,27,338,25],[312,28,338,26,"entitlementEpoch"],[312,44,338,42],[312,47,338,45],[312,48,338,46],[312,49,338,49],[313,6,339,4],[313,7,339,5],[313,8,339,6],[313,9,339,7],[314,6,340,4],[314,10,340,4,"storageRemove"],[314,21,340,17],[314,22,340,17,"storageRemove"],[314,35,340,17],[314,37,340,18,"STORAGE_KEY"],[314,48,340,29],[314,49,340,30],[314,50,340,31,"catch"],[314,55,340,36],[314,56,340,37],[314,62,340,43],[314,63,340,44],[314,64,340,45],[314,65,340,46],[315,4,341,2],[315,5,341,3],[316,4,343,2],[317,0,344,0],[318,0,345,0],[319,0,346,0],[320,4,347,2,"hasEntitlement"],[320,18,347,16],[320,20,347,19,"key"],[320,23,347,30],[320,27,347,35],[321,6,348,4],[321,12,348,10],[322,8,348,12,"entitlementsByKey"],[322,25,348,29],[323,8,348,31,"snapshot"],[324,6,348,40],[324,7,348,41],[324,10,348,44,"get"],[324,13,348,47],[324,14,348,48],[324,15,348,49],[325,6,349,4],[325,12,349,10,"entitlement"],[325,23,349,21],[325,26,349,24,"entitlementsByKey"],[325,43,349,41],[325,44,349,42,"key"],[325,47,349,45],[325,48,349,46],[326,6,350,4],[326,10,350,8],[326,11,350,9,"entitlement"],[326,22,350,20],[326,26,350,24,"entitlement"],[326,37,350,35],[326,38,350,36,"status"],[326,44,350,42],[326,49,350,47],[326,56,350,54],[326,58,350,56],[326,65,350,63],[326,70,350,68],[328,6,352,4],[329,6,353,4],[329,10,353,8,"entitlement"],[329,21,353,19],[329,22,353,20,"expires_at"],[329,32,353,30],[329,36,353,34,"snapshot"],[329,44,353,42],[329,46,353,44,"server_time"],[329,57,353,55],[329,59,353,57],[330,8,354,6],[330,14,354,12,"expiresAt"],[330,23,354,21],[330,26,354,24],[330,30,354,28,"Date"],[330,34,354,32],[330,35,354,33,"entitlement"],[330,46,354,44],[330,47,354,45,"expires_at"],[330,57,354,55],[330,58,354,56],[330,59,354,57,"getTime"],[330,66,354,64],[330,67,354,65],[330,68,354,66],[331,8,355,6],[331,14,355,12,"serverNow"],[331,23,355,21],[331,26,355,24],[331,30,355,28,"Date"],[331,34,355,32],[331,35,355,33,"snapshot"],[331,43,355,41],[331,44,355,42,"server_time"],[331,55,355,53],[331,56,355,54],[331,57,355,55,"getTime"],[331,64,355,62],[331,65,355,63],[331,66,355,64],[332,8,356,6],[332,12,356,10,"serverNow"],[332,21,356,19],[332,24,356,22,"expiresAt"],[332,33,356,31],[332,35,356,33],[332,42,356,40],[332,47,356,45],[333,6,357,4],[334,6,359,4],[334,13,359,11],[334,17,359,15],[335,4,360,2],[335,5,360,3],[336,4,362,2],[337,4,363,2],[338,4,364,2],[339,4,365,2],[341,4,367,2,"devGrantEntitlement"],[341,23,367,21],[341,25,367,24,"key"],[341,28,367,35],[341,32,367,40],[342,6,368,4],[342,10,368,8],[342,11,368,9,"__DEV__"],[342,18,368,16],[342,20,368,18],[343,8,369,6,"console"],[343,15,369,13],[343,16,369,14,"warn"],[343,20,369,18],[343,21,369,19],[343,92,369,90],[343,93,369,91],[344,8,370,6],[345,6,371,4],[346,6,373,4],[346,12,373,10],[347,8,373,12,"entitlementsByKey"],[348,6,373,30],[348,7,373,31],[348,10,373,34,"get"],[348,13,373,37],[348,14,373,38],[348,15,373,39],[349,6,374,4],[349,12,374,10,"updated"],[349,19,374,17],[349,22,374,20],[350,8,375,6],[350,11,375,9,"entitlementsByKey"],[350,28,375,26],[351,8,376,6],[351,9,376,7,"key"],[351,12,376,10],[351,15,376,13],[352,10,377,8,"key"],[352,13,377,11],[353,10,378,8,"status"],[353,16,378,14],[353,18,378,16],[353,25,378,32],[354,10,379,8,"granted_at"],[354,20,379,18],[354,22,379,20],[354,26,379,24,"Date"],[354,30,379,28],[354,31,379,29],[354,32,379,30],[354,33,379,31,"toISOString"],[354,44,379,42],[354,45,379,43],[354,46,379,44],[355,10,380,8,"reason"],[355,16,380,14],[355,18,380,16],[356,8,381,6],[357,6,382,4],[357,7,382,5],[359,6,384,4],[360,6,385,4],[360,12,385,10,"fakeSnapshot"],[360,24,385,44],[360,27,385,47],[361,8,386,6,"server_time"],[361,19,386,17],[361,21,386,19],[361,25,386,23,"Date"],[361,29,386,27],[361,30,386,28],[361,31,386,29],[361,32,386,30,"toISOString"],[361,43,386,41],[361,44,386,42],[361,45,386,43],[362,8,387,6,"version"],[362,15,387,13],[362,17,387,15,"Date"],[362,21,387,19],[362,22,387,20,"now"],[362,25,387,23],[362,26,387,24],[362,27,387,25],[363,8,388,6,"username"],[363,16,388,14],[363,18,388,16],[363,28,388,26],[364,8,389,6,"entitlements"],[364,20,389,18],[364,22,389,20,"updated"],[364,29,389,27],[365,8,390,6,"source"],[365,14,390,12],[365,16,390,14],[366,6,391,4],[366,7,391,5],[367,6,393,4,"set"],[367,9,393,7],[367,10,393,8],[368,8,394,6,"entitlementsByKey"],[368,25,394,23],[368,27,394,25,"updated"],[368,34,394,32],[369,8,395,6,"snapshot"],[369,16,395,14],[369,18,395,16,"fakeSnapshot"],[370,6,396,4],[370,7,396,5],[370,8,396,6],[371,6,397,4,"dlog"],[371,10,397,8],[371,11,397,9],[371,44,397,42],[371,46,397,44,"key"],[371,49,397,47],[371,50,397,48],[372,4,398,2],[372,5,398,3],[373,4,400,2,"devRevokeEntitlement"],[373,24,400,22],[373,26,400,25,"key"],[373,29,400,36],[373,33,400,41],[374,6,401,4],[374,10,401,8],[374,11,401,9,"__DEV__"],[374,18,401,16],[374,20,401,18],[375,8,402,6,"console"],[375,15,402,13],[375,16,402,14,"warn"],[375,20,402,18],[375,21,402,19],[375,93,402,91],[375,94,402,92],[376,8,403,6],[377,6,404,4],[378,6,406,4],[378,12,406,10],[379,8,406,12,"entitlementsByKey"],[380,6,406,30],[380,7,406,31],[380,10,406,34,"get"],[380,13,406,37],[380,14,406,38],[380,15,406,39],[381,6,407,4],[381,12,407,10,"updated"],[381,19,407,17],[381,22,407,20],[382,8,408,6],[382,11,408,9,"entitlementsByKey"],[382,28,408,26],[383,8,409,6],[383,9,409,7,"key"],[383,12,409,10],[383,15,409,13],[384,10,410,8,"key"],[384,13,410,11],[385,10,411,8,"status"],[385,16,411,14],[385,18,411,16],[386,8,412,6],[387,6,413,4],[387,7,413,5],[388,6,415,4,"set"],[388,9,415,7],[388,10,415,8],[389,8,415,10,"entitlementsByKey"],[389,25,415,27],[389,27,415,29,"updated"],[390,6,415,37],[390,7,415,38],[390,8,415,39],[391,6,416,4,"dlog"],[391,10,416,8],[391,11,416,9],[391,44,416,42],[391,46,416,44,"key"],[391,49,416,47],[391,50,416,48],[392,4,417,2],[392,5,417,3],[393,4,419,2,"devClearAll"],[393,15,419,13],[393,17,419,15,"devClearAll"],[393,18,419,15],[393,23,419,21],[394,6,420,4],[394,10,420,8],[394,11,420,9,"__DEV__"],[394,18,420,16],[394,20,420,18],[395,8,421,6,"console"],[395,15,421,13],[395,16,421,14,"warn"],[395,20,421,18],[395,21,421,19],[395,84,421,82],[395,85,421,83],[396,8,422,6],[397,6,423,4],[398,6,425,4,"set"],[398,9,425,7],[398,10,425,8],[399,8,426,6,"entitlementsByKey"],[399,25,426,23],[399,27,426,25],[399,31,426,25,"createEmptyEntitlementsMap"],[399,52,426,51],[399,53,426,51,"createEmptyEntitlementsMap"],[399,79,426,51],[399,81,426,52],[399,82,426,53],[400,8,427,6,"snapshot"],[400,16,427,14],[400,18,427,16],[401,6,428,4],[401,7,428,5],[401,8,428,6],[402,6,429,4],[402,10,429,4,"storageRemove"],[402,21,429,17],[402,22,429,17,"storageRemove"],[402,35,429,17],[402,37,429,18,"STORAGE_KEY"],[402,48,429,29],[402,49,429,30],[402,50,429,31,"catch"],[402,55,429,36],[402,56,429,37],[402,62,429,43],[402,63,429,44],[402,64,429,45],[402,65,429,46],[403,6,430,4,"dlog"],[403,10,430,8],[403,11,430,9],[403,61,430,59],[403,62,430,60],[404,4,431,2],[405,2,432,0],[405,3,432,1],[405,4,432,2],[405,5,432,3],[407,2,434,0],[408,0,435,0],[409,0,436,0],[410,2,437,0],[410,17,437,15,"migrateLegacyData"],[410,34,437,32,"migrateLegacyData"],[410,35,438,2,"set"],[410,38,438,54],[410,40,439,2,"get"],[410,43,439,34],[410,45,440,2],[411,4,441,2],[411,8,441,6],[412,6,442,4],[412,12,442,10,"legacyData"],[412,22,442,20],[412,25,442,23],[412,31,442,29],[412,35,442,29,"storageGet"],[412,46,442,39],[412,47,442,39,"storageGet"],[412,57,442,39],[412,59,442,40,"LEGACY_STORAGE_KEY"],[412,77,442,58],[412,78,442,59],[413,6,443,4],[413,10,443,8],[413,11,443,9,"legacyData"],[413,21,443,19],[413,23,443,21],[414,6,445,4,"dlog"],[414,10,445,8],[414,11,445,9],[414,56,445,54],[414,57,445,55],[415,6,447,4],[415,12,447,10,"legacy"],[415,18,447,16],[415,21,447,19,"JSON"],[415,25,447,23],[415,26,447,24,"parse"],[415,31,447,29],[415,32,447,30,"legacyData"],[415,42,447,40],[415,43,447,41],[416,6,448,4],[416,12,448,10],[417,8,448,12,"entitlementsByKey"],[418,6,448,30],[418,7,448,31],[418,10,448,34,"get"],[418,13,448,37],[418,14,448,38],[418,15,448,39],[419,6,449,4],[419,12,449,10,"updated"],[419,19,449,17],[419,22,449,20],[420,8,449,22],[420,11,449,25,"entitlementsByKey"],[421,6,449,43],[421,7,449,44],[423,6,451,4],[424,6,452,4],[424,11,452,9],[424,17,452,15],[424,18,452,16,"oldKey"],[424,24,452,22],[424,26,452,24,"value"],[424,31,452,29],[424,32,452,30],[424,36,452,34,"Object"],[424,42,452,40],[424,43,452,41,"entries"],[424,50,452,48],[424,51,452,49,"legacy"],[424,57,452,55],[424,58,452,56],[424,60,452,58],[425,8,453,6],[425,12,453,10,"value"],[425,17,453,15],[425,19,453,17],[426,10,454,8],[426,16,454,14,"newKey"],[426,22,454,20],[426,25,454,23],[426,29,454,23,"migrateLegacyKey"],[426,51,454,39],[426,52,454,39,"migrateLegacyKey"],[426,68,454,39],[426,70,454,40,"oldKey"],[426,76,454,46],[426,77,454,47],[427,10,455,8,"updated"],[427,17,455,15],[427,18,455,16,"newKey"],[427,24,455,22],[427,25,455,23],[427,28,455,26],[428,12,456,10,"key"],[428,15,456,13],[428,17,456,15,"newKey"],[428,23,456,21],[429,12,457,10,"status"],[429,18,457,16],[429,20,457,18],[429,27,457,25],[430,12,458,10,"granted_at"],[430,22,458,20],[430,24,458,22],[430,28,458,26,"Date"],[430,32,458,30],[430,33,458,31],[430,34,458,32],[430,35,458,33,"toISOString"],[430,46,458,44],[430,47,458,45],[430,48,458,46],[431,12,459,10,"reason"],[431,18,459,16],[431,20,459,18],[432,10,460,8],[432,11,460,9],[433,10,461,8,"dlog"],[433,14,461,12],[433,15,461,13],[433,45,461,43],[433,47,461,45,"oldKey"],[433,53,461,51],[433,55,461,53],[433,59,461,57],[433,61,461,59,"newKey"],[433,67,461,65],[433,68,461,66],[434,8,462,6],[435,6,463,4],[436,6,465,4,"set"],[436,9,465,7],[436,10,465,8],[437,8,465,10,"entitlementsByKey"],[437,25,465,27],[437,27,465,29,"updated"],[438,6,465,37],[438,7,465,38],[438,8,465,39],[440,6,467,4],[441,6,468,4],[441,12,468,10],[441,16,468,10,"storageRemove"],[441,27,468,23],[441,28,468,23,"storageRemove"],[441,41,468,23],[441,43,468,24,"LEGACY_STORAGE_KEY"],[441,61,468,42],[441,62,468,43],[442,6,469,4,"dlog"],[442,10,469,8],[442,11,469,9],[442,57,469,55],[442,58,469,56],[443,4,471,2],[443,5,471,3],[443,6,471,4],[443,13,471,11,"e"],[443,14,471,12],[443,16,471,14],[444,6,472,4,"console"],[444,13,472,11],[444,14,472,12,"error"],[444,19,472,17],[444,20,472,18],[444,64,472,62],[444,66,472,64,"e"],[444,67,472,65],[444,68,472,66],[445,4,473,2],[446,2,474,0],[447,0,474,1],[447,3]],"functionMap":{"names":["<global>","dlog","getEntitlementsSnapshotApi","getAuthEpoch","_getAuthEpoch","getUser","_getUser","create$argument_0","hydrateEntitlements","refreshFromServer","applySnapshot","storageSet._catch$argument_0","isStale","ensureFreshEntitlements","clear","set$argument_0","storageRemove._catch$argument_0","hasEntitlement","devGrantEntitlement","devRevokeEntitlement","devClearAll","migrateLegacyData"],"mappings":"AAA;aCiC,0DD;AEc;CFM;AGI;oBCG,uCD;CHG;AKI;eCG,kCD;CLG;iEOsC;uBCY;GDsB;qBEQ;GF2D;iBGM;wDCc,QD;GHC;WKQ;GL+C;2BMc;GNsB;SOM;QCE;MDM;qCEC,QF;GPC;kBUM;GVa;uBWO;GX+B;wBYE;GZiB;eaE;qCJU,QI;GbE;EPC;AqBK;CrBqC"},"hasCjsExports":false},"type":"js/module"}]}