{"dependencies":[{"name":"./features","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":370},"end":{"line":18,"column":46,"index":416}}],"key":"bmouY5/rpPD3Ua8O/sPZIfrV9Jw=","exportNames":["*"],"imports":1}},{"name":"./entitlements/gating","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":483},"end":{"line":20,"column":98,"index":581}}],"key":"XAmmiiz1xDYBiUCtpO5ZlQoS9FQ=","exportNames":["*"],"imports":1}},{"name":"./entitlements/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":582},"end":{"line":21,"column":82,"index":664}}],"key":"WFFU4HFKj7ZPoJL6d99FCOSpwv4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  /**\n   * Cinematics Access Helper\n   * \n   * Determines if user can access cinematics based on:\n   * 1. Paid entitlement (PREMIUM_CINEMATICS_PACK)\n   * 2. Feature flag (HERO_CINEMATICS)\n   * \n   * Also provides per-hero ownership check for stat bonuses.\n   * \n   * Usage:\n   * if (!canAccessCinematics(user?.id)) {\n   *   navigate('paid-features');\n   *   return;\n   * }\n   * openCinematic();\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.canAccessCinematics = canAccessCinematics;\n  exports.useCanAccessCinematics = useCanAccessCinematics;\n  exports.hasHeroPremiumCinematicOwned = hasHeroPremiumCinematicOwned;\n  exports.useHasHeroPremiumCinematicOwned = useHasHeroPremiumCinematicOwned;\n  var _features = require(_dependencyMap[0], \"./features\");\n  var _entitlementsGating = require(_dependencyMap[1], \"./entitlements/gating\");\n  var _entitlementsTypes = require(_dependencyMap[2], \"./entitlements/types\");\n  /**\n   * Check if user can access cinematics system (synchronous check)\n   * Requires BOTH: paid pack entitlement AND feature flag enabled\n   * @param stableId - User ID for feature flag rollout\n   * @returns true if user has paid AND feature flag is enabled\n   */\n  function canAccessCinematics(stableId) {\n    // Use canonical gating helper\n    const hasPack = (0, _entitlementsGating.hasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Hook version for reactive updates\n   */\n  function useCanAccessCinematics(stableId) {\n    _s();\n    // Use canonical gating hook\n    const hasPack = (0, _entitlementsGating.useHasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Check if user owns the premium cinematic for a specific hero.\n   * This is what grants the stat perk (+10% HP, +5% ATK).\n   * @param heroId - The hero's stable ID (e.g., 'michael_the_archangel')\n   * @returns true if user owns this hero's premium cinematic\n   */\n  _s(useCanAccessCinematics, \"EJfti9qJVmgoBZiXScPEkA5slqY=\", false, function () {\n    return [_entitlementsGating.useHasEntitlement];\n  });\n  function hasHeroPremiumCinematicOwned(heroId) {\n    if (!heroId) return false;\n    // Use canonical gating helper\n    return (0, _entitlementsGating.canAccessHeroCinematic)(heroId);\n  }\n\n  /**\n   * Hook version for reactive per-hero ownership check\n   */\n  function useHasHeroPremiumCinematicOwned(heroId) {\n    _s2();\n    // Use canonical gating hook with dynamic key\n    const key = (0, _entitlementsTypes.premiumCinematicOwnedKey)(heroId);\n    const hasHero = (0, _entitlementsGating.useHasEntitlement)(key);\n    const hasPack = (0, _entitlementsGating.useHasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    // User has access if they own the pack OR own the individual hero cinematic\n    return hasHero || hasPack;\n  }\n  _s2(useHasHeroPremiumCinematicOwned, \"UMt7F5sks9pJMQrA+esKWPIIfwA=\", false, function () {\n    return [_entitlementsGating.useHasEntitlement, _entitlementsGating.useHasEntitlement];\n  });\n});","lineCount":90,"map":[[6,2,1,0],[7,0,2,0],[8,0,3,0],[9,0,4,0],[10,0,5,0],[11,0,6,0],[12,0,7,0],[13,0,8,0],[14,0,9,0],[15,0,10,0],[16,0,11,0],[17,0,12,0],[18,0,13,0],[19,0,14,0],[20,0,15,0],[21,0,16,0],[22,2,1,0,"Object"],[22,8,1,0],[22,9,1,0,"defineProperty"],[22,23,1,0],[22,24,1,0,"exports"],[22,31,1,0],[23,4,1,0,"value"],[23,9,1,0],[24,2,1,0],[25,2,29,0,"exports"],[25,9,29,0],[25,10,29,0,"canAccessCinematics"],[25,29,29,0],[25,32,29,0,"canAccessCinematics"],[25,51,29,0],[26,2,40,0,"exports"],[26,9,40,0],[26,10,40,0,"useCanAccessCinematics"],[26,32,40,0],[26,35,40,0,"useCanAccessCinematics"],[26,57,40,0],[27,2,54,0,"exports"],[27,9,54,0],[27,10,54,0,"hasHeroPremiumCinematicOwned"],[27,38,54,0],[27,41,54,0,"hasHeroPremiumCinematicOwned"],[27,69,54,0],[28,2,63,0,"exports"],[28,9,63,0],[28,10,63,0,"useHasHeroPremiumCinematicOwned"],[28,41,63,0],[28,44,63,0,"useHasHeroPremiumCinematicOwned"],[28,75,63,0],[29,2,18,0],[29,6,18,0,"_features"],[29,15,18,0],[29,18,18,0,"require"],[29,25,18,0],[29,26,18,0,"_dependencyMap"],[29,40,18,0],[30,2,20,0],[30,6,20,0,"_entitlementsGating"],[30,25,20,0],[30,28,20,0,"require"],[30,35,20,0],[30,36,20,0,"_dependencyMap"],[30,50,20,0],[31,2,21,0],[31,6,21,0,"_entitlementsTypes"],[31,24,21,0],[31,27,21,0,"require"],[31,34,21,0],[31,35,21,0,"_dependencyMap"],[31,49,21,0],[32,2,23,0],[33,0,24,0],[34,0,25,0],[35,0,26,0],[36,0,27,0],[37,0,28,0],[38,2,29,7],[38,11,29,16,"canAccessCinematics"],[38,30,29,35,"canAccessCinematics"],[38,31,29,36,"stableId"],[38,39,29,53],[38,41,29,64],[39,4,30,2],[40,4,31,2],[40,10,31,8,"hasPack"],[40,17,31,15],[40,20,31,18],[40,24,31,18,"hasEntitlement"],[40,43,31,32],[40,44,31,32,"hasEntitlement"],[40,58,31,32],[40,60,31,33,"ENTITLEMENT_KEYS"],[40,78,31,49],[40,79,31,49,"ENTITLEMENT_KEYS"],[40,95,31,49],[40,96,31,50,"PREMIUM_CINEMATICS_PACK"],[40,119,31,73],[40,120,31,74],[41,4,32,2],[41,8,32,6],[41,9,32,7,"hasPack"],[41,16,32,14],[41,18,32,16],[41,25,32,23],[41,30,32,28],[42,4,34,2],[42,11,34,9],[42,15,34,9,"isFeatureEnabled"],[42,24,34,25],[42,25,34,25,"isFeatureEnabled"],[42,41,34,25],[42,43,34,26],[42,60,34,43],[42,62,34,45],[43,6,34,47,"stableId"],[44,4,34,56],[44,5,34,57],[44,6,34,58],[45,2,35,0],[47,2,37,0],[48,0,38,0],[49,0,39,0],[50,2,40,7],[50,11,40,16,"useCanAccessCinematics"],[50,33,40,38,"useCanAccessCinematics"],[50,34,40,39,"stableId"],[50,42,40,56],[50,44,40,67],[51,4,40,67,"_s"],[51,6,40,67],[52,4,41,2],[53,4,42,2],[53,10,42,8,"hasPack"],[53,17,42,15],[53,20,42,18],[53,24,42,18,"useHasEntitlement"],[53,43,42,35],[53,44,42,35,"useHasEntitlement"],[53,61,42,35],[53,63,42,36,"ENTITLEMENT_KEYS"],[53,81,42,52],[53,82,42,52,"ENTITLEMENT_KEYS"],[53,98,42,52],[53,99,42,53,"PREMIUM_CINEMATICS_PACK"],[53,122,42,76],[53,123,42,77],[54,4,43,2],[54,8,43,6],[54,9,43,7,"hasPack"],[54,16,43,14],[54,18,43,16],[54,25,43,23],[54,30,43,28],[55,4,45,2],[55,11,45,9],[55,15,45,9,"isFeatureEnabled"],[55,24,45,25],[55,25,45,25,"isFeatureEnabled"],[55,41,45,25],[55,43,45,26],[55,60,45,43],[55,62,45,45],[56,6,45,47,"stableId"],[57,4,45,56],[57,5,45,57],[57,6,45,58],[58,2,46,0],[60,2,48,0],[61,0,49,0],[62,0,50,0],[63,0,51,0],[64,0,52,0],[65,0,53,0],[66,2,48,0,"_s"],[66,4,48,0],[66,5,40,16,"useCanAccessCinematics"],[66,27,40,38],[67,4,40,38],[67,12,42,18,"useHasEntitlement"],[67,31,42,35],[67,32,42,35,"useHasEntitlement"],[67,49,42,35],[68,2,42,35],[69,2,54,7],[69,11,54,16,"hasHeroPremiumCinematicOwned"],[69,39,54,44,"hasHeroPremiumCinematicOwned"],[69,40,54,45,"heroId"],[69,46,54,59],[69,48,54,70],[70,4,55,2],[70,8,55,6],[70,9,55,7,"heroId"],[70,15,55,13],[70,17,55,15],[70,24,55,22],[70,29,55,27],[71,4,56,2],[72,4,57,2],[72,11,57,9],[72,15,57,9,"canAccessHeroCinematic"],[72,34,57,31],[72,35,57,31,"canAccessHeroCinematic"],[72,57,57,31],[72,59,57,32,"heroId"],[72,65,57,38],[72,66,57,39],[73,2,58,0],[75,2,60,0],[76,0,61,0],[77,0,62,0],[78,2,63,7],[78,11,63,16,"useHasHeroPremiumCinematicOwned"],[78,42,63,47,"useHasHeroPremiumCinematicOwned"],[78,43,63,48,"heroId"],[78,49,63,62],[78,51,63,73],[79,4,63,73,"_s2"],[79,7,63,73],[80,4,64,2],[81,4,65,2],[81,10,65,8,"key"],[81,13,65,11],[81,16,65,14],[81,20,65,14,"premiumCinematicOwnedKey"],[81,38,65,38],[81,39,65,38,"premiumCinematicOwnedKey"],[81,63,65,38],[81,65,65,39,"heroId"],[81,71,65,45],[81,72,65,46],[82,4,66,2],[82,10,66,8,"hasHero"],[82,17,66,15],[82,20,66,18],[82,24,66,18,"useHasEntitlement"],[82,43,66,35],[82,44,66,35,"useHasEntitlement"],[82,61,66,35],[82,63,66,36,"key"],[82,66,66,39],[82,67,66,40],[83,4,67,2],[83,10,67,8,"hasPack"],[83,17,67,15],[83,20,67,18],[83,24,67,18,"useHasEntitlement"],[83,43,67,35],[83,44,67,35,"useHasEntitlement"],[83,61,67,35],[83,63,67,36,"ENTITLEMENT_KEYS"],[83,81,67,52],[83,82,67,52,"ENTITLEMENT_KEYS"],[83,98,67,52],[83,99,67,53,"PREMIUM_CINEMATICS_PACK"],[83,122,67,76],[83,123,67,77],[84,4,68,2],[85,4,69,2],[85,11,69,9,"hasHero"],[85,18,69,16],[85,22,69,20,"hasPack"],[85,29,69,27],[86,2,70,0],[87,2,70,1,"_s2"],[87,5,70,1],[87,6,63,16,"useHasHeroPremiumCinematicOwned"],[87,37,63,47],[88,4,63,47],[88,12,66,18,"useHasEntitlement"],[88,31,66,35],[88,32,66,35,"useHasEntitlement"],[88,49,66,35],[88,51,67,18,"useHasEntitlement"],[88,70,67,35],[88,71,67,35,"useHasEntitlement"],[88,88,67,35],[89,2,67,35],[90,0,67,35],[90,3]],"functionMap":{"names":["<global>","canAccessCinematics","useCanAccessCinematics","hasHeroPremiumCinematicOwned","useHasHeroPremiumCinematicOwned"],"mappings":"AAA;OC4B;CDM;OEK;CFM;OGQ;CHI;OIK;CJO"},"hasCjsExports":false},"type":"js/module"}]}