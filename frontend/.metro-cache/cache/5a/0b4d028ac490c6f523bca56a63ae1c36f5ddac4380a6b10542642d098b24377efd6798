{"dependencies":[{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":520},"end":{"line":14,"column":37,"index":557}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"./products","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0,"index":558},"end":{"line":15,"column":57,"index":615}}],"key":"QLsEbhN001YxKPoY7MJ1qVaW9gw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.goToPaywall = goToPaywall;\n  exports.goToStore = goToStore;\n  exports.goToPurchaseSuccess = goToPurchaseSuccess;\n  exports.getPaywallRoute = getPaywallRoute;\n  exports.getStoreRoute = getStoreRoute;\n  var _expoRouter = require(_dependencyMap[0], \"expo-router\");\n  var _products = require(_dependencyMap[1], \"./products\");\n  // /app/frontend/lib/entitlements/navigation.ts\n  // CANONICAL Premium Navigation - single entry point for all paywall routing\n  //\n  // STRICT INVARIANT: All premium navigation MUST go through these helpers.\n  // Direct router.push('/paid-features') or router.push('/store') is FORBIDDEN\n  // in screens - only allowed in this file.\n  //\n  // This ensures:\n  // - Analytics/telemetry for all premium funnels\n  // - Single place to change paywall route\n  // - Consistent UX for premium denial flows\n  // - Easy debugging of purchase funnels\n\n  // Debug logging\n  const dlog = (...args) => {\n    if (__DEV__) console.log('[navigation]', ...args);\n  };\n\n  /**\n   * Source of the paywall navigation (for analytics + debugging)\n   */\n\n  // Extensible for future sources\n\n  /**\n   * Options for paywall navigation\n   */\n\n  /**\n   * The ONE route for premium purchases\n   * Change this ONLY here to update all premium navigation\n   */\n  const PAYWALL_ROUTE = '/paid-features';\n  const STORE_ROUTE = '/store';\n\n  /**\n   * Canonical entry point for all paywall/premium navigation\n   * \n   * USE THIS instead of router.push('/paid-features') or router.push('/store')\n   * \n   * @example\n   * // From cinematic gate\n   * goToPaywall({ productKey: 'PREMIUM_CINEMATICS_PACK', source: 'cinematic_gate', heroId: hero.id });\n   * \n   * // From battle pass\n   * goToPaywall({ productKey: 'PREMIUM_SUBSCRIPTION', source: 'battle_pass' });\n   * \n   * // Generic store access\n   * goToPaywall({ source: 'profile' });\n   */\n  function goToPaywall(opts) {\n    const {\n      productKey,\n      source,\n      heroId,\n      returnTo\n    } = opts;\n    dlog('goToPaywall:', {\n      productKey,\n      source,\n      heroId,\n      returnTo\n    });\n\n    // Build query params\n    const params = new URLSearchParams();\n    if (productKey) {\n      params.set('productKey', productKey);\n      // Also include productId for convenience\n      const product = (0, _products.getProduct)(productKey);\n      if (product) {\n        params.set('productId', product.productId);\n      }\n    }\n    if (source) {\n      params.set('source', source);\n    }\n    if (heroId) {\n      params.set('heroId', heroId);\n    }\n    if (returnTo) {\n      params.set('returnTo', returnTo);\n    }\n\n    // Build final route\n    const queryString = params.toString();\n    const route = queryString ? `${PAYWALL_ROUTE}?${queryString}` : PAYWALL_ROUTE;\n\n    // TODO: Add telemetry/analytics event here\n    // track(Events.PAYWALL_VIEWED, { productKey, source, heroId });\n\n    _expoRouter.router.push(route);\n  }\n\n  /**\n   * Navigate to the general store/shop screen\n   * Use this for browsing, not for specific premium denial flows\n   */\n  function goToStore(source) {\n    dlog('goToStore:', {\n      source\n    });\n    if (source) {\n      _expoRouter.router.push(`${STORE_ROUTE}?source=${source}`);\n    } else {\n      _expoRouter.router.push(STORE_ROUTE);\n    }\n  }\n\n  /**\n   * Navigate to purchase success screen (optional, for post-purchase UX)\n   */\n  function goToPurchaseSuccess(opts) {\n    dlog('goToPurchaseSuccess:', opts);\n\n    // For now, just go back or to a success route\n    // This can be expanded to show a dedicated success screen\n    if (opts?.returnTo) {\n      _expoRouter.router.replace(opts.returnTo);\n    } else {\n      _expoRouter.router.back();\n    }\n  }\n\n  /**\n   * Get the paywall route for use in gating helpers\n   * (Internal use - screens should use goToPaywall instead)\n   */\n  function getPaywallRoute() {\n    return PAYWALL_ROUTE;\n  }\n\n  /**\n   * Get the store route\n   * (Internal use - screens should use goToStore instead)\n   */\n  function getStoreRoute() {\n    return STORE_ROUTE;\n  }\n});","lineCount":153,"map":[[7,2,72,0,"exports"],[7,9,72,0],[7,10,72,0,"goToPaywall"],[7,21,72,0],[7,24,72,0,"goToPaywall"],[7,35,72,0],[8,2,117,0,"exports"],[8,9,117,0],[8,10,117,0,"goToStore"],[8,19,117,0],[8,22,117,0,"goToStore"],[8,31,117,0],[9,2,130,0,"exports"],[9,9,130,0],[9,10,130,0,"goToPurchaseSuccess"],[9,29,130,0],[9,32,130,0,"goToPurchaseSuccess"],[9,51,130,0],[10,2,149,0,"exports"],[10,9,149,0],[10,10,149,0,"getPaywallRoute"],[10,25,149,0],[10,28,149,0,"getPaywallRoute"],[10,43,149,0],[11,2,157,0,"exports"],[11,9,157,0],[11,10,157,0,"getStoreRoute"],[11,23,157,0],[11,26,157,0,"getStoreRoute"],[11,39,157,0],[12,2,14,0],[12,6,14,0,"_expoRouter"],[12,17,14,0],[12,20,14,0,"require"],[12,27,14,0],[12,28,14,0,"_dependencyMap"],[12,42,14,0],[13,2,15,0],[13,6,15,0,"_products"],[13,15,15,0],[13,18,15,0,"require"],[13,25,15,0],[13,26,15,0,"_dependencyMap"],[13,40,15,0],[14,2,1,0],[15,2,2,0],[16,2,3,0],[17,2,4,0],[18,2,5,0],[19,2,6,0],[20,2,7,0],[21,2,8,0],[22,2,9,0],[23,2,10,0],[24,2,11,0],[25,2,12,0],[27,2,17,0],[28,2,18,0],[28,8,18,6,"dlog"],[28,12,18,10],[28,15,18,13,"dlog"],[28,16,18,14],[28,19,18,17,"args"],[28,23,18,28],[28,28,18,33],[29,4,18,35],[29,8,18,39,"__DEV__"],[29,15,18,46],[29,17,18,48,"console"],[29,24,18,55],[29,25,18,56,"log"],[29,28,18,59],[29,29,18,60],[29,43,18,74],[29,45,18,76],[29,48,18,79,"args"],[29,52,18,83],[29,53,18,84],[30,2,18,86],[30,3,18,87],[32,2,20,0],[33,0,21,0],[34,0,22,0],[36,2,31,27],[38,2,33,0],[39,0,34,0],[40,0,35,0],[42,2,50,0],[43,0,51,0],[44,0,52,0],[45,0,53,0],[46,2,54,0],[46,8,54,6,"PAYWALL_ROUTE"],[46,21,54,19],[46,24,54,22],[46,40,54,47],[47,2,55,0],[47,8,55,6,"STORE_ROUTE"],[47,19,55,17],[47,22,55,20],[47,30,55,37],[49,2,57,0],[50,0,58,0],[51,0,59,0],[52,0,60,0],[53,0,61,0],[54,0,62,0],[55,0,63,0],[56,0,64,0],[57,0,65,0],[58,0,66,0],[59,0,67,0],[60,0,68,0],[61,0,69,0],[62,0,70,0],[63,0,71,0],[64,2,72,7],[64,11,72,16,"goToPaywall"],[64,22,72,27,"goToPaywall"],[64,23,72,28,"opts"],[64,27,72,52],[64,29,72,60],[65,4,73,2],[65,10,73,8],[66,6,73,10,"productKey"],[66,16,73,20],[67,6,73,22,"source"],[67,12,73,28],[68,6,73,30,"heroId"],[68,12,73,36],[69,6,73,38,"returnTo"],[70,4,73,47],[70,5,73,48],[70,8,73,51,"opts"],[70,12,73,55],[71,4,75,2,"dlog"],[71,8,75,6],[71,9,75,7],[71,23,75,21],[71,25,75,23],[72,6,75,25,"productKey"],[72,16,75,35],[73,6,75,37,"source"],[73,12,75,43],[74,6,75,45,"heroId"],[74,12,75,51],[75,6,75,53,"returnTo"],[76,4,75,62],[76,5,75,63],[76,6,75,64],[78,4,77,2],[79,4,78,2],[79,10,78,8,"params"],[79,16,78,14],[79,19,78,17],[79,23,78,21,"URLSearchParams"],[79,38,78,36],[79,39,78,37],[79,40,78,38],[80,4,80,2],[80,8,80,6,"productKey"],[80,18,80,16],[80,20,80,18],[81,6,81,4,"params"],[81,12,81,10],[81,13,81,11,"set"],[81,16,81,14],[81,17,81,15],[81,29,81,27],[81,31,81,29,"productKey"],[81,41,81,39],[81,42,81,40],[82,6,82,4],[83,6,83,4],[83,12,83,10,"product"],[83,19,83,17],[83,22,83,20],[83,26,83,20,"getProduct"],[83,35,83,30],[83,36,83,30,"getProduct"],[83,46,83,30],[83,48,83,31,"productKey"],[83,58,83,41],[83,59,83,42],[84,6,84,4],[84,10,84,8,"product"],[84,17,84,15],[84,19,84,17],[85,8,85,6,"params"],[85,14,85,12],[85,15,85,13,"set"],[85,18,85,16],[85,19,85,17],[85,30,85,28],[85,32,85,30,"product"],[85,39,85,37],[85,40,85,38,"productId"],[85,49,85,47],[85,50,85,48],[86,6,86,4],[87,4,87,2],[88,4,89,2],[88,8,89,6,"source"],[88,14,89,12],[88,16,89,14],[89,6,90,4,"params"],[89,12,90,10],[89,13,90,11,"set"],[89,16,90,14],[89,17,90,15],[89,25,90,23],[89,27,90,25,"source"],[89,33,90,31],[89,34,90,32],[90,4,91,2],[91,4,93,2],[91,8,93,6,"heroId"],[91,14,93,12],[91,16,93,14],[92,6,94,4,"params"],[92,12,94,10],[92,13,94,11,"set"],[92,16,94,14],[92,17,94,15],[92,25,94,23],[92,27,94,25,"heroId"],[92,33,94,31],[92,34,94,32],[93,4,95,2],[94,4,97,2],[94,8,97,6,"returnTo"],[94,16,97,14],[94,18,97,16],[95,6,98,4,"params"],[95,12,98,10],[95,13,98,11,"set"],[95,16,98,14],[95,17,98,15],[95,27,98,25],[95,29,98,27,"returnTo"],[95,37,98,35],[95,38,98,36],[96,4,99,2],[98,4,101,2],[99,4,102,2],[99,10,102,8,"queryString"],[99,21,102,19],[99,24,102,22,"params"],[99,30,102,28],[99,31,102,29,"toString"],[99,39,102,37],[99,40,102,38],[99,41,102,39],[100,4,103,2],[100,10,103,8,"route"],[100,15,103,13],[100,18,103,16,"queryString"],[100,29,103,27],[100,32,104,6],[100,35,104,9,"PAYWALL_ROUTE"],[100,48,104,22],[100,52,104,26,"queryString"],[100,63,104,37],[100,65,104,39],[100,68,105,6,"PAYWALL_ROUTE"],[100,81,105,19],[102,4,107,2],[103,4,108,2],[105,4,110,2,"router"],[105,15,110,8],[105,16,110,8,"router"],[105,22,110,8],[105,23,110,9,"push"],[105,27,110,13],[105,28,110,14,"route"],[105,33,110,26],[105,34,110,27],[106,2,111,0],[108,2,113,0],[109,0,114,0],[110,0,115,0],[111,0,116,0],[112,2,117,7],[112,11,117,16,"goToStore"],[112,20,117,25,"goToStore"],[112,21,117,26,"source"],[112,27,117,48],[112,29,117,56],[113,4,118,2,"dlog"],[113,8,118,6],[113,9,118,7],[113,21,118,19],[113,23,118,21],[114,6,118,23,"source"],[115,4,118,30],[115,5,118,31],[115,6,118,32],[116,4,120,2],[116,8,120,6,"source"],[116,14,120,12],[116,16,120,14],[117,6,121,4,"router"],[117,17,121,10],[117,18,121,10,"router"],[117,24,121,10],[117,25,121,11,"push"],[117,29,121,15],[117,30,121,16],[117,33,121,19,"STORE_ROUTE"],[117,44,121,30],[117,55,121,41,"source"],[117,61,121,47],[117,63,121,56],[117,64,121,57],[118,4,122,2],[118,5,122,3],[118,11,122,9],[119,6,123,4,"router"],[119,17,123,10],[119,18,123,10,"router"],[119,24,123,10],[119,25,123,11,"push"],[119,29,123,15],[119,30,123,16,"STORE_ROUTE"],[119,41,123,34],[119,42,123,35],[120,4,124,2],[121,2,125,0],[123,2,127,0],[124,0,128,0],[125,0,129,0],[126,2,130,7],[126,11,130,16,"goToPurchaseSuccess"],[126,30,130,35,"goToPurchaseSuccess"],[126,31,130,36,"opts"],[126,35,133,1],[126,37,133,9],[127,4,134,2,"dlog"],[127,8,134,6],[127,9,134,7],[127,31,134,29],[127,33,134,31,"opts"],[127,37,134,35],[127,38,134,36],[129,4,136,2],[130,4,137,2],[131,4,138,2],[131,8,138,6,"opts"],[131,12,138,10],[131,14,138,12,"returnTo"],[131,22,138,20],[131,24,138,22],[132,6,139,4,"router"],[132,17,139,10],[132,18,139,10,"router"],[132,24,139,10],[132,25,139,11,"replace"],[132,32,139,18],[132,33,139,19,"opts"],[132,37,139,23],[132,38,139,24,"returnTo"],[132,46,139,39],[132,47,139,40],[133,4,140,2],[133,5,140,3],[133,11,140,9],[134,6,141,4,"router"],[134,17,141,10],[134,18,141,10,"router"],[134,24,141,10],[134,25,141,11,"back"],[134,29,141,15],[134,30,141,16],[134,31,141,17],[135,4,142,2],[136,2,143,0],[138,2,145,0],[139,0,146,0],[140,0,147,0],[141,0,148,0],[142,2,149,7],[142,11,149,16,"getPaywallRoute"],[142,26,149,31,"getPaywallRoute"],[142,27,149,31],[142,29,149,42],[143,4,150,2],[143,11,150,9,"PAYWALL_ROUTE"],[143,24,150,22],[144,2,151,0],[146,2,153,0],[147,0,154,0],[148,0,155,0],[149,0,156,0],[150,2,157,7],[150,11,157,16,"getStoreRoute"],[150,24,157,29,"getStoreRoute"],[150,25,157,29],[150,27,157,40],[151,4,158,2],[151,11,158,9,"STORE_ROUTE"],[151,22,158,20],[152,2,159,0],[153,0,159,1],[153,3]],"functionMap":{"names":["<global>","dlog","goToPaywall","goToStore","goToPurchaseSuccess","getPaywallRoute","getStoreRoute"],"mappings":"AAA;aCiB,0ED;OEsD;CFuC;OGM;CHQ;OIK;CJa;OKM;CLE;OMM;CNE"},"hasCjsExports":false},"type":"js/module"}]}