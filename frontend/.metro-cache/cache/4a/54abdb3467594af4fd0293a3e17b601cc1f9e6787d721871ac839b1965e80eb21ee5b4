{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getFriendsSummary = getFriendsSummary;\n  exports.getFriendsList = getFriendsList;\n  exports.getFriendRequests = getFriendRequests;\n  exports.acceptFriendRequest = acceptFriendRequest;\n  exports.declineFriendRequest = declineFriendRequest;\n  exports.searchPlayers = searchPlayers;\n  exports.sendFriendRequest = sendFriendRequest;\n  // /app/frontend/lib/api/friends.ts\n  // Phase 3.23.2: Friends API Layer\n  //\n  // Canonical API calls for friends system.\n  // Graceful error handling â€” returns defaults on failure.\n\n  const API_BASE = process.env.EXPO_PUBLIC_API_URL || '';\n\n  /**\n   * Get friends summary (badge counts)\n   */\n  async function getFriendsSummary(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/friends/summary/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch friends summary');\n      return await res.json();\n    } catch {\n      return {\n        pendingRequests: 0,\n        totalFriends: 0\n      };\n    }\n  }\n\n  /**\n   * Get friends list\n   */\n  async function getFriendsList(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/friends/list/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch friends list');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get friend requests\n   */\n  async function getFriendRequests(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/friends/requests/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch friend requests');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Accept friend request\n   */\n  async function acceptFriendRequest(username, requestId) {\n    const res = await fetch(`${API_BASE}/api/friends/requests/${username}/${requestId}/accept`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to accept request');\n  }\n\n  /**\n   * Decline friend request\n   */\n  async function declineFriendRequest(username, requestId) {\n    const res = await fetch(`${API_BASE}/api/friends/requests/${username}/${requestId}/decline`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to decline request');\n  }\n\n  /**\n   * Search for players\n   */\n  async function searchPlayers(query) {\n    if (!query || query.length < 2) return [];\n    try {\n      const res = await fetch(`${API_BASE}/api/friends/search?q=${encodeURIComponent(query)}`);\n      if (!res.ok) throw new Error('Failed to search players');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Send friend request\n   */\n  async function sendFriendRequest(fromUsername, toUsername) {\n    const res = await fetch(`${API_BASE}/api/friends/requests/send`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        from: fromUsername,\n        to: toUsername\n      })\n    });\n    if (!res.ok) throw new Error('Failed to send request');\n  }\n});","lineCount":114,"map":[[7,2,12,0,"exports"],[7,9,12,0],[7,10,12,0,"getFriendsSummary"],[7,27,12,0],[7,30,12,0,"getFriendsSummary"],[7,47,12,0],[8,2,28,0,"exports"],[8,9,28,0],[8,10,28,0,"getFriendsList"],[8,24,28,0],[8,27,28,0,"getFriendsList"],[8,41,28,0],[9,2,47,0,"exports"],[9,9,47,0],[9,10,47,0,"getFriendRequests"],[9,27,47,0],[9,30,47,0,"getFriendRequests"],[9,47,47,0],[10,2,64,0,"exports"],[10,9,64,0],[10,10,64,0,"acceptFriendRequest"],[10,29,64,0],[10,32,64,0,"acceptFriendRequest"],[10,51,64,0],[11,2,74,0,"exports"],[11,9,74,0],[11,10,74,0,"declineFriendRequest"],[11,30,74,0],[11,33,74,0,"declineFriendRequest"],[11,53,74,0],[12,2,84,0,"exports"],[12,9,84,0],[12,10,84,0,"searchPlayers"],[12,23,84,0],[12,26,84,0,"searchPlayers"],[12,39,84,0],[13,2,105,0,"exports"],[13,9,105,0],[13,10,105,0,"sendFriendRequest"],[13,27,105,0],[13,30,105,0,"sendFriendRequest"],[13,47,105,0],[14,2,1,0],[15,2,2,0],[16,2,3,0],[17,2,4,0],[18,2,5,0],[20,2,7,0],[20,8,7,6,"API_BASE"],[20,16,7,14],[20,19,7,17,"process"],[20,26,7,24],[20,27,7,25,"env"],[20,30,7,28],[20,31,7,29,"EXPO_PUBLIC_API_URL"],[20,50,7,48],[20,54,7,52],[20,56,7,54],[22,2,9,0],[23,0,10,0],[24,0,11,0],[25,2,12,7],[25,17,12,22,"getFriendsSummary"],[25,34,12,39,"getFriendsSummary"],[25,35,12,40,"username"],[25,43,12,56],[25,45,15,3],[26,4,16,2],[26,8,16,6],[27,6,17,4],[27,12,17,10,"res"],[27,15,17,13],[27,18,17,16],[27,24,17,22,"fetch"],[27,29,17,27],[27,30,17,28],[27,33,17,31,"API_BASE"],[27,41,17,39],[27,65,17,63,"username"],[27,73,17,71],[27,75,17,73],[27,76,17,74],[28,6,18,4],[28,10,18,8],[28,11,18,9,"res"],[28,14,18,12],[28,15,18,13,"ok"],[28,17,18,15],[28,19,18,17],[28,25,18,23],[28,29,18,27,"Error"],[28,34,18,32],[28,35,18,33],[28,68,18,66],[28,69,18,67],[29,6,19,4],[29,13,19,11],[29,19,19,17,"res"],[29,22,19,20],[29,23,19,21,"json"],[29,27,19,25],[29,28,19,26],[29,29,19,27],[30,4,20,2],[30,5,20,3],[30,6,20,4],[30,12,20,10],[31,6,21,4],[31,13,21,11],[32,8,21,13,"pendingRequests"],[32,23,21,28],[32,25,21,30],[32,26,21,31],[33,8,21,33,"totalFriends"],[33,20,21,45],[33,22,21,47],[34,6,21,49],[34,7,21,50],[35,4,22,2],[36,2,23,0],[38,2,25,0],[39,0,26,0],[40,0,27,0],[41,2,28,7],[41,17,28,22,"getFriendsList"],[41,31,28,36,"getFriendsList"],[41,32,28,37,"username"],[41,40,28,53],[41,42,34,4],[42,4,35,2],[42,8,35,6],[43,6,36,4],[43,12,36,10,"res"],[43,15,36,13],[43,18,36,16],[43,24,36,22,"fetch"],[43,29,36,27],[43,30,36,28],[43,33,36,31,"API_BASE"],[43,41,36,39],[43,62,36,60,"username"],[43,70,36,68],[43,72,36,70],[43,73,36,71],[44,6,37,4],[44,10,37,8],[44,11,37,9,"res"],[44,14,37,12],[44,15,37,13,"ok"],[44,17,37,15],[44,19,37,17],[44,25,37,23],[44,29,37,27,"Error"],[44,34,37,32],[44,35,37,33],[44,65,37,63],[44,66,37,64],[45,6,38,4],[45,13,38,11],[45,19,38,17,"res"],[45,22,38,20],[45,23,38,21,"json"],[45,27,38,25],[45,28,38,26],[45,29,38,27],[46,4,39,2],[46,5,39,3],[46,6,39,4],[46,12,39,10],[47,6,40,4],[47,13,40,11],[47,15,40,13],[48,4,41,2],[49,2,42,0],[51,2,44,0],[52,0,45,0],[53,0,46,0],[54,2,47,7],[54,17,47,22,"getFriendRequests"],[54,34,47,39,"getFriendRequests"],[54,35,47,40,"username"],[54,43,47,56],[54,45,51,4],[55,4,52,2],[55,8,52,6],[56,6,53,4],[56,12,53,10,"res"],[56,15,53,13],[56,18,53,16],[56,24,53,22,"fetch"],[56,29,53,27],[56,30,53,28],[56,33,53,31,"API_BASE"],[56,41,53,39],[56,66,53,64,"username"],[56,74,53,72],[56,76,53,74],[56,77,53,75],[57,6,54,4],[57,10,54,8],[57,11,54,9,"res"],[57,14,54,12],[57,15,54,13,"ok"],[57,17,54,15],[57,19,54,17],[57,25,54,23],[57,29,54,27,"Error"],[57,34,54,32],[57,35,54,33],[57,68,54,66],[57,69,54,67],[58,6,55,4],[58,13,55,11],[58,19,55,17,"res"],[58,22,55,20],[58,23,55,21,"json"],[58,27,55,25],[58,28,55,26],[58,29,55,27],[59,4,56,2],[59,5,56,3],[59,6,56,4],[59,12,56,10],[60,6,57,4],[60,13,57,11],[60,15,57,13],[61,4,58,2],[62,2,59,0],[64,2,61,0],[65,0,62,0],[66,0,63,0],[67,2,64,7],[67,17,64,22,"acceptFriendRequest"],[67,36,64,41,"acceptFriendRequest"],[67,37,64,42,"username"],[67,45,64,58],[67,47,64,60,"requestId"],[67,56,64,77],[67,58,64,94],[68,4,65,2],[68,10,65,8,"res"],[68,13,65,11],[68,16,65,14],[68,22,65,20,"fetch"],[68,27,65,25],[68,28,65,26],[68,31,65,29,"API_BASE"],[68,39,65,37],[68,64,65,62,"username"],[68,72,65,70],[68,76,65,74,"requestId"],[68,85,65,83],[68,94,65,92],[68,96,65,94],[69,6,66,4,"method"],[69,12,66,10],[69,14,66,12],[70,4,67,2],[70,5,67,3],[70,6,67,4],[71,4,68,2],[71,8,68,6],[71,9,68,7,"res"],[71,12,68,10],[71,13,68,11,"ok"],[71,15,68,13],[71,17,68,15],[71,23,68,21],[71,27,68,25,"Error"],[71,32,68,30],[71,33,68,31],[71,59,68,57],[71,60,68,58],[72,2,69,0],[74,2,71,0],[75,0,72,0],[76,0,73,0],[77,2,74,7],[77,17,74,22,"declineFriendRequest"],[77,37,74,42,"declineFriendRequest"],[77,38,74,43,"username"],[77,46,74,59],[77,48,74,61,"requestId"],[77,57,74,78],[77,59,74,95],[78,4,75,2],[78,10,75,8,"res"],[78,13,75,11],[78,16,75,14],[78,22,75,20,"fetch"],[78,27,75,25],[78,28,75,26],[78,31,75,29,"API_BASE"],[78,39,75,37],[78,64,75,62,"username"],[78,72,75,70],[78,76,75,74,"requestId"],[78,85,75,83],[78,95,75,93],[78,97,75,95],[79,6,76,4,"method"],[79,12,76,10],[79,14,76,12],[80,4,77,2],[80,5,77,3],[80,6,77,4],[81,4,78,2],[81,8,78,6],[81,9,78,7,"res"],[81,12,78,10],[81,13,78,11,"ok"],[81,15,78,13],[81,17,78,15],[81,23,78,21],[81,27,78,25,"Error"],[81,32,78,30],[81,33,78,31],[81,60,78,58],[81,61,78,59],[82,2,79,0],[84,2,81,0],[85,0,82,0],[86,0,83,0],[87,2,84,7],[87,17,84,22,"searchPlayers"],[87,30,84,35,"searchPlayers"],[87,31,84,36,"query"],[87,36,84,49],[87,38,90,4],[88,4,91,2],[88,8,91,6],[88,9,91,7,"query"],[88,14,91,12],[88,18,91,16,"query"],[88,23,91,21],[88,24,91,22,"length"],[88,30,91,28],[88,33,91,31],[88,34,91,32],[88,36,91,34],[88,43,91,41],[88,45,91,43],[89,4,93,2],[89,8,93,6],[90,6,94,4],[90,12,94,10,"res"],[90,15,94,13],[90,18,94,16],[90,24,94,22,"fetch"],[90,29,94,27],[90,30,94,28],[90,33,94,31,"API_BASE"],[90,41,94,39],[90,66,94,64,"encodeURIComponent"],[90,84,94,82],[90,85,94,83,"query"],[90,90,94,88],[90,91,94,89],[90,93,94,91],[90,94,94,92],[91,6,95,4],[91,10,95,8],[91,11,95,9,"res"],[91,14,95,12],[91,15,95,13,"ok"],[91,17,95,15],[91,19,95,17],[91,25,95,23],[91,29,95,27,"Error"],[91,34,95,32],[91,35,95,33],[91,61,95,59],[91,62,95,60],[92,6,96,4],[92,13,96,11],[92,19,96,17,"res"],[92,22,96,20],[92,23,96,21,"json"],[92,27,96,25],[92,28,96,26],[92,29,96,27],[93,4,97,2],[93,5,97,3],[93,6,97,4],[93,12,97,10],[94,6,98,4],[94,13,98,11],[94,15,98,13],[95,4,99,2],[96,2,100,0],[98,2,102,0],[99,0,103,0],[100,0,104,0],[101,2,105,7],[101,17,105,22,"sendFriendRequest"],[101,34,105,39,"sendFriendRequest"],[101,35,105,40,"fromUsername"],[101,47,105,60],[101,49,105,62,"toUsername"],[101,59,105,80],[101,61,105,97],[102,4,106,2],[102,10,106,8,"res"],[102,13,106,11],[102,16,106,14],[102,22,106,20,"fetch"],[102,27,106,25],[102,28,106,26],[102,31,106,29,"API_BASE"],[102,39,106,37],[102,67,106,65],[102,69,106,67],[103,6,107,4,"method"],[103,12,107,10],[103,14,107,12],[103,20,107,18],[104,6,108,4,"headers"],[104,13,108,11],[104,15,108,13],[105,8,108,15],[105,22,108,29],[105,24,108,31],[106,6,108,50],[106,7,108,51],[107,6,109,4,"body"],[107,10,109,8],[107,12,109,10,"JSON"],[107,16,109,14],[107,17,109,15,"stringify"],[107,26,109,24],[107,27,109,25],[108,8,109,27,"from"],[108,12,109,31],[108,14,109,33,"fromUsername"],[108,26,109,45],[109,8,109,47,"to"],[109,10,109,49],[109,12,109,51,"toUsername"],[110,6,109,62],[110,7,109,63],[111,4,110,2],[111,5,110,3],[111,6,110,4],[112,4,111,2],[112,8,111,6],[112,9,111,7,"res"],[112,12,111,10],[112,13,111,11,"ok"],[112,15,111,13],[112,17,111,15],[112,23,111,21],[112,27,111,25,"Error"],[112,32,111,30],[112,33,111,31],[112,57,111,55],[112,58,111,56],[113,2,112,0],[114,0,112,1],[114,3]],"functionMap":{"names":["<global>","getFriendsSummary","getFriendsList","getFriendRequests","acceptFriendRequest","declineFriendRequest","searchPlayers","sendFriendRequest"],"mappings":"AAA;OCW;CDW;OEK;CFc;OGK;CHY;OIK;CJK;OKK;CLK;OMK;CNgB;OOK;CPO"},"hasCjsExports":false},"type":"js/module"}]}