{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"displayStars\", {\n    enumerable: true,\n    get: function () {\n      return displayStars;\n    }\n  });\n  Object.defineProperty(exports, \"unlockedTierForHero\", {\n    enumerable: true,\n    get: function () {\n      return unlockedTierForHero;\n    }\n  });\n  Object.defineProperty(exports, \"effectiveTierForHero\", {\n    enumerable: true,\n    get: function () {\n      return effectiveTierForHero;\n    }\n  });\n  Object.defineProperty(exports, \"resolveTierArt\", {\n    enumerable: true,\n    get: function () {\n      return resolveTierArt;\n    }\n  });\n  Object.defineProperty(exports, \"computeUserMaxUnlockedTier\", {\n    enumerable: true,\n    get: function () {\n      return computeUserMaxUnlockedTier;\n    }\n  });\n  Object.defineProperty(exports, \"TIER_LABELS\", {\n    enumerable: true,\n    get: function () {\n      return TIER_LABELS;\n    }\n  });\n  Object.defineProperty(exports, \"TIER_LABEL_ARRAY\", {\n    enumerable: true,\n    get: function () {\n      return TIER_LABEL_ARRAY;\n    }\n  });\n  // /app/frontend/lib/tier.ts\n  // SINGLE SOURCE OF TRUTH for stars → tiers → art → gating\n  // DO NOT reimplement this logic elsewhere\n\n  /**\n   * Raw backend stars (0–6). UI shows EXACT value.\n   */\n  const displayStars = hero => {\n    const s = Number(hero?.stars ?? 0);\n    if (!isFinite(s)) return 0;\n    return Math.max(0, Math.min(6, s));\n  };\n\n  /**\n   * Maps backend stars + awakening to unlocked tier.\n   *\n   * RULES (AUTHORITATIVE):\n   * stars = 0  → tier 1\n   * stars = 1  → tier 2\n   * stars = 2  → tier 3\n   * stars = 3  → tier 4\n   * stars = 4  → tier 5\n   * stars ≥ 5 OR awakening > 0 → tier 6 (5★+)\n   */\n  const unlockedTierForHero = hero => {\n    const stars = displayStars(hero);\n    const awaken = Number(hero?.awakening_level ?? 0);\n    if (awaken > 0 || stars >= 5) return 6;\n    return Math.max(1, Math.min(5, stars + 1));\n  };\n\n  /**\n   * Clamp a requested tier (global or local) to what the hero has unlocked.\n   */\n  const effectiveTierForHero = (hero, requestedTier) => {\n    const unlocked = unlockedTierForHero(hero);\n    return requestedTier <= unlocked ? requestedTier : unlocked;\n  };\n\n  /**\n   * Resolve ascension art EXACTLY from API response.\n   * NO GUESSING. NO FALLBACKS except explicit.\n   */\n  const resolveTierArt = (heroData, tier) => {\n    if (!heroData?.ascension_images) return heroData?.image_url ?? null;\n    return heroData.ascension_images[String(tier)] || heroData.image_url || null;\n  };\n\n  /**\n   * Compute max unlocked tier across all heroes (for global tier selector)\n   */\n  const computeUserMaxUnlockedTier = heroes => {\n    let max = 1;\n    for (const h of heroes || []) {\n      const t = unlockedTierForHero(h);\n      if (t > max) max = t;\n    }\n    return max;\n  };\n\n  /**\n   * Tier labels for UI (object format for lookup)\n   */\n  const TIER_LABELS = {\n    1: '1★',\n    2: '2★',\n    3: '3★',\n    4: '4★',\n    5: '5★',\n    6: '5★+'\n  };\n\n  /**\n   * Tier labels array for mapping in UI selectors\n   */\n  const TIER_LABEL_ARRAY = [{\n    tier: 1,\n    label: '1★'\n  }, {\n    tier: 2,\n    label: '2★'\n  }, {\n    tier: 3,\n    label: '3★'\n  }, {\n    tier: 4,\n    label: '4★'\n  }, {\n    tier: 5,\n    label: '5★'\n  }, {\n    tier: 6,\n    label: '5★+'\n  }];\n});","lineCount":143,"map":[[7,2,10,0,"Object"],[7,8,10,0],[7,9,10,0,"defineProperty"],[7,23,10,0],[7,24,10,0,"exports"],[7,31,10,0],[8,4,10,0,"enumerable"],[8,14,10,0],[9,4,10,0,"get"],[9,7,10,0],[9,18,10,0,"get"],[9,19,10,0],[10,6,10,0],[10,13,10,0,"displayStars"],[10,25,10,0],[11,4,10,0],[12,2,10,0],[13,2,27,0,"Object"],[13,8,27,0],[13,9,27,0,"defineProperty"],[13,23,27,0],[13,24,27,0,"exports"],[13,31,27,0],[14,4,27,0,"enumerable"],[14,14,27,0],[15,4,27,0,"get"],[15,7,27,0],[15,18,27,0,"get"],[15,19,27,0],[16,6,27,0],[16,13,27,0,"unlockedTierForHero"],[16,32,27,0],[17,4,27,0],[18,2,27,0],[19,2,38,0,"Object"],[19,8,38,0],[19,9,38,0,"defineProperty"],[19,23,38,0],[19,24,38,0,"exports"],[19,31,38,0],[20,4,38,0,"enumerable"],[20,14,38,0],[21,4,38,0,"get"],[21,7,38,0],[21,18,38,0,"get"],[21,19,38,0],[22,6,38,0],[22,13,38,0,"effectiveTierForHero"],[22,33,38,0],[23,4,38,0],[24,2,38,0],[25,2,50,0,"Object"],[25,8,50,0],[25,9,50,0,"defineProperty"],[25,23,50,0],[25,24,50,0,"exports"],[25,31,50,0],[26,4,50,0,"enumerable"],[26,14,50,0],[27,4,50,0,"get"],[27,7,50,0],[27,18,50,0,"get"],[27,19,50,0],[28,6,50,0],[28,13,50,0,"resolveTierArt"],[28,27,50,0],[29,4,50,0],[30,2,50,0],[31,2,66,0,"Object"],[31,8,66,0],[31,9,66,0,"defineProperty"],[31,23,66,0],[31,24,66,0,"exports"],[31,31,66,0],[32,4,66,0,"enumerable"],[32,14,66,0],[33,4,66,0,"get"],[33,7,66,0],[33,18,66,0,"get"],[33,19,66,0],[34,6,66,0],[34,13,66,0,"computeUserMaxUnlockedTier"],[34,39,66,0],[35,4,66,0],[36,2,66,0],[37,2,78,0,"Object"],[37,8,78,0],[37,9,78,0,"defineProperty"],[37,23,78,0],[37,24,78,0,"exports"],[37,31,78,0],[38,4,78,0,"enumerable"],[38,14,78,0],[39,4,78,0,"get"],[39,7,78,0],[39,18,78,0,"get"],[39,19,78,0],[40,6,78,0],[40,13,78,0,"TIER_LABELS"],[40,24,78,0],[41,4,78,0],[42,2,78,0],[43,2,90,0,"Object"],[43,8,90,0],[43,9,90,0,"defineProperty"],[43,23,90,0],[43,24,90,0,"exports"],[43,31,90,0],[44,4,90,0,"enumerable"],[44,14,90,0],[45,4,90,0,"get"],[45,7,90,0],[45,18,90,0,"get"],[45,19,90,0],[46,6,90,0],[46,13,90,0,"TIER_LABEL_ARRAY"],[46,29,90,0],[47,4,90,0],[48,2,90,0],[49,2,1,0],[50,2,2,0],[51,2,3,0],[53,2,7,0],[54,0,8,0],[55,0,9,0],[56,2,10,7],[56,8,10,13,"displayStars"],[56,20,10,25],[56,23,10,29,"hero"],[56,27,10,38],[56,31,10,51],[57,4,11,2],[57,10,11,8,"s"],[57,11,11,9],[57,14,11,12,"Number"],[57,20,11,18],[57,21,11,19,"hero"],[57,25,11,23],[57,27,11,25,"stars"],[57,32,11,30],[57,36,11,34],[57,37,11,35],[57,38,11,36],[58,4,12,2],[58,8,12,6],[58,9,12,7,"isFinite"],[58,17,12,15],[58,18,12,16,"s"],[58,19,12,17],[58,20,12,18],[58,22,12,20],[58,29,12,27],[58,30,12,28],[59,4,13,2],[59,11,13,9,"Math"],[59,15,13,13],[59,16,13,14,"max"],[59,19,13,17],[59,20,13,18],[59,21,13,19],[59,23,13,21,"Math"],[59,27,13,25],[59,28,13,26,"min"],[59,31,13,29],[59,32,13,30],[59,33,13,31],[59,35,13,33,"s"],[59,36,13,34],[59,37,13,35],[59,38,13,36],[60,2,14,0],[60,3,14,1],[62,2,16,0],[63,0,17,0],[64,0,18,0],[65,0,19,0],[66,0,20,0],[67,0,21,0],[68,0,22,0],[69,0,23,0],[70,0,24,0],[71,0,25,0],[72,0,26,0],[73,2,27,7],[73,8,27,13,"unlockedTierForHero"],[73,27,27,32],[73,30,27,36,"hero"],[73,34,27,45],[73,38,27,63],[74,4,28,2],[74,10,28,8,"stars"],[74,15,28,13],[74,18,28,16,"displayStars"],[74,30,28,28],[74,31,28,29,"hero"],[74,35,28,33],[74,36,28,34],[75,4,29,2],[75,10,29,8,"awaken"],[75,16,29,14],[75,19,29,17,"Number"],[75,25,29,23],[75,26,29,24,"hero"],[75,30,29,28],[75,32,29,30,"awakening_level"],[75,47,29,45],[75,51,29,49],[75,52,29,50],[75,53,29,51],[76,4,31,2],[76,8,31,6,"awaken"],[76,14,31,12],[76,17,31,15],[76,18,31,16],[76,22,31,20,"stars"],[76,27,31,25],[76,31,31,29],[76,32,31,30],[76,34,31,32],[76,41,31,39],[76,42,31,40],[77,4,32,2],[77,11,32,10,"Math"],[77,15,32,14],[77,16,32,15,"max"],[77,19,32,18],[77,20,32,19],[77,21,32,20],[77,23,32,22,"Math"],[77,27,32,26],[77,28,32,27,"min"],[77,31,32,30],[77,32,32,31],[77,33,32,32],[77,35,32,34,"stars"],[77,40,32,39],[77,43,32,42],[77,44,32,43],[77,45,32,44],[77,46,32,45],[78,2,33,0],[78,3,33,1],[80,2,35,0],[81,0,36,0],[82,0,37,0],[83,2,38,7],[83,8,38,13,"effectiveTierForHero"],[83,28,38,33],[83,31,38,36,"effectiveTierForHero"],[83,32,39,2,"hero"],[83,36,39,11],[83,38,40,2,"requestedTier"],[83,51,40,28],[83,56,41,18],[84,4,42,2],[84,10,42,8,"unlocked"],[84,18,42,16],[84,21,42,19,"unlockedTierForHero"],[84,40,42,38],[84,41,42,39,"hero"],[84,45,42,43],[84,46,42,44],[85,4,43,2],[85,11,43,9,"requestedTier"],[85,24,43,22],[85,28,43,26,"unlocked"],[85,36,43,34],[85,39,43,37,"requestedTier"],[85,52,43,50],[85,55,43,53,"unlocked"],[85,63,43,61],[86,2,44,0],[86,3,44,1],[88,2,46,0],[89,0,47,0],[90,0,48,0],[91,0,49,0],[92,2,50,7],[92,8,50,13,"resolveTierArt"],[92,22,50,27],[92,25,50,30,"resolveTierArt"],[92,26,51,2,"heroData"],[92,34,51,15],[92,36,52,2,"tier"],[92,40,52,19],[92,45,53,20],[93,4,54,2],[93,8,54,6],[93,9,54,7,"heroData"],[93,17,54,15],[93,19,54,17,"ascension_images"],[93,35,54,33],[93,37,54,35],[93,44,54,42,"heroData"],[93,52,54,50],[93,54,54,52,"image_url"],[93,63,54,61],[93,67,54,65],[93,71,54,69],[94,4,56,2],[94,11,57,4,"heroData"],[94,19,57,12],[94,20,57,13,"ascension_images"],[94,36,57,29],[94,37,57,30,"String"],[94,43,57,36],[94,44,57,37,"tier"],[94,48,57,41],[94,49,57,42],[94,50,57,43],[94,54,58,4,"heroData"],[94,62,58,12],[94,63,58,13,"image_url"],[94,72,58,22],[94,76,59,4],[94,80,59,8],[95,2,61,0],[95,3,61,1],[97,2,63,0],[98,0,64,0],[99,0,65,0],[100,2,66,7],[100,8,66,13,"computeUserMaxUnlockedTier"],[100,34,66,39],[100,37,66,43,"heroes"],[100,43,66,56],[100,47,66,74],[101,4,67,2],[101,8,67,6,"max"],[101,11,67,22],[101,14,67,25],[101,15,67,26],[102,4,68,2],[102,9,68,7],[102,15,68,13,"h"],[102,16,68,14],[102,20,68,18,"heroes"],[102,26,68,24],[102,30,68,28],[102,32,68,30],[102,34,68,32],[103,6,69,4],[103,12,69,10,"t"],[103,13,69,11],[103,16,69,14,"unlockedTierForHero"],[103,35,69,33],[103,36,69,34,"h"],[103,37,69,35],[103,38,69,36],[104,6,70,4],[104,10,70,8,"t"],[104,11,70,9],[104,14,70,12,"max"],[104,17,70,15],[104,19,70,17,"max"],[104,22,70,20],[104,25,70,23,"t"],[104,26,70,24],[105,4,71,2],[106,4,72,2],[106,11,72,9,"max"],[106,14,72,12],[107,2,73,0],[107,3,73,1],[109,2,75,0],[110,0,76,0],[111,0,77,0],[112,2,78,7],[112,8,78,13,"TIER_LABELS"],[112,19,78,53],[112,22,78,56],[113,4,79,2],[113,5,79,3],[113,7,79,5],[113,11,79,9],[114,4,80,2],[114,5,80,3],[114,7,80,5],[114,11,80,9],[115,4,81,2],[115,5,81,3],[115,7,81,5],[115,11,81,9],[116,4,82,2],[116,5,82,3],[116,7,82,5],[116,11,82,9],[117,4,83,2],[117,5,83,3],[117,7,83,5],[117,11,83,9],[118,4,84,2],[118,5,84,3],[118,7,84,5],[119,2,85,0],[119,3,85,1],[121,2,87,0],[122,0,88,0],[123,0,89,0],[124,2,90,7],[124,8,90,13,"TIER_LABEL_ARRAY"],[124,24,90,69],[124,27,90,72],[124,28,91,2],[125,4,91,4,"tier"],[125,8,91,8],[125,10,91,10],[125,11,91,11],[126,4,91,13,"label"],[126,9,91,18],[126,11,91,20],[127,2,91,25],[127,3,91,26],[127,5,92,2],[128,4,92,4,"tier"],[128,8,92,8],[128,10,92,10],[128,11,92,11],[129,4,92,13,"label"],[129,9,92,18],[129,11,92,20],[130,2,92,25],[130,3,92,26],[130,5,93,2],[131,4,93,4,"tier"],[131,8,93,8],[131,10,93,10],[131,11,93,11],[132,4,93,13,"label"],[132,9,93,18],[132,11,93,20],[133,2,93,25],[133,3,93,26],[133,5,94,2],[134,4,94,4,"tier"],[134,8,94,8],[134,10,94,10],[134,11,94,11],[135,4,94,13,"label"],[135,9,94,18],[135,11,94,20],[136,2,94,25],[136,3,94,26],[136,5,95,2],[137,4,95,4,"tier"],[137,8,95,8],[137,10,95,10],[137,11,95,11],[138,4,95,13,"label"],[138,9,95,18],[138,11,95,20],[139,2,95,25],[139,3,95,26],[139,5,96,2],[140,4,96,4,"tier"],[140,8,96,8],[140,10,96,10],[140,11,96,11],[141,4,96,13,"label"],[141,9,96,18],[141,11,96,20],[142,2,96,26],[142,3,96,27],[142,4,97,1],[143,0,97,2],[143,3]],"functionMap":{"names":["<global>","displayStars","unlockedTierForHero","effectiveTierForHero","resolveTierArt","computeUserMaxUnlockedTier"],"mappings":"AAA;4BCS;CDI;mCEa;CFM;oCGK;CHM;8BIM;CJW;0CKK;CLO"},"hasCjsExports":false},"type":"js/module"}]}