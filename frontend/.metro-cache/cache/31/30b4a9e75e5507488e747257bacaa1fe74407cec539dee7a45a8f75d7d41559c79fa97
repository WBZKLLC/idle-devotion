{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":13,"index":77},"end":{"line":3,"column":36,"index":100}}],"key":"CPmndeSLDuCg/s3oFguorTUVcN0=","exportNames":["*"],"imports":1}},{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":16,"index":118},"end":{"line":4,"column":40,"index":142}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":14,"index":158},"end":{"line":5,"column":35,"index":179}}],"key":"v6h+l9IeOWbEcXdtKQqd2f4now4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var core = require(_dependencyMap[0], \"@sentry/core\");\n  var utils$1 = require(_dependencyMap[1], \"@sentry/utils\");\n  var utils = require(_dependencyMap[2], \"./utils.js\");\n\n  /**\n   * Creates a Transport that uses the Fetch API to send events to Sentry.\n   */\n  function makeFetchTransport(options) {\n    var nativeFetch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : utils.getNativeFetchImplementation();\n    var pendingBodySize = 0;\n    var pendingCount = 0;\n    function makeRequest(request) {\n      var requestSize = request.body.length;\n      pendingBodySize += requestSize;\n      pendingCount++;\n      var requestOptions = {\n        body: request.body,\n        method: 'POST',\n        referrerPolicy: 'origin',\n        headers: options.headers,\n        // Outgoing requests are usually cancelled when navigating to a different page, causing a \"TypeError: Failed to\n        // fetch\" error and sending a \"network_error\" client-outcome - in Chrome, the request status shows \"(cancelled)\".\n        // The `keepalive` flag keeps outgoing requests alive, even when switching pages. We want this since we're\n        // frequently sending events right before the user is switching pages (eg. whenfinishing navigation transactions).\n        // Gotchas:\n        // - `keepalive` isn't supported by Firefox\n        // - As per spec (https://fetch.spec.whatwg.org/#http-network-or-cache-fetch):\n        //   If the sum of contentLength and inflightKeepaliveBytes is greater than 64 kibibytes, then return a network error.\n        //   We will therefore only activate the flag when we're below that limit.\n        // There is also a limit of requests that can be open at the same time, so we also limit this to 15\n        // See https://github.com/getsentry/sentry-javascript/pull/7553 for details\n        keepalive: pendingBodySize <= 60000 && pendingCount < 15,\n        ...options.fetchOptions\n      };\n      try {\n        return nativeFetch(options.url, requestOptions).then(response => {\n          pendingBodySize -= requestSize;\n          pendingCount--;\n          return {\n            statusCode: response.status,\n            headers: {\n              'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n              'retry-after': response.headers.get('Retry-After')\n            }\n          };\n        });\n      } catch (e) {\n        utils.clearCachedFetchImplementation();\n        pendingBodySize -= requestSize;\n        pendingCount--;\n        return utils$1.rejectedSyncPromise(e);\n      }\n    }\n    return core.createTransport(options, makeRequest);\n  }\n  exports.makeFetchTransport = makeFetchTransport;\n});","lineCount":61,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,6,3,6,"core"],[5,10,3,10],[5,13,3,13,"require"],[5,20,3,20],[5,21,3,20,"_dependencyMap"],[5,35,3,20],[5,54,3,35],[5,55,3,36],[6,2,4,0],[6,6,4,6,"utils$1"],[6,13,4,13],[6,16,4,16,"require"],[6,23,4,23],[6,24,4,23,"_dependencyMap"],[6,38,4,23],[6,58,4,39],[6,59,4,40],[7,2,5,0],[7,6,5,6,"utils"],[7,11,5,11],[7,14,5,14,"require"],[7,21,5,21],[7,22,5,21,"_dependencyMap"],[7,36,5,21],[7,53,5,34],[7,54,5,35],[9,2,7,0],[10,0,8,0],[11,0,9,0],[12,2,10,0],[12,11,10,9,"makeFetchTransport"],[12,29,10,27,"makeFetchTransport"],[12,30,11,2,"options"],[12,37,11,9],[12,39,13,2],[13,4,13,2],[13,8,12,2,"nativeFetch"],[13,19,12,13],[13,22,12,13,"arguments"],[13,31,12,13],[13,32,12,13,"length"],[13,38,12,13],[13,46,12,13,"arguments"],[13,55,12,13],[13,63,12,13,"undefined"],[13,72,12,13],[13,75,12,13,"arguments"],[13,84,12,13],[13,90,12,16,"utils"],[13,95,12,21],[13,96,12,22,"getNativeFetchImplementation"],[13,124,12,50],[13,125,12,51],[13,126,12,52],[14,4,14,2],[14,8,14,6,"pendingBodySize"],[14,23,14,21],[14,26,14,24],[14,27,14,25],[15,4,15,2],[15,8,15,6,"pendingCount"],[15,20,15,18],[15,23,15,21],[15,24,15,22],[16,4,17,2],[16,13,17,11,"makeRequest"],[16,24,17,22,"makeRequest"],[16,25,17,23,"request"],[16,32,17,30],[16,34,17,32],[17,6,18,4],[17,10,18,10,"requestSize"],[17,21,18,21],[17,24,18,24,"request"],[17,31,18,31],[17,32,18,32,"body"],[17,36,18,36],[17,37,18,37,"length"],[17,43,18,43],[18,6,19,4,"pendingBodySize"],[18,21,19,19],[18,25,19,23,"requestSize"],[18,36,19,34],[19,6,20,4,"pendingCount"],[19,18,20,16],[19,20,20,18],[20,6,22,4],[20,10,22,10,"requestOptions"],[20,24,22,24],[20,27,22,27],[21,8,23,6,"body"],[21,12,23,10],[21,14,23,12,"request"],[21,21,23,19],[21,22,23,20,"body"],[21,26,23,24],[22,8,24,6,"method"],[22,14,24,12],[22,16,24,14],[22,22,24,20],[23,8,25,6,"referrerPolicy"],[23,22,25,20],[23,24,25,22],[23,32,25,30],[24,8,26,6,"headers"],[24,15,26,13],[24,17,26,15,"options"],[24,24,26,22],[24,25,26,23,"headers"],[24,32,26,30],[25,8,27,6],[26,8,28,6],[27,8,29,6],[28,8,30,6],[29,8,31,6],[30,8,32,6],[31,8,33,6],[32,8,34,6],[33,8,35,6],[34,8,36,6],[35,8,37,6],[36,8,38,6,"keepalive"],[36,17,38,15],[36,19,38,17,"pendingBodySize"],[36,34,38,32],[36,38,38,36],[36,43,38,41],[36,47,38,45,"pendingCount"],[36,59,38,57],[36,62,38,60],[36,64,38,62],[37,8,39,6],[37,11,39,9,"options"],[37,18,39,16],[37,19,39,17,"fetchOptions"],[38,6,40,4],[38,7,40,5],[39,6,42,4],[39,10,42,8],[40,8,43,6],[40,15,43,13,"nativeFetch"],[40,26,43,24],[40,27,43,25,"options"],[40,34,43,32],[40,35,43,33,"url"],[40,38,43,36],[40,40,43,38,"requestOptions"],[40,54,43,52],[40,55,43,53],[40,56,43,54,"then"],[40,60,43,58],[40,61,43,59,"response"],[40,69,43,67],[40,73,43,71],[41,10,44,8,"pendingBodySize"],[41,25,44,23],[41,29,44,27,"requestSize"],[41,40,44,38],[42,10,45,8,"pendingCount"],[42,22,45,20],[42,24,45,22],[43,10,46,8],[43,17,46,15],[44,12,47,10,"statusCode"],[44,22,47,20],[44,24,47,22,"response"],[44,32,47,30],[44,33,47,31,"status"],[44,39,47,37],[45,12,48,10,"headers"],[45,19,48,17],[45,21,48,19],[46,14,49,12],[46,36,49,34],[46,38,49,36,"response"],[46,46,49,44],[46,47,49,45,"headers"],[46,54,49,52],[46,55,49,53,"get"],[46,58,49,56],[46,59,49,57],[46,81,49,79],[46,82,49,80],[47,14,50,12],[47,27,50,25],[47,29,50,27,"response"],[47,37,50,35],[47,38,50,36,"headers"],[47,45,50,43],[47,46,50,44,"get"],[47,49,50,47],[47,50,50,48],[47,63,50,61],[48,12,51,10],[49,10,52,8],[49,11,52,9],[50,8,53,6],[50,9,53,7],[50,10,53,8],[51,6,54,4],[51,7,54,5],[51,8,54,6],[51,15,54,13,"e"],[51,16,54,14],[51,18,54,16],[52,8,55,6,"utils"],[52,13,55,11],[52,14,55,12,"clearCachedFetchImplementation"],[52,44,55,42],[52,45,55,43],[52,46,55,44],[53,8,56,6,"pendingBodySize"],[53,23,56,21],[53,27,56,25,"requestSize"],[53,38,56,36],[54,8,57,6,"pendingCount"],[54,20,57,18],[54,22,57,20],[55,8,58,6],[55,15,58,13,"utils$1"],[55,22,58,20],[55,23,58,21,"rejectedSyncPromise"],[55,42,58,40],[55,43,58,41,"e"],[55,44,58,42],[55,45,58,43],[56,6,59,4],[57,4,60,2],[58,4,62,2],[58,11,62,9,"core"],[58,15,62,13],[58,16,62,14,"createTransport"],[58,31,62,29],[58,32,62,30,"options"],[58,39,62,37],[58,41,62,39,"makeRequest"],[58,52,62,50],[58,53,62,51],[59,2,63,0],[60,2,65,0,"exports"],[60,9,65,7],[60,10,65,8,"makeFetchTransport"],[60,28,65,26],[60,31,65,29,"makeFetchTransport"],[60,49,65,47],[61,0,65,48],[61,3]],"functionMap":{"names":["<global>","makeFetchTransport","makeRequest","nativeFetch.then$argument_0"],"mappings":"AAA;ACS;ECO;2DC0B;ODU;GDO;CDG"},"hasCjsExports":true},"type":"js/module"}]}