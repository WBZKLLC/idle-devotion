{"dependencies":[{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":4,"index":27},"end":{"line":3,"column":28,"index":51}},{"start":{"line":7,"column":14,"index":132},"end":{"line":7,"column":38,"index":156}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":2}},{"name":"./utils/node-utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":18,"index":176},"end":{"line":8,"column":50,"index":208}}],"key":"nAIWt1BOOZ86MvoHpjeMwr97UUM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var {\n    _optionalChain\n  } = require(_dependencyMap[0], \"@sentry/utils\");\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const utils = require(_dependencyMap[0], \"@sentry/utils\");\n  const nodeUtils = require(_dependencyMap[1], \"./utils/node-utils.js\");\n\n  /** Tracing integration for node-mysql package */\n  class Mysql {\n    /**\n     * @inheritDoc\n     */\n    static __initStatic() {\n      this.id = 'Mysql';\n    }\n\n    /**\n     * @inheritDoc\n     */\n\n    constructor() {\n      this.name = Mysql.id;\n    }\n\n    /** @inheritdoc */\n    loadDependency() {\n      return this._module = this._module || utils.loadModule('mysql/lib/Connection.js');\n    }\n\n    /**\n     * @inheritDoc\n     */\n    setupOnce(_, getCurrentHub) {\n      if (nodeUtils.shouldDisableAutoInstrumentation(getCurrentHub)) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.log('Mysql Integration is skipped because of instrumenter configuration.');\n        return;\n      }\n      const pkg = this.loadDependency();\n      if (!pkg) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.error('Mysql Integration was unable to require `mysql` package.');\n        return;\n      }\n      let mySqlConfig = undefined;\n      try {\n        pkg.prototype.connect = new Proxy(pkg.prototype.connect, {\n          apply(wrappingTarget, thisArg, args) {\n            if (!mySqlConfig) {\n              mySqlConfig = thisArg.config;\n            }\n            return wrappingTarget.apply(thisArg, args);\n          }\n        });\n      } catch (e) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.error('Mysql Integration was unable to instrument `mysql` config.');\n      }\n      function spanDataFromConfig() {\n        if (!mySqlConfig) {\n          return {};\n        }\n        return {\n          'server.address': mySqlConfig.host,\n          'server.port': mySqlConfig.port,\n          'db.user': mySqlConfig.user\n        };\n      }\n      function finishSpan(span) {\n        if (!span || span.endTimestamp) {\n          return;\n        }\n        const data = spanDataFromConfig();\n        Object.keys(data).forEach(key => {\n          span.setData(key, data[key]);\n        });\n        span.finish();\n      }\n\n      // The original function will have one of these signatures:\n      //    function (callback) => void\n      //    function (options, callback) => void\n      //    function (options, values, callback) => void\n      utils.fill(pkg, 'createQuery', function (orig) {\n        return function (options, values, callback) {\n          const scope = getCurrentHub().getScope();\n          const parentSpan = scope.getSpan();\n          const span = _optionalChain([parentSpan, 'optionalAccess', _2 => _2.startChild, 'call', _3 => _3({\n            description: typeof options === 'string' ? options : options.sql,\n            op: 'db',\n            origin: 'auto.db.mysql',\n            data: {\n              'db.system': 'mysql'\n            }\n          })]);\n          if (typeof callback === 'function') {\n            return orig.call(this, options, values, function (err, result, fields) {\n              finishSpan(span);\n              callback(err, result, fields);\n            });\n          }\n          if (typeof values === 'function') {\n            return orig.call(this, options, function (err, result, fields) {\n              finishSpan(span);\n              values(err, result, fields);\n            });\n          }\n\n          // streaming, no callback!\n          const query = orig.call(this, options, values);\n          query.on('end', () => {\n            finishSpan(span);\n          });\n          return query;\n        };\n      });\n    }\n  }\n  Mysql.__initStatic();\n  exports.Mysql = Mysql;\n});","lineCount":121,"map":[[2,2,1,0],[2,6,1,4],[3,4,2,2,"_optionalChain"],[4,2,3,0],[4,3,3,1],[4,6,3,4,"require"],[4,13,3,11],[4,14,3,11,"_dependencyMap"],[4,28,3,11],[4,48,3,27],[4,49,3,28],[5,2,5,0,"Object"],[5,8,5,6],[5,9,5,7,"defineProperty"],[5,23,5,21],[5,24,5,22,"exports"],[5,31,5,29],[5,33,5,31],[5,45,5,43],[5,47,5,45],[6,4,5,47,"value"],[6,9,5,52],[6,11,5,54],[7,2,5,59],[7,3,5,60],[7,4,5,61],[8,2,7,0],[8,8,7,6,"utils"],[8,13,7,11],[8,16,7,14,"require"],[8,23,7,21],[8,24,7,21,"_dependencyMap"],[8,38,7,21],[8,58,7,37],[8,59,7,38],[9,2,8,0],[9,8,8,6,"nodeUtils"],[9,17,8,15],[9,20,8,18,"require"],[9,27,8,25],[9,28,8,25,"_dependencyMap"],[9,42,8,25],[9,70,8,49],[9,71,8,50],[11,2,10,0],[12,2,11,0],[12,8,11,6,"Mysql"],[12,13,11,11],[12,14,11,13],[13,4,12,2],[14,0,13,0],[15,0,14,0],[16,4,15,3],[16,11,15,10,"__initStatic"],[16,23,15,22,"__initStatic"],[16,24,15,22],[16,26,15,25],[17,6,15,26],[17,10,15,30],[17,11,15,31,"id"],[17,13,15,33],[17,16,15,36],[17,23,15,43],[18,4,15,44],[20,4,17,2],[21,0,18,0],[22,0,19,0],[24,4,21,3,"constructor"],[24,15,21,14,"constructor"],[24,16,21,14],[24,18,21,17],[25,6,22,4],[25,10,22,8],[25,11,22,9,"name"],[25,15,22,13],[25,18,22,16,"Mysql"],[25,23,22,21],[25,24,22,22,"id"],[25,26,22,24],[26,4,23,2],[28,4,25,2],[29,4,26,3,"loadDependency"],[29,18,26,17,"loadDependency"],[29,19,26,17],[29,21,26,20],[30,6,27,4],[30,13,27,12],[30,17,27,16],[30,18,27,17,"_module"],[30,25,27,24],[30,28,27,27],[30,32,27,31],[30,33,27,32,"_module"],[30,40,27,39],[30,44,27,43,"utils"],[30,49,27,48],[30,50,27,49,"loadModule"],[30,60,27,59],[30,61,27,60],[30,86,27,85],[30,87,27,86],[31,4,28,2],[33,4,30,2],[34,0,31,0],[35,0,32,0],[36,4,33,3,"setupOnce"],[36,13,33,12,"setupOnce"],[36,14,33,13,"_"],[36,15,33,14],[36,17,33,16,"getCurrentHub"],[36,30,33,29],[36,32,33,31],[37,6,34,4],[37,10,34,8,"nodeUtils"],[37,19,34,17],[37,20,34,18,"shouldDisableAutoInstrumentation"],[37,52,34,50],[37,53,34,51,"getCurrentHub"],[37,66,34,64],[37,67,34,65],[37,69,34,67],[38,8,35,6],[38,9,35,7],[38,16,35,14,"__SENTRY_DEBUG__"],[38,32,35,30],[38,37,35,35],[38,48,35,46],[38,52,35,50,"__SENTRY_DEBUG__"],[38,68,35,66],[38,73,35,71,"utils"],[38,78,35,76],[38,79,35,77,"logger"],[38,85,35,83],[38,86,35,84,"log"],[38,89,35,87],[38,90,35,88],[38,159,35,157],[38,160,35,158],[39,8,36,6],[40,6,37,4],[41,6,39,4],[41,12,39,10,"pkg"],[41,15,39,13],[41,18,39,16],[41,22,39,20],[41,23,39,21,"loadDependency"],[41,37,39,35],[41,38,39,36],[41,39,39,37],[42,6,41,4],[42,10,41,8],[42,11,41,9,"pkg"],[42,14,41,12],[42,16,41,14],[43,8,42,6],[43,9,42,7],[43,16,42,14,"__SENTRY_DEBUG__"],[43,32,42,30],[43,37,42,35],[43,48,42,46],[43,52,42,50,"__SENTRY_DEBUG__"],[43,68,42,66],[43,73,42,71,"utils"],[43,78,42,76],[43,79,42,77,"logger"],[43,85,42,83],[43,86,42,84,"error"],[43,91,42,89],[43,92,42,90],[43,150,42,148],[43,151,42,149],[44,8,43,6],[45,6,44,4],[46,6,46,4],[46,10,46,8,"mySqlConfig"],[46,21,46,19],[46,24,46,22,"undefined"],[46,33,46,31],[47,6,48,4],[47,10,48,8],[48,8,49,6,"pkg"],[48,11,49,9],[48,12,49,10,"prototype"],[48,21,49,19],[48,22,49,20,"connect"],[48,29,49,27],[48,32,49,30],[48,36,49,34,"Proxy"],[48,41,49,39],[48,42,49,40,"pkg"],[48,45,49,43],[48,46,49,44,"prototype"],[48,55,49,53],[48,56,49,54,"connect"],[48,63,49,61],[48,65,49,63],[49,10,50,8,"apply"],[49,15,50,13,"apply"],[49,16,50,14,"wrappingTarget"],[49,30,50,28],[49,32,50,30,"thisArg"],[49,39,50,37],[49,41,50,39,"args"],[49,45,50,43],[49,47,50,45],[50,12,51,10],[50,16,51,14],[50,17,51,15,"mySqlConfig"],[50,28,51,26],[50,30,51,28],[51,14,52,12,"mySqlConfig"],[51,25,52,23],[51,28,52,26,"thisArg"],[51,35,52,33],[51,36,52,34,"config"],[51,42,52,40],[52,12,53,10],[53,12,54,10],[53,19,54,17,"wrappingTarget"],[53,33,54,31],[53,34,54,32,"apply"],[53,39,54,37],[53,40,54,38,"thisArg"],[53,47,54,45],[53,49,54,47,"args"],[53,53,54,51],[53,54,54,52],[54,10,55,8],[55,8,56,6],[55,9,56,7],[55,10,56,8],[56,6,57,4],[56,7,57,5],[56,8,57,6],[56,15,57,13,"e"],[56,16,57,14],[56,18,57,16],[57,8,58,6],[57,9,58,7],[57,16,58,14,"__SENTRY_DEBUG__"],[57,32,58,30],[57,37,58,35],[57,48,58,46],[57,52,58,50,"__SENTRY_DEBUG__"],[57,68,58,66],[57,73,58,71,"utils"],[57,78,58,76],[57,79,58,77,"logger"],[57,85,58,83],[57,86,58,84,"error"],[57,91,58,89],[57,92,58,90],[57,152,58,150],[57,153,58,151],[58,6,59,4],[59,6,61,4],[59,15,61,13,"spanDataFromConfig"],[59,33,61,31,"spanDataFromConfig"],[59,34,61,31],[59,36,61,34],[60,8,62,6],[60,12,62,10],[60,13,62,11,"mySqlConfig"],[60,24,62,22],[60,26,62,24],[61,10,63,8],[61,17,63,15],[61,18,63,16],[61,19,63,17],[62,8,64,6],[63,8,65,6],[63,15,65,13],[64,10,66,8],[64,26,66,24],[64,28,66,26,"mySqlConfig"],[64,39,66,37],[64,40,66,38,"host"],[64,44,66,42],[65,10,67,8],[65,23,67,21],[65,25,67,23,"mySqlConfig"],[65,36,67,34],[65,37,67,35,"port"],[65,41,67,39],[66,10,68,8],[66,19,68,17],[66,21,68,19,"mySqlConfig"],[66,32,68,30],[66,33,68,31,"user"],[67,8,69,6],[67,9,69,7],[68,6,70,4],[69,6,72,4],[69,15,72,13,"finishSpan"],[69,25,72,23,"finishSpan"],[69,26,72,24,"span"],[69,30,72,28],[69,32,72,30],[70,8,73,6],[70,12,73,10],[70,13,73,11,"span"],[70,17,73,15],[70,21,73,19,"span"],[70,25,73,23],[70,26,73,24,"endTimestamp"],[70,38,73,36],[70,40,73,38],[71,10,74,8],[72,8,75,6],[73,8,77,6],[73,14,77,12,"data"],[73,18,77,16],[73,21,77,19,"spanDataFromConfig"],[73,39,77,37],[73,40,77,38],[73,41,77,39],[74,8,78,6,"Object"],[74,14,78,12],[74,15,78,13,"keys"],[74,19,78,17],[74,20,78,18,"data"],[74,24,78,22],[74,25,78,23],[74,26,78,24,"forEach"],[74,33,78,31],[74,34,78,32,"key"],[74,37,78,35],[74,41,78,39],[75,10,79,8,"span"],[75,14,79,12],[75,15,79,13,"setData"],[75,22,79,20],[75,23,79,21,"key"],[75,26,79,24],[75,28,79,26,"data"],[75,32,79,30],[75,33,79,31,"key"],[75,36,79,34],[75,37,79,35],[75,38,79,36],[76,8,80,6],[76,9,80,7],[76,10,80,8],[77,8,82,6,"span"],[77,12,82,10],[77,13,82,11,"finish"],[77,19,82,17],[77,20,82,18],[77,21,82,19],[78,6,83,4],[80,6,85,4],[81,6,86,4],[82,6,87,4],[83,6,88,4],[84,6,89,4,"utils"],[84,11,89,9],[84,12,89,10,"fill"],[84,16,89,14],[84,17,89,15,"pkg"],[84,20,89,18],[84,22,89,20],[84,35,89,33],[84,37,89,35],[84,47,89,45,"orig"],[84,51,89,49],[84,53,89,51],[85,8,90,6],[85,15,90,13],[85,25,90,24,"options"],[85,32,90,31],[85,34,90,33,"values"],[85,40,90,39],[85,42,90,41,"callback"],[85,50,90,49],[85,52,90,51],[86,10,91,8],[86,16,91,14,"scope"],[86,21,91,19],[86,24,91,22,"getCurrentHub"],[86,37,91,35],[86,38,91,36],[86,39,91,37],[86,40,91,38,"getScope"],[86,48,91,46],[86,49,91,47],[86,50,91,48],[87,10,92,8],[87,16,92,14,"parentSpan"],[87,26,92,24],[87,29,92,27,"scope"],[87,34,92,32],[87,35,92,33,"getSpan"],[87,42,92,40],[87,43,92,41],[87,44,92,42],[88,10,94,8],[88,16,94,14,"span"],[88,20,94,18],[88,23,94,21,"_optionalChain"],[88,37,94,35],[88,38,94,36],[88,39,94,37,"parentSpan"],[88,49,94,47],[88,51,94,49],[88,67,94,65],[88,69,94,67,"_2"],[88,71,94,69],[88,75,94,73,"_2"],[88,77,94,75],[88,78,94,76,"startChild"],[88,88,94,86],[88,90,94,88],[88,96,94,94],[88,98,94,96,"_3"],[88,100,94,98],[88,104,94,102,"_3"],[88,106,94,104],[88,107,94,105],[89,12,95,10,"description"],[89,23,95,21],[89,25,95,23],[89,32,95,30,"options"],[89,39,95,37],[89,44,95,42],[89,52,95,50],[89,55,95,53,"options"],[89,62,95,60],[89,65,95,64,"options"],[89,72,95,71],[89,73,95,74,"sql"],[89,76,95,77],[90,12,96,10,"op"],[90,14,96,12],[90,16,96,14],[90,20,96,18],[91,12,97,10,"origin"],[91,18,97,16],[91,20,97,18],[91,35,97,33],[92,12,98,10,"data"],[92,16,98,14],[92,18,98,16],[93,14,99,12],[93,25,99,23],[93,27,99,25],[94,12,100,10],[95,10,101,8],[95,11,101,9],[95,12,101,10],[95,13,101,11],[95,14,101,12],[96,10,103,8],[96,14,103,12],[96,21,103,19,"callback"],[96,29,103,27],[96,34,103,32],[96,44,103,42],[96,46,103,44],[97,12,104,10],[97,19,104,17,"orig"],[97,23,104,21],[97,24,104,22,"call"],[97,28,104,26],[97,29,104,27],[97,33,104,31],[97,35,104,33,"options"],[97,42,104,40],[97,44,104,42,"values"],[97,50,104,48],[97,52,104,50],[97,62,104,60,"err"],[97,65,104,63],[97,67,104,65,"result"],[97,73,104,71],[97,75,104,73,"fields"],[97,81,104,79],[97,83,104,81],[98,14,105,12,"finishSpan"],[98,24,105,22],[98,25,105,23,"span"],[98,29,105,27],[98,30,105,28],[99,14,106,12,"callback"],[99,22,106,20],[99,23,106,21,"err"],[99,26,106,24],[99,28,106,26,"result"],[99,34,106,32],[99,36,106,34,"fields"],[99,42,106,40],[99,43,106,41],[100,12,107,10],[100,13,107,11],[100,14,107,12],[101,10,108,8],[102,10,110,8],[102,14,110,12],[102,21,110,19,"values"],[102,27,110,25],[102,32,110,30],[102,42,110,40],[102,44,110,42],[103,12,111,10],[103,19,111,17,"orig"],[103,23,111,21],[103,24,111,22,"call"],[103,28,111,26],[103,29,111,27],[103,33,111,31],[103,35,111,33,"options"],[103,42,111,40],[103,44,111,42],[103,54,111,52,"err"],[103,57,111,55],[103,59,111,57,"result"],[103,65,111,63],[103,67,111,65,"fields"],[103,73,111,71],[103,75,111,73],[104,14,112,12,"finishSpan"],[104,24,112,22],[104,25,112,23,"span"],[104,29,112,27],[104,30,112,28],[105,14,113,12,"values"],[105,20,113,18],[105,21,113,19,"err"],[105,24,113,22],[105,26,113,24,"result"],[105,32,113,30],[105,34,113,32,"fields"],[105,40,113,38],[105,41,113,39],[106,12,114,10],[106,13,114,11],[106,14,114,12],[107,10,115,8],[109,10,117,8],[110,10,118,8],[110,16,118,14,"query"],[110,21,118,19],[110,24,118,22,"orig"],[110,28,118,26],[110,29,118,27,"call"],[110,33,118,31],[110,34,118,32],[110,38,118,36],[110,40,118,38,"options"],[110,47,118,45],[110,49,118,47,"values"],[110,55,118,53],[110,56,118,54],[111,10,120,8,"query"],[111,15,120,13],[111,16,120,14,"on"],[111,18,120,16],[111,19,120,17],[111,24,120,22],[111,26,120,24],[111,32,120,30],[112,12,121,10,"finishSpan"],[112,22,121,20],[112,23,121,21,"span"],[112,27,121,25],[112,28,121,26],[113,10,122,8],[113,11,122,9],[113,12,122,10],[114,10,124,8],[114,17,124,15,"query"],[114,22,124,20],[115,8,125,6],[115,9,125,7],[116,6,126,4],[116,7,126,5],[116,8,126,6],[117,4,127,2],[118,2,128,0],[119,2,128,1,"Mysql"],[119,7,128,6],[119,8,128,7,"__initStatic"],[119,20,128,19],[119,21,128,20],[119,22,128,21],[120,2,130,0,"exports"],[120,9,130,7],[120,10,130,8,"Mysql"],[120,15,130,13],[120,18,130,16,"Mysql"],[120,23,130,21],[121,0,130,22],[121,3]],"functionMap":{"names":["<global>","Mysql","Mysql.__initStatic","Mysql#constructor","Mysql#loadDependency","Mysql#setupOnce","Proxy$argument_1.apply","spanDataFromConfig","finishSpan","Object.keys.forEach$argument_0","utils.fill$argument_2","<anonymous>","orig.call$argument_3","orig.call$argument_2","query.on$argument_1"],"mappings":"AAA;ACU;GCI,0CD;GEM;GFE;GGG;GHE;GIK;QCiB;SDK;IEM;KFS;IGE;gCCM;ODE;KHG;mCKM;aCC;kDCc;WDG;0CEI;WFG;wBGM;SHE;ODG;KLC;GJC;CDC"},"hasCjsExports":true},"type":"js/module"}]}