{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":13,"index":77},"end":{"line":3,"column":36,"index":100}}],"key":"CPmndeSLDuCg/s3oFguorTUVcN0=","exportNames":["*"],"imports":1}},{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":14,"index":116},"end":{"line":4,"column":38,"index":140}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":1}},{"name":"./utils/node-utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":18,"index":160},"end":{"line":5,"column":50,"index":192}}],"key":"nAIWt1BOOZ86MvoHpjeMwr97UUM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const core = require(_dependencyMap[0], \"@sentry/core\");\n  const utils = require(_dependencyMap[1], \"@sentry/utils\");\n  const nodeUtils = require(_dependencyMap[2], \"./utils/node-utils.js\");\n  function isValidPrismaClient(possibleClient) {\n    return !!possibleClient && !!possibleClient['$use'];\n  }\n\n  /** Tracing integration for @prisma/client package */\n  class Prisma {\n    /**\n     * @inheritDoc\n     */\n    static __initStatic() {\n      this.id = 'Prisma';\n    }\n\n    /**\n     * @inheritDoc\n     */\n\n    /**\n     * @inheritDoc\n     */\n    constructor(options = {}) {\n      this.name = Prisma.id;\n\n      // We instrument the PrismaClient inside the constructor and not inside `setupOnce` because in some cases of server-side\n      // bundling (Next.js) multiple Prisma clients can be instantiated, even though users don't intend to. When instrumenting\n      // in setupOnce we can only ever instrument one client.\n      // https://github.com/getsentry/sentry-javascript/issues/7216#issuecomment-1602375012\n      // In the future we might explore providing a dedicated PrismaClient middleware instead of this hack.\n      if (isValidPrismaClient(options.client) && !options.client._sentryInstrumented) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        utils.addNonEnumerableProperty(options.client, '_sentryInstrumented', true);\n        const clientData = {};\n        try {\n          const engineConfig = options.client._engineConfig;\n          if (engineConfig) {\n            const {\n              activeProvider,\n              clientVersion\n            } = engineConfig;\n            if (activeProvider) {\n              clientData['db.system'] = activeProvider;\n            }\n            if (clientVersion) {\n              clientData['db.prisma.version'] = clientVersion;\n            }\n          }\n        } catch (e) {\n          // ignore\n        }\n        options.client.$use((params, next) => {\n          if (nodeUtils.shouldDisableAutoInstrumentation(core.getCurrentHub)) {\n            return next(params);\n          }\n          const action = params.action;\n          const model = params.model;\n          return core.trace({\n            name: model ? `${model} ${action}` : action,\n            op: 'db.prisma',\n            origin: 'auto.db.prisma',\n            data: {\n              ...clientData,\n              'db.operation': action\n            }\n          }, () => next(params));\n        });\n      } else {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.warn('Unsupported Prisma client provided to PrismaIntegration. Provided client:', options.client);\n      }\n    }\n\n    /**\n     * @inheritDoc\n     */\n    setupOnce() {\n      // Noop - here for backwards compatibility\n    }\n  }\n  Prisma.__initStatic();\n  exports.Prisma = Prisma;\n});","lineCount":87,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"core"],[5,12,3,10],[5,15,3,13,"require"],[5,22,3,20],[5,23,3,20,"_dependencyMap"],[5,37,3,20],[5,56,3,35],[5,57,3,36],[6,2,4,0],[6,8,4,6,"utils"],[6,13,4,11],[6,16,4,14,"require"],[6,23,4,21],[6,24,4,21,"_dependencyMap"],[6,38,4,21],[6,58,4,37],[6,59,4,38],[7,2,5,0],[7,8,5,6,"nodeUtils"],[7,17,5,15],[7,20,5,18,"require"],[7,27,5,25],[7,28,5,25,"_dependencyMap"],[7,42,5,25],[7,70,5,49],[7,71,5,50],[8,2,7,0],[8,11,7,9,"isValidPrismaClient"],[8,30,7,28,"isValidPrismaClient"],[8,31,7,29,"possibleClient"],[8,45,7,43],[8,47,7,45],[9,4,8,2],[9,11,8,9],[9,12,8,10],[9,13,8,11,"possibleClient"],[9,27,8,25],[9,31,8,29],[9,32,8,30],[9,33,8,32,"possibleClient"],[9,47,8,46],[9,48,8,49],[9,54,8,55],[9,55,8,56],[10,2,9,0],[12,2,11,0],[13,2,12,0],[13,8,12,6,"Prisma"],[13,14,12,12],[13,15,12,14],[14,4,13,2],[15,0,14,0],[16,0,15,0],[17,4,16,3],[17,11,16,10,"__initStatic"],[17,23,16,22,"__initStatic"],[17,24,16,22],[17,26,16,25],[18,6,16,26],[18,10,16,30],[18,11,16,31,"id"],[18,13,16,33],[18,16,16,36],[18,24,16,44],[19,4,16,45],[21,4,18,2],[22,0,19,0],[23,0,20,0],[25,4,22,2],[26,0,23,0],[27,0,24,0],[28,4,25,3,"constructor"],[28,15,25,14,"constructor"],[28,16,25,15,"options"],[28,23,25,22],[28,26,25,25],[28,27,25,26],[28,28,25,27],[28,30,25,29],[29,6,26,4],[29,10,26,8],[29,11,26,9,"name"],[29,15,26,13],[29,18,26,16,"Prisma"],[29,24,26,22],[29,25,26,23,"id"],[29,27,26,25],[31,6,28,4],[32,6,29,4],[33,6,30,4],[34,6,31,4],[35,6,32,4],[36,6,33,4],[36,10,33,8,"isValidPrismaClient"],[36,29,33,27],[36,30,33,28,"options"],[36,37,33,35],[36,38,33,36,"client"],[36,44,33,42],[36,45,33,43],[36,49,33,47],[36,50,33,48,"options"],[36,57,33,55],[36,58,33,56,"client"],[36,64,33,62],[36,65,33,63,"_sentryInstrumented"],[36,84,33,82],[36,86,33,84],[37,8,34,6],[38,8,35,6,"utils"],[38,13,35,11],[38,14,35,12,"addNonEnumerableProperty"],[38,38,35,36],[38,39,35,37,"options"],[38,46,35,44],[38,47,35,45,"client"],[38,53,35,51],[38,55,35,54],[38,76,35,75],[38,78,35,77],[38,82,35,81],[38,83,35,82],[39,8,37,6],[39,14,37,12,"clientData"],[39,24,37,22],[39,27,37,25],[39,28,37,26],[39,29,37,27],[40,8,38,6],[40,12,38,10],[41,10,39,8],[41,16,39,14,"engineConfig"],[41,28,39,26],[41,31,39,30,"options"],[41,38,39,37],[41,39,39,38,"client"],[41,45,39,44],[41,46,39,47,"_engineConfig"],[41,59,39,60],[42,10,40,8],[42,14,40,12,"engineConfig"],[42,26,40,24],[42,28,40,26],[43,12,41,10],[43,18,41,16],[44,14,41,18,"activeProvider"],[44,28,41,32],[45,14,41,34,"clientVersion"],[46,12,41,48],[46,13,41,49],[46,16,41,52,"engineConfig"],[46,28,41,64],[47,12,42,10],[47,16,42,14,"activeProvider"],[47,30,42,28],[47,32,42,30],[48,14,43,12,"clientData"],[48,24,43,22],[48,25,43,23],[48,36,43,34],[48,37,43,35],[48,40,43,38,"activeProvider"],[48,54,43,52],[49,12,44,10],[50,12,45,10],[50,16,45,14,"clientVersion"],[50,29,45,27],[50,31,45,29],[51,14,46,12,"clientData"],[51,24,46,22],[51,25,46,23],[51,44,46,42],[51,45,46,43],[51,48,46,46,"clientVersion"],[51,61,46,59],[52,12,47,10],[53,10,48,8],[54,8,49,6],[54,9,49,7],[54,10,49,8],[54,17,49,15,"e"],[54,18,49,16],[54,20,49,18],[55,10,50,8],[56,8,50,8],[57,8,53,6,"options"],[57,15,53,13],[57,16,53,14,"client"],[57,22,53,20],[57,23,53,21,"$use"],[57,27,53,25],[57,28,53,26],[57,29,53,27,"params"],[57,35,53,33],[57,37,53,35,"next"],[57,41,53,39],[57,46,53,44],[58,10,54,8],[58,14,54,12,"nodeUtils"],[58,23,54,21],[58,24,54,22,"shouldDisableAutoInstrumentation"],[58,56,54,54],[58,57,54,55,"core"],[58,61,54,59],[58,62,54,60,"getCurrentHub"],[58,75,54,73],[58,76,54,74],[58,78,54,76],[59,12,55,10],[59,19,55,17,"next"],[59,23,55,21],[59,24,55,22,"params"],[59,30,55,28],[59,31,55,29],[60,10,56,8],[61,10,58,8],[61,16,58,14,"action"],[61,22,58,20],[61,25,58,23,"params"],[61,31,58,29],[61,32,58,30,"action"],[61,38,58,36],[62,10,59,8],[62,16,59,14,"model"],[62,21,59,19],[62,24,59,22,"params"],[62,30,59,28],[62,31,59,29,"model"],[62,36,59,34],[63,10,61,8],[63,17,61,15,"core"],[63,21,61,19],[63,22,61,20,"trace"],[63,27,61,25],[63,28,62,10],[64,12,63,12,"name"],[64,16,63,16],[64,18,63,18,"model"],[64,23,63,23],[64,26,63,26],[64,29,63,29,"model"],[64,34,63,34],[64,38,63,38,"action"],[64,44,63,44],[64,46,63,46],[64,49,63,49,"action"],[64,55,63,55],[65,12,64,12,"op"],[65,14,64,14],[65,16,64,16],[65,27,64,27],[66,12,65,12,"origin"],[66,18,65,18],[66,20,65,20],[66,36,65,36],[67,12,66,12,"data"],[67,16,66,16],[67,18,66,18],[68,14,66,20],[68,17,66,23,"clientData"],[68,27,66,33],[69,14,66,35],[69,28,66,49],[69,30,66,51,"action"],[70,12,66,58],[71,10,67,10],[71,11,67,11],[71,13,68,10],[71,19,68,16,"next"],[71,23,68,20],[71,24,68,21,"params"],[71,30,68,27],[71,31,69,8],[71,32,69,9],[72,8,70,6],[72,9,70,7],[72,10,70,8],[73,6,71,4],[73,7,71,5],[73,13,71,11],[74,8,72,6],[74,9,72,7],[74,16,72,14,"__SENTRY_DEBUG__"],[74,32,72,30],[74,37,72,35],[74,48,72,46],[74,52,72,50,"__SENTRY_DEBUG__"],[74,68,72,66],[74,73,73,8,"utils"],[74,78,73,13],[74,79,73,14,"logger"],[74,85,73,20],[74,86,73,21,"warn"],[74,90,73,25],[74,91,73,26],[74,166,73,101],[74,168,73,103,"options"],[74,175,73,110],[74,176,73,111,"client"],[74,182,73,117],[74,183,73,118],[75,6,74,4],[76,4,75,2],[78,4,77,2],[79,0,78,0],[80,0,79,0],[81,4,80,3,"setupOnce"],[81,13,80,12,"setupOnce"],[81,14,80,12],[81,16,80,15],[82,6,81,4],[83,4,81,4],[84,2,83,0],[85,2,83,2,"Prisma"],[85,8,83,8],[85,9,83,9,"__initStatic"],[85,21,83,21],[85,22,83,22],[85,23,83,23],[86,2,85,0,"exports"],[86,9,85,7],[86,10,85,8,"Prisma"],[86,16,85,14],[86,19,85,17,"Prisma"],[86,25,85,23],[87,0,85,24],[87,3]],"functionMap":{"names":["<global>","isValidPrismaClient","Prisma","Prisma.__initStatic","Prisma#constructor","options.client.$use$argument_0","core.trace$argument_1","Prisma#setupOnce"],"mappings":"AAA;ACM;CDE;AEG;GCI,2CD;GES;0BC4B;UCe,kBD;ODE;GFK;GKK;GLE;CFC"},"hasCjsExports":true},"type":"js/module"}]}