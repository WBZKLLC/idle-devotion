{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":149},"end":{"line":5,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  exports.requireUsername = requireUsername;\n  exports.fetchUserHeroes = fetchUserHeroes;\n  exports.promoteHeroStar = promoteHeroStar;\n  exports.fetchUser = fetchUser;\n  exports.performSummon = performSummon;\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  // /app/frontend/lib/api.ts\n  // SINGLE SOURCE OF TRUTH for all backend API calls\n  // Screens should import from here to prevent endpoint string drift\n\n  const API_BASE = process.env.EXPO_PUBLIC_BACKEND_URL ? `${process.env.EXPO_PUBLIC_BACKEND_URL}/api` : '/api';\n  const api = axios.default.create({\n    baseURL: API_BASE,\n    timeout: 20000\n  });\n  function requireUsername(username) {\n    if (!username) throw new Error('Missing username');\n    return username;\n  }\n\n  // ─────────────────────────────────────────────────────────────\n  // USER HEROES\n  // ─────────────────────────────────────────────────────────────\n\n  async function fetchUserHeroes(username) {\n    const u = requireUsername(username);\n    const res = await api.get(`/user/${encodeURIComponent(u)}/heroes`);\n    return res.data;\n  }\n\n  // ─────────────────────────────────────────────────────────────\n  // STAR PROMOTION (canonical endpoint)\n  // POST /api/hero/{user_hero_id}/promote-star?username=...\n  // ─────────────────────────────────────────────────────────────\n\n  async function promoteHeroStar(userHeroId, username) {\n    const u = requireUsername(username);\n    const res = await api.post(`/hero/${encodeURIComponent(userHeroId)}/promote-star`, null, {\n      params: {\n        username: u\n      }\n    });\n    return res.data;\n  }\n\n  // ─────────────────────────────────────────────────────────────\n  // USER AUTH / PROFILE\n  // ─────────────────────────────────────────────────────────────\n\n  async function fetchUser(username) {\n    const u = requireUsername(username);\n    const res = await api.get(`/user/${encodeURIComponent(u)}`);\n    return res.data;\n  }\n\n  // ─────────────────────────────────────────────────────────────\n  // GACHA / SUMMON\n  // ─────────────────────────────────────────────────────────────\n\n  async function performSummon(username, summonType) {\n    const u = requireUsername(username);\n    const res = await api.post(`/gacha/summon`, null, {\n      params: {\n        username: u,\n        summon_type: summonType\n      }\n    });\n    return res.data;\n  }\n\n  // Add more hero endpoints here ONLY.\n  // Screens should import from lib/api.ts so route strings never drift again.\n});","lineCount":91,"map":[[12,2,11,0,"Object"],[12,8,11,0],[12,9,11,0,"defineProperty"],[12,23,11,0],[12,24,11,0,"exports"],[12,31,11,0],[13,4,11,0,"enumerable"],[13,14,11,0],[14,4,11,0,"get"],[14,7,11,0],[14,18,11,0,"get"],[14,19,11,0],[15,6,11,0],[15,13,11,0,"api"],[15,16,11,0],[16,4,11,0],[17,2,11,0],[18,2,16,0,"exports"],[18,9,16,0],[18,10,16,0,"requireUsername"],[18,25,16,0],[18,28,16,0,"requireUsername"],[18,43,16,0],[19,2,25,0,"exports"],[19,9,25,0],[19,10,25,0,"fetchUserHeroes"],[19,25,25,0],[19,28,25,0,"fetchUserHeroes"],[19,43,25,0],[20,2,36,0,"exports"],[20,9,36,0],[20,10,36,0,"promoteHeroStar"],[20,25,36,0],[20,28,36,0,"promoteHeroStar"],[20,43,36,0],[21,2,55,0,"exports"],[21,9,55,0],[21,10,55,0,"fetchUser"],[21,19,55,0],[21,22,55,0,"fetchUser"],[21,31,55,0],[22,2,65,0,"exports"],[22,9,65,0],[22,10,65,0,"performSummon"],[22,23,65,0],[22,26,65,0,"performSummon"],[22,39,65,0],[23,2,5,0],[23,6,5,0,"_axios"],[23,12,5,0],[23,15,5,0,"require"],[23,22,5,0],[23,23,5,0,"_dependencyMap"],[23,37,5,0],[24,2,5,0],[24,6,5,0,"axios"],[24,11,5,0],[24,14,5,0,"_interopDefault"],[24,29,5,0],[24,30,5,0,"_axios"],[24,36,5,0],[25,2,1,0],[26,2,2,0],[27,2,3,0],[29,2,7,0],[29,8,7,6,"API_BASE"],[29,16,7,14],[29,19,7,17,"process"],[29,26,7,24],[29,27,7,25,"env"],[29,30,7,28],[29,31,7,29,"EXPO_PUBLIC_BACKEND_URL"],[29,54,7,52],[29,57,8,4],[29,60,8,7,"process"],[29,67,8,14],[29,68,8,15,"env"],[29,71,8,18],[29,72,8,19,"EXPO_PUBLIC_BACKEND_URL"],[29,95,8,42],[29,101,8,48],[29,104,9,4],[29,110,9,10],[30,2,11,7],[30,8,11,13,"api"],[30,11,11,16],[30,14,11,19,"axios"],[30,19,11,24],[30,20,11,24,"default"],[30,27,11,24],[30,28,11,25,"create"],[30,34,11,31],[30,35,11,32],[31,4,12,2,"baseURL"],[31,11,12,9],[31,13,12,11,"API_BASE"],[31,21,12,19],[32,4,13,2,"timeout"],[32,11,13,9],[32,13,13,11],[33,2,14,0],[33,3,14,1],[33,4,14,2],[34,2,16,7],[34,11,16,16,"requireUsername"],[34,26,16,31,"requireUsername"],[34,27,16,32,"username"],[34,35,16,49],[34,37,16,51],[35,4,17,2],[35,8,17,6],[35,9,17,7,"username"],[35,17,17,15],[35,19,17,17],[35,25,17,23],[35,29,17,27,"Error"],[35,34,17,32],[35,35,17,33],[35,53,17,51],[35,54,17,52],[36,4,18,2],[36,11,18,9,"username"],[36,19,18,17],[37,2,19,0],[39,2,21,0],[40,2,22,0],[41,2,23,0],[43,2,25,7],[43,17,25,22,"fetchUserHeroes"],[43,32,25,37,"fetchUserHeroes"],[43,33,25,38,"username"],[43,41,25,54],[43,43,25,56],[44,4,26,2],[44,10,26,8,"u"],[44,11,26,9],[44,14,26,12,"requireUsername"],[44,29,26,27],[44,30,26,28,"username"],[44,38,26,36],[44,39,26,37],[45,4,27,2],[45,10,27,8,"res"],[45,13,27,11],[45,16,27,14],[45,22,27,20,"api"],[45,25,27,23],[45,26,27,24,"get"],[45,29,27,27],[45,30,27,28],[45,39,27,37,"encodeURIComponent"],[45,57,27,55],[45,58,27,56,"u"],[45,59,27,57],[45,60,27,58],[45,69,27,67],[45,70,27,68],[46,4,28,2],[46,11,28,9,"res"],[46,14,28,12],[46,15,28,13,"data"],[46,19,28,17],[47,2,29,0],[49,2,31,0],[50,2,32,0],[51,2,33,0],[52,2,34,0],[54,2,36,7],[54,17,36,22,"promoteHeroStar"],[54,32,36,37,"promoteHeroStar"],[54,33,36,38,"userHeroId"],[54,43,36,56],[54,45,36,58,"username"],[54,53,36,74],[54,55,36,76],[55,4,37,2],[55,10,37,8,"u"],[55,11,37,9],[55,14,37,12,"requireUsername"],[55,29,37,27],[55,30,37,28,"username"],[55,38,37,36],[55,39,37,37],[56,4,38,2],[56,10,38,8,"res"],[56,13,38,11],[56,16,38,14],[56,22,38,20,"api"],[56,25,38,23],[56,26,38,24,"post"],[56,30,38,28],[56,31,39,4],[56,40,39,13,"encodeURIComponent"],[56,58,39,31],[56,59,39,32,"userHeroId"],[56,69,39,42],[56,70,39,43],[56,85,39,58],[56,87,40,4],[56,91,40,8],[56,93,41,4],[57,6,41,6,"params"],[57,12,41,12],[57,14,41,14],[58,8,41,16,"username"],[58,16,41,24],[58,18,41,26,"u"],[59,6,41,28],[60,4,41,30],[60,5,42,2],[60,6,42,3],[61,4,43,2],[61,11,43,9,"res"],[61,14,43,12],[61,15,43,13,"data"],[61,19,43,17],[62,2,49,0],[64,2,51,0],[65,2,52,0],[66,2,53,0],[68,2,55,7],[68,17,55,22,"fetchUser"],[68,26,55,31,"fetchUser"],[68,27,55,32,"username"],[68,35,55,48],[68,37,55,50],[69,4,56,2],[69,10,56,8,"u"],[69,11,56,9],[69,14,56,12,"requireUsername"],[69,29,56,27],[69,30,56,28,"username"],[69,38,56,36],[69,39,56,37],[70,4,57,2],[70,10,57,8,"res"],[70,13,57,11],[70,16,57,14],[70,22,57,20,"api"],[70,25,57,23],[70,26,57,24,"get"],[70,29,57,27],[70,30,57,28],[70,39,57,37,"encodeURIComponent"],[70,57,57,55],[70,58,57,56,"u"],[70,59,57,57],[70,60,57,58],[70,62,57,60],[70,63,57,61],[71,4,58,2],[71,11,58,9,"res"],[71,14,58,12],[71,15,58,13,"data"],[71,19,58,17],[72,2,59,0],[74,2,61,0],[75,2,62,0],[76,2,63,0],[78,2,65,7],[78,17,65,22,"performSummon"],[78,30,65,35,"performSummon"],[78,31,65,36,"username"],[78,39,65,52],[78,41,65,54,"summonType"],[78,51,65,84],[78,53,65,86],[79,4,66,2],[79,10,66,8,"u"],[79,11,66,9],[79,14,66,12,"requireUsername"],[79,29,66,27],[79,30,66,28,"username"],[79,38,66,36],[79,39,66,37],[80,4,67,2],[80,10,67,8,"res"],[80,13,67,11],[80,16,67,14],[80,22,67,20,"api"],[80,25,67,23],[80,26,67,24,"post"],[80,30,67,28],[80,31,67,29],[80,46,67,44],[80,48,67,46],[80,52,67,50],[80,54,67,52],[81,6,68,4,"params"],[81,12,68,10],[81,14,68,12],[82,8,68,14,"username"],[82,16,68,22],[82,18,68,24,"u"],[82,19,68,25],[83,8,68,27,"summon_type"],[83,19,68,38],[83,21,68,40,"summonType"],[84,6,68,51],[85,4,69,2],[85,5,69,3],[85,6,69,4],[86,4,70,2],[86,11,70,9,"res"],[86,14,70,12],[86,15,70,13,"data"],[86,19,70,17],[87,2,71,0],[89,2,73,0],[90,2,74,0],[91,0,74,0],[91,3]],"functionMap":{"names":["<global>","requireUsername","fetchUserHeroes","promoteHeroStar","fetchUser","performSummon"],"mappings":"AAA;OCe;CDG;OEM;CFI;OGO;CHa;OIM;CJI;OKM;CLM"},"hasCjsExports":false},"type":"js/module"}]}