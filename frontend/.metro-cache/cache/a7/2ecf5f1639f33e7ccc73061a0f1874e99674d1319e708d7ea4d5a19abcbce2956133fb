{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"../authStorage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":339},"end":{"line":10,"column":47,"index":386}}],"key":"8h7N/7sKemAZqrgZg8dH/jTl5ys=","exportNames":["*"],"imports":1}},{"name":"../types/receipt","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":387},"end":{"line":15,"column":26,"index":481}}],"key":"W14jz77KoHdh2OnwnpYz6E6ocCQ=","exportNames":["*"],"imports":1}},{"name":"../telemetry/events","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":482},"end":{"line":16,"column":52,"index":534}}],"key":"k7LZwhoWMWET/ud396YGvDlODrM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getMailSummary = getMailSummary;\n  exports.getMailRewards = getMailRewards;\n  exports.getMailMessages = getMailMessages;\n  exports.getMailGifts = getMailGifts;\n  exports.claimMailReward = claimMailReward;\n  exports.claimMailGift = claimMailGift;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _authStorage = require(_dependencyMap[1], \"../authStorage\");\n  var _typesReceipt = require(_dependencyMap[2], \"../types/receipt\");\n  var _telemetryEvents = require(_dependencyMap[3], \"../telemetry/events\");\n  // /app/frontend/lib/api/mail.ts\n  // Phase 3.23.2.P: Mail API Layer with Auth\n  // Phase 3.24: Canonical Receipt Integration + Telemetry\n  //\n  // Canonical API calls for mail system.\n  // Uses auth token from gameStore for server identity.\n  // Returns canonical receipts for all claim operations.\n  // Emits telemetry events with source + sourceId.\n\n  const API_BASE = _expoVirtualEnv.env.EXPO_PUBLIC_API_URL || '';\n\n  /**\n   * Get auth headers for API calls\n   */\n  async function getAuthHeaders() {\n    const token = await (0, _authStorage.loadAuthToken)();\n    if (token) {\n      return {\n        Authorization: `Bearer ${token}`\n      };\n    }\n    return {};\n  }\n\n  /**\n   * Get mail summary (badge counts) - uses auth token\n   */\n  async function getMailSummary(username) {\n    try {\n      const headers = await getAuthHeaders();\n      // Use legacy route for compatibility, but server uses auth token for identity\n      const res = await fetch(`${API_BASE}/api/mail/summary/${username}`, {\n        headers\n      });\n      if (res.status === 401) {\n        // Token invalid - return defaults, let auth layer handle logout\n        return {\n          rewardsAvailable: 0,\n          unreadMessages: 0,\n          giftsAvailable: 0\n        };\n      }\n      if (!res.ok) throw new Error('Failed to fetch mail summary');\n      return await res.json();\n    } catch {\n      return {\n        rewardsAvailable: 0,\n        unreadMessages: 0,\n        giftsAvailable: 0\n      };\n    }\n  }\n\n  /**\n   * Get mail rewards list\n   */\n  async function getMailRewards(username) {\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/rewards/${username}`, {\n        headers\n      });\n      if (!res.ok) throw new Error('Failed to fetch rewards');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail messages list\n   */\n  async function getMailMessages(username) {\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/messages/${username}`, {\n        headers\n      });\n      if (!res.ok) throw new Error('Failed to fetch messages');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail gifts list\n   */\n  async function getMailGifts(username) {\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/gifts/${username}`, {\n        headers\n      });\n      if (!res.ok) throw new Error('Failed to fetch gifts');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Claim a mail reward (idempotent)\n   * Phase 3.24: Returns canonical receipt + emits telemetry\n   */\n  async function claimMailReward(username, rewardId) {\n    // Emit submission event\n    (0, _telemetryEvents.track)(_telemetryEvents.Events.MAIL_CLAIM_SUBMITTED, {\n      source: 'mail_reward_claim',\n      sourceId: rewardId\n    });\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/rewards/${username}/${rewardId}/claim`, {\n        method: 'POST',\n        headers\n      });\n      if (!res.ok) {\n        (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ERROR, {\n          source: 'mail_reward_claim',\n          sourceId: rewardId,\n          status: res.status\n        });\n        throw new Error('Failed to claim reward');\n      }\n      const receipt = await res.json();\n\n      // Phase 3.24: Validate receipt shape\n      if ((0, _typesReceipt.isValidReceipt)(receipt)) {\n        // Emit receipt received\n        (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_RECEIPT_RECEIVED, {\n          source: receipt.source,\n          sourceId: receipt.sourceId,\n          itemCount: receipt.items.length\n        });\n\n        // Emit success/already claimed\n        if (receipt.alreadyClaimed) {\n          (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ALREADY_CLAIMED, {\n            source: receipt.source,\n            sourceId: receipt.sourceId\n          });\n        } else {\n          (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_SUCCESS, {\n            source: receipt.source,\n            sourceId: receipt.sourceId,\n            itemCount: receipt.items.length\n          });\n        }\n        return receipt;\n      }\n\n      // Legacy fallback: convert old response to canonical receipt\n      console.warn('[claimMailReward] Legacy response detected, converting to receipt');\n      const legacyReceipt = {\n        source: 'mail_reward_claim',\n        sourceId: rewardId,\n        items: [],\n        balances: {\n          gold: 0,\n          coins: 0,\n          gems: 0,\n          divine_gems: 0,\n          crystals: 0,\n          stamina: 0,\n          divine_essence: 0,\n          soul_dust: 0,\n          skill_essence: 0,\n          enhancement_stones: 0,\n          hero_shards: 0,\n          rune_essence: 0\n        },\n        alreadyClaimed: receipt.alreadyClaimed ?? false,\n        message: receipt.message\n      };\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_RECEIPT_RECEIVED, {\n        source: legacyReceipt.source,\n        sourceId: legacyReceipt.sourceId,\n        legacy: true\n      });\n      return legacyReceipt;\n    } catch (error) {\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ERROR, {\n        source: 'mail_reward_claim',\n        sourceId: rewardId,\n        error: String(error)\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Claim a mail gift (idempotent)\n   * Phase 3.24: Returns canonical receipt + emits telemetry\n   */\n  async function claimMailGift(username, giftId) {\n    // Emit submission event\n    (0, _telemetryEvents.track)(_telemetryEvents.Events.MAIL_CLAIM_SUBMITTED, {\n      source: 'mail_gift_claim',\n      sourceId: giftId\n    });\n    try {\n      const headers = await getAuthHeaders();\n      const res = await fetch(`${API_BASE}/api/mail/gifts/${username}/${giftId}/claim`, {\n        method: 'POST',\n        headers\n      });\n      if (!res.ok) {\n        (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ERROR, {\n          source: 'mail_gift_claim',\n          sourceId: giftId,\n          status: res.status\n        });\n        throw new Error('Failed to claim gift');\n      }\n      const receipt = await res.json();\n\n      // Phase 3.24: Validate receipt shape\n      if ((0, _typesReceipt.isValidReceipt)(receipt)) {\n        // Emit receipt received\n        (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_RECEIPT_RECEIVED, {\n          source: receipt.source,\n          sourceId: receipt.sourceId,\n          itemCount: receipt.items.length\n        });\n\n        // Emit success/already claimed\n        if (receipt.alreadyClaimed) {\n          (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ALREADY_CLAIMED, {\n            source: receipt.source,\n            sourceId: receipt.sourceId\n          });\n        } else {\n          (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_SUCCESS, {\n            source: receipt.source,\n            sourceId: receipt.sourceId,\n            itemCount: receipt.items.length\n          });\n        }\n        return receipt;\n      }\n\n      // Legacy fallback: convert old response to canonical receipt\n      console.warn('[claimMailGift] Legacy response detected, converting to receipt');\n      const legacyReceipt = {\n        source: 'mail_gift_claim',\n        sourceId: giftId,\n        items: [],\n        balances: {\n          gold: 0,\n          coins: 0,\n          gems: 0,\n          divine_gems: 0,\n          crystals: 0,\n          stamina: 0,\n          divine_essence: 0,\n          soul_dust: 0,\n          skill_essence: 0,\n          enhancement_stones: 0,\n          hero_shards: 0,\n          rune_essence: 0\n        },\n        alreadyClaimed: receipt.alreadyClaimed ?? false,\n        message: receipt.message\n      };\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_RECEIPT_RECEIVED, {\n        source: legacyReceipt.source,\n        sourceId: legacyReceipt.sourceId,\n        legacy: true\n      });\n      return legacyReceipt;\n    } catch (error) {\n      (0, _telemetryEvents.track)(_telemetryEvents.Events.REWARD_CLAIM_ERROR, {\n        source: 'mail_gift_claim',\n        sourceId: giftId,\n        error: String(error)\n      });\n      throw error;\n    }\n  }\n});","lineCount":297,"map":[[7,2,34,0,"exports"],[7,9,34,0],[7,10,34,0,"getMailSummary"],[7,24,34,0],[7,27,34,0,"getMailSummary"],[7,41,34,0],[8,2,57,0,"exports"],[8,9,57,0],[8,10,57,0,"getMailRewards"],[8,24,57,0],[8,27,57,0,"getMailRewards"],[8,41,57,0],[9,2,78,0,"exports"],[9,9,78,0],[9,10,78,0,"getMailMessages"],[9,25,78,0],[9,28,78,0,"getMailMessages"],[9,43,78,0],[10,2,98,0,"exports"],[10,9,98,0],[10,10,98,0,"getMailGifts"],[10,22,98,0],[10,25,98,0,"getMailGifts"],[10,37,98,0],[11,2,119,0,"exports"],[11,9,119,0],[11,10,119,0,"claimMailReward"],[11,25,119,0],[11,28,119,0,"claimMailReward"],[11,43,119,0],[12,2,206,0,"exports"],[12,9,206,0],[12,10,206,0,"claimMailGift"],[12,23,206,0],[12,26,206,0,"claimMailGift"],[12,39,206,0],[13,2,287,1],[13,6,287,1,"_expoVirtualEnv"],[13,21,287,1],[13,24,287,1,"require"],[13,31,287,1],[13,32,287,1,"_dependencyMap"],[13,46,287,1],[14,2,10,0],[14,6,10,0,"_authStorage"],[14,18,10,0],[14,21,10,0,"require"],[14,28,10,0],[14,29,10,0,"_dependencyMap"],[14,43,10,0],[15,2,11,0],[15,6,11,0,"_typesReceipt"],[15,19,11,0],[15,22,11,0,"require"],[15,29,11,0],[15,30,11,0,"_dependencyMap"],[15,44,11,0],[16,2,16,0],[16,6,16,0,"_telemetryEvents"],[16,22,16,0],[16,25,16,0,"require"],[16,32,16,0],[16,33,16,0,"_dependencyMap"],[16,47,16,0],[17,2,1,0],[18,2,2,0],[19,2,3,0],[20,2,4,0],[21,2,5,0],[22,2,6,0],[23,2,7,0],[24,2,8,0],[26,2,18,0],[26,8,18,6,"API_BASE"],[26,16,18,14],[26,19,18,17,"_expoVirtualEnv"],[26,34,18,17],[26,35,18,17,"env"],[26,38,18,17],[26,39,18,17,"EXPO_PUBLIC_API_URL"],[26,58,18,17],[26,62,18,52],[26,64,18,54],[28,2,20,0],[29,0,21,0],[30,0,22,0],[31,2,23,0],[31,17,23,15,"getAuthHeaders"],[31,31,23,29,"getAuthHeaders"],[31,32,23,29],[31,34,23,65],[32,4,24,2],[32,10,24,8,"token"],[32,15,24,13],[32,18,24,16],[32,24,24,22],[32,28,24,22,"loadAuthToken"],[32,40,24,35],[32,41,24,35,"loadAuthToken"],[32,54,24,35],[32,56,24,36],[32,57,24,37],[33,4,25,2],[33,8,25,6,"token"],[33,13,25,11],[33,15,25,13],[34,6,26,4],[34,13,26,11],[35,8,26,13,"Authorization"],[35,21,26,26],[35,23,26,28],[35,33,26,38,"token"],[35,38,26,43],[36,6,26,46],[36,7,26,47],[37,4,27,2],[38,4,28,2],[38,11,28,9],[38,12,28,10],[38,13,28,11],[39,2,29,0],[41,2,31,0],[42,0,32,0],[43,0,33,0],[44,2,34,7],[44,17,34,22,"getMailSummary"],[44,31,34,36,"getMailSummary"],[44,32,34,37,"username"],[44,40,34,53],[44,42,38,3],[45,4,39,2],[45,8,39,6],[46,6,40,4],[46,12,40,10,"headers"],[46,19,40,17],[46,22,40,20],[46,28,40,26,"getAuthHeaders"],[46,42,40,40],[46,43,40,41],[46,44,40,42],[47,6,41,4],[48,6,42,4],[48,12,42,10,"res"],[48,15,42,13],[48,18,42,16],[48,24,42,22,"fetch"],[48,29,42,27],[48,30,42,28],[48,33,42,31,"API_BASE"],[48,41,42,39],[48,62,42,60,"username"],[48,70,42,68],[48,72,42,70],[48,74,42,72],[49,8,42,74,"headers"],[50,6,42,82],[50,7,42,83],[50,8,42,84],[51,6,43,4],[51,10,43,8,"res"],[51,13,43,11],[51,14,43,12,"status"],[51,20,43,18],[51,25,43,23],[51,28,43,26],[51,30,43,28],[52,8,44,6],[53,8,45,6],[53,15,45,13],[54,10,45,15,"rewardsAvailable"],[54,26,45,31],[54,28,45,33],[54,29,45,34],[55,10,45,36,"unreadMessages"],[55,24,45,50],[55,26,45,52],[55,27,45,53],[56,10,45,55,"giftsAvailable"],[56,24,45,69],[56,26,45,71],[57,8,45,73],[57,9,45,74],[58,6,46,4],[59,6,47,4],[59,10,47,8],[59,11,47,9,"res"],[59,14,47,12],[59,15,47,13,"ok"],[59,17,47,15],[59,19,47,17],[59,25,47,23],[59,29,47,27,"Error"],[59,34,47,32],[59,35,47,33],[59,65,47,63],[59,66,47,64],[60,6,48,4],[60,13,48,11],[60,19,48,17,"res"],[60,22,48,20],[60,23,48,21,"json"],[60,27,48,25],[60,28,48,26],[60,29,48,27],[61,4,49,2],[61,5,49,3],[61,6,49,4],[61,12,49,10],[62,6,50,4],[62,13,50,11],[63,8,50,13,"rewardsAvailable"],[63,24,50,29],[63,26,50,31],[63,27,50,32],[64,8,50,34,"unreadMessages"],[64,22,50,48],[64,24,50,50],[64,25,50,51],[65,8,50,53,"giftsAvailable"],[65,22,50,67],[65,24,50,69],[66,6,50,71],[66,7,50,72],[67,4,51,2],[68,2,52,0],[70,2,54,0],[71,0,55,0],[72,0,56,0],[73,2,57,7],[73,17,57,22,"getMailRewards"],[73,31,57,36,"getMailRewards"],[73,32,57,37,"username"],[73,40,57,53],[73,42,64,4],[74,4,65,2],[74,8,65,6],[75,6,66,4],[75,12,66,10,"headers"],[75,19,66,17],[75,22,66,20],[75,28,66,26,"getAuthHeaders"],[75,42,66,40],[75,43,66,41],[75,44,66,42],[76,6,67,4],[76,12,67,10,"res"],[76,15,67,13],[76,18,67,16],[76,24,67,22,"fetch"],[76,29,67,27],[76,30,67,28],[76,33,67,31,"API_BASE"],[76,41,67,39],[76,62,67,60,"username"],[76,70,67,68],[76,72,67,70],[76,74,67,72],[77,8,67,74,"headers"],[78,6,67,82],[78,7,67,83],[78,8,67,84],[79,6,68,4],[79,10,68,8],[79,11,68,9,"res"],[79,14,68,12],[79,15,68,13,"ok"],[79,17,68,15],[79,19,68,17],[79,25,68,23],[79,29,68,27,"Error"],[79,34,68,32],[79,35,68,33],[79,60,68,58],[79,61,68,59],[80,6,69,4],[80,13,69,11],[80,19,69,17,"res"],[80,22,69,20],[80,23,69,21,"json"],[80,27,69,25],[80,28,69,26],[80,29,69,27],[81,4,70,2],[81,5,70,3],[81,6,70,4],[81,12,70,10],[82,6,71,4],[82,13,71,11],[82,15,71,13],[83,4,72,2],[84,2,73,0],[86,2,75,0],[87,0,76,0],[88,0,77,0],[89,2,78,7],[89,17,78,22,"getMailMessages"],[89,32,78,37,"getMailMessages"],[89,33,78,38,"username"],[89,41,78,54],[89,43,84,4],[90,4,85,2],[90,8,85,6],[91,6,86,4],[91,12,86,10,"headers"],[91,19,86,17],[91,22,86,20],[91,28,86,26,"getAuthHeaders"],[91,42,86,40],[91,43,86,41],[91,44,86,42],[92,6,87,4],[92,12,87,10,"res"],[92,15,87,13],[92,18,87,16],[92,24,87,22,"fetch"],[92,29,87,27],[92,30,87,28],[92,33,87,31,"API_BASE"],[92,41,87,39],[92,63,87,61,"username"],[92,71,87,69],[92,73,87,71],[92,75,87,73],[93,8,87,75,"headers"],[94,6,87,83],[94,7,87,84],[94,8,87,85],[95,6,88,4],[95,10,88,8],[95,11,88,9,"res"],[95,14,88,12],[95,15,88,13,"ok"],[95,17,88,15],[95,19,88,17],[95,25,88,23],[95,29,88,27,"Error"],[95,34,88,32],[95,35,88,33],[95,61,88,59],[95,62,88,60],[96,6,89,4],[96,13,89,11],[96,19,89,17,"res"],[96,22,89,20],[96,23,89,21,"json"],[96,27,89,25],[96,28,89,26],[96,29,89,27],[97,4,90,2],[97,5,90,3],[97,6,90,4],[97,12,90,10],[98,6,91,4],[98,13,91,11],[98,15,91,13],[99,4,92,2],[100,2,93,0],[102,2,95,0],[103,0,96,0],[104,0,97,0],[105,2,98,7],[105,17,98,22,"getMailGifts"],[105,29,98,34,"getMailGifts"],[105,30,98,35,"username"],[105,38,98,51],[105,40,104,4],[106,4,105,2],[106,8,105,6],[107,6,106,4],[107,12,106,10,"headers"],[107,19,106,17],[107,22,106,20],[107,28,106,26,"getAuthHeaders"],[107,42,106,40],[107,43,106,41],[107,44,106,42],[108,6,107,4],[108,12,107,10,"res"],[108,15,107,13],[108,18,107,16],[108,24,107,22,"fetch"],[108,29,107,27],[108,30,107,28],[108,33,107,31,"API_BASE"],[108,41,107,39],[108,60,107,58,"username"],[108,68,107,66],[108,70,107,68],[108,72,107,70],[109,8,107,72,"headers"],[110,6,107,80],[110,7,107,81],[110,8,107,82],[111,6,108,4],[111,10,108,8],[111,11,108,9,"res"],[111,14,108,12],[111,15,108,13,"ok"],[111,17,108,15],[111,19,108,17],[111,25,108,23],[111,29,108,27,"Error"],[111,34,108,32],[111,35,108,33],[111,58,108,56],[111,59,108,57],[112,6,109,4],[112,13,109,11],[112,19,109,17,"res"],[112,22,109,20],[112,23,109,21,"json"],[112,27,109,25],[112,28,109,26],[112,29,109,27],[113,4,110,2],[113,5,110,3],[113,6,110,4],[113,12,110,10],[114,6,111,4],[114,13,111,11],[114,15,111,13],[115,4,112,2],[116,2,113,0],[118,2,115,0],[119,0,116,0],[120,0,117,0],[121,0,118,0],[122,2,119,7],[122,17,119,22,"claimMailReward"],[122,32,119,37,"claimMailReward"],[122,33,119,38,"username"],[122,41,119,54],[122,43,119,56,"rewardId"],[122,51,119,72],[122,53,119,98],[123,4,120,2],[124,4,121,2],[124,8,121,2,"track"],[124,24,121,7],[124,25,121,7,"track"],[124,30,121,7],[124,32,121,8,"Events"],[124,48,121,14],[124,49,121,14,"Events"],[124,55,121,14],[124,56,121,15,"MAIL_CLAIM_SUBMITTED"],[124,76,121,35],[124,78,121,37],[125,6,122,4,"source"],[125,12,122,10],[125,14,122,12],[125,33,122,31],[126,6,123,4,"sourceId"],[126,14,123,12],[126,16,123,14,"rewardId"],[127,4,124,2],[127,5,124,3],[127,6,124,4],[128,4,126,2],[128,8,126,6],[129,6,127,4],[129,12,127,10,"headers"],[129,19,127,17],[129,22,127,20],[129,28,127,26,"getAuthHeaders"],[129,42,127,40],[129,43,127,41],[129,44,127,42],[130,6,128,4],[130,12,128,10,"res"],[130,15,128,13],[130,18,128,16],[130,24,128,22,"fetch"],[130,29,128,27],[130,30,128,28],[130,33,128,31,"API_BASE"],[130,41,128,39],[130,62,128,60,"username"],[130,70,128,68],[130,74,128,72,"rewardId"],[130,82,128,80],[130,90,128,88],[130,92,128,90],[131,8,129,6,"method"],[131,14,129,12],[131,16,129,14],[131,22,129,20],[132,8,130,6,"headers"],[133,6,131,4],[133,7,131,5],[133,8,131,6],[134,6,133,4],[134,10,133,8],[134,11,133,9,"res"],[134,14,133,12],[134,15,133,13,"ok"],[134,17,133,15],[134,19,133,17],[135,8,134,6],[135,12,134,6,"track"],[135,28,134,11],[135,29,134,11,"track"],[135,34,134,11],[135,36,134,12,"Events"],[135,52,134,18],[135,53,134,18,"Events"],[135,59,134,18],[135,60,134,19,"REWARD_CLAIM_ERROR"],[135,78,134,37],[135,80,134,39],[136,10,135,8,"source"],[136,16,135,14],[136,18,135,16],[136,37,135,35],[137,10,136,8,"sourceId"],[137,18,136,16],[137,20,136,18,"rewardId"],[137,28,136,26],[138,10,137,8,"status"],[138,16,137,14],[138,18,137,16,"res"],[138,21,137,19],[138,22,137,20,"status"],[139,8,138,6],[139,9,138,7],[139,10,138,8],[140,8,139,6],[140,14,139,12],[140,18,139,16,"Error"],[140,23,139,21],[140,24,139,22],[140,48,139,46],[140,49,139,47],[141,6,140,4],[142,6,142,4],[142,12,142,10,"receipt"],[142,19,142,17],[142,22,142,20],[142,28,142,26,"res"],[142,31,142,29],[142,32,142,30,"json"],[142,36,142,34],[142,37,142,35],[142,38,142,36],[144,6,144,4],[145,6,145,4],[145,10,145,8],[145,14,145,8,"isValidReceipt"],[145,27,145,22],[145,28,145,22,"isValidReceipt"],[145,42,145,22],[145,44,145,23,"receipt"],[145,51,145,30],[145,52,145,31],[145,54,145,33],[146,8,146,6],[147,8,147,6],[147,12,147,6,"track"],[147,28,147,11],[147,29,147,11,"track"],[147,34,147,11],[147,36,147,12,"Events"],[147,52,147,18],[147,53,147,18,"Events"],[147,59,147,18],[147,60,147,19,"REWARD_RECEIPT_RECEIVED"],[147,83,147,42],[147,85,147,44],[148,10,148,8,"source"],[148,16,148,14],[148,18,148,16,"receipt"],[148,25,148,23],[148,26,148,24,"source"],[148,32,148,30],[149,10,149,8,"sourceId"],[149,18,149,16],[149,20,149,18,"receipt"],[149,27,149,25],[149,28,149,26,"sourceId"],[149,36,149,34],[150,10,150,8,"itemCount"],[150,19,150,17],[150,21,150,19,"receipt"],[150,28,150,26],[150,29,150,27,"items"],[150,34,150,32],[150,35,150,33,"length"],[151,8,151,6],[151,9,151,7],[151,10,151,8],[153,8,153,6],[154,8,154,6],[154,12,154,10,"receipt"],[154,19,154,17],[154,20,154,18,"alreadyClaimed"],[154,34,154,32],[154,36,154,34],[155,10,155,8],[155,14,155,8,"track"],[155,30,155,13],[155,31,155,13,"track"],[155,36,155,13],[155,38,155,14,"Events"],[155,54,155,20],[155,55,155,20,"Events"],[155,61,155,20],[155,62,155,21,"REWARD_CLAIM_ALREADY_CLAIMED"],[155,90,155,49],[155,92,155,51],[156,12,156,10,"source"],[156,18,156,16],[156,20,156,18,"receipt"],[156,27,156,25],[156,28,156,26,"source"],[156,34,156,32],[157,12,157,10,"sourceId"],[157,20,157,18],[157,22,157,20,"receipt"],[157,29,157,27],[157,30,157,28,"sourceId"],[158,10,158,8],[158,11,158,9],[158,12,158,10],[159,8,159,6],[159,9,159,7],[159,15,159,13],[160,10,160,8],[160,14,160,8,"track"],[160,30,160,13],[160,31,160,13,"track"],[160,36,160,13],[160,38,160,14,"Events"],[160,54,160,20],[160,55,160,20,"Events"],[160,61,160,20],[160,62,160,21,"REWARD_CLAIM_SUCCESS"],[160,82,160,41],[160,84,160,43],[161,12,161,10,"source"],[161,18,161,16],[161,20,161,18,"receipt"],[161,27,161,25],[161,28,161,26,"source"],[161,34,161,32],[162,12,162,10,"sourceId"],[162,20,162,18],[162,22,162,20,"receipt"],[162,29,162,27],[162,30,162,28,"sourceId"],[162,38,162,36],[163,12,163,10,"itemCount"],[163,21,163,19],[163,23,163,21,"receipt"],[163,30,163,28],[163,31,163,29,"items"],[163,36,163,34],[163,37,163,35,"length"],[164,10,164,8],[164,11,164,9],[164,12,164,10],[165,8,165,6],[166,8,167,6],[166,15,167,13,"receipt"],[166,22,167,20],[167,6,168,4],[169,6,170,4],[170,6,171,4,"console"],[170,13,171,11],[170,14,171,12,"warn"],[170,18,171,16],[170,19,171,17],[170,86,171,84],[170,87,171,85],[171,6,172,4],[171,12,172,10,"legacyReceipt"],[171,25,172,38],[171,28,172,41],[172,8,173,6,"source"],[172,14,173,12],[172,16,173,14],[172,35,173,33],[173,8,174,6,"sourceId"],[173,16,174,14],[173,18,174,16,"rewardId"],[173,26,174,24],[174,8,175,6,"items"],[174,13,175,11],[174,15,175,13],[174,17,175,15],[175,8,176,6,"balances"],[175,16,176,14],[175,18,176,16],[176,10,177,8,"gold"],[176,14,177,12],[176,16,177,14],[176,17,177,15],[177,10,177,17,"coins"],[177,15,177,22],[177,17,177,24],[177,18,177,25],[178,10,177,27,"gems"],[178,14,177,31],[178,16,177,33],[178,17,177,34],[179,10,177,36,"divine_gems"],[179,21,177,47],[179,23,177,49],[179,24,177,50],[180,10,177,52,"crystals"],[180,18,177,60],[180,20,177,62],[180,21,177,63],[181,10,178,8,"stamina"],[181,17,178,15],[181,19,178,17],[181,20,178,18],[182,10,178,20,"divine_essence"],[182,24,178,34],[182,26,178,36],[182,27,178,37],[183,10,178,39,"soul_dust"],[183,19,178,48],[183,21,178,50],[183,22,178,51],[184,10,178,53,"skill_essence"],[184,23,178,66],[184,25,178,68],[184,26,178,69],[185,10,179,8,"enhancement_stones"],[185,28,179,26],[185,30,179,28],[185,31,179,29],[186,10,179,31,"hero_shards"],[186,21,179,42],[186,23,179,44],[186,24,179,45],[187,10,179,47,"rune_essence"],[187,22,179,59],[187,24,179,61],[188,8,180,6],[188,9,180,7],[189,8,181,6,"alreadyClaimed"],[189,22,181,20],[189,24,181,22,"receipt"],[189,31,181,29],[189,32,181,30,"alreadyClaimed"],[189,46,181,44],[189,50,181,48],[189,55,181,53],[190,8,182,6,"message"],[190,15,182,13],[190,17,182,15,"receipt"],[190,24,182,22],[190,25,182,23,"message"],[191,6,183,4],[191,7,183,5],[192,6,185,4],[192,10,185,4,"track"],[192,26,185,9],[192,27,185,9,"track"],[192,32,185,9],[192,34,185,10,"Events"],[192,50,185,16],[192,51,185,16,"Events"],[192,57,185,16],[192,58,185,17,"REWARD_RECEIPT_RECEIVED"],[192,81,185,40],[192,83,185,42],[193,8,186,6,"source"],[193,14,186,12],[193,16,186,14,"legacyReceipt"],[193,29,186,27],[193,30,186,28,"source"],[193,36,186,34],[194,8,187,6,"sourceId"],[194,16,187,14],[194,18,187,16,"legacyReceipt"],[194,31,187,29],[194,32,187,30,"sourceId"],[194,40,187,38],[195,8,188,6,"legacy"],[195,14,188,12],[195,16,188,14],[196,6,189,4],[196,7,189,5],[196,8,189,6],[197,6,191,4],[197,13,191,11,"legacyReceipt"],[197,26,191,24],[198,4,192,2],[198,5,192,3],[198,6,192,4],[198,13,192,11,"error"],[198,18,192,16],[198,20,192,18],[199,6,193,4],[199,10,193,4,"track"],[199,26,193,9],[199,27,193,9,"track"],[199,32,193,9],[199,34,193,10,"Events"],[199,50,193,16],[199,51,193,16,"Events"],[199,57,193,16],[199,58,193,17,"REWARD_CLAIM_ERROR"],[199,76,193,35],[199,78,193,37],[200,8,194,6,"source"],[200,14,194,12],[200,16,194,14],[200,35,194,33],[201,8,195,6,"sourceId"],[201,16,195,14],[201,18,195,16,"rewardId"],[201,26,195,24],[202,8,196,6,"error"],[202,13,196,11],[202,15,196,13,"String"],[202,21,196,19],[202,22,196,20,"error"],[202,27,196,25],[203,6,197,4],[203,7,197,5],[203,8,197,6],[204,6,198,4],[204,12,198,10,"error"],[204,17,198,15],[205,4,199,2],[206,2,200,0],[208,2,202,0],[209,0,203,0],[210,0,204,0],[211,0,205,0],[212,2,206,7],[212,17,206,22,"claimMailGift"],[212,30,206,35,"claimMailGift"],[212,31,206,36,"username"],[212,39,206,52],[212,41,206,54,"giftId"],[212,47,206,68],[212,49,206,94],[213,4,207,2],[214,4,208,2],[214,8,208,2,"track"],[214,24,208,7],[214,25,208,7,"track"],[214,30,208,7],[214,32,208,8,"Events"],[214,48,208,14],[214,49,208,14,"Events"],[214,55,208,14],[214,56,208,15,"MAIL_CLAIM_SUBMITTED"],[214,76,208,35],[214,78,208,37],[215,6,209,4,"source"],[215,12,209,10],[215,14,209,12],[215,31,209,29],[216,6,210,4,"sourceId"],[216,14,210,12],[216,16,210,14,"giftId"],[217,4,211,2],[217,5,211,3],[217,6,211,4],[218,4,213,2],[218,8,213,6],[219,6,214,4],[219,12,214,10,"headers"],[219,19,214,17],[219,22,214,20],[219,28,214,26,"getAuthHeaders"],[219,42,214,40],[219,43,214,41],[219,44,214,42],[220,6,215,4],[220,12,215,10,"res"],[220,15,215,13],[220,18,215,16],[220,24,215,22,"fetch"],[220,29,215,27],[220,30,215,28],[220,33,215,31,"API_BASE"],[220,41,215,39],[220,60,215,58,"username"],[220,68,215,66],[220,72,215,70,"giftId"],[220,78,215,76],[220,86,215,84],[220,88,215,86],[221,8,216,6,"method"],[221,14,216,12],[221,16,216,14],[221,22,216,20],[222,8,217,6,"headers"],[223,6,218,4],[223,7,218,5],[223,8,218,6],[224,6,220,4],[224,10,220,8],[224,11,220,9,"res"],[224,14,220,12],[224,15,220,13,"ok"],[224,17,220,15],[224,19,220,17],[225,8,221,6],[225,12,221,6,"track"],[225,28,221,11],[225,29,221,11,"track"],[225,34,221,11],[225,36,221,12,"Events"],[225,52,221,18],[225,53,221,18,"Events"],[225,59,221,18],[225,60,221,19,"REWARD_CLAIM_ERROR"],[225,78,221,37],[225,80,221,39],[226,10,222,8,"source"],[226,16,222,14],[226,18,222,16],[226,35,222,33],[227,10,223,8,"sourceId"],[227,18,223,16],[227,20,223,18,"giftId"],[227,26,223,24],[228,10,224,8,"status"],[228,16,224,14],[228,18,224,16,"res"],[228,21,224,19],[228,22,224,20,"status"],[229,8,225,6],[229,9,225,7],[229,10,225,8],[230,8,226,6],[230,14,226,12],[230,18,226,16,"Error"],[230,23,226,21],[230,24,226,22],[230,46,226,44],[230,47,226,45],[231,6,227,4],[232,6,229,4],[232,12,229,10,"receipt"],[232,19,229,17],[232,22,229,20],[232,28,229,26,"res"],[232,31,229,29],[232,32,229,30,"json"],[232,36,229,34],[232,37,229,35],[232,38,229,36],[234,6,231,4],[235,6,232,4],[235,10,232,8],[235,14,232,8,"isValidReceipt"],[235,27,232,22],[235,28,232,22,"isValidReceipt"],[235,42,232,22],[235,44,232,23,"receipt"],[235,51,232,30],[235,52,232,31],[235,54,232,33],[236,8,233,6],[237,8,234,6],[237,12,234,6,"track"],[237,28,234,11],[237,29,234,11,"track"],[237,34,234,11],[237,36,234,12,"Events"],[237,52,234,18],[237,53,234,18,"Events"],[237,59,234,18],[237,60,234,19,"REWARD_RECEIPT_RECEIVED"],[237,83,234,42],[237,85,234,44],[238,10,235,8,"source"],[238,16,235,14],[238,18,235,16,"receipt"],[238,25,235,23],[238,26,235,24,"source"],[238,32,235,30],[239,10,236,8,"sourceId"],[239,18,236,16],[239,20,236,18,"receipt"],[239,27,236,25],[239,28,236,26,"sourceId"],[239,36,236,34],[240,10,237,8,"itemCount"],[240,19,237,17],[240,21,237,19,"receipt"],[240,28,237,26],[240,29,237,27,"items"],[240,34,237,32],[240,35,237,33,"length"],[241,8,238,6],[241,9,238,7],[241,10,238,8],[243,8,240,6],[244,8,241,6],[244,12,241,10,"receipt"],[244,19,241,17],[244,20,241,18,"alreadyClaimed"],[244,34,241,32],[244,36,241,34],[245,10,242,8],[245,14,242,8,"track"],[245,30,242,13],[245,31,242,13,"track"],[245,36,242,13],[245,38,242,14,"Events"],[245,54,242,20],[245,55,242,20,"Events"],[245,61,242,20],[245,62,242,21,"REWARD_CLAIM_ALREADY_CLAIMED"],[245,90,242,49],[245,92,242,51],[246,12,243,10,"source"],[246,18,243,16],[246,20,243,18,"receipt"],[246,27,243,25],[246,28,243,26,"source"],[246,34,243,32],[247,12,244,10,"sourceId"],[247,20,244,18],[247,22,244,20,"receipt"],[247,29,244,27],[247,30,244,28,"sourceId"],[248,10,245,8],[248,11,245,9],[248,12,245,10],[249,8,246,6],[249,9,246,7],[249,15,246,13],[250,10,247,8],[250,14,247,8,"track"],[250,30,247,13],[250,31,247,13,"track"],[250,36,247,13],[250,38,247,14,"Events"],[250,54,247,20],[250,55,247,20,"Events"],[250,61,247,20],[250,62,247,21,"REWARD_CLAIM_SUCCESS"],[250,82,247,41],[250,84,247,43],[251,12,248,10,"source"],[251,18,248,16],[251,20,248,18,"receipt"],[251,27,248,25],[251,28,248,26,"source"],[251,34,248,32],[252,12,249,10,"sourceId"],[252,20,249,18],[252,22,249,20,"receipt"],[252,29,249,27],[252,30,249,28,"sourceId"],[252,38,249,36],[253,12,250,10,"itemCount"],[253,21,250,19],[253,23,250,21,"receipt"],[253,30,250,28],[253,31,250,29,"items"],[253,36,250,34],[253,37,250,35,"length"],[254,10,251,8],[254,11,251,9],[254,12,251,10],[255,8,252,6],[256,8,254,6],[256,15,254,13,"receipt"],[256,22,254,20],[257,6,255,4],[259,6,257,4],[260,6,258,4,"console"],[260,13,258,11],[260,14,258,12,"warn"],[260,18,258,16],[260,19,258,17],[260,84,258,82],[260,85,258,83],[261,6,259,4],[261,12,259,10,"legacyReceipt"],[261,25,259,38],[261,28,259,41],[262,8,260,6,"source"],[262,14,260,12],[262,16,260,14],[262,33,260,31],[263,8,261,6,"sourceId"],[263,16,261,14],[263,18,261,16,"giftId"],[263,24,261,22],[264,8,262,6,"items"],[264,13,262,11],[264,15,262,13],[264,17,262,15],[265,8,263,6,"balances"],[265,16,263,14],[265,18,263,16],[266,10,264,8,"gold"],[266,14,264,12],[266,16,264,14],[266,17,264,15],[267,10,264,17,"coins"],[267,15,264,22],[267,17,264,24],[267,18,264,25],[268,10,264,27,"gems"],[268,14,264,31],[268,16,264,33],[268,17,264,34],[269,10,264,36,"divine_gems"],[269,21,264,47],[269,23,264,49],[269,24,264,50],[270,10,264,52,"crystals"],[270,18,264,60],[270,20,264,62],[270,21,264,63],[271,10,265,8,"stamina"],[271,17,265,15],[271,19,265,17],[271,20,265,18],[272,10,265,20,"divine_essence"],[272,24,265,34],[272,26,265,36],[272,27,265,37],[273,10,265,39,"soul_dust"],[273,19,265,48],[273,21,265,50],[273,22,265,51],[274,10,265,53,"skill_essence"],[274,23,265,66],[274,25,265,68],[274,26,265,69],[275,10,266,8,"enhancement_stones"],[275,28,266,26],[275,30,266,28],[275,31,266,29],[276,10,266,31,"hero_shards"],[276,21,266,42],[276,23,266,44],[276,24,266,45],[277,10,266,47,"rune_essence"],[277,22,266,59],[277,24,266,61],[278,8,267,6],[278,9,267,7],[279,8,268,6,"alreadyClaimed"],[279,22,268,20],[279,24,268,22,"receipt"],[279,31,268,29],[279,32,268,30,"alreadyClaimed"],[279,46,268,44],[279,50,268,48],[279,55,268,53],[280,8,269,6,"message"],[280,15,269,13],[280,17,269,15,"receipt"],[280,24,269,22],[280,25,269,23,"message"],[281,6,270,4],[281,7,270,5],[282,6,272,4],[282,10,272,4,"track"],[282,26,272,9],[282,27,272,9,"track"],[282,32,272,9],[282,34,272,10,"Events"],[282,50,272,16],[282,51,272,16,"Events"],[282,57,272,16],[282,58,272,17,"REWARD_RECEIPT_RECEIVED"],[282,81,272,40],[282,83,272,42],[283,8,273,6,"source"],[283,14,273,12],[283,16,273,14,"legacyReceipt"],[283,29,273,27],[283,30,273,28,"source"],[283,36,273,34],[284,8,274,6,"sourceId"],[284,16,274,14],[284,18,274,16,"legacyReceipt"],[284,31,274,29],[284,32,274,30,"sourceId"],[284,40,274,38],[285,8,275,6,"legacy"],[285,14,275,12],[285,16,275,14],[286,6,276,4],[286,7,276,5],[286,8,276,6],[287,6,278,4],[287,13,278,11,"legacyReceipt"],[287,26,278,24],[288,4,279,2],[288,5,279,3],[288,6,279,4],[288,13,279,11,"error"],[288,18,279,16],[288,20,279,18],[289,6,280,4],[289,10,280,4,"track"],[289,26,280,9],[289,27,280,9,"track"],[289,32,280,9],[289,34,280,10,"Events"],[289,50,280,16],[289,51,280,16,"Events"],[289,57,280,16],[289,58,280,17,"REWARD_CLAIM_ERROR"],[289,76,280,35],[289,78,280,37],[290,8,281,6,"source"],[290,14,281,12],[290,16,281,14],[290,33,281,31],[291,8,282,6,"sourceId"],[291,16,282,14],[291,18,282,16,"giftId"],[291,24,282,22],[292,8,283,6,"error"],[292,13,283,11],[292,15,283,13,"String"],[292,21,283,19],[292,22,283,20,"error"],[292,27,283,25],[293,6,284,4],[293,7,284,5],[293,8,284,6],[294,6,285,4],[294,12,285,10,"error"],[294,17,285,15],[295,4,286,2],[296,2,287,0],[297,0,287,1],[297,3]],"functionMap":{"names":["<global>","getAuthHeaders","getMailSummary","getMailRewards","getMailMessages","getMailGifts","claimMailReward","claimMailGift"],"mappings":"AAA;ACsB;CDM;OEK;CFkB;OGK;CHgB;OIK;CJe;OKK;CLe;OMM;CNiF;OOM;CPiF"},"hasCjsExports":false},"type":"js/module"}]}