{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":169},"end":{"line":8,"column":33,"index":202}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../lib/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":203},"end":{"line":9,"column":71,"index":274}}],"key":"cGGbCGri3M695PzY+v7ylQ+Rxt0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useEntitlementStore\", {\n    enumerable: true,\n    get: function () {\n      return useEntitlementStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _libStorage = require(_dependencyMap[1], \"../lib/storage\");\n  /**\n   * Entitlement Store\n   * \n   * Manages paid feature entitlements (offline-first, cached).\n   * Future: will integrate with StoreKit/Play Billing for real purchases.\n   */\n\n  const STORAGE_KEY = '@idledevotion/entitlements/v1';\n  const useEntitlementStore = (0, _zustand.create)((set, get) => ({\n    entitlements: {},\n    isHydrated: false,\n    hydrateEntitlements: async () => {\n      try {\n        const raw = await (0, _libStorage.storageGet)(STORAGE_KEY);\n        if (!raw) {\n          set({\n            isHydrated: true\n          });\n          return;\n        }\n        const parsed = JSON.parse(raw);\n        set({\n          entitlements: parsed?.entitlements ?? {},\n          isHydrated: true\n        });\n        if (__DEV__) {\n          console.log('[entitlementStore] Hydrated:', parsed?.entitlements);\n        }\n      } catch (e) {\n        console.error('[entitlementStore] Hydration error:', e);\n        set({\n          isHydrated: true\n        });\n      }\n    },\n    hasEntitlement: k => Boolean(get().entitlements?.[k]),\n    // DEV ONLY: Grant entitlement for testing\n    grantEntitlementDevOnly: async k => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] grantEntitlementDevOnly called in production!');\n        return;\n      }\n      const next = {\n        ...(get().entitlements ?? {}),\n        [k]: true\n      };\n      set({\n        entitlements: next\n      });\n      await (0, _libStorage.storageSet)(STORAGE_KEY, JSON.stringify({\n        entitlements: next\n      }));\n      console.log('[entitlementStore] DEV: Granted', k);\n    },\n    // DEV ONLY: Revoke entitlement for testing\n    revokeEntitlementDevOnly: async k => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] revokeEntitlementDevOnly called in production!');\n        return;\n      }\n      const next = {\n        ...(get().entitlements ?? {})\n      };\n      delete next[k];\n      set({\n        entitlements: next\n      });\n      await (0, _libStorage.storageSet)(STORAGE_KEY, JSON.stringify({\n        entitlements: next\n      }));\n      console.log('[entitlementStore] DEV: Revoked', k);\n    },\n    // DEV ONLY: Clear all entitlements\n    clearAllEntitlementsDevOnly: async () => {\n      if (!__DEV__) {\n        console.warn('[entitlementStore] clearAllEntitlementsDevOnly called in production!');\n        return;\n      }\n      set({\n        entitlements: {}\n      });\n      await (0, _libStorage.storageRemove)(STORAGE_KEY);\n      console.log('[entitlementStore] DEV: Cleared all entitlements');\n    }\n  }));\n});","lineCount":100,"map":[[7,2,29,0,"Object"],[7,8,29,0],[7,9,29,0,"defineProperty"],[7,23,29,0],[7,24,29,0,"exports"],[7,31,29,0],[8,4,29,0,"enumerable"],[8,14,29,0],[9,4,29,0,"get"],[9,7,29,0],[9,18,29,0,"get"],[9,19,29,0],[10,6,29,0],[10,13,29,0,"useEntitlementStore"],[10,32,29,0],[11,4,29,0],[12,2,29,0],[13,2,8,0],[13,6,8,0,"_zustand"],[13,14,8,0],[13,17,8,0,"require"],[13,24,8,0],[13,25,8,0,"_dependencyMap"],[13,39,8,0],[14,2,9,0],[14,6,9,0,"_libStorage"],[14,17,9,0],[14,20,9,0,"require"],[14,27,9,0],[14,28,9,0,"_dependencyMap"],[14,42,9,0],[15,2,1,0],[16,0,2,0],[17,0,3,0],[18,0,4,0],[19,0,5,0],[20,0,6,0],[22,2,12,0],[22,8,12,6,"STORAGE_KEY"],[22,19,12,17],[22,22,12,20],[22,53,12,51],[23,2,29,7],[23,8,29,13,"useEntitlementStore"],[23,27,29,32],[23,30,29,35],[23,34,29,35,"create"],[23,42,29,41],[23,43,29,41,"create"],[23,49,29,41],[23,51,29,60],[23,52,29,61,"set"],[23,55,29,64],[23,57,29,66,"get"],[23,60,29,69],[23,66,29,75],[24,4,30,2,"entitlements"],[24,16,30,14],[24,18,30,16],[24,19,30,17],[24,20,30,18],[25,4,31,2,"isHydrated"],[25,14,31,12],[25,16,31,14],[25,21,31,19],[26,4,33,2,"hydrateEntitlements"],[26,23,33,21],[26,25,33,23],[26,31,33,23,"hydrateEntitlements"],[26,32,33,23],[26,37,33,35],[27,6,34,4],[27,10,34,8],[28,8,35,6],[28,14,35,12,"raw"],[28,17,35,15],[28,20,35,18],[28,26,35,24],[28,30,35,24,"storageGet"],[28,41,35,34],[28,42,35,34,"storageGet"],[28,52,35,34],[28,54,35,35,"STORAGE_KEY"],[28,65,35,46],[28,66,35,47],[29,8,36,6],[29,12,36,10],[29,13,36,11,"raw"],[29,16,36,14],[29,18,36,16],[30,10,37,8,"set"],[30,13,37,11],[30,14,37,12],[31,12,37,14,"isHydrated"],[31,22,37,24],[31,24,37,26],[32,10,37,31],[32,11,37,32],[32,12,37,33],[33,10,38,8],[34,8,39,6],[35,8,40,6],[35,14,40,12,"parsed"],[35,20,40,18],[35,23,40,21,"JSON"],[35,27,40,25],[35,28,40,26,"parse"],[35,33,40,31],[35,34,40,32,"raw"],[35,37,40,35],[35,38,40,36],[36,8,41,6,"set"],[36,11,41,9],[36,12,41,10],[37,10,41,12,"entitlements"],[37,22,41,24],[37,24,41,26,"parsed"],[37,30,41,32],[37,32,41,34,"entitlements"],[37,44,41,46],[37,48,41,50],[37,49,41,51],[37,50,41,52],[38,10,41,54,"isHydrated"],[38,20,41,64],[38,22,41,66],[39,8,41,71],[39,9,41,72],[39,10,41,73],[40,8,42,6],[40,12,42,10,"__DEV__"],[40,19,42,17],[40,21,42,19],[41,10,43,8,"console"],[41,17,43,15],[41,18,43,16,"log"],[41,21,43,19],[41,22,43,20],[41,52,43,50],[41,54,43,52,"parsed"],[41,60,43,58],[41,62,43,60,"entitlements"],[41,74,43,72],[41,75,43,73],[42,8,44,6],[43,6,45,4],[43,7,45,5],[43,8,45,6],[43,15,45,13,"e"],[43,16,45,14],[43,18,45,16],[44,8,46,6,"console"],[44,15,46,13],[44,16,46,14,"error"],[44,21,46,19],[44,22,46,20],[44,59,46,57],[44,61,46,59,"e"],[44,62,46,60],[44,63,46,61],[45,8,47,6,"set"],[45,11,47,9],[45,12,47,10],[46,10,47,12,"isHydrated"],[46,20,47,22],[46,22,47,24],[47,8,47,29],[47,9,47,30],[47,10,47,31],[48,6,48,4],[49,4,49,2],[49,5,49,3],[50,4,51,2,"hasEntitlement"],[50,18,51,16],[50,20,51,19,"k"],[50,21,51,20],[50,25,51,25,"Boolean"],[50,32,51,32],[50,33,51,33,"get"],[50,36,51,36],[50,37,51,37],[50,38,51,38],[50,39,51,39,"entitlements"],[50,51,51,51],[50,54,51,54,"k"],[50,55,51,55],[50,56,51,56],[50,57,51,57],[51,4,53,2],[52,4,54,2,"grantEntitlementDevOnly"],[52,27,54,25],[52,29,54,27],[52,35,54,34,"k"],[52,36,54,35],[52,40,54,40],[53,6,55,4],[53,10,55,8],[53,11,55,9,"__DEV__"],[53,18,55,16],[53,20,55,18],[54,8,56,6,"console"],[54,15,56,13],[54,16,56,14,"warn"],[54,20,56,18],[54,21,56,19],[54,87,56,85],[54,88,56,86],[55,8,57,6],[56,6,58,4],[57,6,59,4],[57,12,59,10,"next"],[57,16,59,14],[57,19,59,17],[58,8,59,19],[58,12,59,23,"get"],[58,15,59,26],[58,16,59,27],[58,17,59,28],[58,18,59,29,"entitlements"],[58,30,59,41],[58,34,59,45],[58,35,59,46],[58,36,59,47],[58,37,59,48],[59,8,59,50],[59,9,59,51,"k"],[59,10,59,52],[59,13,59,55],[60,6,59,60],[60,7,59,61],[61,6,60,4,"set"],[61,9,60,7],[61,10,60,8],[62,8,60,10,"entitlements"],[62,20,60,22],[62,22,60,24,"next"],[63,6,60,29],[63,7,60,30],[63,8,60,31],[64,6,61,4],[64,12,61,10],[64,16,61,10,"storageSet"],[64,27,61,20],[64,28,61,20,"storageSet"],[64,38,61,20],[64,40,61,21,"STORAGE_KEY"],[64,51,61,32],[64,53,61,34,"JSON"],[64,57,61,38],[64,58,61,39,"stringify"],[64,67,61,48],[64,68,61,49],[65,8,61,51,"entitlements"],[65,20,61,63],[65,22,61,65,"next"],[66,6,61,70],[66,7,61,71],[66,8,61,72],[66,9,61,73],[67,6,62,4,"console"],[67,13,62,11],[67,14,62,12,"log"],[67,17,62,15],[67,18,62,16],[67,51,62,49],[67,53,62,51,"k"],[67,54,62,52],[67,55,62,53],[68,4,63,2],[68,5,63,3],[69,4,65,2],[70,4,66,2,"revokeEntitlementDevOnly"],[70,28,66,26],[70,30,66,28],[70,36,66,35,"k"],[70,37,66,36],[70,41,66,41],[71,6,67,4],[71,10,67,8],[71,11,67,9,"__DEV__"],[71,18,67,16],[71,20,67,18],[72,8,68,6,"console"],[72,15,68,13],[72,16,68,14,"warn"],[72,20,68,18],[72,21,68,19],[72,88,68,86],[72,89,68,87],[73,8,69,6],[74,6,70,4],[75,6,71,4],[75,12,71,10,"next"],[75,16,71,14],[75,19,71,17],[76,8,71,19],[76,12,71,23,"get"],[76,15,71,26],[76,16,71,27],[76,17,71,28],[76,18,71,29,"entitlements"],[76,30,71,41],[76,34,71,45],[76,35,71,46],[76,36,71,47],[77,6,71,49],[77,7,71,50],[78,6,72,4],[78,13,72,11,"next"],[78,17,72,15],[78,18,72,16,"k"],[78,19,72,17],[78,20,72,18],[79,6,73,4,"set"],[79,9,73,7],[79,10,73,8],[80,8,73,10,"entitlements"],[80,20,73,22],[80,22,73,24,"next"],[81,6,73,29],[81,7,73,30],[81,8,73,31],[82,6,74,4],[82,12,74,10],[82,16,74,10,"storageSet"],[82,27,74,20],[82,28,74,20,"storageSet"],[82,38,74,20],[82,40,74,21,"STORAGE_KEY"],[82,51,74,32],[82,53,74,34,"JSON"],[82,57,74,38],[82,58,74,39,"stringify"],[82,67,74,48],[82,68,74,49],[83,8,74,51,"entitlements"],[83,20,74,63],[83,22,74,65,"next"],[84,6,74,70],[84,7,74,71],[84,8,74,72],[84,9,74,73],[85,6,75,4,"console"],[85,13,75,11],[85,14,75,12,"log"],[85,17,75,15],[85,18,75,16],[85,51,75,49],[85,53,75,51,"k"],[85,54,75,52],[85,55,75,53],[86,4,76,2],[86,5,76,3],[87,4,78,2],[88,4,79,2,"clearAllEntitlementsDevOnly"],[88,31,79,29],[88,33,79,31],[88,39,79,31,"clearAllEntitlementsDevOnly"],[88,40,79,31],[88,45,79,43],[89,6,80,4],[89,10,80,8],[89,11,80,9,"__DEV__"],[89,18,80,16],[89,20,80,18],[90,8,81,6,"console"],[90,15,81,13],[90,16,81,14,"warn"],[90,20,81,18],[90,21,81,19],[90,91,81,89],[90,92,81,90],[91,8,82,6],[92,6,83,4],[93,6,84,4,"set"],[93,9,84,7],[93,10,84,8],[94,8,84,10,"entitlements"],[94,20,84,22],[94,22,84,24],[94,23,84,25],[95,6,84,27],[95,7,84,28],[95,8,84,29],[96,6,85,4],[96,12,85,10],[96,16,85,10,"storageRemove"],[96,27,85,23],[96,28,85,23,"storageRemove"],[96,41,85,23],[96,43,85,24,"STORAGE_KEY"],[96,54,85,35],[96,55,85,36],[97,6,86,4,"console"],[97,13,86,11],[97,14,86,12,"log"],[97,17,86,15],[97,18,86,16],[97,68,86,66],[97,69,86,67],[98,4,87,2],[99,2,88,0],[99,3,88,1],[99,4,88,2],[99,5,88,3],[100,0,88,4],[100,3]],"functionMap":{"names":["<global>","create$argument_0","hydrateEntitlements","hasEntitlement","grantEntitlementDevOnly","revokeEntitlementDevOnly","clearAllEntitlementsDevOnly"],"mappings":"AAA;4DC4B;uBCI;GDgB;kBEE,uCF;2BGG;GHS;4BIG;GJU;+BKG;GLQ;EDC"},"hasCjsExports":false},"type":"js/module"}]}