{"dependencies":[{"name":"./node-stack-trace.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":23,"index":87},"end":{"line":3,"column":55,"index":119}}],"key":"7IruFZVeCsnYmkV5RjOPWnCcMEM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  const nodeStackTrace = require(_dependencyMap[0], \"./node-stack-trace.js\");\n  const STACKTRACE_FRAME_LIMIT = 50;\n  // Used to sanitize webpack (error: *) wrapped stack errors\n  const WEBPACK_ERROR_REGEXP = /\\(error: (.*)\\)/;\n  const STRIP_FRAME_REGEXP = /captureMessage|captureException/;\n\n  /**\n   * Creates a stack parser with the supplied line parsers\n   *\n   * StackFrames are returned in the correct order for Sentry Exception\n   * frames and with Sentry SDK internal frames removed from the top and bottom\n   *\n   */\n  function createStackParser(...parsers) {\n    const sortedParsers = parsers.sort((a, b) => a[0] - b[0]).map(p => p[1]);\n    return (stack, skipFirst = 0) => {\n      const frames = [];\n      const lines = stack.split('\\n');\n      for (let i = skipFirst; i < lines.length; i++) {\n        const line = lines[i];\n        // Ignore lines over 1kb as they are unlikely to be stack frames.\n        // Many of the regular expressions use backtracking which results in run time that increases exponentially with\n        // input size. Huge strings can result in hangs/Denial of Service:\n        // https://github.com/getsentry/sentry-javascript/issues/2286\n        if (line.length > 1024) {\n          continue;\n        }\n\n        // https://github.com/getsentry/sentry-javascript/issues/5459\n        // Remove webpack (error: *) wrappers\n        const cleanedLine = WEBPACK_ERROR_REGEXP.test(line) ? line.replace(WEBPACK_ERROR_REGEXP, '$1') : line;\n\n        // https://github.com/getsentry/sentry-javascript/issues/7813\n        // Skip Error: lines\n        if (cleanedLine.match(/\\S*Error: /)) {\n          continue;\n        }\n        for (const parser of sortedParsers) {\n          const frame = parser(cleanedLine);\n          if (frame) {\n            frames.push(frame);\n            break;\n          }\n        }\n        if (frames.length >= STACKTRACE_FRAME_LIMIT) {\n          break;\n        }\n      }\n      return stripSentryFramesAndReverse(frames);\n    };\n  }\n\n  /**\n   * Gets a stack parser implementation from Options.stackParser\n   * @see Options\n   *\n   * If options contains an array of line parsers, it is converted into a parser\n   */\n  function stackParserFromStackParserOptions(stackParser) {\n    if (Array.isArray(stackParser)) {\n      return createStackParser(...stackParser);\n    }\n    return stackParser;\n  }\n\n  /**\n   * Removes Sentry frames from the top and bottom of the stack if present and enforces a limit of max number of frames.\n   * Assumes stack input is ordered from top to bottom and returns the reverse representation so call site of the\n   * function that caused the crash is the last frame in the array.\n   * @hidden\n   */\n  function stripSentryFramesAndReverse(stack) {\n    if (!stack.length) {\n      return [];\n    }\n    const localStack = Array.from(stack);\n\n    // If stack starts with one of our API calls, remove it (starts, meaning it's the top of the stack - aka last call)\n    if (/sentryWrapped/.test(localStack[localStack.length - 1].function || '')) {\n      localStack.pop();\n    }\n\n    // Reversing in the middle of the procedure allows us to just pop the values off the stack\n    localStack.reverse();\n\n    // If stack ends with one of our internal API calls, remove it (ends, meaning it's the bottom of the stack - aka top-most call)\n    if (STRIP_FRAME_REGEXP.test(localStack[localStack.length - 1].function || '')) {\n      localStack.pop();\n\n      // When using synthetic events, we will have a 2 levels deep stack, as `new Error('Sentry syntheticException')`\n      // is produced within the hub itself, making it:\n      //\n      //   Sentry.captureException()\n      //   getCurrentHub().captureException()\n      //\n      // instead of just the top `Sentry` call itself.\n      // This forces us to possibly strip an additional frame in the exact same was as above.\n      if (STRIP_FRAME_REGEXP.test(localStack[localStack.length - 1].function || '')) {\n        localStack.pop();\n      }\n    }\n    return localStack.slice(0, STACKTRACE_FRAME_LIMIT).map(frame => ({\n      ...frame,\n      filename: frame.filename || localStack[localStack.length - 1].filename,\n      function: frame.function || '?'\n    }));\n  }\n  const defaultFunctionName = '<anonymous>';\n\n  /**\n   * Safely extract function name from itself\n   */\n  function getFunctionName(fn) {\n    try {\n      if (!fn || typeof fn !== 'function') {\n        return defaultFunctionName;\n      }\n      return fn.name || defaultFunctionName;\n    } catch (e) {\n      // Just accessing custom props in some Selenium environments\n      // can cause a \"Permission denied\" exception (see raven-js#495).\n      return defaultFunctionName;\n    }\n  }\n\n  /**\n   * Node.js stack line parser\n   *\n   * This is in @sentry/utils so it can be used from the Electron SDK in the browser for when `nodeIntegration == true`.\n   * This allows it to be used without referencing or importing any node specific code which causes bundlers to complain\n   */\n  function nodeStackLineParser(getModule) {\n    return [90, nodeStackTrace.node(getModule)];\n  }\n  exports.filenameIsInApp = nodeStackTrace.filenameIsInApp;\n  exports.createStackParser = createStackParser;\n  exports.getFunctionName = getFunctionName;\n  exports.nodeStackLineParser = nodeStackLineParser;\n  exports.stackParserFromStackParserOptions = stackParserFromStackParserOptions;\n  exports.stripSentryFramesAndReverse = stripSentryFramesAndReverse;\n});","lineCount":145,"map":[[2,2,1,0,"Object"],[2,8,1,6],[2,9,1,7,"defineProperty"],[2,23,1,21],[2,24,1,22,"exports"],[2,31,1,29],[2,33,1,31],[2,45,1,43],[2,47,1,45],[3,4,1,47,"value"],[3,9,1,52],[3,11,1,54],[4,2,1,59],[4,3,1,60],[4,4,1,61],[5,2,3,0],[5,8,3,6,"nodeStackTrace"],[5,22,3,20],[5,25,3,23,"require"],[5,32,3,30],[5,33,3,30,"_dependencyMap"],[5,47,3,30],[5,75,3,54],[5,76,3,55],[6,2,5,0],[6,8,5,6,"STACKTRACE_FRAME_LIMIT"],[6,30,5,28],[6,33,5,31],[6,35,5,33],[7,2,6,0],[8,2,7,0],[8,8,7,6,"WEBPACK_ERROR_REGEXP"],[8,28,7,26],[8,31,7,29],[8,48,7,46],[9,2,8,0],[9,8,8,6,"STRIP_FRAME_REGEXP"],[9,26,8,24],[9,29,8,27],[9,62,8,60],[11,2,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[18,2,17,0],[18,11,17,9,"createStackParser"],[18,28,17,26,"createStackParser"],[18,29,17,27],[18,32,17,30,"parsers"],[18,39,17,37],[18,41,17,39],[19,4,18,2],[19,10,18,8,"sortedParsers"],[19,23,18,21],[19,26,18,24,"parsers"],[19,33,18,31],[19,34,18,32,"sort"],[19,38,18,36],[19,39,18,37],[19,40,18,38,"a"],[19,41,18,39],[19,43,18,41,"b"],[19,44,18,42],[19,49,18,47,"a"],[19,50,18,48],[19,51,18,49],[19,52,18,50],[19,53,18,51],[19,56,18,54,"b"],[19,57,18,55],[19,58,18,56],[19,59,18,57],[19,60,18,58],[19,61,18,59],[19,62,18,60,"map"],[19,65,18,63],[19,66,18,64,"p"],[19,67,18,65],[19,71,18,69,"p"],[19,72,18,70],[19,73,18,71],[19,74,18,72],[19,75,18,73],[19,76,18,74],[20,4,20,2],[20,11,20,9],[20,12,20,10,"stack"],[20,17,20,15],[20,19,20,17,"skipFirst"],[20,28,20,26],[20,31,20,29],[20,32,20,30],[20,37,20,35],[21,6,21,4],[21,12,21,10,"frames"],[21,18,21,16],[21,21,21,19],[21,23,21,21],[22,6,22,4],[22,12,22,10,"lines"],[22,17,22,15],[22,20,22,18,"stack"],[22,25,22,23],[22,26,22,24,"split"],[22,31,22,29],[22,32,22,30],[22,36,22,34],[22,37,22,35],[23,6,24,4],[23,11,24,9],[23,15,24,13,"i"],[23,16,24,14],[23,19,24,17,"skipFirst"],[23,28,24,26],[23,30,24,28,"i"],[23,31,24,29],[23,34,24,32,"lines"],[23,39,24,37],[23,40,24,38,"length"],[23,46,24,44],[23,48,24,46,"i"],[23,49,24,47],[23,51,24,49],[23,53,24,51],[24,8,25,6],[24,14,25,12,"line"],[24,18,25,16],[24,21,25,19,"lines"],[24,26,25,24],[24,27,25,25,"i"],[24,28,25,26],[24,29,25,27],[25,8,26,6],[26,8,27,6],[27,8,28,6],[28,8,29,6],[29,8,30,6],[29,12,30,10,"line"],[29,16,30,14],[29,17,30,15,"length"],[29,23,30,21],[29,26,30,24],[29,30,30,28],[29,32,30,30],[30,10,31,8],[31,8,32,6],[33,8,34,6],[34,8,35,6],[35,8,36,6],[35,14,36,12,"cleanedLine"],[35,25,36,23],[35,28,36,26,"WEBPACK_ERROR_REGEXP"],[35,48,36,46],[35,49,36,47,"test"],[35,53,36,51],[35,54,36,52,"line"],[35,58,36,56],[35,59,36,57],[35,62,36,60,"line"],[35,66,36,64],[35,67,36,65,"replace"],[35,74,36,72],[35,75,36,73,"WEBPACK_ERROR_REGEXP"],[35,95,36,93],[35,97,36,95],[35,101,36,99],[35,102,36,100],[35,105,36,103,"line"],[35,109,36,107],[37,8,38,6],[38,8,39,6],[39,8,40,6],[39,12,40,10,"cleanedLine"],[39,23,40,21],[39,24,40,22,"match"],[39,29,40,27],[39,30,40,28],[39,42,40,40],[39,43,40,41],[39,45,40,43],[40,10,41,8],[41,8,42,6],[42,8,44,6],[42,13,44,11],[42,19,44,17,"parser"],[42,25,44,23],[42,29,44,27,"sortedParsers"],[42,42,44,40],[42,44,44,42],[43,10,45,8],[43,16,45,14,"frame"],[43,21,45,19],[43,24,45,22,"parser"],[43,30,45,28],[43,31,45,29,"cleanedLine"],[43,42,45,40],[43,43,45,41],[44,10,47,8],[44,14,47,12,"frame"],[44,19,47,17],[44,21,47,19],[45,12,48,10,"frames"],[45,18,48,16],[45,19,48,17,"push"],[45,23,48,21],[45,24,48,22,"frame"],[45,29,48,27],[45,30,48,28],[46,12,49,10],[47,10,50,8],[48,8,51,6],[49,8,53,6],[49,12,53,10,"frames"],[49,18,53,16],[49,19,53,17,"length"],[49,25,53,23],[49,29,53,27,"STACKTRACE_FRAME_LIMIT"],[49,51,53,49],[49,53,53,51],[50,10,54,8],[51,8,55,6],[52,6,56,4],[53,6,58,4],[53,13,58,11,"stripSentryFramesAndReverse"],[53,40,58,38],[53,41,58,39,"frames"],[53,47,58,45],[53,48,58,46],[54,4,59,2],[54,5,59,3],[55,2,60,0],[57,2,62,0],[58,0,63,0],[59,0,64,0],[60,0,65,0],[61,0,66,0],[62,0,67,0],[63,2,68,0],[63,11,68,9,"stackParserFromStackParserOptions"],[63,44,68,42,"stackParserFromStackParserOptions"],[63,45,68,43,"stackParser"],[63,56,68,54],[63,58,68,56],[64,4,69,2],[64,8,69,6,"Array"],[64,13,69,11],[64,14,69,12,"isArray"],[64,21,69,19],[64,22,69,20,"stackParser"],[64,33,69,31],[64,34,69,32],[64,36,69,34],[65,6,70,4],[65,13,70,11,"createStackParser"],[65,30,70,28],[65,31,70,29],[65,34,70,32,"stackParser"],[65,45,70,43],[65,46,70,44],[66,4,71,2],[67,4,72,2],[67,11,72,9,"stackParser"],[67,22,72,20],[68,2,73,0],[70,2,75,0],[71,0,76,0],[72,0,77,0],[73,0,78,0],[74,0,79,0],[75,0,80,0],[76,2,81,0],[76,11,81,9,"stripSentryFramesAndReverse"],[76,38,81,36,"stripSentryFramesAndReverse"],[76,39,81,37,"stack"],[76,44,81,42],[76,46,81,44],[77,4,82,2],[77,8,82,6],[77,9,82,7,"stack"],[77,14,82,12],[77,15,82,13,"length"],[77,21,82,19],[77,23,82,21],[78,6,83,4],[78,13,83,11],[78,15,83,13],[79,4,84,2],[80,4,86,2],[80,10,86,8,"localStack"],[80,20,86,18],[80,23,86,21,"Array"],[80,28,86,26],[80,29,86,27,"from"],[80,33,86,31],[80,34,86,32,"stack"],[80,39,86,37],[80,40,86,38],[82,4,88,2],[83,4,89,2],[83,8,89,6],[83,23,89,21],[83,24,89,22,"test"],[83,28,89,26],[83,29,89,27,"localStack"],[83,39,89,37],[83,40,89,38,"localStack"],[83,50,89,48],[83,51,89,49,"length"],[83,57,89,55],[83,60,89,58],[83,61,89,59],[83,62,89,60],[83,63,89,61,"function"],[83,71,89,69],[83,75,89,73],[83,77,89,75],[83,78,89,76],[83,80,89,78],[84,6,90,4,"localStack"],[84,16,90,14],[84,17,90,15,"pop"],[84,20,90,18],[84,21,90,19],[84,22,90,20],[85,4,91,2],[87,4,93,2],[88,4,94,2,"localStack"],[88,14,94,12],[88,15,94,13,"reverse"],[88,22,94,20],[88,23,94,21],[88,24,94,22],[90,4,96,2],[91,4,97,2],[91,8,97,6,"STRIP_FRAME_REGEXP"],[91,26,97,24],[91,27,97,25,"test"],[91,31,97,29],[91,32,97,30,"localStack"],[91,42,97,40],[91,43,97,41,"localStack"],[91,53,97,51],[91,54,97,52,"length"],[91,60,97,58],[91,63,97,61],[91,64,97,62],[91,65,97,63],[91,66,97,64,"function"],[91,74,97,72],[91,78,97,76],[91,80,97,78],[91,81,97,79],[91,83,97,81],[92,6,98,4,"localStack"],[92,16,98,14],[92,17,98,15,"pop"],[92,20,98,18],[92,21,98,19],[92,22,98,20],[94,6,100,4],[95,6,101,4],[96,6,102,4],[97,6,103,4],[98,6,104,4],[99,6,105,4],[100,6,106,4],[101,6,107,4],[102,6,108,4],[102,10,108,8,"STRIP_FRAME_REGEXP"],[102,28,108,26],[102,29,108,27,"test"],[102,33,108,31],[102,34,108,32,"localStack"],[102,44,108,42],[102,45,108,43,"localStack"],[102,55,108,53],[102,56,108,54,"length"],[102,62,108,60],[102,65,108,63],[102,66,108,64],[102,67,108,65],[102,68,108,66,"function"],[102,76,108,74],[102,80,108,78],[102,82,108,80],[102,83,108,81],[102,85,108,83],[103,8,109,6,"localStack"],[103,18,109,16],[103,19,109,17,"pop"],[103,22,109,20],[103,23,109,21],[103,24,109,22],[104,6,110,4],[105,4,111,2],[106,4,113,2],[106,11,113,9,"localStack"],[106,21,113,19],[106,22,113,20,"slice"],[106,27,113,25],[106,28,113,26],[106,29,113,27],[106,31,113,29,"STACKTRACE_FRAME_LIMIT"],[106,53,113,51],[106,54,113,52],[106,55,113,53,"map"],[106,58,113,56],[106,59,113,57,"frame"],[106,64,113,62],[106,69,113,67],[107,6,114,4],[107,9,114,7,"frame"],[107,14,114,12],[108,6,115,4,"filename"],[108,14,115,12],[108,16,115,14,"frame"],[108,21,115,19],[108,22,115,20,"filename"],[108,30,115,28],[108,34,115,32,"localStack"],[108,44,115,42],[108,45,115,43,"localStack"],[108,55,115,53],[108,56,115,54,"length"],[108,62,115,60],[108,65,115,63],[108,66,115,64],[108,67,115,65],[108,68,115,66,"filename"],[108,76,115,74],[109,6,116,4,"function"],[109,14,116,12],[109,16,116,14,"frame"],[109,21,116,19],[109,22,116,20,"function"],[109,30,116,28],[109,34,116,32],[110,4,117,2],[110,5,117,3],[110,6,117,4],[110,7,117,5],[111,2,118,0],[112,2,120,0],[112,8,120,6,"defaultFunctionName"],[112,27,120,25],[112,30,120,28],[112,43,120,41],[114,2,122,0],[115,0,123,0],[116,0,124,0],[117,2,125,0],[117,11,125,9,"getFunctionName"],[117,26,125,24,"getFunctionName"],[117,27,125,25,"fn"],[117,29,125,27],[117,31,125,29],[118,4,126,2],[118,8,126,6],[119,6,127,4],[119,10,127,8],[119,11,127,9,"fn"],[119,13,127,11],[119,17,127,15],[119,24,127,22,"fn"],[119,26,127,24],[119,31,127,29],[119,41,127,39],[119,43,127,41],[120,8,128,6],[120,15,128,13,"defaultFunctionName"],[120,34,128,32],[121,6,129,4],[122,6,130,4],[122,13,130,11,"fn"],[122,15,130,13],[122,16,130,14,"name"],[122,20,130,18],[122,24,130,22,"defaultFunctionName"],[122,43,130,41],[123,4,131,2],[123,5,131,3],[123,6,131,4],[123,13,131,11,"e"],[123,14,131,12],[123,16,131,14],[124,6,132,4],[125,6,133,4],[126,6,134,4],[126,13,134,11,"defaultFunctionName"],[126,32,134,30],[127,4,135,2],[128,2,136,0],[130,2,138,0],[131,0,139,0],[132,0,140,0],[133,0,141,0],[134,0,142,0],[135,0,143,0],[136,2,144,0],[136,11,144,9,"nodeStackLineParser"],[136,30,144,28,"nodeStackLineParser"],[136,31,144,29,"getModule"],[136,40,144,38],[136,42,144,40],[137,4,145,2],[137,11,145,9],[137,12,145,10],[137,14,145,12],[137,16,145,14,"nodeStackTrace"],[137,30,145,28],[137,31,145,29,"node"],[137,35,145,33],[137,36,145,34,"getModule"],[137,45,145,43],[137,46,145,44],[137,47,145,45],[138,2,146,0],[139,2,148,0,"exports"],[139,9,148,7],[139,10,148,8,"filenameIsInApp"],[139,25,148,23],[139,28,148,26,"nodeStackTrace"],[139,42,148,40],[139,43,148,41,"filenameIsInApp"],[139,58,148,56],[140,2,149,0,"exports"],[140,9,149,7],[140,10,149,8,"createStackParser"],[140,27,149,25],[140,30,149,28,"createStackParser"],[140,47,149,45],[141,2,150,0,"exports"],[141,9,150,7],[141,10,150,8,"getFunctionName"],[141,25,150,23],[141,28,150,26,"getFunctionName"],[141,43,150,41],[142,2,151,0,"exports"],[142,9,151,7],[142,10,151,8,"nodeStackLineParser"],[142,29,151,27],[142,32,151,30,"nodeStackLineParser"],[142,51,151,49],[143,2,152,0,"exports"],[143,9,152,7],[143,10,152,8,"stackParserFromStackParserOptions"],[143,43,152,41],[143,46,152,44,"stackParserFromStackParserOptions"],[143,79,152,77],[144,2,153,0,"exports"],[144,9,153,7],[144,10,153,8,"stripSentryFramesAndReverse"],[144,37,153,35],[144,40,153,38,"stripSentryFramesAndReverse"],[144,67,153,65],[145,0,153,66],[145,3]],"functionMap":{"names":["<global>","createStackParser","parsers.sort$argument_0","parsers.sort.map$argument_0","<anonymous>","stackParserFromStackParserOptions","stripSentryFramesAndReverse","localStack.slice.map$argument_0","getFunctionName","nodeStackLineParser"],"mappings":"AAA;ACgB;qCCC,qBD,ME,SF;SGE;GHuC;CDC;AKQ;CLK;AMQ;yDCgC;IDI;CNC;AQO;CRW;ASQ;CTE"},"hasCjsExports":true},"type":"js/module"}]}