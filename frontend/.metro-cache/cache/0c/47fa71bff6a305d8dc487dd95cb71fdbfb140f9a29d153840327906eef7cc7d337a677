{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@sentry/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":4,"index":27},"end":{"line":3,"column":28,"index":51}},{"start":{"line":7,"column":14,"index":132},"end":{"line":7,"column":38,"index":156}}],"key":"ud8OE6Lg8Q81+bS6ynZj2uyMPdA=","exportNames":["*"],"imports":2}},{"name":"./utils/node-utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":18,"index":176},"end":{"line":8,"column":50,"index":208}}],"key":"nAIWt1BOOZ86MvoHpjeMwr97UUM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _classCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\").default;\n  var _createClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\").default;\n  var _require = require(_dependencyMap[2], \"@sentry/utils\"),\n    _optionalChain = _require._optionalChain;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var utils = require(_dependencyMap[2], \"@sentry/utils\");\n  var nodeUtils = require(_dependencyMap[3], \"./utils/node-utils.js\");\n\n  /** Tracing integration for node-mysql package */\n  var Mysql = /*#__PURE__*/function () {\n    \"use strict\";\n\n    /**\n     * @inheritDoc\n     */\n\n    function Mysql() {\n      _classCallCheck(this, Mysql);\n      this.name = Mysql.id;\n    }\n\n    /** @inheritdoc */\n    return _createClass(Mysql, [{\n      key: \"loadDependency\",\n      value: function loadDependency() {\n        return this._module = this._module || utils.loadModule('mysql/lib/Connection.js');\n      }\n\n      /**\n       * @inheritDoc\n       */\n    }, {\n      key: \"setupOnce\",\n      value: function setupOnce(_, getCurrentHub) {\n        if (nodeUtils.shouldDisableAutoInstrumentation(getCurrentHub)) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.log('Mysql Integration is skipped because of instrumenter configuration.');\n          return;\n        }\n        var pkg = this.loadDependency();\n        if (!pkg) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.error('Mysql Integration was unable to require `mysql` package.');\n          return;\n        }\n        var mySqlConfig = undefined;\n        try {\n          pkg.prototype.connect = new Proxy(pkg.prototype.connect, {\n            apply(wrappingTarget, thisArg, args) {\n              if (!mySqlConfig) {\n                mySqlConfig = thisArg.config;\n              }\n              return wrappingTarget.apply(thisArg, args);\n            }\n          });\n        } catch (e) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && utils.logger.error('Mysql Integration was unable to instrument `mysql` config.');\n        }\n        function spanDataFromConfig() {\n          if (!mySqlConfig) {\n            return {};\n          }\n          return {\n            'server.address': mySqlConfig.host,\n            'server.port': mySqlConfig.port,\n            'db.user': mySqlConfig.user\n          };\n        }\n        function finishSpan(span) {\n          if (!span || span.endTimestamp) {\n            return;\n          }\n          var data = spanDataFromConfig();\n          Object.keys(data).forEach(key => {\n            span.setData(key, data[key]);\n          });\n          span.finish();\n        }\n\n        // The original function will have one of these signatures:\n        //    function (callback) => void\n        //    function (options, callback) => void\n        //    function (options, values, callback) => void\n        utils.fill(pkg, 'createQuery', function (orig) {\n          return function (options, values, callback) {\n            var scope = getCurrentHub().getScope();\n            var parentSpan = scope.getSpan();\n            var span = _optionalChain([parentSpan, 'optionalAccess', _2 => _2.startChild, 'call', _3 => _3({\n              description: typeof options === 'string' ? options : options.sql,\n              op: 'db',\n              origin: 'auto.db.mysql',\n              data: {\n                'db.system': 'mysql'\n              }\n            })]);\n            if (typeof callback === 'function') {\n              return orig.call(this, options, values, function (err, result, fields) {\n                finishSpan(span);\n                callback(err, result, fields);\n              });\n            }\n            if (typeof values === 'function') {\n              return orig.call(this, options, function (err, result, fields) {\n                finishSpan(span);\n                values(err, result, fields);\n              });\n            }\n\n            // streaming, no callback!\n            var query = orig.call(this, options, values);\n            query.on('end', () => {\n              finishSpan(span);\n            });\n            return query;\n          };\n        });\n      }\n    }], [{\n      key: \"__initStatic\",\n      value:\n      /**\n       * @inheritDoc\n       */\n      function __initStatic() {\n        this.id = 'Mysql';\n      }\n    }]);\n  }();\n  Mysql.__initStatic();\n  exports.Mysql = Mysql;\n});","lineCount":132,"map":[[4,2,1,0],[4,6,1,0,"_require"],[4,14,1,0],[4,17,3,4,"require"],[4,24,3,11],[4,25,3,11,"_dependencyMap"],[4,39,3,11],[4,59,3,27],[4,60,3,28],[5,4,2,2,"_optionalChain"],[5,18,2,16],[5,21,2,16,"_require"],[5,29,2,16],[5,30,2,2,"_optionalChain"],[5,44,2,16],[6,2,5,0,"Object"],[6,8,5,6],[6,9,5,7,"defineProperty"],[6,23,5,21],[6,24,5,22,"exports"],[6,31,5,29],[6,33,5,31],[6,45,5,43],[6,47,5,45],[7,4,5,47,"value"],[7,9,5,52],[7,11,5,54],[8,2,5,59],[8,3,5,60],[8,4,5,61],[9,2,7,0],[9,6,7,6,"utils"],[9,11,7,11],[9,14,7,14,"require"],[9,21,7,21],[9,22,7,21,"_dependencyMap"],[9,36,7,21],[9,56,7,37],[9,57,7,38],[10,2,8,0],[10,6,8,6,"nodeUtils"],[10,15,8,15],[10,18,8,18,"require"],[10,25,8,25],[10,26,8,25,"_dependencyMap"],[10,40,8,25],[10,68,8,49],[10,69,8,50],[12,2,10,0],[13,2,10,0],[13,6,11,6,"Mysql"],[13,11,11,11],[14,4,11,11],[16,4,17,2],[17,0,18,0],[18,0,19,0],[20,4,21,3],[20,13,21,3,"Mysql"],[20,19,21,3],[20,21,21,17],[21,6,21,17,"_classCallCheck"],[21,21,21,17],[21,28,21,17,"Mysql"],[21,33,21,17],[22,6,22,4],[22,10,22,8],[22,11,22,9,"name"],[22,15,22,13],[22,18,22,16,"Mysql"],[22,23,22,21],[22,24,22,22,"id"],[22,26,22,24],[23,4,23,2],[25,4,25,2],[26,4,25,2],[26,11,25,2,"_createClass"],[26,23,25,2],[26,24,25,2,"Mysql"],[26,29,25,2],[27,6,25,2,"key"],[27,9,25,2],[28,6,25,2,"value"],[28,11,25,2],[28,13,26,3],[28,22,26,3,"loadDependency"],[28,36,26,17,"loadDependency"],[28,37,26,17],[28,39,26,20],[29,8,27,4],[29,15,27,12],[29,19,27,16],[29,20,27,17,"_module"],[29,27,27,24],[29,30,27,27],[29,34,27,31],[29,35,27,32,"_module"],[29,42,27,39],[29,46,27,43,"utils"],[29,51,27,48],[29,52,27,49,"loadModule"],[29,62,27,59],[29,63,27,60],[29,88,27,85],[29,89,27,86],[30,6,28,2],[32,6,30,2],[33,0,31,0],[34,0,32,0],[35,4,30,2],[36,6,30,2,"key"],[36,9,30,2],[37,6,30,2,"value"],[37,11,30,2],[37,13,33,3],[37,22,33,3,"setupOnce"],[37,31,33,12,"setupOnce"],[37,32,33,13,"_"],[37,33,33,14],[37,35,33,16,"getCurrentHub"],[37,48,33,29],[37,50,33,31],[38,8,34,4],[38,12,34,8,"nodeUtils"],[38,21,34,17],[38,22,34,18,"shouldDisableAutoInstrumentation"],[38,54,34,50],[38,55,34,51,"getCurrentHub"],[38,68,34,64],[38,69,34,65],[38,71,34,67],[39,10,35,6],[39,11,35,7],[39,18,35,14,"__SENTRY_DEBUG__"],[39,34,35,30],[39,39,35,35],[39,50,35,46],[39,54,35,50,"__SENTRY_DEBUG__"],[39,70,35,66],[39,75,35,71,"utils"],[39,80,35,76],[39,81,35,77,"logger"],[39,87,35,83],[39,88,35,84,"log"],[39,91,35,87],[39,92,35,88],[39,161,35,157],[39,162,35,158],[40,10,36,6],[41,8,37,4],[42,8,39,4],[42,12,39,10,"pkg"],[42,15,39,13],[42,18,39,16],[42,22,39,20],[42,23,39,21,"loadDependency"],[42,37,39,35],[42,38,39,36],[42,39,39,37],[43,8,41,4],[43,12,41,8],[43,13,41,9,"pkg"],[43,16,41,12],[43,18,41,14],[44,10,42,6],[44,11,42,7],[44,18,42,14,"__SENTRY_DEBUG__"],[44,34,42,30],[44,39,42,35],[44,50,42,46],[44,54,42,50,"__SENTRY_DEBUG__"],[44,70,42,66],[44,75,42,71,"utils"],[44,80,42,76],[44,81,42,77,"logger"],[44,87,42,83],[44,88,42,84,"error"],[44,93,42,89],[44,94,42,90],[44,152,42,148],[44,153,42,149],[45,10,43,6],[46,8,44,4],[47,8,46,4],[47,12,46,8,"mySqlConfig"],[47,23,46,19],[47,26,46,22,"undefined"],[47,35,46,31],[48,8,48,4],[48,12,48,8],[49,10,49,6,"pkg"],[49,13,49,9],[49,14,49,10,"prototype"],[49,23,49,19],[49,24,49,20,"connect"],[49,31,49,27],[49,34,49,30],[49,38,49,34,"Proxy"],[49,43,49,39],[49,44,49,40,"pkg"],[49,47,49,43],[49,48,49,44,"prototype"],[49,57,49,53],[49,58,49,54,"connect"],[49,65,49,61],[49,67,49,63],[50,12,50,8,"apply"],[50,17,50,13,"apply"],[50,18,50,14,"wrappingTarget"],[50,32,50,28],[50,34,50,30,"thisArg"],[50,41,50,37],[50,43,50,39,"args"],[50,47,50,43],[50,49,50,45],[51,14,51,10],[51,18,51,14],[51,19,51,15,"mySqlConfig"],[51,30,51,26],[51,32,51,28],[52,16,52,12,"mySqlConfig"],[52,27,52,23],[52,30,52,26,"thisArg"],[52,37,52,33],[52,38,52,34,"config"],[52,44,52,40],[53,14,53,10],[54,14,54,10],[54,21,54,17,"wrappingTarget"],[54,35,54,31],[54,36,54,32,"apply"],[54,41,54,37],[54,42,54,38,"thisArg"],[54,49,54,45],[54,51,54,47,"args"],[54,55,54,51],[54,56,54,52],[55,12,55,8],[56,10,56,6],[56,11,56,7],[56,12,56,8],[57,8,57,4],[57,9,57,5],[57,10,57,6],[57,17,57,13,"e"],[57,18,57,14],[57,20,57,16],[58,10,58,6],[58,11,58,7],[58,18,58,14,"__SENTRY_DEBUG__"],[58,34,58,30],[58,39,58,35],[58,50,58,46],[58,54,58,50,"__SENTRY_DEBUG__"],[58,70,58,66],[58,75,58,71,"utils"],[58,80,58,76],[58,81,58,77,"logger"],[58,87,58,83],[58,88,58,84,"error"],[58,93,58,89],[58,94,58,90],[58,154,58,150],[58,155,58,151],[59,8,59,4],[60,8,61,4],[60,17,61,13,"spanDataFromConfig"],[60,35,61,31,"spanDataFromConfig"],[60,36,61,31],[60,38,61,34],[61,10,62,6],[61,14,62,10],[61,15,62,11,"mySqlConfig"],[61,26,62,22],[61,28,62,24],[62,12,63,8],[62,19,63,15],[62,20,63,16],[62,21,63,17],[63,10,64,6],[64,10,65,6],[64,17,65,13],[65,12,66,8],[65,28,66,24],[65,30,66,26,"mySqlConfig"],[65,41,66,37],[65,42,66,38,"host"],[65,46,66,42],[66,12,67,8],[66,25,67,21],[66,27,67,23,"mySqlConfig"],[66,38,67,34],[66,39,67,35,"port"],[66,43,67,39],[67,12,68,8],[67,21,68,17],[67,23,68,19,"mySqlConfig"],[67,34,68,30],[67,35,68,31,"user"],[68,10,69,6],[68,11,69,7],[69,8,70,4],[70,8,72,4],[70,17,72,13,"finishSpan"],[70,27,72,23,"finishSpan"],[70,28,72,24,"span"],[70,32,72,28],[70,34,72,30],[71,10,73,6],[71,14,73,10],[71,15,73,11,"span"],[71,19,73,15],[71,23,73,19,"span"],[71,27,73,23],[71,28,73,24,"endTimestamp"],[71,40,73,36],[71,42,73,38],[72,12,74,8],[73,10,75,6],[74,10,77,6],[74,14,77,12,"data"],[74,18,77,16],[74,21,77,19,"spanDataFromConfig"],[74,39,77,37],[74,40,77,38],[74,41,77,39],[75,10,78,6,"Object"],[75,16,78,12],[75,17,78,13,"keys"],[75,21,78,17],[75,22,78,18,"data"],[75,26,78,22],[75,27,78,23],[75,28,78,24,"forEach"],[75,35,78,31],[75,36,78,32,"key"],[75,39,78,35],[75,43,78,39],[76,12,79,8,"span"],[76,16,79,12],[76,17,79,13,"setData"],[76,24,79,20],[76,25,79,21,"key"],[76,28,79,24],[76,30,79,26,"data"],[76,34,79,30],[76,35,79,31,"key"],[76,38,79,34],[76,39,79,35],[76,40,79,36],[77,10,80,6],[77,11,80,7],[77,12,80,8],[78,10,82,6,"span"],[78,14,82,10],[78,15,82,11,"finish"],[78,21,82,17],[78,22,82,18],[78,23,82,19],[79,8,83,4],[81,8,85,4],[82,8,86,4],[83,8,87,4],[84,8,88,4],[85,8,89,4,"utils"],[85,13,89,9],[85,14,89,10,"fill"],[85,18,89,14],[85,19,89,15,"pkg"],[85,22,89,18],[85,24,89,20],[85,37,89,33],[85,39,89,35],[85,49,89,45,"orig"],[85,53,89,49],[85,55,89,51],[86,10,90,6],[86,17,90,13],[86,27,90,24,"options"],[86,34,90,31],[86,36,90,33,"values"],[86,42,90,39],[86,44,90,41,"callback"],[86,52,90,49],[86,54,90,51],[87,12,91,8],[87,16,91,14,"scope"],[87,21,91,19],[87,24,91,22,"getCurrentHub"],[87,37,91,35],[87,38,91,36],[87,39,91,37],[87,40,91,38,"getScope"],[87,48,91,46],[87,49,91,47],[87,50,91,48],[88,12,92,8],[88,16,92,14,"parentSpan"],[88,26,92,24],[88,29,92,27,"scope"],[88,34,92,32],[88,35,92,33,"getSpan"],[88,42,92,40],[88,43,92,41],[88,44,92,42],[89,12,94,8],[89,16,94,14,"span"],[89,20,94,18],[89,23,94,21,"_optionalChain"],[89,37,94,35],[89,38,94,36],[89,39,94,37,"parentSpan"],[89,49,94,47],[89,51,94,49],[89,67,94,65],[89,69,94,67,"_2"],[89,71,94,69],[89,75,94,73,"_2"],[89,77,94,75],[89,78,94,76,"startChild"],[89,88,94,86],[89,90,94,88],[89,96,94,94],[89,98,94,96,"_3"],[89,100,94,98],[89,104,94,102,"_3"],[89,106,94,104],[89,107,94,105],[90,14,95,10,"description"],[90,25,95,21],[90,27,95,23],[90,34,95,30,"options"],[90,41,95,37],[90,46,95,42],[90,54,95,50],[90,57,95,53,"options"],[90,64,95,60],[90,67,95,64,"options"],[90,74,95,71],[90,75,95,74,"sql"],[90,78,95,77],[91,14,96,10,"op"],[91,16,96,12],[91,18,96,14],[91,22,96,18],[92,14,97,10,"origin"],[92,20,97,16],[92,22,97,18],[92,37,97,33],[93,14,98,10,"data"],[93,18,98,14],[93,20,98,16],[94,16,99,12],[94,27,99,23],[94,29,99,25],[95,14,100,10],[96,12,101,8],[96,13,101,9],[96,14,101,10],[96,15,101,11],[96,16,101,12],[97,12,103,8],[97,16,103,12],[97,23,103,19,"callback"],[97,31,103,27],[97,36,103,32],[97,46,103,42],[97,48,103,44],[98,14,104,10],[98,21,104,17,"orig"],[98,25,104,21],[98,26,104,22,"call"],[98,30,104,26],[98,31,104,27],[98,35,104,31],[98,37,104,33,"options"],[98,44,104,40],[98,46,104,42,"values"],[98,52,104,48],[98,54,104,50],[98,64,104,60,"err"],[98,67,104,63],[98,69,104,65,"result"],[98,75,104,71],[98,77,104,73,"fields"],[98,83,104,79],[98,85,104,81],[99,16,105,12,"finishSpan"],[99,26,105,22],[99,27,105,23,"span"],[99,31,105,27],[99,32,105,28],[100,16,106,12,"callback"],[100,24,106,20],[100,25,106,21,"err"],[100,28,106,24],[100,30,106,26,"result"],[100,36,106,32],[100,38,106,34,"fields"],[100,44,106,40],[100,45,106,41],[101,14,107,10],[101,15,107,11],[101,16,107,12],[102,12,108,8],[103,12,110,8],[103,16,110,12],[103,23,110,19,"values"],[103,29,110,25],[103,34,110,30],[103,44,110,40],[103,46,110,42],[104,14,111,10],[104,21,111,17,"orig"],[104,25,111,21],[104,26,111,22,"call"],[104,30,111,26],[104,31,111,27],[104,35,111,31],[104,37,111,33,"options"],[104,44,111,40],[104,46,111,42],[104,56,111,52,"err"],[104,59,111,55],[104,61,111,57,"result"],[104,67,111,63],[104,69,111,65,"fields"],[104,75,111,71],[104,77,111,73],[105,16,112,12,"finishSpan"],[105,26,112,22],[105,27,112,23,"span"],[105,31,112,27],[105,32,112,28],[106,16,113,12,"values"],[106,22,113,18],[106,23,113,19,"err"],[106,26,113,22],[106,28,113,24,"result"],[106,34,113,30],[106,36,113,32,"fields"],[106,42,113,38],[106,43,113,39],[107,14,114,10],[107,15,114,11],[107,16,114,12],[108,12,115,8],[110,12,117,8],[111,12,118,8],[111,16,118,14,"query"],[111,21,118,19],[111,24,118,22,"orig"],[111,28,118,26],[111,29,118,27,"call"],[111,33,118,31],[111,34,118,32],[111,38,118,36],[111,40,118,38,"options"],[111,47,118,45],[111,49,118,47,"values"],[111,55,118,53],[111,56,118,54],[112,12,120,8,"query"],[112,17,120,13],[112,18,120,14,"on"],[112,20,120,16],[112,21,120,17],[112,26,120,22],[112,28,120,24],[112,34,120,30],[113,14,121,10,"finishSpan"],[113,24,121,20],[113,25,121,21,"span"],[113,29,121,25],[113,30,121,26],[114,12,122,8],[114,13,122,9],[114,14,122,10],[115,12,124,8],[115,19,124,15,"query"],[115,24,124,20],[116,10,125,6],[116,11,125,7],[117,8,126,4],[117,9,126,5],[117,10,126,6],[118,6,127,2],[119,4,127,3],[120,6,127,3,"key"],[120,9,127,3],[121,6,127,3,"value"],[121,11,127,3],[122,6,12,2],[123,0,13,0],[124,0,14,0],[125,6,15,3],[125,15,15,10,"__initStatic"],[125,27,15,22,"__initStatic"],[125,28,15,22],[125,30,15,25],[126,8,15,26],[126,12,15,30],[126,13,15,31,"id"],[126,15,15,33],[126,18,15,36],[126,25,15,43],[127,6,15,44],[128,4,15,45],[129,2,15,45],[130,2,128,1,"Mysql"],[130,7,128,6],[130,8,128,7,"__initStatic"],[130,20,128,19],[130,21,128,20],[130,22,128,21],[131,2,130,0,"exports"],[131,9,130,7],[131,10,130,8,"Mysql"],[131,15,130,13],[131,18,130,16,"Mysql"],[131,23,130,21],[132,0,130,22],[132,3]],"functionMap":{"names":["<global>","Mysql","Mysql.__initStatic","Mysql#constructor","Mysql#loadDependency","Mysql#setupOnce","Proxy$argument_1.apply","spanDataFromConfig","finishSpan","Object.keys.forEach$argument_0","utils.fill$argument_2","<anonymous>","orig.call$argument_3","orig.call$argument_2","query.on$argument_1"],"mappings":"AAA;ACU;GCI,0CD;GEM;GFE;GGG;GHE;GIK;QCiB;SDK;IEM;KFS;IGE;gCCM;ODE;KHG;mCKM;aCC;kDCc;WDG;0CEI;WFG;wBGM;SHE;ODG;KLC;GJC;CDC"},"hasCjsExports":true},"type":"js/module"}]}