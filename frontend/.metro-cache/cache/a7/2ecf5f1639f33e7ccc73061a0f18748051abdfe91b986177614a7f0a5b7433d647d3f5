{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getMailSummary = getMailSummary;\n  exports.getMailRewards = getMailRewards;\n  exports.getMailMessages = getMailMessages;\n  exports.getMailGifts = getMailGifts;\n  exports.claimMailReward = claimMailReward;\n  exports.claimMailGift = claimMailGift;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  // /app/frontend/lib/api/mail.ts\n  // Phase 3.23.2: Mail API Layer\n  //\n  // Canonical API calls for mail system.\n  // Graceful error handling â€” returns defaults on failure.\n\n  const API_BASE = _expoVirtualEnv.env.EXPO_PUBLIC_API_URL || '';\n\n  /**\n   * Get mail summary (badge counts)\n   */\n  async function getMailSummary(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/summary/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch mail summary');\n      return await res.json();\n    } catch {\n      // Default fallback - show daily rewards available\n      return {\n        rewardsAvailable: 1,\n        unreadMessages: 0,\n        giftsAvailable: 0\n      };\n    }\n  }\n\n  /**\n   * Get mail rewards list\n   */\n  async function getMailRewards(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/rewards/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch rewards');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail messages list\n   */\n  async function getMailMessages(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/messages/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch messages');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail gifts list\n   */\n  async function getMailGifts(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/gifts/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch gifts');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Claim a mail reward\n   */\n  async function claimMailReward(username, rewardId) {\n    const res = await fetch(`${API_BASE}/api/mail/rewards/${username}/${rewardId}/claim`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to claim reward');\n  }\n\n  /**\n   * Claim a mail gift\n   */\n  async function claimMailGift(username, giftId) {\n    const res = await fetch(`${API_BASE}/api/mail/gifts/${username}/${giftId}/claim`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to claim gift');\n  }\n});","lineCount":98,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"getMailSummary"],[7,24,14,0],[7,27,14,0,"getMailSummary"],[7,41,14,0],[8,2,32,0,"exports"],[8,9,32,0],[8,10,32,0,"getMailRewards"],[8,24,32,0],[8,27,32,0,"getMailRewards"],[8,41,32,0],[9,2,52,0,"exports"],[9,9,52,0],[9,10,52,0,"getMailMessages"],[9,25,52,0],[9,28,52,0,"getMailMessages"],[9,43,52,0],[10,2,71,0,"exports"],[10,9,71,0],[10,10,71,0,"getMailGifts"],[10,22,71,0],[10,25,71,0,"getMailGifts"],[10,37,71,0],[11,2,90,0,"exports"],[11,9,90,0],[11,10,90,0,"claimMailReward"],[11,25,90,0],[11,28,90,0,"claimMailReward"],[11,43,90,0],[12,2,100,0,"exports"],[12,9,100,0],[12,10,100,0,"claimMailGift"],[12,23,100,0],[12,26,100,0,"claimMailGift"],[12,39,100,0],[13,2,105,1],[13,6,105,1,"_expoVirtualEnv"],[13,21,105,1],[13,24,105,1,"require"],[13,31,105,1],[13,32,105,1,"_dependencyMap"],[13,46,105,1],[14,2,1,0],[15,2,2,0],[16,2,3,0],[17,2,4,0],[18,2,5,0],[20,2,9,0],[20,8,9,6,"API_BASE"],[20,16,9,14],[20,19,9,17,"_expoVirtualEnv"],[20,34,9,17],[20,35,9,17,"env"],[20,38,9,17],[20,39,9,17,"EXPO_PUBLIC_API_URL"],[20,58,9,17],[20,62,9,52],[20,64,9,54],[22,2,11,0],[23,0,12,0],[24,0,13,0],[25,2,14,7],[25,17,14,22,"getMailSummary"],[25,31,14,36,"getMailSummary"],[25,32,14,37,"username"],[25,40,14,53],[25,42,18,3],[26,4,19,2],[26,8,19,6],[27,6,20,4],[27,12,20,10,"res"],[27,15,20,13],[27,18,20,16],[27,24,20,22,"fetch"],[27,29,20,27],[27,30,20,28],[27,33,20,31,"API_BASE"],[27,41,20,39],[27,62,20,60,"username"],[27,70,20,68],[27,72,20,70],[27,73,20,71],[28,6,21,4],[28,10,21,8],[28,11,21,9,"res"],[28,14,21,12],[28,15,21,13,"ok"],[28,17,21,15],[28,19,21,17],[28,25,21,23],[28,29,21,27,"Error"],[28,34,21,32],[28,35,21,33],[28,65,21,63],[28,66,21,64],[29,6,22,4],[29,13,22,11],[29,19,22,17,"res"],[29,22,22,20],[29,23,22,21,"json"],[29,27,22,25],[29,28,22,26],[29,29,22,27],[30,4,23,2],[30,5,23,3],[30,6,23,4],[30,12,23,10],[31,6,24,4],[32,6,25,4],[32,13,25,11],[33,8,25,13,"rewardsAvailable"],[33,24,25,29],[33,26,25,31],[33,27,25,32],[34,8,25,34,"unreadMessages"],[34,22,25,48],[34,24,25,50],[34,25,25,51],[35,8,25,53,"giftsAvailable"],[35,22,25,67],[35,24,25,69],[36,6,25,71],[36,7,25,72],[37,4,26,2],[38,2,27,0],[40,2,29,0],[41,0,30,0],[42,0,31,0],[43,2,32,7],[43,17,32,22,"getMailRewards"],[43,31,32,36,"getMailRewards"],[43,32,32,37,"username"],[43,40,32,53],[43,42,39,4],[44,4,40,2],[44,8,40,6],[45,6,41,4],[45,12,41,10,"res"],[45,15,41,13],[45,18,41,16],[45,24,41,22,"fetch"],[45,29,41,27],[45,30,41,28],[45,33,41,31,"API_BASE"],[45,41,41,39],[45,62,41,60,"username"],[45,70,41,68],[45,72,41,70],[45,73,41,71],[46,6,42,4],[46,10,42,8],[46,11,42,9,"res"],[46,14,42,12],[46,15,42,13,"ok"],[46,17,42,15],[46,19,42,17],[46,25,42,23],[46,29,42,27,"Error"],[46,34,42,32],[46,35,42,33],[46,60,42,58],[46,61,42,59],[47,6,43,4],[47,13,43,11],[47,19,43,17,"res"],[47,22,43,20],[47,23,43,21,"json"],[47,27,43,25],[47,28,43,26],[47,29,43,27],[48,4,44,2],[48,5,44,3],[48,6,44,4],[48,12,44,10],[49,6,45,4],[49,13,45,11],[49,15,45,13],[50,4,46,2],[51,2,47,0],[53,2,49,0],[54,0,50,0],[55,0,51,0],[56,2,52,7],[56,17,52,22,"getMailMessages"],[56,32,52,37,"getMailMessages"],[56,33,52,38,"username"],[56,41,52,54],[56,43,58,4],[57,4,59,2],[57,8,59,6],[58,6,60,4],[58,12,60,10,"res"],[58,15,60,13],[58,18,60,16],[58,24,60,22,"fetch"],[58,29,60,27],[58,30,60,28],[58,33,60,31,"API_BASE"],[58,41,60,39],[58,63,60,61,"username"],[58,71,60,69],[58,73,60,71],[58,74,60,72],[59,6,61,4],[59,10,61,8],[59,11,61,9,"res"],[59,14,61,12],[59,15,61,13,"ok"],[59,17,61,15],[59,19,61,17],[59,25,61,23],[59,29,61,27,"Error"],[59,34,61,32],[59,35,61,33],[59,61,61,59],[59,62,61,60],[60,6,62,4],[60,13,62,11],[60,19,62,17,"res"],[60,22,62,20],[60,23,62,21,"json"],[60,27,62,25],[60,28,62,26],[60,29,62,27],[61,4,63,2],[61,5,63,3],[61,6,63,4],[61,12,63,10],[62,6,64,4],[62,13,64,11],[62,15,64,13],[63,4,65,2],[64,2,66,0],[66,2,68,0],[67,0,69,0],[68,0,70,0],[69,2,71,7],[69,17,71,22,"getMailGifts"],[69,29,71,34,"getMailGifts"],[69,30,71,35,"username"],[69,38,71,51],[69,40,77,4],[70,4,78,2],[70,8,78,6],[71,6,79,4],[71,12,79,10,"res"],[71,15,79,13],[71,18,79,16],[71,24,79,22,"fetch"],[71,29,79,27],[71,30,79,28],[71,33,79,31,"API_BASE"],[71,41,79,39],[71,60,79,58,"username"],[71,68,79,66],[71,70,79,68],[71,71,79,69],[72,6,80,4],[72,10,80,8],[72,11,80,9,"res"],[72,14,80,12],[72,15,80,13,"ok"],[72,17,80,15],[72,19,80,17],[72,25,80,23],[72,29,80,27,"Error"],[72,34,80,32],[72,35,80,33],[72,58,80,56],[72,59,80,57],[73,6,81,4],[73,13,81,11],[73,19,81,17,"res"],[73,22,81,20],[73,23,81,21,"json"],[73,27,81,25],[73,28,81,26],[73,29,81,27],[74,4,82,2],[74,5,82,3],[74,6,82,4],[74,12,82,10],[75,6,83,4],[75,13,83,11],[75,15,83,13],[76,4,84,2],[77,2,85,0],[79,2,87,0],[80,0,88,0],[81,0,89,0],[82,2,90,7],[82,17,90,22,"claimMailReward"],[82,32,90,37,"claimMailReward"],[82,33,90,38,"username"],[82,41,90,54],[82,43,90,56,"rewardId"],[82,51,90,72],[82,53,90,89],[83,4,91,2],[83,10,91,8,"res"],[83,13,91,11],[83,16,91,14],[83,22,91,20,"fetch"],[83,27,91,25],[83,28,91,26],[83,31,91,29,"API_BASE"],[83,39,91,37],[83,60,91,58,"username"],[83,68,91,66],[83,72,91,70,"rewardId"],[83,80,91,78],[83,88,91,86],[83,90,91,88],[84,6,92,4,"method"],[84,12,92,10],[84,14,92,12],[85,4,93,2],[85,5,93,3],[85,6,93,4],[86,4,94,2],[86,8,94,6],[86,9,94,7,"res"],[86,12,94,10],[86,13,94,11,"ok"],[86,15,94,13],[86,17,94,15],[86,23,94,21],[86,27,94,25,"Error"],[86,32,94,30],[86,33,94,31],[86,57,94,55],[86,58,94,56],[87,2,95,0],[89,2,97,0],[90,0,98,0],[91,0,99,0],[92,2,100,7],[92,17,100,22,"claimMailGift"],[92,30,100,35,"claimMailGift"],[92,31,100,36,"username"],[92,39,100,52],[92,41,100,54,"giftId"],[92,47,100,68],[92,49,100,85],[93,4,101,2],[93,10,101,8,"res"],[93,13,101,11],[93,16,101,14],[93,22,101,20,"fetch"],[93,27,101,25],[93,28,101,26],[93,31,101,29,"API_BASE"],[93,39,101,37],[93,58,101,56,"username"],[93,66,101,64],[93,70,101,68,"giftId"],[93,76,101,74],[93,84,101,82],[93,86,101,84],[94,6,102,4,"method"],[94,12,102,10],[94,14,102,12],[95,4,103,2],[95,5,103,3],[95,6,103,4],[96,4,104,2],[96,8,104,6],[96,9,104,7,"res"],[96,12,104,10],[96,13,104,11,"ok"],[96,15,104,13],[96,17,104,15],[96,23,104,21],[96,27,104,25,"Error"],[96,32,104,30],[96,33,104,31],[96,55,104,53],[96,56,104,54],[97,2,105,0],[98,0,105,1],[98,3]],"functionMap":{"names":["<global>","getMailSummary","getMailRewards","getMailMessages","getMailGifts","claimMailReward","claimMailGift"],"mappings":"AAA;OCa;CDa;OEK;CFe;OGK;CHc;OIK;CJc;OKK;CLK;OMK;CNK"},"hasCjsExports":false},"type":"js/module"}]}