{"dependencies":[{"name":"./features","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":370},"end":{"line":18,"column":46,"index":416}}],"key":"bmouY5/rpPD3Ua8O/sPZIfrV9Jw=","exportNames":["*"],"imports":1}},{"name":"../stores/entitlementStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":417},"end":{"line":19,"column":65,"index":482}}],"key":"zpvG3AWVhfkzof5ZAFPvPaVLiPY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  /**\n   * Cinematics Access Helper\n   * \n   * Determines if user can access cinematics based on:\n   * 1. Paid entitlement (PREMIUM_CINEMATICS_PACK)\n   * 2. Feature flag (HERO_CINEMATICS)\n   * \n   * Also provides per-hero ownership check for stat bonuses.\n   * \n   * Usage:\n   * if (!canAccessCinematics(user?.id)) {\n   *   navigate('paid-features');\n   *   return;\n   * }\n   * openCinematic();\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.canAccessCinematics = canAccessCinematics;\n  exports.useCanAccessCinematics = useCanAccessCinematics;\n  exports.hasHeroPremiumCinematicOwned = hasHeroPremiumCinematicOwned;\n  exports.useHasHeroPremiumCinematicOwned = useHasHeroPremiumCinematicOwned;\n  var _features = require(_dependencyMap[0], \"./features\");\n  var _storesEntitlementStore = require(_dependencyMap[1], \"../stores/entitlementStore\");\n  /**\n   * Check if user can access cinematics system (synchronous check)\n   * Requires BOTH: paid pack entitlement AND feature flag enabled\n   * @param stableId - User ID for feature flag rollout\n   * @returns true if user has paid AND feature flag is enabled\n   */\n  function canAccessCinematics(stableId) {\n    const store = _storesEntitlementStore.useEntitlementStore.getState();\n    const hasPack = store.hasEntitlement('PREMIUM_CINEMATICS_PACK');\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Hook version for reactive updates\n   */\n  function useCanAccessCinematics(stableId) {\n    _s();\n    const entitlements = (0, _storesEntitlementStore.useEntitlementStore)(s => s.entitlements);\n    const hasPack = Boolean(entitlements['PREMIUM_CINEMATICS_PACK']);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Check if user owns the premium cinematic for a specific hero.\n   * This is what grants the stat perk (+10% HP, +5% ATK).\n   * @param heroId - The hero's stable ID (e.g., 'michael_the_archangel')\n   * @returns true if user owns this hero's premium cinematic\n   */\n  _s(useCanAccessCinematics, \"smpkV55YycXJlgt2ZVGqk9q+9ro=\", false, function () {\n    return [_storesEntitlementStore.useEntitlementStore];\n  });\n  function hasHeroPremiumCinematicOwned(heroId) {\n    if (!heroId) return false;\n    return _storesEntitlementStore.useEntitlementStore.getState().hasHeroPremiumCinematicOwned(heroId);\n  }\n\n  /**\n   * Hook version for reactive per-hero ownership check\n   */\n  function useHasHeroPremiumCinematicOwned(heroId) {\n    _s2();\n    const entitlements = (0, _storesEntitlementStore.useEntitlementStore)(s => s.entitlements);\n    if (!heroId) return false;\n    const key = `PREMIUM_CINEMATIC_OWNED:${heroId}`;\n    return Boolean(entitlements[key]);\n  }\n  _s2(useHasHeroPremiumCinematicOwned, \"smpkV55YycXJlgt2ZVGqk9q+9ro=\", false, function () {\n    return [_storesEntitlementStore.useEntitlementStore];\n  });\n});","lineCount":86,"map":[[6,2,1,0],[7,0,2,0],[8,0,3,0],[9,0,4,0],[10,0,5,0],[11,0,6,0],[12,0,7,0],[13,0,8,0],[14,0,9,0],[15,0,10,0],[16,0,11,0],[17,0,12,0],[18,0,13,0],[19,0,14,0],[20,0,15,0],[21,0,16,0],[22,2,1,0,"Object"],[22,8,1,0],[22,9,1,0,"defineProperty"],[22,23,1,0],[22,24,1,0,"exports"],[22,31,1,0],[23,4,1,0,"value"],[23,9,1,0],[24,2,1,0],[25,2,27,0,"exports"],[25,9,27,0],[25,10,27,0,"canAccessCinematics"],[25,29,27,0],[25,32,27,0,"canAccessCinematics"],[25,51,27,0],[26,2,38,0,"exports"],[26,9,38,0],[26,10,38,0,"useCanAccessCinematics"],[26,32,38,0],[26,35,38,0,"useCanAccessCinematics"],[26,57,38,0],[27,2,52,0,"exports"],[27,9,52,0],[27,10,52,0,"hasHeroPremiumCinematicOwned"],[27,38,52,0],[27,41,52,0,"hasHeroPremiumCinematicOwned"],[27,69,52,0],[28,2,60,0,"exports"],[28,9,60,0],[28,10,60,0,"useHasHeroPremiumCinematicOwned"],[28,41,60,0],[28,44,60,0,"useHasHeroPremiumCinematicOwned"],[28,75,60,0],[29,2,18,0],[29,6,18,0,"_features"],[29,15,18,0],[29,18,18,0,"require"],[29,25,18,0],[29,26,18,0,"_dependencyMap"],[29,40,18,0],[30,2,19,0],[30,6,19,0,"_storesEntitlementStore"],[30,29,19,0],[30,32,19,0,"require"],[30,39,19,0],[30,40,19,0,"_dependencyMap"],[30,54,19,0],[31,2,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,2,27,7],[37,11,27,16,"canAccessCinematics"],[37,30,27,35,"canAccessCinematics"],[37,31,27,36,"stableId"],[37,39,27,53],[37,41,27,64],[38,4,28,2],[38,10,28,8,"store"],[38,15,28,13],[38,18,28,16,"useEntitlementStore"],[38,41,28,35],[38,42,28,35,"useEntitlementStore"],[38,61,28,35],[38,62,28,36,"getState"],[38,70,28,44],[38,71,28,45],[38,72,28,46],[39,4,29,2],[39,10,29,8,"hasPack"],[39,17,29,15],[39,20,29,18,"store"],[39,25,29,23],[39,26,29,24,"hasEntitlement"],[39,40,29,38],[39,41,29,39],[39,66,29,64],[39,67,29,65],[40,4,30,2],[40,8,30,6],[40,9,30,7,"hasPack"],[40,16,30,14],[40,18,30,16],[40,25,30,23],[40,30,30,28],[41,4,32,2],[41,11,32,9],[41,15,32,9,"isFeatureEnabled"],[41,24,32,25],[41,25,32,25,"isFeatureEnabled"],[41,41,32,25],[41,43,32,26],[41,60,32,43],[41,62,32,45],[42,6,32,47,"stableId"],[43,4,32,56],[43,5,32,57],[43,6,32,58],[44,2,33,0],[46,2,35,0],[47,0,36,0],[48,0,37,0],[49,2,38,7],[49,11,38,16,"useCanAccessCinematics"],[49,33,38,38,"useCanAccessCinematics"],[49,34,38,39,"stableId"],[49,42,38,56],[49,44,38,67],[50,4,38,67,"_s"],[50,6,38,67],[51,4,39,2],[51,10,39,8,"entitlements"],[51,22,39,20],[51,25,39,23],[51,29,39,23,"useEntitlementStore"],[51,52,39,42],[51,53,39,42,"useEntitlementStore"],[51,72,39,42],[51,74,39,43,"s"],[51,75,39,44],[51,79,39,48,"s"],[51,80,39,49],[51,81,39,50,"entitlements"],[51,93,39,62],[51,94,39,63],[52,4,40,2],[52,10,40,8,"hasPack"],[52,17,40,15],[52,20,40,18,"Boolean"],[52,27,40,25],[52,28,40,26,"entitlements"],[52,40,40,38],[52,41,40,39],[52,66,40,64],[52,67,40,65],[52,68,40,66],[53,4,41,2],[53,8,41,6],[53,9,41,7,"hasPack"],[53,16,41,14],[53,18,41,16],[53,25,41,23],[53,30,41,28],[54,4,43,2],[54,11,43,9],[54,15,43,9,"isFeatureEnabled"],[54,24,43,25],[54,25,43,25,"isFeatureEnabled"],[54,41,43,25],[54,43,43,26],[54,60,43,43],[54,62,43,45],[55,6,43,47,"stableId"],[56,4,43,56],[56,5,43,57],[56,6,43,58],[57,2,44,0],[59,2,46,0],[60,0,47,0],[61,0,48,0],[62,0,49,0],[63,0,50,0],[64,0,51,0],[65,2,46,0,"_s"],[65,4,46,0],[65,5,38,16,"useCanAccessCinematics"],[65,27,38,38],[66,4,38,38],[66,12,39,23,"useEntitlementStore"],[66,35,39,42],[66,36,39,42,"useEntitlementStore"],[66,55,39,42],[67,2,39,42],[68,2,52,7],[68,11,52,16,"hasHeroPremiumCinematicOwned"],[68,39,52,44,"hasHeroPremiumCinematicOwned"],[68,40,52,45,"heroId"],[68,46,52,59],[68,48,52,70],[69,4,53,2],[69,8,53,6],[69,9,53,7,"heroId"],[69,15,53,13],[69,17,53,15],[69,24,53,22],[69,29,53,27],[70,4,54,2],[70,11,54,9,"useEntitlementStore"],[70,34,54,28],[70,35,54,28,"useEntitlementStore"],[70,54,54,28],[70,55,54,29,"getState"],[70,63,54,37],[70,64,54,38],[70,65,54,39],[70,66,54,40,"hasHeroPremiumCinematicOwned"],[70,94,54,68],[70,95,54,69,"heroId"],[70,101,54,75],[70,102,54,76],[71,2,55,0],[73,2,57,0],[74,0,58,0],[75,0,59,0],[76,2,60,7],[76,11,60,16,"useHasHeroPremiumCinematicOwned"],[76,42,60,47,"useHasHeroPremiumCinematicOwned"],[76,43,60,48,"heroId"],[76,49,60,62],[76,51,60,73],[77,4,60,73,"_s2"],[77,7,60,73],[78,4,61,2],[78,10,61,8,"entitlements"],[78,22,61,20],[78,25,61,23],[78,29,61,23,"useEntitlementStore"],[78,52,61,42],[78,53,61,42,"useEntitlementStore"],[78,72,61,42],[78,74,61,43,"s"],[78,75,61,44],[78,79,61,48,"s"],[78,80,61,49],[78,81,61,50,"entitlements"],[78,93,61,62],[78,94,61,63],[79,4,62,2],[79,8,62,6],[79,9,62,7,"heroId"],[79,15,62,13],[79,17,62,15],[79,24,62,22],[79,29,62,27],[80,4,63,2],[80,10,63,8,"key"],[80,13,63,11],[80,16,63,14],[80,43,63,41,"heroId"],[80,49,63,47],[80,51,63,49],[81,4,64,2],[81,11,64,9,"Boolean"],[81,18,64,16],[81,19,64,17,"entitlements"],[81,31,64,29],[81,32,64,30,"key"],[81,35,64,33],[81,36,64,34],[81,37,64,35],[82,2,65,0],[83,2,65,1,"_s2"],[83,5,65,1],[83,6,60,16,"useHasHeroPremiumCinematicOwned"],[83,37,60,47],[84,4,60,47],[84,12,61,23,"useEntitlementStore"],[84,35,61,42],[84,36,61,42,"useEntitlementStore"],[84,55,61,42],[85,2,61,42],[86,0,61,42],[86,3]],"functionMap":{"names":["<global>","canAccessCinematics","useCanAccessCinematics","useEntitlementStore$argument_0","hasHeroPremiumCinematicOwned","useHasHeroPremiumCinematicOwned"],"mappings":"AAA;OC0B;CDM;OEK;2CCC,mBD;CFK;OIQ;CJG;OKK;2CFC,mBE;CLI"},"hasCjsExports":false},"type":"js/module"}]}