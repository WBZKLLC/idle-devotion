{"dependencies":[{"name":"./features","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":370},"end":{"line":18,"column":46,"index":416}}],"key":"bmouY5/rpPD3Ua8O/sPZIfrV9Jw=","exportNames":["*"],"imports":1}},{"name":"./entitlements/gating","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":483},"end":{"line":20,"column":98,"index":581}}],"key":"XAmmiiz1xDYBiUCtpO5ZlQoS9FQ=","exportNames":["*"],"imports":1}},{"name":"./entitlements/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":582},"end":{"line":21,"column":82,"index":664}}],"key":"WFFU4HFKj7ZPoJL6d99FCOSpwv4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.canAccessCinematics = canAccessCinematics;\n  exports.useCanAccessCinematics = useCanAccessCinematics;\n  exports.hasHeroPremiumCinematicOwned = hasHeroPremiumCinematicOwned;\n  exports.useHasHeroPremiumCinematicOwned = useHasHeroPremiumCinematicOwned;\n  var _features = require(_dependencyMap[0], \"./features\");\n  var _entitlementsGating = require(_dependencyMap[1], \"./entitlements/gating\");\n  var _entitlementsTypes = require(_dependencyMap[2], \"./entitlements/types\");\n  /**\n   * Cinematics Access Helper\n   * \n   * Determines if user can access cinematics based on:\n   * 1. Paid entitlement (PREMIUM_CINEMATICS_PACK)\n   * 2. Feature flag (HERO_CINEMATICS)\n   * \n   * Also provides per-hero ownership check for stat bonuses.\n   * \n   * Usage:\n   * if (!canAccessCinematics(user?.id)) {\n   *   navigate('paid-features');\n   *   return;\n   * }\n   * openCinematic();\n   */\n\n  /**\n   * Check if user can access cinematics system (synchronous check)\n   * Requires BOTH: paid pack entitlement AND feature flag enabled\n   * @param stableId - User ID for feature flag rollout\n   * @returns true if user has paid AND feature flag is enabled\n   */\n  function canAccessCinematics(stableId) {\n    // Use canonical gating helper\n    const hasPack = (0, _entitlementsGating.hasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Hook version for reactive updates\n   */\n  function useCanAccessCinematics(stableId) {\n    // Use canonical gating hook\n    const hasPack = (0, _entitlementsGating.useHasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Check if user owns the premium cinematic for a specific hero.\n   * This is what grants the stat perk (+10% HP, +5% ATK).\n   * @param heroId - The hero's stable ID (e.g., 'michael_the_archangel')\n   * @returns true if user owns this hero's premium cinematic\n   */\n  function hasHeroPremiumCinematicOwned(heroId) {\n    if (!heroId) return false;\n    // Use canonical gating helper\n    return (0, _entitlementsGating.canAccessHeroCinematic)(heroId);\n  }\n\n  /**\n   * Hook version for reactive per-hero ownership check\n   */\n  function useHasHeroPremiumCinematicOwned(heroId) {\n    // Use canonical gating hook with dynamic key\n    const key = (0, _entitlementsTypes.premiumCinematicOwnedKey)(heroId);\n    const hasHero = (0, _entitlementsGating.useHasEntitlement)(key);\n    const hasPack = (0, _entitlementsGating.useHasEntitlement)(_entitlementsTypes.ENTITLEMENT_KEYS.PREMIUM_CINEMATICS_PACK);\n    // User has access if they own the pack OR own the individual hero cinematic\n    return hasHero || hasPack;\n  }\n});","lineCount":81,"map":[[7,2,29,0,"exports"],[7,9,29,0],[7,10,29,0,"canAccessCinematics"],[7,29,29,0],[7,32,29,0,"canAccessCinematics"],[7,51,29,0],[8,2,40,0,"exports"],[8,9,40,0],[8,10,40,0,"useCanAccessCinematics"],[8,32,40,0],[8,35,40,0,"useCanAccessCinematics"],[8,57,40,0],[9,2,54,0,"exports"],[9,9,54,0],[9,10,54,0,"hasHeroPremiumCinematicOwned"],[9,38,54,0],[9,41,54,0,"hasHeroPremiumCinematicOwned"],[9,69,54,0],[10,2,63,0,"exports"],[10,9,63,0],[10,10,63,0,"useHasHeroPremiumCinematicOwned"],[10,41,63,0],[10,44,63,0,"useHasHeroPremiumCinematicOwned"],[10,75,63,0],[11,2,18,0],[11,6,18,0,"_features"],[11,15,18,0],[11,18,18,0,"require"],[11,25,18,0],[11,26,18,0,"_dependencyMap"],[11,40,18,0],[12,2,20,0],[12,6,20,0,"_entitlementsGating"],[12,25,20,0],[12,28,20,0,"require"],[12,35,20,0],[12,36,20,0,"_dependencyMap"],[12,50,20,0],[13,2,21,0],[13,6,21,0,"_entitlementsTypes"],[13,24,21,0],[13,27,21,0,"require"],[13,34,21,0],[13,35,21,0,"_dependencyMap"],[13,49,21,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[31,2,23,0],[32,0,24,0],[33,0,25,0],[34,0,26,0],[35,0,27,0],[36,0,28,0],[37,2,29,7],[37,11,29,16,"canAccessCinematics"],[37,30,29,35,"canAccessCinematics"],[37,31,29,36,"stableId"],[37,39,29,53],[37,41,29,64],[38,4,30,2],[39,4,31,2],[39,10,31,8,"hasPack"],[39,17,31,15],[39,20,31,18],[39,24,31,18,"hasEntitlement"],[39,43,31,32],[39,44,31,32,"hasEntitlement"],[39,58,31,32],[39,60,31,33,"ENTITLEMENT_KEYS"],[39,78,31,49],[39,79,31,49,"ENTITLEMENT_KEYS"],[39,95,31,49],[39,96,31,50,"PREMIUM_CINEMATICS_PACK"],[39,119,31,73],[39,120,31,74],[40,4,32,2],[40,8,32,6],[40,9,32,7,"hasPack"],[40,16,32,14],[40,18,32,16],[40,25,32,23],[40,30,32,28],[41,4,34,2],[41,11,34,9],[41,15,34,9,"isFeatureEnabled"],[41,24,34,25],[41,25,34,25,"isFeatureEnabled"],[41,41,34,25],[41,43,34,26],[41,60,34,43],[41,62,34,45],[42,6,34,47,"stableId"],[43,4,34,56],[43,5,34,57],[43,6,34,58],[44,2,35,0],[46,2,37,0],[47,0,38,0],[48,0,39,0],[49,2,40,7],[49,11,40,16,"useCanAccessCinematics"],[49,33,40,38,"useCanAccessCinematics"],[49,34,40,39,"stableId"],[49,42,40,56],[49,44,40,67],[50,4,41,2],[51,4,42,2],[51,10,42,8,"hasPack"],[51,17,42,15],[51,20,42,18],[51,24,42,18,"useHasEntitlement"],[51,43,42,35],[51,44,42,35,"useHasEntitlement"],[51,61,42,35],[51,63,42,36,"ENTITLEMENT_KEYS"],[51,81,42,52],[51,82,42,52,"ENTITLEMENT_KEYS"],[51,98,42,52],[51,99,42,53,"PREMIUM_CINEMATICS_PACK"],[51,122,42,76],[51,123,42,77],[52,4,43,2],[52,8,43,6],[52,9,43,7,"hasPack"],[52,16,43,14],[52,18,43,16],[52,25,43,23],[52,30,43,28],[53,4,45,2],[53,11,45,9],[53,15,45,9,"isFeatureEnabled"],[53,24,45,25],[53,25,45,25,"isFeatureEnabled"],[53,41,45,25],[53,43,45,26],[53,60,45,43],[53,62,45,45],[54,6,45,47,"stableId"],[55,4,45,56],[55,5,45,57],[55,6,45,58],[56,2,46,0],[58,2,48,0],[59,0,49,0],[60,0,50,0],[61,0,51,0],[62,0,52,0],[63,0,53,0],[64,2,54,7],[64,11,54,16,"hasHeroPremiumCinematicOwned"],[64,39,54,44,"hasHeroPremiumCinematicOwned"],[64,40,54,45,"heroId"],[64,46,54,59],[64,48,54,70],[65,4,55,2],[65,8,55,6],[65,9,55,7,"heroId"],[65,15,55,13],[65,17,55,15],[65,24,55,22],[65,29,55,27],[66,4,56,2],[67,4,57,2],[67,11,57,9],[67,15,57,9,"canAccessHeroCinematic"],[67,34,57,31],[67,35,57,31,"canAccessHeroCinematic"],[67,57,57,31],[67,59,57,32,"heroId"],[67,65,57,38],[67,66,57,39],[68,2,58,0],[70,2,60,0],[71,0,61,0],[72,0,62,0],[73,2,63,7],[73,11,63,16,"useHasHeroPremiumCinematicOwned"],[73,42,63,47,"useHasHeroPremiumCinematicOwned"],[73,43,63,48,"heroId"],[73,49,63,62],[73,51,63,73],[74,4,64,2],[75,4,65,2],[75,10,65,8,"key"],[75,13,65,11],[75,16,65,14],[75,20,65,14,"premiumCinematicOwnedKey"],[75,38,65,38],[75,39,65,38,"premiumCinematicOwnedKey"],[75,63,65,38],[75,65,65,39,"heroId"],[75,71,65,45],[75,72,65,46],[76,4,66,2],[76,10,66,8,"hasHero"],[76,17,66,15],[76,20,66,18],[76,24,66,18,"useHasEntitlement"],[76,43,66,35],[76,44,66,35,"useHasEntitlement"],[76,61,66,35],[76,63,66,36,"key"],[76,66,66,39],[76,67,66,40],[77,4,67,2],[77,10,67,8,"hasPack"],[77,17,67,15],[77,20,67,18],[77,24,67,18,"useHasEntitlement"],[77,43,67,35],[77,44,67,35,"useHasEntitlement"],[77,61,67,35],[77,63,67,36,"ENTITLEMENT_KEYS"],[77,81,67,52],[77,82,67,52,"ENTITLEMENT_KEYS"],[77,98,67,52],[77,99,67,53,"PREMIUM_CINEMATICS_PACK"],[77,122,67,76],[77,123,67,77],[78,4,68,2],[79,4,69,2],[79,11,69,9,"hasHero"],[79,18,69,16],[79,22,69,20,"hasPack"],[79,29,69,27],[80,2,70,0],[81,0,70,1],[81,3]],"functionMap":{"names":["<global>","canAccessCinematics","useCanAccessCinematics","hasHeroPremiumCinematicOwned","useHasHeroPremiumCinematicOwned"],"mappings":"AAA;OC4B;CDM;OEK;CFM;OGQ;CHI;OIK;CJO"},"hasCjsExports":false},"type":"js/module"}]}