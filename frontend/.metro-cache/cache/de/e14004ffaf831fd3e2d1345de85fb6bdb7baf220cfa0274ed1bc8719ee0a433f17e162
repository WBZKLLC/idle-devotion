{"dependencies":[{"name":"./features","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":367},"end":{"line":18,"column":46,"index":413}}],"key":"bmouY5/rpPD3Ua8O/sPZIfrV9Jw=","exportNames":["*"],"imports":1}},{"name":"../stores/entitlementStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":414},"end":{"line":19,"column":65,"index":479}}],"key":"zpvG3AWVhfkzof5ZAFPvPaVLiPY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.canAccessCinematics = canAccessCinematics;\n  exports.useCanAccessCinematics = useCanAccessCinematics;\n  exports.hasHeroCinematicOwned = hasHeroCinematicOwned;\n  exports.useHasHeroCinematicOwned = useHasHeroCinematicOwned;\n  var _features = require(_dependencyMap[0], \"./features\");\n  var _storesEntitlementStore = require(_dependencyMap[1], \"../stores/entitlementStore\");\n  /**\n   * Cinematics Access Helper\n   * \n   * Determines if user can access cinematics based on:\n   * 1. Paid entitlement (PAID_CINEMATICS_PACK)\n   * 2. Feature flag (HERO_CINEMATICS)\n   * \n   * Also provides per-hero ownership check for stat bonuses.\n   * \n   * Usage:\n   * if (!canAccessCinematics(user?.id)) {\n   *   navigate('paid-features');\n   *   return;\n   * }\n   * openCinematic();\n   */\n\n  /**\n   * Check if user can access cinematics system (synchronous check)\n   * Requires BOTH: paid pack entitlement AND feature flag enabled\n   * @param stableId - User ID for feature flag rollout\n   * @returns true if user has paid AND feature flag is enabled\n   */\n  function canAccessCinematics(stableId) {\n    const store = _storesEntitlementStore.useEntitlementStore.getState();\n    const hasPack = store.hasEntitlement('PAID_CINEMATICS_PACK');\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Hook version for reactive updates\n   */\n  function useCanAccessCinematics(stableId) {\n    const entitlements = (0, _storesEntitlementStore.useEntitlementStore)(s => s.entitlements);\n    const hasPack = Boolean(entitlements['PAID_CINEMATICS_PACK']);\n    if (!hasPack) return false;\n    return (0, _features.isFeatureEnabled)('HERO_CINEMATICS', {\n      stableId\n    });\n  }\n\n  /**\n   * Check if user owns the cinematic for a specific hero.\n   * This is what grants the stat perk (+10% HP, +5% ATK).\n   * @param heroId - The hero's stable ID (e.g., 'michael_the_archangel')\n   * @returns true if user owns this hero's cinematic\n   */\n  function hasHeroCinematicOwned(heroId) {\n    if (!heroId) return false;\n    return _storesEntitlementStore.useEntitlementStore.getState().hasHeroCinematicOwned(heroId);\n  }\n\n  /**\n   * Hook version for reactive per-hero ownership check\n   */\n  function useHasHeroCinematicOwned(heroId) {\n    const entitlements = (0, _storesEntitlementStore.useEntitlementStore)(s => s.entitlements);\n    if (!heroId) return false;\n    const key = `CINEMATIC_OWNED:${heroId}`;\n    return Boolean(entitlements[key]);\n  }\n});","lineCount":77,"map":[[7,2,27,0,"exports"],[7,9,27,0],[7,10,27,0,"canAccessCinematics"],[7,29,27,0],[7,32,27,0,"canAccessCinematics"],[7,51,27,0],[8,2,38,0,"exports"],[8,9,38,0],[8,10,38,0,"useCanAccessCinematics"],[8,32,38,0],[8,35,38,0,"useCanAccessCinematics"],[8,57,38,0],[9,2,52,0,"exports"],[9,9,52,0],[9,10,52,0,"hasHeroCinematicOwned"],[9,31,52,0],[9,34,52,0,"hasHeroCinematicOwned"],[9,55,52,0],[10,2,60,0,"exports"],[10,9,60,0],[10,10,60,0,"useHasHeroCinematicOwned"],[10,34,60,0],[10,37,60,0,"useHasHeroCinematicOwned"],[10,61,60,0],[11,2,18,0],[11,6,18,0,"_features"],[11,15,18,0],[11,18,18,0,"require"],[11,25,18,0],[11,26,18,0,"_dependencyMap"],[11,40,18,0],[12,2,19,0],[12,6,19,0,"_storesEntitlementStore"],[12,29,19,0],[12,32,19,0,"require"],[12,39,19,0],[12,40,19,0,"_dependencyMap"],[12,54,19,0],[13,2,1,0],[14,0,2,0],[15,0,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[30,2,21,0],[31,0,22,0],[32,0,23,0],[33,0,24,0],[34,0,25,0],[35,0,26,0],[36,2,27,7],[36,11,27,16,"canAccessCinematics"],[36,30,27,35,"canAccessCinematics"],[36,31,27,36,"stableId"],[36,39,27,53],[36,41,27,64],[37,4,28,2],[37,10,28,8,"store"],[37,15,28,13],[37,18,28,16,"useEntitlementStore"],[37,41,28,35],[37,42,28,35,"useEntitlementStore"],[37,61,28,35],[37,62,28,36,"getState"],[37,70,28,44],[37,71,28,45],[37,72,28,46],[38,4,29,2],[38,10,29,8,"hasPack"],[38,17,29,15],[38,20,29,18,"store"],[38,25,29,23],[38,26,29,24,"hasEntitlement"],[38,40,29,38],[38,41,29,39],[38,63,29,61],[38,64,29,62],[39,4,30,2],[39,8,30,6],[39,9,30,7,"hasPack"],[39,16,30,14],[39,18,30,16],[39,25,30,23],[39,30,30,28],[40,4,32,2],[40,11,32,9],[40,15,32,9,"isFeatureEnabled"],[40,24,32,25],[40,25,32,25,"isFeatureEnabled"],[40,41,32,25],[40,43,32,26],[40,60,32,43],[40,62,32,45],[41,6,32,47,"stableId"],[42,4,32,56],[42,5,32,57],[42,6,32,58],[43,2,33,0],[45,2,35,0],[46,0,36,0],[47,0,37,0],[48,2,38,7],[48,11,38,16,"useCanAccessCinematics"],[48,33,38,38,"useCanAccessCinematics"],[48,34,38,39,"stableId"],[48,42,38,56],[48,44,38,67],[49,4,39,2],[49,10,39,8,"entitlements"],[49,22,39,20],[49,25,39,23],[49,29,39,23,"useEntitlementStore"],[49,52,39,42],[49,53,39,42,"useEntitlementStore"],[49,72,39,42],[49,74,39,43,"s"],[49,75,39,44],[49,79,39,48,"s"],[49,80,39,49],[49,81,39,50,"entitlements"],[49,93,39,62],[49,94,39,63],[50,4,40,2],[50,10,40,8,"hasPack"],[50,17,40,15],[50,20,40,18,"Boolean"],[50,27,40,25],[50,28,40,26,"entitlements"],[50,40,40,38],[50,41,40,39],[50,63,40,61],[50,64,40,62],[50,65,40,63],[51,4,41,2],[51,8,41,6],[51,9,41,7,"hasPack"],[51,16,41,14],[51,18,41,16],[51,25,41,23],[51,30,41,28],[52,4,43,2],[52,11,43,9],[52,15,43,9,"isFeatureEnabled"],[52,24,43,25],[52,25,43,25,"isFeatureEnabled"],[52,41,43,25],[52,43,43,26],[52,60,43,43],[52,62,43,45],[53,6,43,47,"stableId"],[54,4,43,56],[54,5,43,57],[54,6,43,58],[55,2,44,0],[57,2,46,0],[58,0,47,0],[59,0,48,0],[60,0,49,0],[61,0,50,0],[62,0,51,0],[63,2,52,7],[63,11,52,16,"hasHeroCinematicOwned"],[63,32,52,37,"hasHeroCinematicOwned"],[63,33,52,38,"heroId"],[63,39,52,52],[63,41,52,63],[64,4,53,2],[64,8,53,6],[64,9,53,7,"heroId"],[64,15,53,13],[64,17,53,15],[64,24,53,22],[64,29,53,27],[65,4,54,2],[65,11,54,9,"useEntitlementStore"],[65,34,54,28],[65,35,54,28,"useEntitlementStore"],[65,54,54,28],[65,55,54,29,"getState"],[65,63,54,37],[65,64,54,38],[65,65,54,39],[65,66,54,40,"hasHeroCinematicOwned"],[65,87,54,61],[65,88,54,62,"heroId"],[65,94,54,68],[65,95,54,69],[66,2,55,0],[68,2,57,0],[69,0,58,0],[70,0,59,0],[71,2,60,7],[71,11,60,16,"useHasHeroCinematicOwned"],[71,35,60,40,"useHasHeroCinematicOwned"],[71,36,60,41,"heroId"],[71,42,60,55],[71,44,60,66],[72,4,61,2],[72,10,61,8,"entitlements"],[72,22,61,20],[72,25,61,23],[72,29,61,23,"useEntitlementStore"],[72,52,61,42],[72,53,61,42,"useEntitlementStore"],[72,72,61,42],[72,74,61,43,"s"],[72,75,61,44],[72,79,61,48,"s"],[72,80,61,49],[72,81,61,50,"entitlements"],[72,93,61,62],[72,94,61,63],[73,4,62,2],[73,8,62,6],[73,9,62,7,"heroId"],[73,15,62,13],[73,17,62,15],[73,24,62,22],[73,29,62,27],[74,4,63,2],[74,10,63,8,"key"],[74,13,63,11],[74,16,63,14],[74,35,63,33,"heroId"],[74,41,63,39],[74,43,63,41],[75,4,64,2],[75,11,64,9,"Boolean"],[75,18,64,16],[75,19,64,17,"entitlements"],[75,31,64,29],[75,32,64,30,"key"],[75,35,64,33],[75,36,64,34],[75,37,64,35],[76,2,65,0],[77,0,65,1],[77,3]],"functionMap":{"names":["<global>","canAccessCinematics","useCanAccessCinematics","useEntitlementStore$argument_0","hasHeroCinematicOwned","useHasHeroCinematicOwned"],"mappings":"AAA;OC0B;CDM;OEK;2CCC,mBD;CFK;OIQ;CJG;OKK;2CFC,mBE;CLI"},"hasCjsExports":false},"type":"js/module"}]}