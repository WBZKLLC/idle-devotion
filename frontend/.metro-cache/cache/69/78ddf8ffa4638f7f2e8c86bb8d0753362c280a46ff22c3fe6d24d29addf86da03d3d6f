{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getMailSummary = getMailSummary;\n  exports.getMailRewards = getMailRewards;\n  exports.getMailMessages = getMailMessages;\n  exports.getMailGifts = getMailGifts;\n  exports.claimMailReward = claimMailReward;\n  exports.claimMailGift = claimMailGift;\n  // /app/frontend/lib/api/mail.ts\n  // Phase 3.23.2: Mail API Layer\n  //\n  // Canonical API calls for mail system.\n  // Graceful error handling â€” returns defaults on failure.\n\n  const API_BASE = process.env.EXPO_PUBLIC_API_URL || '';\n\n  /**\n   * Get mail summary (badge counts)\n   */\n  async function getMailSummary(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/summary/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch mail summary');\n      return await res.json();\n    } catch {\n      // Default fallback - show daily rewards available\n      return {\n        rewardsAvailable: 1,\n        unreadMessages: 0,\n        giftsAvailable: 0\n      };\n    }\n  }\n\n  /**\n   * Get mail rewards list\n   */\n  async function getMailRewards(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/rewards/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch rewards');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail messages list\n   */\n  async function getMailMessages(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/messages/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch messages');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get mail gifts list\n   */\n  async function getMailGifts(username) {\n    try {\n      const res = await fetch(`${API_BASE}/api/mail/gifts/${username}`);\n      if (!res.ok) throw new Error('Failed to fetch gifts');\n      return await res.json();\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Claim a mail reward\n   */\n  async function claimMailReward(username, rewardId) {\n    const res = await fetch(`${API_BASE}/api/mail/rewards/${username}/${rewardId}/claim`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to claim reward');\n  }\n\n  /**\n   * Claim a mail gift\n   */\n  async function claimMailGift(username, giftId) {\n    const res = await fetch(`${API_BASE}/api/mail/gifts/${username}/${giftId}/claim`, {\n      method: 'POST'\n    });\n    if (!res.ok) throw new Error('Failed to claim gift');\n  }\n});","lineCount":97,"map":[[7,2,12,0,"exports"],[7,9,12,0],[7,10,12,0,"getMailSummary"],[7,24,12,0],[7,27,12,0,"getMailSummary"],[7,41,12,0],[8,2,30,0,"exports"],[8,9,30,0],[8,10,30,0,"getMailRewards"],[8,24,30,0],[8,27,30,0,"getMailRewards"],[8,41,30,0],[9,2,50,0,"exports"],[9,9,50,0],[9,10,50,0,"getMailMessages"],[9,25,50,0],[9,28,50,0,"getMailMessages"],[9,43,50,0],[10,2,69,0,"exports"],[10,9,69,0],[10,10,69,0,"getMailGifts"],[10,22,69,0],[10,25,69,0,"getMailGifts"],[10,37,69,0],[11,2,88,0,"exports"],[11,9,88,0],[11,10,88,0,"claimMailReward"],[11,25,88,0],[11,28,88,0,"claimMailReward"],[11,43,88,0],[12,2,98,0,"exports"],[12,9,98,0],[12,10,98,0,"claimMailGift"],[12,23,98,0],[12,26,98,0,"claimMailGift"],[12,39,98,0],[13,2,1,0],[14,2,2,0],[15,2,3,0],[16,2,4,0],[17,2,5,0],[19,2,7,0],[19,8,7,6,"API_BASE"],[19,16,7,14],[19,19,7,17,"process"],[19,26,7,24],[19,27,7,25,"env"],[19,30,7,28],[19,31,7,29,"EXPO_PUBLIC_API_URL"],[19,50,7,48],[19,54,7,52],[19,56,7,54],[21,2,9,0],[22,0,10,0],[23,0,11,0],[24,2,12,7],[24,17,12,22,"getMailSummary"],[24,31,12,36,"getMailSummary"],[24,32,12,37,"username"],[24,40,12,53],[24,42,16,3],[25,4,17,2],[25,8,17,6],[26,6,18,4],[26,12,18,10,"res"],[26,15,18,13],[26,18,18,16],[26,24,18,22,"fetch"],[26,29,18,27],[26,30,18,28],[26,33,18,31,"API_BASE"],[26,41,18,39],[26,62,18,60,"username"],[26,70,18,68],[26,72,18,70],[26,73,18,71],[27,6,19,4],[27,10,19,8],[27,11,19,9,"res"],[27,14,19,12],[27,15,19,13,"ok"],[27,17,19,15],[27,19,19,17],[27,25,19,23],[27,29,19,27,"Error"],[27,34,19,32],[27,35,19,33],[27,65,19,63],[27,66,19,64],[28,6,20,4],[28,13,20,11],[28,19,20,17,"res"],[28,22,20,20],[28,23,20,21,"json"],[28,27,20,25],[28,28,20,26],[28,29,20,27],[29,4,21,2],[29,5,21,3],[29,6,21,4],[29,12,21,10],[30,6,22,4],[31,6,23,4],[31,13,23,11],[32,8,23,13,"rewardsAvailable"],[32,24,23,29],[32,26,23,31],[32,27,23,32],[33,8,23,34,"unreadMessages"],[33,22,23,48],[33,24,23,50],[33,25,23,51],[34,8,23,53,"giftsAvailable"],[34,22,23,67],[34,24,23,69],[35,6,23,71],[35,7,23,72],[36,4,24,2],[37,2,25,0],[39,2,27,0],[40,0,28,0],[41,0,29,0],[42,2,30,7],[42,17,30,22,"getMailRewards"],[42,31,30,36,"getMailRewards"],[42,32,30,37,"username"],[42,40,30,53],[42,42,37,4],[43,4,38,2],[43,8,38,6],[44,6,39,4],[44,12,39,10,"res"],[44,15,39,13],[44,18,39,16],[44,24,39,22,"fetch"],[44,29,39,27],[44,30,39,28],[44,33,39,31,"API_BASE"],[44,41,39,39],[44,62,39,60,"username"],[44,70,39,68],[44,72,39,70],[44,73,39,71],[45,6,40,4],[45,10,40,8],[45,11,40,9,"res"],[45,14,40,12],[45,15,40,13,"ok"],[45,17,40,15],[45,19,40,17],[45,25,40,23],[45,29,40,27,"Error"],[45,34,40,32],[45,35,40,33],[45,60,40,58],[45,61,40,59],[46,6,41,4],[46,13,41,11],[46,19,41,17,"res"],[46,22,41,20],[46,23,41,21,"json"],[46,27,41,25],[46,28,41,26],[46,29,41,27],[47,4,42,2],[47,5,42,3],[47,6,42,4],[47,12,42,10],[48,6,43,4],[48,13,43,11],[48,15,43,13],[49,4,44,2],[50,2,45,0],[52,2,47,0],[53,0,48,0],[54,0,49,0],[55,2,50,7],[55,17,50,22,"getMailMessages"],[55,32,50,37,"getMailMessages"],[55,33,50,38,"username"],[55,41,50,54],[55,43,56,4],[56,4,57,2],[56,8,57,6],[57,6,58,4],[57,12,58,10,"res"],[57,15,58,13],[57,18,58,16],[57,24,58,22,"fetch"],[57,29,58,27],[57,30,58,28],[57,33,58,31,"API_BASE"],[57,41,58,39],[57,63,58,61,"username"],[57,71,58,69],[57,73,58,71],[57,74,58,72],[58,6,59,4],[58,10,59,8],[58,11,59,9,"res"],[58,14,59,12],[58,15,59,13,"ok"],[58,17,59,15],[58,19,59,17],[58,25,59,23],[58,29,59,27,"Error"],[58,34,59,32],[58,35,59,33],[58,61,59,59],[58,62,59,60],[59,6,60,4],[59,13,60,11],[59,19,60,17,"res"],[59,22,60,20],[59,23,60,21,"json"],[59,27,60,25],[59,28,60,26],[59,29,60,27],[60,4,61,2],[60,5,61,3],[60,6,61,4],[60,12,61,10],[61,6,62,4],[61,13,62,11],[61,15,62,13],[62,4,63,2],[63,2,64,0],[65,2,66,0],[66,0,67,0],[67,0,68,0],[68,2,69,7],[68,17,69,22,"getMailGifts"],[68,29,69,34,"getMailGifts"],[68,30,69,35,"username"],[68,38,69,51],[68,40,75,4],[69,4,76,2],[69,8,76,6],[70,6,77,4],[70,12,77,10,"res"],[70,15,77,13],[70,18,77,16],[70,24,77,22,"fetch"],[70,29,77,27],[70,30,77,28],[70,33,77,31,"API_BASE"],[70,41,77,39],[70,60,77,58,"username"],[70,68,77,66],[70,70,77,68],[70,71,77,69],[71,6,78,4],[71,10,78,8],[71,11,78,9,"res"],[71,14,78,12],[71,15,78,13,"ok"],[71,17,78,15],[71,19,78,17],[71,25,78,23],[71,29,78,27,"Error"],[71,34,78,32],[71,35,78,33],[71,58,78,56],[71,59,78,57],[72,6,79,4],[72,13,79,11],[72,19,79,17,"res"],[72,22,79,20],[72,23,79,21,"json"],[72,27,79,25],[72,28,79,26],[72,29,79,27],[73,4,80,2],[73,5,80,3],[73,6,80,4],[73,12,80,10],[74,6,81,4],[74,13,81,11],[74,15,81,13],[75,4,82,2],[76,2,83,0],[78,2,85,0],[79,0,86,0],[80,0,87,0],[81,2,88,7],[81,17,88,22,"claimMailReward"],[81,32,88,37,"claimMailReward"],[81,33,88,38,"username"],[81,41,88,54],[81,43,88,56,"rewardId"],[81,51,88,72],[81,53,88,89],[82,4,89,2],[82,10,89,8,"res"],[82,13,89,11],[82,16,89,14],[82,22,89,20,"fetch"],[82,27,89,25],[82,28,89,26],[82,31,89,29,"API_BASE"],[82,39,89,37],[82,60,89,58,"username"],[82,68,89,66],[82,72,89,70,"rewardId"],[82,80,89,78],[82,88,89,86],[82,90,89,88],[83,6,90,4,"method"],[83,12,90,10],[83,14,90,12],[84,4,91,2],[84,5,91,3],[84,6,91,4],[85,4,92,2],[85,8,92,6],[85,9,92,7,"res"],[85,12,92,10],[85,13,92,11,"ok"],[85,15,92,13],[85,17,92,15],[85,23,92,21],[85,27,92,25,"Error"],[85,32,92,30],[85,33,92,31],[85,57,92,55],[85,58,92,56],[86,2,93,0],[88,2,95,0],[89,0,96,0],[90,0,97,0],[91,2,98,7],[91,17,98,22,"claimMailGift"],[91,30,98,35,"claimMailGift"],[91,31,98,36,"username"],[91,39,98,52],[91,41,98,54,"giftId"],[91,47,98,68],[91,49,98,85],[92,4,99,2],[92,10,99,8,"res"],[92,13,99,11],[92,16,99,14],[92,22,99,20,"fetch"],[92,27,99,25],[92,28,99,26],[92,31,99,29,"API_BASE"],[92,39,99,37],[92,58,99,56,"username"],[92,66,99,64],[92,70,99,68,"giftId"],[92,76,99,74],[92,84,99,82],[92,86,99,84],[93,6,100,4,"method"],[93,12,100,10],[93,14,100,12],[94,4,101,2],[94,5,101,3],[94,6,101,4],[95,4,102,2],[95,8,102,6],[95,9,102,7,"res"],[95,12,102,10],[95,13,102,11,"ok"],[95,15,102,13],[95,17,102,15],[95,23,102,21],[95,27,102,25,"Error"],[95,32,102,30],[95,33,102,31],[95,55,102,53],[95,56,102,54],[96,2,103,0],[97,0,103,1],[97,3]],"functionMap":{"names":["<global>","getMailSummary","getMailRewards","getMailMessages","getMailGifts","claimMailReward","claimMailGift"],"mappings":"AAA;OCW;CDa;OEK;CFe;OGK;CHc;OIK;CJc;OKK;CLK;OMK;CNK"},"hasCjsExports":false},"type":"js/module"}]}